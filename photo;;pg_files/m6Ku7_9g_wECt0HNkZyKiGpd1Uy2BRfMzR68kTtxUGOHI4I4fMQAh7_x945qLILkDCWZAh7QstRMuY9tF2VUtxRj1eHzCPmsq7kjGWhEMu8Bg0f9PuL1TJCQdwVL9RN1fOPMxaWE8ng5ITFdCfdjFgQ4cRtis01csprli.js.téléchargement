;/*FB_PKG_DELIM*/

__d("LSComputeOptimisticThreadCapabilities",["LSArrayGetObjectAt","LSComputeParticipantCapabilities","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.createArray(),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return c.forEach(c.db.table(14).fetch([[[a[0],{lt:d[1]}],[a[0],{gt:d[1]}]]]),function(e){var f=e.item;return c.sequence([function(e){return c.storedProcedure(b("LSComputeParticipantCapabilities"),f.contactId,a[0]).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[34]=(d[0].push(d[33]),d[0])}])})},function(a){return d[2]=c.i64.cast([0,1073741823]),d[3]=c.i64.of_int32(d[0].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(a){return d[33]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[0],d[33]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[2]=c.i64.and_(d[2],d[34])}])}):c.resolve()},function(b){return d[4]=c.i64.of_int32(d[0].length),c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?c.sequence([function(b){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,e){var a=b.done;b=b.value;return a?d[33]=!1:(e=b.item,d[33]=c.i64.eq(e.contactTypeExact,c.i64.cast([0,16]))?!0:!1)})},function(a){return d[5]=d[33]}]):(e=b.item,d[5]=c.i64.eq(e.threadType,c.i64.cast([0,201]))?!0:!1)})},function(b){return d[7]=c.i64.cast([0,1083495711]),d[8]=c.i64.cast([0,1024]),d[9]=c.i64.cast([0,0]),d[10]=c.i64.cast([0,0]),d[11]=c.i64.cast([0,0]),c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[12]=!1:(b=a.item,d[12]=c.i64.eq(b.contactReachabilityStatusType,c.i64.cast([0,12]))?!0:!1)})},function(b){return d[14]=c.i64.cast([0,1083495711]),d[15]=c.i64.cast([0,1024]),d[16]=c.i64.cast([0,0]),d[17]=c.i64.cast([0,134217728]),d[18]=c.i64.cast([0,0]),d[19]=c.i64.cast([0,8650752]),d[20]=c.i64.cast([0,1024]),d[21]=c.i64.cast([0,0]),d[22]=c.i64.cast([0,0]),d[23]=c.i64.cast([0,0]),d[32]=d[5]?d[19]:d[14],c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[d[32],c.i64.cast([0,1])],d[24]=e[0],d[25]=e[1],e):(b=a.item,e=[d[32],b.threadType],d[24]=e[0],d[25]=e[1],e)})},function(a){return d[27]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))),d[28]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,23]))),d[29]=c.createArray(),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,6]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,6]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,0]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,7]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,1]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,72]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,72]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,8]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,8]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,2]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,9]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,9]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,10]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,4]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,5]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,5]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,8]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,11]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,11]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,14]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,12]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,15]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,13]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,13]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,18]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,14]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,14]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,20]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,15]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,15]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,23]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(c.i64.cast([0,3]),void 0)||c.i64.neq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3]))),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,10]))):c.i64.cast([0,0])),d[29]),d[33]=(d[29].push(c.i64.eq(void 0,void 0)||c.i64.neq(c.i64.and_(c.i64.cast([0,0]),d[2]),c.i64.cast([0,0]))?c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,30]))):c.i64.cast([0,0])),d[29]),d[30]=c.i64.cast([0,0]),d[31]=c.i64.of_int32(d[29].length),c.i64.gt(d[31],c.i64.cast([0,0]))?c.loopAsync(d[31],function(a){return d[33]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],d[33]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[30]=c.i64.add(d[30],d[34])}])}):c.resolve()},function(a){return e[0]=c.i64.and_(d[30],c.i64.and_(c.i64.and_((c.i64.eq(d[25],c.i64.cast([0,1]))?c.i64.eq(d[4],c.i64.cast([0,0])):!0)?c.i64.eq(c.i64.and_(d[24],d[27]),c.i64.cast([0,0]))?d[24]:c.i64.sub(d[24],d[27]):d[24],c.i64.eq(d[25],c.i64.cast([0,2]))?c.i64.eq(c.i64.and_(d[24],d[28]),c.i64.cast([0,0]))?d[24]:c.i64.sub(d[24],d[28]):d[24]),(c.i64.eq(d[25],c.i64.cast([0,1]))?c.i64.neq(d[4],c.i64.cast([0,0])):!1)?d[24]:c.i64.xor(d[24],c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,12]))))))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxComputeOptimisticThreadCapabilitiesStoredProcedure";a.__tables__=["participants","threads","contacts"];e.exports=a}),null);
__d("LSLocalApplyOptimisticGroupThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetViewerFBID","LSInsertQuickReplyCTA","LSIssueNewTask","LSLocalApplyOptimisticMessage"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[3]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[20]=new c.Map(),d[26]="product_type",d[21]=d[19].get(d[26]),d[19],d[21]!==void 0?d[20].set(d[26],d[21]):0,d[27]="product_extras",d[22]=d[19].get(d[27]),d[19],d[22]?d[23]=!1:d[23]=!0,d[23]?c.resolve():c.sequence([function(a){return d[22]?d[28]=!1:d[28]=!0,d[28]?c.resolve(d[29]=void 0):c.sequence([function(a){return d[30]=d[22].get("__typename"),d[22],d[30]==="XMSGStoryReplyExtras"?c.resolve((d[32]=new c.Map(),d[35]="logging",d[33]=d[22].get(d[35]),d[22],d[33]?d[34]=!1:d[34]=!0,d[34]?0:(d[33]?d[36]=!1:d[36]=!0,d[36]?d[37]=void 0:(d[38]=new c.Map(),d[46]="story_author_fbid",d[39]=d[33].get(d[46]),d[33],d[39]!==void 0?d[38].set(d[46],d[39]):0,d[47]="camera_post_type",d[40]=d[33].get(d[47]),d[33],d[40]!==void 0?d[38].set(d[47],d[40]):0,d[48]="story_type",d[41]=d[33].get(d[48]),d[33],d[41]!==void 0?d[38].set(d[48],d[41]):0,d[49]="post_source",d[42]=d[33].get(d[49]),d[33],d[42]!==void 0?d[38].set(d[49],d[42]):0,d[50]="fb_post_type",d[43]=d[33].get(d[50]),d[33],d[43]!==void 0?d[38].set(d[50],d[43]):0,d[51]="conversation_starter_type",d[44]=d[33].get(d[51]),d[33],d[44]!==void 0?d[38].set(d[51],d[44]):0,d[52]="story_reply_type",d[45]=d[33].get(d[52]),d[33],d[45]!==void 0?d[38].set(d[52],d[45]):0,d[37]=d[38]),d[32].set(d[35],d[37])),d[31]=d[32])):c.sequence([function(a){return d[30]==="XMSGMarketplaceExtras"?c.sequence([function(a){return d[33]=new c.Map(),d[52]="listing_id",d[34]=d[22].get(d[52]),d[22],d[34]!==void 0?d[33].set(d[52],d[34]):0,d[53]="initial_clicked_component",d[35]=d[22].get(d[53]),d[22],d[35]!==void 0?d[33].set(d[53],d[35]):0,d[54]="initial_tracking",d[36]=d[22].get(d[54]),d[22],d[36]!==void 0?d[33].set(d[54],d[36]):0,d[55]="referral_surface",d[37]=d[22].get(d[55]),d[22],d[37]!==void 0?d[33].set(d[55],d[37]):0,d[56]="referral_story_type",d[38]=d[22].get(d[56]),d[22],d[38]!==void 0?d[33].set(d[56],d[38]):0,d[57]="referral_ui_component",d[39]=d[22].get(d[57]),d[22],d[39]!==void 0?d[33].set(d[57],d[39]):0,d[58]="surface",d[40]=d[22].get(d[58]),d[22],d[40]!==void 0?d[33].set(d[58],d[40]):0,d[59]="tracking",d[41]=d[22].get(d[59]),d[22],d[41]!==void 0?d[33].set(d[59],d[41]):0,d[60]="ui_component",d[42]=d[22].get(d[60]),d[22],d[42]!==void 0?d[33].set(d[60],d[42]):0,d[61]="ad_id",d[43]=d[22].get(d[61]),d[22],d[43]!==void 0?d[33].set(d[61],d[43]):0,d[62]="server_session_id",d[44]=d[22].get(d[62]),d[22],d[44]!==void 0?d[33].set(d[62],d[44]):0,d[63]="cf_page_id",d[45]=d[22].get(d[63]),d[22],d[45]!==void 0?d[33].set(d[63],d[45]):0,d[64]="live_shopping_video_id",d[46]=d[22].get(d[64]),d[22],d[46]!==void 0?d[33].set(d[64],d[46]):0,d[65]="logging_id",d[47]=d[22].get(d[65]),d[22],c.i64.neq(d[47],void 0)?d[33].set(d[65],d[47]):0,d[66]="photo_ids",d[48]=d[22].get(d[66]),d[22],d[48]?d[49]=!1:d[49]=!0,d[49]?c.resolve():c.sequence([function(a){return d[69]=c.createArray(),d[70]=c.i64.of_int32(d[48].length),c.i64.gt(d[70],c.i64.cast([0,0]))?c.loopAsync(d[70],function(a){return d[71]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[71]).then(function(a){return a=a,d[72]=a[0],d[73]=a[1],a})},function(a){return d[74]=(d[69].push(d[72]),d[69])}])}):c.resolve()},function(a){return d[33].set(d[66],d[69])}])},function(a){return d[67]="is_customized_message",d[50]=d[22].get(d[67]),d[22],d[50]!==void 0?d[33].set(d[67],d[50]):0,d[68]="referral_code",d[51]=d[22].get(d[68]),d[22],d[51]!==void 0?d[33].set(d[68],d[51]):0,d[32]=d[33]}]):c.sequence([function(a){return d[30]==="XMSGClickToMessengerAdExtras"?c.resolve((d[34]=new c.Map(),d[45]="encrypted_ads_token",d[35]=d[22].get(d[45]),d[22],d[35]!==void 0?d[34].set(d[45],d[35]):0,d[46]="product_type",d[36]=d[22].get(d[46]),d[22],d[36]!==void 0?d[34].set(d[46],d[36]):0,d[47]="post_id",d[37]=d[22].get(d[47]),d[22],d[37]!==void 0?d[34].set(d[47],d[37]):0,d[48]="ad_id",d[38]=d[22].get(d[48]),d[22],d[38]!==void 0?d[34].set(d[48],d[38]):0,d[49]="page_id",d[39]=d[22].get(d[49]),d[22],d[39]!==void 0?d[34].set(d[49],d[39]):0,d[50]="photo_id",d[40]=d[22].get(d[50]),d[22],d[40]!==void 0?d[34].set(d[50],d[40]):0,d[51]="photo_index",d[41]=d[22].get(d[51]),d[22],c.i64.neq(d[41],void 0)?d[34].set(d[51],d[41]):0,d[52]="fallback_url",d[42]=d[22].get(d[52]),d[22],d[42]!==void 0?d[34].set(d[52],d[42]):0,d[53]="product_id",d[43]=d[22].get(d[53]),d[22],d[43]!==void 0?d[34].set(d[53],d[43]):0,d[54]="user_id",d[44]=d[22].get(d[54]),d[22],d[44]!==void 0?d[34].set(d[54],d[44]):0,d[33]=d[34])):c.sequence([function(a){return d[30]==="XMSGZorroMessageExtras"?c.resolve((d[35]=new c.Map(),d[37]="is_enabled",d[36]=d[22].get(d[37]),d[22],d[36]!==void 0?d[35].set(d[37],d[36]):0,d[34]=d[35])):c.sequence([function(a){return d[30]==="XMSGGenAISuggestedPromptExtras"?c.resolve((d[36]=new c.Map(),d[39]="prompt_type",d[37]=d[22].get(d[39]),d[22],d[37]!==void 0?d[36].set(d[39],d[37]):0,d[40]="qpl_join_id",d[38]=d[22].get(d[40]),d[22],d[38]!==void 0?d[36].set(d[40],d[38]):0,d[35]=d[36])):c.sequence([function(a){return d[30]==="XMSGGenAIMultiModalExtras"?c.resolve((d[37]=new c.Map(),d[41]="should_skip_genai_eval",d[38]=d[22].get(d[41]),d[22],d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="associated_multimodal_message_id",d[39]=d[22].get(d[42]),d[22],d[39]!==void 0?d[37].set(d[42],d[39]):0,d[43]="qpl_join_id",d[40]=d[22].get(d[43]),d[22],d[40]!==void 0?d[37].set(d[43],d[40]):0,d[36]=d[37])):c.sequence([function(a){return d[30]==="XMSGGenAIFlashImagineExtras"?c.resolve((d[38]=new c.Map(),d[41]="seed",d[39]=d[22].get(d[41]),d[22],c.i64.neq(d[39],void 0)?d[38].set(d[41],d[39]):0,d[42]="qpl_join_id",d[40]=d[22].get(d[42]),d[22],d[40]!==void 0?d[38].set(d[42],d[40]):0,d[37]=d[38])):c.sequence([function(a){return d[30]==="XMSGShareSheetExtras"?c.resolve((d[39]=new c.Map(),d[41]="recipient_selection_session_id",d[40]=d[22].get(d[41]),d[22],d[40]!==void 0?d[39].set(d[41],d[40]):0,d[38]=d[39])):c.sequence([function(a){return d[30]==="XMSGGenAIAssistantAPIExtras"?c.sequence([function(a){return d[40]=new c.Map(),d[70]="referrer_session_id",d[41]=d[22].get(d[70]),d[22],d[41]!==void 0?d[40].set(d[70],d[41]):0,d[71]="thread_session_id",d[42]=d[22].get(d[71]),d[22],d[42]!==void 0?d[40].set(d[71],d[42]):0,d[72]="prompt_id",d[43]=d[22].get(d[72]),d[22],d[43]!==void 0?d[40].set(d[72],d[43]):0,d[73]="prompt_type",d[44]=d[22].get(d[73]),d[22],d[44]!==void 0?d[40].set(d[73],d[44]):0,d[74]="prompt_fit_topic",d[45]=d[22].get(d[74]),d[22],d[45]!==void 0?d[40].set(d[74],d[45]):0,d[75]="location_extras",d[46]=d[22].get(d[75]),d[22],d[46]?d[47]=!1:d[47]=!0,d[47]?0:(d[46]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[98]="has_previous_perm_prompt",d[95]=d[46].get(d[98]),d[46],d[95]!==void 0?d[94].set(d[98],d[95]):0,d[99]="latitude",d[96]=d[46].get(d[99]),d[46],d[96]!==void 0?d[94].set(d[99],d[96]):0,d[100]="longitude",d[97]=d[46].get(d[100]),d[46],d[97]!==void 0?d[94].set(d[100],d[97]):0,d[93]=d[94]),d[40].set(d[75],d[93])),d[76]="qpl_join_id",d[48]=d[22].get(d[76]),d[22],d[48]!==void 0?d[40].set(d[76],d[48]):0,d[77]="meta_ai_prompt_type",d[49]=d[22].get(d[77]),d[22],d[49]!==void 0?d[40].set(d[77],d[49]):0,d[78]="is_subsequent_send",d[50]=d[22].get(d[78]),d[22],d[50]!==void 0?d[40].set(d[78],d[50]):0,d[79]="context_injection_type",d[51]=d[22].get(d[79]),d[22],d[51]!==void 0?d[40].set(d[79],d[51]):0,d[80]="context_injection_timestamp_ms",d[52]=d[22].get(d[80]),d[22],d[52]!==void 0?d[40].set(d[80],d[52]):0,d[81]="meta_ai_response_to_persist",d[53]=d[22].get(d[81]),d[22],d[53]?d[54]=!1:d[54]=!0,d[54]?c.resolve():c.sequence([function(a){return d[53]?d[92]=!1:d[92]=!0,d[92]?c.resolve(d[93]=void 0):c.sequence([function(a){return d[94]=new c.Map(),d[101]="text",d[95]=d[53].get(d[101]),d[53],d[95]!==void 0?d[94].set(d[101],d[95]):0,d[102]="bot_response_id",d[96]=d[53].get(d[102]),d[53],d[96]!==void 0?d[94].set(d[102],d[96]):0,d[103]="bot_request_id",d[97]=d[53].get(d[103]),d[53],d[97]!==void 0?d[94].set(d[103],d[97]):0,d[104]="external_search_params",d[98]=d[53].get(d[104]),d[53],d[98]?d[99]=!1:d[99]=!0,d[99]?c.resolve():c.sequence([function(a){return d[98]?d[106]=!1:d[106]=!0,d[106]?c.resolve(d[107]=void 0):c.sequence([function(a){return d[108]=new c.Map(),d[116]="search_result_uri",d[109]=d[98].get(d[116]),d[98],d[109]?d[110]=!1:d[110]=!0,d[110]?c.resolve():c.sequence([function(a){return d[109]?d[121]=!1:d[121]=!0,d[121]?c.resolve(d[122]=void 0):c.sequence([function(a){return d[123]=c.createArray(),d[124]=c.i64.of_int32(d[109].length),c.i64.gt(d[124],c.i64.cast([0,0]))?c.loopAsync(d[124],function(a){return d[125]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[109],d[125]).then(function(a){return a=a,d[126]=a[0],d[127]=a[1],a})},function(a){return d[128]=(d[123].push(d[126]),d[123])}])}):c.resolve()},function(a){return d[122]=d[123]}])},function(a){return d[108].set(d[116],d[122])}])},function(a){return d[117]="search_query",d[111]=d[98].get(d[117]),d[98],d[111]!==void 0?d[108].set(d[117],d[111]):0,d[118]="attribution_link",d[112]=d[98].get(d[118]),d[98],d[112]!==void 0?d[108].set(d[118],d[112]):0,d[119]="search_engine",d[113]=d[98].get(d[119]),d[98],d[113]!==void 0?d[108].set(d[119],d[113]):0,d[120]="references_title",d[114]=d[98].get(d[120]),d[98],d[114]?d[115]=!1:d[115]=!0,d[115]?c.resolve():c.sequence([function(a){return d[114]?d[121]=!1:d[121]=!0,d[121]?c.resolve(d[122]=void 0):c.sequence([function(a){return d[123]=c.createArray(),d[124]=c.i64.of_int32(d[114].length),c.i64.gt(d[124],c.i64.cast([0,0]))?c.loopAsync(d[124],function(a){return d[125]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[114],d[125]).then(function(a){return a=a,d[126]=a[0],d[127]=a[1],a})},function(a){return d[128]=(d[123].push(d[126]),d[123])}])}):c.resolve()},function(a){return d[122]=d[123]}])},function(a){return d[108].set(d[120],d[122])}])},function(a){return d[107]=d[108]}])},function(a){return d[94].set(d[104],d[107])}])},function(a){return d[105]="followup_prompt_text",d[100]=d[53].get(d[105]),d[53],d[100]!==void 0?d[94].set(d[105],d[100]):0,d[93]=d[94]}])},function(a){return d[40].set(d[81],d[93])}])},function(a){return d[82]="gql_dark_test_qpl_join_id",d[55]=d[22].get(d[82]),d[22],d[55]!==void 0?d[40].set(d[82],d[55]):0,d[83]="gql_dark_test_client_start_time",d[56]=d[22].get(d[83]),d[22],d[56]!==void 0?d[40].set(d[83],d[56]):0,d[84]="prompt_context",d[57]=d[22].get(d[84]),d[22],d[57]?d[58]=!1:d[58]=!0,d[58]?0:(d[57]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="context_token",d[95]=d[57].get(d[97]),d[57],d[95]!==void 0?d[94].set(d[97],d[95]):0,d[98]="context_token_type",d[96]=d[57].get(d[98]),d[57],c.i64.neq(d[96],void 0)?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[84],d[93])),d[85]="imagine_flash_extras",d[59]=d[22].get(d[85]),d[22],d[59]?d[60]=!1:d[60]=!0,d[60]?0:(d[59]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="seed",d[95]=d[59].get(d[97]),d[59],c.i64.neq(d[95],void 0)?d[94].set(d[97],d[95]):0,d[98]="qpl_join_id",d[96]=d[59].get(d[98]),d[59],d[96]!==void 0?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[85],d[93])),d[86]="conversation_marker_id",d[61]=d[22].get(d[86]),d[22],d[61]!==void 0?d[40].set(d[86],d[61]):0,d[87]="multi_modal_extras",d[62]=d[22].get(d[87]),d[22],d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[98]="should_skip_genai_eval",d[95]=d[62].get(d[98]),d[62],d[95]!==void 0?d[94].set(d[98],d[95]):0,d[99]="associated_multimodal_message_id",d[96]=d[62].get(d[99]),d[62],d[96]!==void 0?d[94].set(d[99],d[96]):0,d[100]="qpl_join_id",d[97]=d[62].get(d[100]),d[62],d[97]!==void 0?d[94].set(d[100],d[97]):0,d[93]=d[94]),d[40].set(d[87],d[93])),d[88]="ads_extras",d[64]=d[22].get(d[88]),d[22],d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[96]="context",d[95]=d[64].get(d[96]),d[64],d[95]!==void 0?d[94].set(d[96],d[95]):0,d[93]=d[94]),d[40].set(d[88],d[93])),d[89]="suggested_prompt_extras",d[66]=d[22].get(d[89]),d[22],d[66]?d[67]=!1:d[67]=!0,d[67]?0:(d[66]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="prompt_type",d[95]=d[66].get(d[97]),d[66],d[95]!==void 0?d[94].set(d[97],d[95]):0,d[98]="qpl_join_id",d[96]=d[66].get(d[98]),d[66],d[96]!==void 0?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[89],d[93])),d[90]="disable_server_mqtt_typing_indicator",d[68]=d[22].get(d[90]),d[22],d[68]!==void 0?d[40].set(d[90],d[68]):0,d[91]="enable_web_scraping",d[69]=d[22].get(d[91]),d[22],d[69]!==void 0?d[40].set(d[91],d[69]):0,d[39]=d[40]}]):c.sequence([function(a){return d[30]==="XMSGProductHighlightExtras"?c.resolve((d[41]=new c.Map(),d[44]="product_highlight_type",d[42]=d[22].get(d[44]),d[22],d[42]!==void 0?d[41].set(d[44],d[42]):0,d[45]="conversation_marker",d[43]=d[22].get(d[45]),d[22],d[43]!==void 0?d[41].set(d[45],d[43]):0,d[40]=d[41])):c.sequence([function(a){return d[30]==="XMSGMagicMessengerExtras"?c.resolve((d[42]=new c.Map(),d[44]="is_magic_thread",d[43]=d[22].get(d[44]),d[22],d[43]!==void 0?d[42].set(d[44],d[43]):0,d[41]=d[42])):c.sequence([function(a){return d[30]==="XMSGAdsAIExtras"?c.resolve((d[43]=new c.Map(),d[45]="context",d[44]=d[22].get(d[45]),d[22],d[44]!==void 0?d[43].set(d[45],d[44]):0,d[42]=d[43])):c.sequence([function(a){return d[30]==="XMSGBizappExtras"?c.resolve((d[44]=new c.Map(),d[47]="message_source",d[45]=d[22].get(d[47]),d[22],d[45]!==void 0?d[44].set(d[47],d[45]):0,d[48]="message_trigger",d[46]=d[22].get(d[48]),d[22],d[46]!==void 0?d[44].set(d[48],d[46]):0,d[43]=d[44])):c.sequence([function(a){return d[44]=new c.Map(),d[45]=d[22].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.gt(d[46],c.i64.cast([0,0]))?c.loopAsync(d[46],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[45],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=d[22].get(d[48]),d[22],d[44].set(d[48],d[50])}])}):c.resolve()},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[31].set("__typename",d[30]),d[29]=d[31]}])},function(a){return d[20].set(d[27],d[29])}])},function(a){return d[24]=d[20].get("product_extras"),d[20],d[24]!==void 0?(d[28]=d[24].get("__typename"),d[24],d[28]==="XMSGClickToMessengerAdExtras"?(d[31]=new c.Map(),d[42]="encrypted_ads_token",d[32]=d[24].get(d[42]),d[24],d[32]!==void 0?d[31].set(d[42],d[32]):0,d[43]="product_type",d[33]=d[24].get(d[43]),d[24],d[33]!==void 0?d[31].set(d[43],d[33]):0,d[44]="post_id",d[34]=d[24].get(d[44]),d[24],d[34]!==void 0?d[31].set(d[44],d[34]):0,d[45]="ad_id",d[35]=d[24].get(d[45]),d[24],d[35]!==void 0?d[31].set(d[45],d[35]):0,d[46]="page_id",d[36]=d[24].get(d[46]),d[24],d[36]!==void 0?d[31].set(d[46],d[36]):0,d[47]="photo_id",d[37]=d[24].get(d[47]),d[24],d[37]!==void 0?d[31].set(d[47],d[37]):0,d[48]="photo_index",d[38]=d[24].get(d[48]),d[24],c.i64.neq(d[38],void 0)?d[31].set(d[48],d[38]):0,d[49]="fallback_url",d[39]=d[24].get(d[49]),d[24],d[39]!==void 0?d[31].set(d[49],d[39]):0,d[50]="product_id",d[40]=d[24].get(d[50]),d[24],d[40]!==void 0?d[31].set(d[50],d[40]):0,d[51]="user_id",d[41]=d[24].get(d[51]),d[24],d[41]!==void 0?d[31].set(d[51],d[41]):0,d[29]=d[31]):d[29]=void 0,d[29]!==void 0?(d[31]=d[29].get("page_id"),d[29],d[30]=d[31]):d[30]=void 0,d[25]=d[30]):d[25]=void 0,d[2]=d[25]}]):c.resolve(d[2]=void 0)},function(e){return a[3]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[3]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[20]=new c.Map(),d[26]="product_type",d[21]=d[19].get(d[26]),d[19],d[21]!==void 0?d[20].set(d[26],d[21]):0,d[27]="product_extras",d[22]=d[19].get(d[27]),d[19],d[22]?d[23]=!1:d[23]=!0,d[23]?c.resolve():c.sequence([function(a){return d[22]?d[28]=!1:d[28]=!0,d[28]?c.resolve(d[29]=void 0):c.sequence([function(a){return d[30]=d[22].get("__typename"),d[22],d[30]==="XMSGStoryReplyExtras"?c.resolve((d[32]=new c.Map(),d[35]="logging",d[33]=d[22].get(d[35]),d[22],d[33]?d[34]=!1:d[34]=!0,d[34]?0:(d[33]?d[36]=!1:d[36]=!0,d[36]?d[37]=void 0:(d[38]=new c.Map(),d[46]="story_author_fbid",d[39]=d[33].get(d[46]),d[33],d[39]!==void 0?d[38].set(d[46],d[39]):0,d[47]="camera_post_type",d[40]=d[33].get(d[47]),d[33],d[40]!==void 0?d[38].set(d[47],d[40]):0,d[48]="story_type",d[41]=d[33].get(d[48]),d[33],d[41]!==void 0?d[38].set(d[48],d[41]):0,d[49]="post_source",d[42]=d[33].get(d[49]),d[33],d[42]!==void 0?d[38].set(d[49],d[42]):0,d[50]="fb_post_type",d[43]=d[33].get(d[50]),d[33],d[43]!==void 0?d[38].set(d[50],d[43]):0,d[51]="conversation_starter_type",d[44]=d[33].get(d[51]),d[33],d[44]!==void 0?d[38].set(d[51],d[44]):0,d[52]="story_reply_type",d[45]=d[33].get(d[52]),d[33],d[45]!==void 0?d[38].set(d[52],d[45]):0,d[37]=d[38]),d[32].set(d[35],d[37])),d[31]=d[32])):c.sequence([function(a){return d[30]==="XMSGMarketplaceExtras"?c.sequence([function(a){return d[33]=new c.Map(),d[52]="listing_id",d[34]=d[22].get(d[52]),d[22],d[34]!==void 0?d[33].set(d[52],d[34]):0,d[53]="initial_clicked_component",d[35]=d[22].get(d[53]),d[22],d[35]!==void 0?d[33].set(d[53],d[35]):0,d[54]="initial_tracking",d[36]=d[22].get(d[54]),d[22],d[36]!==void 0?d[33].set(d[54],d[36]):0,d[55]="referral_surface",d[37]=d[22].get(d[55]),d[22],d[37]!==void 0?d[33].set(d[55],d[37]):0,d[56]="referral_story_type",d[38]=d[22].get(d[56]),d[22],d[38]!==void 0?d[33].set(d[56],d[38]):0,d[57]="referral_ui_component",d[39]=d[22].get(d[57]),d[22],d[39]!==void 0?d[33].set(d[57],d[39]):0,d[58]="surface",d[40]=d[22].get(d[58]),d[22],d[40]!==void 0?d[33].set(d[58],d[40]):0,d[59]="tracking",d[41]=d[22].get(d[59]),d[22],d[41]!==void 0?d[33].set(d[59],d[41]):0,d[60]="ui_component",d[42]=d[22].get(d[60]),d[22],d[42]!==void 0?d[33].set(d[60],d[42]):0,d[61]="ad_id",d[43]=d[22].get(d[61]),d[22],d[43]!==void 0?d[33].set(d[61],d[43]):0,d[62]="server_session_id",d[44]=d[22].get(d[62]),d[22],d[44]!==void 0?d[33].set(d[62],d[44]):0,d[63]="cf_page_id",d[45]=d[22].get(d[63]),d[22],d[45]!==void 0?d[33].set(d[63],d[45]):0,d[64]="live_shopping_video_id",d[46]=d[22].get(d[64]),d[22],d[46]!==void 0?d[33].set(d[64],d[46]):0,d[65]="logging_id",d[47]=d[22].get(d[65]),d[22],c.i64.neq(d[47],void 0)?d[33].set(d[65],d[47]):0,d[66]="photo_ids",d[48]=d[22].get(d[66]),d[22],d[48]?d[49]=!1:d[49]=!0,d[49]?c.resolve():c.sequence([function(a){return d[69]=c.createArray(),d[70]=c.i64.of_int32(d[48].length),c.i64.gt(d[70],c.i64.cast([0,0]))?c.loopAsync(d[70],function(a){return d[71]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[48],d[71]).then(function(a){return a=a,d[72]=a[0],d[73]=a[1],a})},function(a){return d[74]=(d[69].push(d[72]),d[69])}])}):c.resolve()},function(a){return d[33].set(d[66],d[69])}])},function(a){return d[67]="is_customized_message",d[50]=d[22].get(d[67]),d[22],d[50]!==void 0?d[33].set(d[67],d[50]):0,d[68]="referral_code",d[51]=d[22].get(d[68]),d[22],d[51]!==void 0?d[33].set(d[68],d[51]):0,d[32]=d[33]}]):c.sequence([function(a){return d[30]==="XMSGClickToMessengerAdExtras"?c.resolve((d[34]=new c.Map(),d[45]="encrypted_ads_token",d[35]=d[22].get(d[45]),d[22],d[35]!==void 0?d[34].set(d[45],d[35]):0,d[46]="product_type",d[36]=d[22].get(d[46]),d[22],d[36]!==void 0?d[34].set(d[46],d[36]):0,d[47]="post_id",d[37]=d[22].get(d[47]),d[22],d[37]!==void 0?d[34].set(d[47],d[37]):0,d[48]="ad_id",d[38]=d[22].get(d[48]),d[22],d[38]!==void 0?d[34].set(d[48],d[38]):0,d[49]="page_id",d[39]=d[22].get(d[49]),d[22],d[39]!==void 0?d[34].set(d[49],d[39]):0,d[50]="photo_id",d[40]=d[22].get(d[50]),d[22],d[40]!==void 0?d[34].set(d[50],d[40]):0,d[51]="photo_index",d[41]=d[22].get(d[51]),d[22],c.i64.neq(d[41],void 0)?d[34].set(d[51],d[41]):0,d[52]="fallback_url",d[42]=d[22].get(d[52]),d[22],d[42]!==void 0?d[34].set(d[52],d[42]):0,d[53]="product_id",d[43]=d[22].get(d[53]),d[22],d[43]!==void 0?d[34].set(d[53],d[43]):0,d[54]="user_id",d[44]=d[22].get(d[54]),d[22],d[44]!==void 0?d[34].set(d[54],d[44]):0,d[33]=d[34])):c.sequence([function(a){return d[30]==="XMSGZorroMessageExtras"?c.resolve((d[35]=new c.Map(),d[37]="is_enabled",d[36]=d[22].get(d[37]),d[22],d[36]!==void 0?d[35].set(d[37],d[36]):0,d[34]=d[35])):c.sequence([function(a){return d[30]==="XMSGGenAISuggestedPromptExtras"?c.resolve((d[36]=new c.Map(),d[39]="prompt_type",d[37]=d[22].get(d[39]),d[22],d[37]!==void 0?d[36].set(d[39],d[37]):0,d[40]="qpl_join_id",d[38]=d[22].get(d[40]),d[22],d[38]!==void 0?d[36].set(d[40],d[38]):0,d[35]=d[36])):c.sequence([function(a){return d[30]==="XMSGGenAIMultiModalExtras"?c.resolve((d[37]=new c.Map(),d[41]="should_skip_genai_eval",d[38]=d[22].get(d[41]),d[22],d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="associated_multimodal_message_id",d[39]=d[22].get(d[42]),d[22],d[39]!==void 0?d[37].set(d[42],d[39]):0,d[43]="qpl_join_id",d[40]=d[22].get(d[43]),d[22],d[40]!==void 0?d[37].set(d[43],d[40]):0,d[36]=d[37])):c.sequence([function(a){return d[30]==="XMSGGenAIFlashImagineExtras"?c.resolve((d[38]=new c.Map(),d[41]="seed",d[39]=d[22].get(d[41]),d[22],c.i64.neq(d[39],void 0)?d[38].set(d[41],d[39]):0,d[42]="qpl_join_id",d[40]=d[22].get(d[42]),d[22],d[40]!==void 0?d[38].set(d[42],d[40]):0,d[37]=d[38])):c.sequence([function(a){return d[30]==="XMSGShareSheetExtras"?c.resolve((d[39]=new c.Map(),d[41]="recipient_selection_session_id",d[40]=d[22].get(d[41]),d[22],d[40]!==void 0?d[39].set(d[41],d[40]):0,d[38]=d[39])):c.sequence([function(a){return d[30]==="XMSGGenAIAssistantAPIExtras"?c.sequence([function(a){return d[40]=new c.Map(),d[70]="referrer_session_id",d[41]=d[22].get(d[70]),d[22],d[41]!==void 0?d[40].set(d[70],d[41]):0,d[71]="thread_session_id",d[42]=d[22].get(d[71]),d[22],d[42]!==void 0?d[40].set(d[71],d[42]):0,d[72]="prompt_id",d[43]=d[22].get(d[72]),d[22],d[43]!==void 0?d[40].set(d[72],d[43]):0,d[73]="prompt_type",d[44]=d[22].get(d[73]),d[22],d[44]!==void 0?d[40].set(d[73],d[44]):0,d[74]="prompt_fit_topic",d[45]=d[22].get(d[74]),d[22],d[45]!==void 0?d[40].set(d[74],d[45]):0,d[75]="location_extras",d[46]=d[22].get(d[75]),d[22],d[46]?d[47]=!1:d[47]=!0,d[47]?0:(d[46]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[98]="has_previous_perm_prompt",d[95]=d[46].get(d[98]),d[46],d[95]!==void 0?d[94].set(d[98],d[95]):0,d[99]="latitude",d[96]=d[46].get(d[99]),d[46],d[96]!==void 0?d[94].set(d[99],d[96]):0,d[100]="longitude",d[97]=d[46].get(d[100]),d[46],d[97]!==void 0?d[94].set(d[100],d[97]):0,d[93]=d[94]),d[40].set(d[75],d[93])),d[76]="qpl_join_id",d[48]=d[22].get(d[76]),d[22],d[48]!==void 0?d[40].set(d[76],d[48]):0,d[77]="meta_ai_prompt_type",d[49]=d[22].get(d[77]),d[22],d[49]!==void 0?d[40].set(d[77],d[49]):0,d[78]="is_subsequent_send",d[50]=d[22].get(d[78]),d[22],d[50]!==void 0?d[40].set(d[78],d[50]):0,d[79]="context_injection_type",d[51]=d[22].get(d[79]),d[22],d[51]!==void 0?d[40].set(d[79],d[51]):0,d[80]="context_injection_timestamp_ms",d[52]=d[22].get(d[80]),d[22],d[52]!==void 0?d[40].set(d[80],d[52]):0,d[81]="meta_ai_response_to_persist",d[53]=d[22].get(d[81]),d[22],d[53]?d[54]=!1:d[54]=!0,d[54]?c.resolve():c.sequence([function(a){return d[53]?d[92]=!1:d[92]=!0,d[92]?c.resolve(d[93]=void 0):c.sequence([function(a){return d[94]=new c.Map(),d[101]="text",d[95]=d[53].get(d[101]),d[53],d[95]!==void 0?d[94].set(d[101],d[95]):0,d[102]="bot_response_id",d[96]=d[53].get(d[102]),d[53],d[96]!==void 0?d[94].set(d[102],d[96]):0,d[103]="bot_request_id",d[97]=d[53].get(d[103]),d[53],d[97]!==void 0?d[94].set(d[103],d[97]):0,d[104]="external_search_params",d[98]=d[53].get(d[104]),d[53],d[98]?d[99]=!1:d[99]=!0,d[99]?c.resolve():c.sequence([function(a){return d[98]?d[106]=!1:d[106]=!0,d[106]?c.resolve(d[107]=void 0):c.sequence([function(a){return d[108]=new c.Map(),d[116]="search_result_uri",d[109]=d[98].get(d[116]),d[98],d[109]?d[110]=!1:d[110]=!0,d[110]?c.resolve():c.sequence([function(a){return d[109]?d[121]=!1:d[121]=!0,d[121]?c.resolve(d[122]=void 0):c.sequence([function(a){return d[123]=c.createArray(),d[124]=c.i64.of_int32(d[109].length),c.i64.gt(d[124],c.i64.cast([0,0]))?c.loopAsync(d[124],function(a){return d[125]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[109],d[125]).then(function(a){return a=a,d[126]=a[0],d[127]=a[1],a})},function(a){return d[128]=(d[123].push(d[126]),d[123])}])}):c.resolve()},function(a){return d[122]=d[123]}])},function(a){return d[108].set(d[116],d[122])}])},function(a){return d[117]="search_query",d[111]=d[98].get(d[117]),d[98],d[111]!==void 0?d[108].set(d[117],d[111]):0,d[118]="attribution_link",d[112]=d[98].get(d[118]),d[98],d[112]!==void 0?d[108].set(d[118],d[112]):0,d[119]="search_engine",d[113]=d[98].get(d[119]),d[98],d[113]!==void 0?d[108].set(d[119],d[113]):0,d[120]="references_title",d[114]=d[98].get(d[120]),d[98],d[114]?d[115]=!1:d[115]=!0,d[115]?c.resolve():c.sequence([function(a){return d[114]?d[121]=!1:d[121]=!0,d[121]?c.resolve(d[122]=void 0):c.sequence([function(a){return d[123]=c.createArray(),d[124]=c.i64.of_int32(d[114].length),c.i64.gt(d[124],c.i64.cast([0,0]))?c.loopAsync(d[124],function(a){return d[125]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[114],d[125]).then(function(a){return a=a,d[126]=a[0],d[127]=a[1],a})},function(a){return d[128]=(d[123].push(d[126]),d[123])}])}):c.resolve()},function(a){return d[122]=d[123]}])},function(a){return d[108].set(d[120],d[122])}])},function(a){return d[107]=d[108]}])},function(a){return d[94].set(d[104],d[107])}])},function(a){return d[105]="followup_prompt_text",d[100]=d[53].get(d[105]),d[53],d[100]!==void 0?d[94].set(d[105],d[100]):0,d[93]=d[94]}])},function(a){return d[40].set(d[81],d[93])}])},function(a){return d[82]="gql_dark_test_qpl_join_id",d[55]=d[22].get(d[82]),d[22],d[55]!==void 0?d[40].set(d[82],d[55]):0,d[83]="gql_dark_test_client_start_time",d[56]=d[22].get(d[83]),d[22],d[56]!==void 0?d[40].set(d[83],d[56]):0,d[84]="prompt_context",d[57]=d[22].get(d[84]),d[22],d[57]?d[58]=!1:d[58]=!0,d[58]?0:(d[57]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="context_token",d[95]=d[57].get(d[97]),d[57],d[95]!==void 0?d[94].set(d[97],d[95]):0,d[98]="context_token_type",d[96]=d[57].get(d[98]),d[57],c.i64.neq(d[96],void 0)?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[84],d[93])),d[85]="imagine_flash_extras",d[59]=d[22].get(d[85]),d[22],d[59]?d[60]=!1:d[60]=!0,d[60]?0:(d[59]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="seed",d[95]=d[59].get(d[97]),d[59],c.i64.neq(d[95],void 0)?d[94].set(d[97],d[95]):0,d[98]="qpl_join_id",d[96]=d[59].get(d[98]),d[59],d[96]!==void 0?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[85],d[93])),d[86]="conversation_marker_id",d[61]=d[22].get(d[86]),d[22],d[61]!==void 0?d[40].set(d[86],d[61]):0,d[87]="multi_modal_extras",d[62]=d[22].get(d[87]),d[22],d[62]?d[63]=!1:d[63]=!0,d[63]?0:(d[62]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[98]="should_skip_genai_eval",d[95]=d[62].get(d[98]),d[62],d[95]!==void 0?d[94].set(d[98],d[95]):0,d[99]="associated_multimodal_message_id",d[96]=d[62].get(d[99]),d[62],d[96]!==void 0?d[94].set(d[99],d[96]):0,d[100]="qpl_join_id",d[97]=d[62].get(d[100]),d[62],d[97]!==void 0?d[94].set(d[100],d[97]):0,d[93]=d[94]),d[40].set(d[87],d[93])),d[88]="ads_extras",d[64]=d[22].get(d[88]),d[22],d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[96]="context",d[95]=d[64].get(d[96]),d[64],d[95]!==void 0?d[94].set(d[96],d[95]):0,d[93]=d[94]),d[40].set(d[88],d[93])),d[89]="suggested_prompt_extras",d[66]=d[22].get(d[89]),d[22],d[66]?d[67]=!1:d[67]=!0,d[67]?0:(d[66]?d[92]=!1:d[92]=!0,d[92]?d[93]=void 0:(d[94]=new c.Map(),d[97]="prompt_type",d[95]=d[66].get(d[97]),d[66],d[95]!==void 0?d[94].set(d[97],d[95]):0,d[98]="qpl_join_id",d[96]=d[66].get(d[98]),d[66],d[96]!==void 0?d[94].set(d[98],d[96]):0,d[93]=d[94]),d[40].set(d[89],d[93])),d[90]="disable_server_mqtt_typing_indicator",d[68]=d[22].get(d[90]),d[22],d[68]!==void 0?d[40].set(d[90],d[68]):0,d[91]="enable_web_scraping",d[69]=d[22].get(d[91]),d[22],d[69]!==void 0?d[40].set(d[91],d[69]):0,d[39]=d[40]}]):c.sequence([function(a){return d[30]==="XMSGProductHighlightExtras"?c.resolve((d[41]=new c.Map(),d[44]="product_highlight_type",d[42]=d[22].get(d[44]),d[22],d[42]!==void 0?d[41].set(d[44],d[42]):0,d[45]="conversation_marker",d[43]=d[22].get(d[45]),d[22],d[43]!==void 0?d[41].set(d[45],d[43]):0,d[40]=d[41])):c.sequence([function(a){return d[30]==="XMSGMagicMessengerExtras"?c.resolve((d[42]=new c.Map(),d[44]="is_magic_thread",d[43]=d[22].get(d[44]),d[22],d[43]!==void 0?d[42].set(d[44],d[43]):0,d[41]=d[42])):c.sequence([function(a){return d[30]==="XMSGAdsAIExtras"?c.resolve((d[43]=new c.Map(),d[45]="context",d[44]=d[22].get(d[45]),d[22],d[44]!==void 0?d[43].set(d[45],d[44]):0,d[42]=d[43])):c.sequence([function(a){return d[30]==="XMSGBizappExtras"?c.resolve((d[44]=new c.Map(),d[47]="message_source",d[45]=d[22].get(d[47]),d[22],d[45]!==void 0?d[44].set(d[47],d[45]):0,d[48]="message_trigger",d[46]=d[22].get(d[48]),d[22],d[46]!==void 0?d[44].set(d[48],d[46]):0,d[43]=d[44])):c.sequence([function(a){return d[44]=new c.Map(),d[45]=d[22].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.gt(d[46],c.i64.cast([0,0]))?c.loopAsync(d[46],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[45],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=d[22].get(d[48]),d[22],d[44].set(d[48],d[50])}])}):c.resolve()},function(a){return d[43]=d[44]}])},function(a){return d[42]=d[43]}])},function(a){return d[41]=d[42]}])},function(a){return d[40]=d[41]}])},function(a){return d[39]=d[40]}])},function(a){return d[38]=d[39]}])},function(a){return d[37]=d[38]}])},function(a){return d[36]=d[37]}])},function(a){return d[35]=d[36]}])},function(a){return d[34]=d[35]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[31].set("__typename",d[30]),d[29]=d[31]}])},function(a){return d[20].set(d[27],d[29])}])},function(a){return d[24]=d[20].get("product_extras"),d[20],d[24]!==void 0?(d[28]=d[24].get("__typename"),d[24],d[28]==="XMSGClickToMessengerAdExtras"?(d[31]=new c.Map(),d[42]="encrypted_ads_token",d[32]=d[24].get(d[42]),d[24],d[32]!==void 0?d[31].set(d[42],d[32]):0,d[43]="product_type",d[33]=d[24].get(d[43]),d[24],d[33]!==void 0?d[31].set(d[43],d[33]):0,d[44]="post_id",d[34]=d[24].get(d[44]),d[24],d[34]!==void 0?d[31].set(d[44],d[34]):0,d[45]="ad_id",d[35]=d[24].get(d[45]),d[24],d[35]!==void 0?d[31].set(d[45],d[35]):0,d[46]="page_id",d[36]=d[24].get(d[46]),d[24],d[36]!==void 0?d[31].set(d[46],d[36]):0,d[47]="photo_id",d[37]=d[24].get(d[47]),d[24],d[37]!==void 0?d[31].set(d[47],d[37]):0,d[48]="photo_index",d[38]=d[24].get(d[48]),d[24],c.i64.neq(d[38],void 0)?d[31].set(d[48],d[38]):0,d[49]="fallback_url",d[39]=d[24].get(d[49]),d[24],d[39]!==void 0?d[31].set(d[49],d[39]):0,d[50]="product_id",d[40]=d[24].get(d[50]),d[24],d[40]!==void 0?d[31].set(d[50],d[40]):0,d[51]="user_id",d[41]=d[24].get(d[51]),d[24],d[41]!==void 0?d[31].set(d[51],d[41]):0,d[29]=d[31]):d[29]=void 0,d[29]!==void 0?(d[31]=d[29].get("product_type"),d[29],d[30]=d[31]):d[30]=void 0,d[25]=d[30]):d[25]=void 0,d[3]=d[25]}]):c.resolve(d[3]=void 0)},function(a){return d[3]==="CTM"?(d[2]!==void 0?d[19]=c.i64.from_string(d[2]):d[19]=d[1],d[4]=d[19]):d[4]=d[1],d[5]=c.i64.cast([0,1083495711]),d[6]=c.i64.cast([0,1024]),d[7]=c.i64.cast([0,0]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,0]),void 0?d[10]=!1:d[10]=!0,d[10]?(a=["",void 0,void 0,void 0,void 0],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a):(d[19]=(void 0).get("nullstate_description_text1"),void 0,d[19]!==void 0?d[20]=d[19]:d[20]="",d[21]=(void 0).get("nullstate_description_text2"),void 0,d[22]=(void 0).get("nullstate_description_text3"),void 0,d[23]=(void 0).get("nullstate_description_text4"),void 0,d[24]=(void 0).get("nullstate_description_text5"),void 0,a=[d[20],d[21],d[22],d[23],d[24]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],a),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[4]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[4],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,2]),clientThreadKey:d[4],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[16],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[5],capabilities2:d[6],capabilities3:d[7],capabilities4:d[8],nullstateDescriptionText1:d[11],nullstateDescriptionText2:d[12],nullstateDescriptionText3:d[13],threadName:a[2]})},function(a){return d[17]=c.createArray(),c.resolve()},function(b){return a[3]!==void 0?c.db.table(312).add({threadKey:d[4],metadata:a[3]}):c.resolve()},function(e){return d[18]=c.i64.of_int32(a[0].length),c.i64.gt(d[18],c.i64.cast([0,0]))?c.loopAsync(d[18],function(e){return d[19]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[19]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[4],d[20]]]]),function(a){return c.i64.eq(a.threadKey,d[4])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[20])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[4],contactId:d[20],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(a){return e[0]=d[4]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticGroupThreadStoredProcedure";a.__tables__=["threads","threads_optimistic_metadata","participants"];e.exports=a}),null);
__d("LSCreateGroupThreadWithAdminText",["LSCreateOfflineThreadingID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticGroupThread"),a[0],a[1],a[2],void 0).then(function(a){return a=a,d[0]=a[0],a})},function(a){return d[1]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[1]).then(function(a){return a=a,d[2]=a[0],a})},function(a){return c.forEach(c.db.table(9).fetch([[[d[0]]]]),function(a){var b=a.update;a.item;return b({otidOfFirstMessage:c.i64.to_string(d[2])})})},function(e){return d[3]=new c.Map(),d[3].set("thread_id",d[0]),d[3].set("otid",c.i64.to_string(d[2])),d[3].set("source",c.i64.cast([0,0])),d[3].set("send_type",c.i64.cast([0,8])),a[3]!==void 0?d[3].set("text",a[3]):0,d[4]=new c.Map(),d[4].set("participants",a[0]),d[4].set("send_payload",d[3]),a[2]!==void 0?d[4].set("thread_name",a[2]):0,void 0!==void 0?d[4].set("thread_metadata",void 0):0,void 0===void 0||!1?(d[5]=d[4].get("send_payload"),d[4],d[6]=d[5].get("thread_id"),d[5],d[7]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[6]),c.i64.cast([0,130]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(d[5]=d[4].get("send_payload"),d[4],d[6]=d[5].get("thread_id"),d[5],d[7]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[6]),c.i64.cast([0,787]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCreateGroupThreadWithAdminTextStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSLocalCreateOptimisticGroupThread",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask","LSLocalApplyOptimisticGroupThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return void 0?d[0]=!1:d[0]=!0,d[0]?(e=["",void 0,void 0,void 0,void 0],d[1]=e[0],d[2]=e[1],d[3]=e[2],d[4]=e[3],d[5]=e[4],e):(d[8]=(void 0).get("nullstate_description_text1"),void 0,d[8]!==void 0?d[9]=d[8]:d[9]="",d[10]=(void 0).get("nullstate_description_text2"),void 0,d[11]=(void 0).get("nullstate_description_text3"),void 0,d[12]=(void 0).get("nullstate_description_text4"),void 0,d[13]=(void 0).get("nullstate_description_text5"),void 0,e=[d[9],d[10],d[11],d[12],d[13]],d[1]=e[0],d[2]=e[1],d[3]=e[2],d[4]=e[3],d[5]=e[4],e),d[6]=new c.Map(),d[6].set("nullstate_description_text1",d[1]),d[6].set("nullstate_description_text2",d[2]),d[6].set("nullstate_description_text3",d[3]),d[6].set("nullstate_description_text4",d[4]),d[6].set("nullstate_description_text5",d[5]),c.storedProcedure(b("LSLocalApplyOptimisticGroupThread"),a[0],void 0,a[2],a[4]).then(function(a){return a=a,d[7]=a[0],a})},function(e){return a[3]===!0?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,5]))?a[4]!==void 0?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[8]=a[0],a})},function(e){return d[9]=c.i64.cast([0,0]),d[10]=c.i64.of_int32(a[0].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[11]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[0],d[11]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return c.i64.neq(d[12],d[8])?d[14]=d[12]:d[14]=d[9],d[9]=d[14]}])}):c.resolve()},function(e){return a[4]!==void 0?(d[11]=new c.Map(),d[11].set("seller_id",d[9]),d[11].set("thread_metadata",a[4]),d[11].set("client_thread_key",d[7]),d[12]=d[11].get("client_thread_key"),d[11],d[13]=c.toJSON(d[11]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[12]),c.i64.cast([0,646]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()}]):c.resolve(function(a){c.logger(a).mustfix(a)}("Marketplace thread metadata cannot be null")):(d[8]=new c.Map(),d[8].set("participants",a[0]),d[8].set("client_thread_key",d[7]),d[8].set("sync_group",c.i64.cast([0,1])),d[9]=d[8].get("client_thread_key"),d[8],d[10]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[9]),c.i64.cast([0,153]),d[10],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(a){return e[0]=d[7]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("getMWV2OtherUser",["FBLogger","I64","LSMessagingThreadTypeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a))return;if(b.length===1){var f=b[0],g=f[0];f=f[1];if(f!=null)return[g,f];return}g=b.filter(function(a){a=a[0];return!(h||(h=d("I64"))).equal(a.contactId,e)});if(g.length===0){c("FBLogger")("messenger_comet").mustfix('No participants in thread, {threadType: "%d", participantsAndContacts: %d, hasActor: %b}',(h||(h=d("I64"))).to_int32(a),b.length,b.some(function(a){a=a[0];return(h||(h=d("I64"))).equal(a.contactId,e)}));return}f=g[0];a=f[0];b=f[1];if(b!=null)return[a,b]}g["default"]=a}),98);
__d("LSThreadTitle.react",["CometTextWithEntities.react","LSMessagingThreadTypeUtil","MWChatTextTransform","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","getMWV2OtherUser","intlList","mwCMIsAnyCMThread","react","react-compiler-runtime","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=d("react-compiler-runtime").c(19),e=a.actorIDOverride,g=a.thread,i=a.transforms;a=a.wrapOutput;var k=d("MWPActor.react").useActor(),l=(h||(h=c("useReStore")))();e=e!=null?e:k;var m;b[0]!==l.tables.contacts||b[1]!==l.tables.participants||b[2]!==g.threadKey?(m=function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(l.tables.participants,["contactId","nickname"]).getKeyRange(g.threadKey),d("ReQL").fromTableAscending(l.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2","secondaryName","id","contactTypeExact","blockedByViewerStatus"])).take(8)},b[0]=l.tables.contacts,b[1]=l.tables.participants,b[2]=g.threadKey,b[3]=m):m=b[3];var n;b[4]!==g.threadKey?(n=[g.threadKey],b[4]=g.threadKey,b[5]=n):n=b[5];m=d("ReQLSuspense").useArray(m,n,f.id+":52");b[6]!==e||b[7]!==m||b[8]!==g.threadType?(n=d("MWPGetThreadTitle").computeThreadTitle(c("intlList").CONJUNCTIONS.NONE,g.threadType,m,e),b[6]=e,b[7]=m,b[8]=g.threadType,b[9]=n):n=b[9];e=n;if(e==null)return"";b[10]!==e||b[11]!==i?(n=j.jsx(c("CometTextWithEntities.react"),{text:e,transforms:i}),b[10]=e,b[11]=i,b[12]=n):n=b[12];e=n;i=g.threadType;if(b[13]!==k||b[14]!==e||b[15]!==m||b[16]!==g.threadType||b[17]!==a){n=Symbol["for"]("react.early_return_sentinel");bb0:{i=c("getMWV2OtherUser")(i,m,k);if(a!=null&&i!=null&&d("LSMessagingThreadTypeUtil").isOneToOne(g.threadType)){n=a(i[1],e);break bb0}else{n=e;break bb0}}b[13]=k;b[14]=e;b[15]=m;b[16]=g.threadType;b[17]=a;b[18]=n}else n=b[18];if(n!==Symbol["for"]("react.early_return_sentinel"))return n}function a(a){var b=a.actorIDOverride,e=a.thread,f=a.wrapOutput;a=a.transforms;a=a===void 0?d("MWChatTextTransform").textTransforms:a;var g=e.threadName;if(g!=null)return j.jsx(c("CometTextWithEntities.react"),{text:g,transforms:a});if(c("mwCMIsAnyCMThread")(e.threadType)){c("recoverableViolation")("community message should not use computed thread title","messenger_comet");return null}return j.jsx(k,{actorIDOverride:b,thread:e,transforms:a,wrapOutput:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSVerifyThreadRowExistsV2",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.i64.eq(a[1],c.i64.cast([0,5]))?d[0]=c.i64.cast([-1,4294967284]):d[0]=c.i64.cast([0,0]),c.storedProcedure(b("LSVerifyThreadExistsV2"),a[0],a[1],"inbox",d[0],a[3],!1,a[2],!1,!1)},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyThreadRowExistsV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSVerifyThreadView",["LSArrayGetObjectAt","LSComputeOptimisticThreadCapabilities","LSCreateGroupThreadWithAdminText","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSInsertNewMessageRange","LSIssueNewTask","LSLocalCreateOptimisticGroupThread","LSMessagePointQuery","LSVerifyContactRowExists","LSVerifyThreadRowExists","LSVerifyThreadRowExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return a[8]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[8]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[4]=new c.Map(),d[9]="product_type",d[5]=d[3].get(d[9]),d[3],d[5]!==void 0?d[4].set(d[9],d[5]):0,d[10]="product_extras",d[6]=d[3].get(d[10]),d[3],d[6]?d[7]=!1:d[7]=!0,d[7]?c.resolve():c.sequence([function(a){return d[6]?d[11]=!1:d[11]=!0,d[11]?c.resolve(d[12]=void 0):c.sequence([function(a){return d[13]=d[6].get("__typename"),d[6],d[13]==="XMSGStoryReplyExtras"?c.resolve((d[15]=new c.Map(),d[18]="logging",d[16]=d[6].get(d[18]),d[6],d[16]?d[17]=!1:d[17]=!0,d[17]?0:(d[16]?d[19]=!1:d[19]=!0,d[19]?d[20]=void 0:(d[21]=new c.Map(),d[29]="story_author_fbid",d[22]=d[16].get(d[29]),d[16],d[22]!==void 0?d[21].set(d[29],d[22]):0,d[30]="camera_post_type",d[23]=d[16].get(d[30]),d[16],d[23]!==void 0?d[21].set(d[30],d[23]):0,d[31]="story_type",d[24]=d[16].get(d[31]),d[16],d[24]!==void 0?d[21].set(d[31],d[24]):0,d[32]="post_source",d[25]=d[16].get(d[32]),d[16],d[25]!==void 0?d[21].set(d[32],d[25]):0,d[33]="fb_post_type",d[26]=d[16].get(d[33]),d[16],d[26]!==void 0?d[21].set(d[33],d[26]):0,d[34]="conversation_starter_type",d[27]=d[16].get(d[34]),d[16],d[27]!==void 0?d[21].set(d[34],d[27]):0,d[35]="story_reply_type",d[28]=d[16].get(d[35]),d[16],d[28]!==void 0?d[21].set(d[35],d[28]):0,d[20]=d[21]),d[15].set(d[18],d[20])),d[14]=d[15])):c.sequence([function(a){return d[13]==="XMSGMarketplaceExtras"?c.sequence([function(a){return d[16]=new c.Map(),d[35]="listing_id",d[17]=d[6].get(d[35]),d[6],d[17]!==void 0?d[16].set(d[35],d[17]):0,d[36]="initial_clicked_component",d[18]=d[6].get(d[36]),d[6],d[18]!==void 0?d[16].set(d[36],d[18]):0,d[37]="initial_tracking",d[19]=d[6].get(d[37]),d[6],d[19]!==void 0?d[16].set(d[37],d[19]):0,d[38]="referral_surface",d[20]=d[6].get(d[38]),d[6],d[20]!==void 0?d[16].set(d[38],d[20]):0,d[39]="referral_story_type",d[21]=d[6].get(d[39]),d[6],d[21]!==void 0?d[16].set(d[39],d[21]):0,d[40]="referral_ui_component",d[22]=d[6].get(d[40]),d[6],d[22]!==void 0?d[16].set(d[40],d[22]):0,d[41]="surface",d[23]=d[6].get(d[41]),d[6],d[23]!==void 0?d[16].set(d[41],d[23]):0,d[42]="tracking",d[24]=d[6].get(d[42]),d[6],d[24]!==void 0?d[16].set(d[42],d[24]):0,d[43]="ui_component",d[25]=d[6].get(d[43]),d[6],d[25]!==void 0?d[16].set(d[43],d[25]):0,d[44]="ad_id",d[26]=d[6].get(d[44]),d[6],d[26]!==void 0?d[16].set(d[44],d[26]):0,d[45]="server_session_id",d[27]=d[6].get(d[45]),d[6],d[27]!==void 0?d[16].set(d[45],d[27]):0,d[46]="cf_page_id",d[28]=d[6].get(d[46]),d[6],d[28]!==void 0?d[16].set(d[46],d[28]):0,d[47]="live_shopping_video_id",d[29]=d[6].get(d[47]),d[6],d[29]!==void 0?d[16].set(d[47],d[29]):0,d[48]="logging_id",d[30]=d[6].get(d[48]),d[6],c.i64.neq(d[30],void 0)?d[16].set(d[48],d[30]):0,d[49]="photo_ids",d[31]=d[6].get(d[49]),d[6],d[31]?d[32]=!1:d[32]=!0,d[32]?c.resolve():c.sequence([function(a){return d[52]=c.createArray(),d[53]=c.i64.of_int32(d[31].length),c.i64.gt(d[53],c.i64.cast([0,0]))?c.loopAsync(d[53],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[31],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[52].push(d[55]),d[52])}])}):c.resolve()},function(a){return d[16].set(d[49],d[52])}])},function(a){return d[50]="is_customized_message",d[33]=d[6].get(d[50]),d[6],d[33]!==void 0?d[16].set(d[50],d[33]):0,d[51]="referral_code",d[34]=d[6].get(d[51]),d[6],d[34]!==void 0?d[16].set(d[51],d[34]):0,d[15]=d[16]}]):c.sequence([function(a){return d[13]==="XMSGClickToMessengerAdExtras"?c.resolve((d[17]=new c.Map(),d[28]="encrypted_ads_token",d[18]=d[6].get(d[28]),d[6],d[18]!==void 0?d[17].set(d[28],d[18]):0,d[29]="product_type",d[19]=d[6].get(d[29]),d[6],d[19]!==void 0?d[17].set(d[29],d[19]):0,d[30]="post_id",d[20]=d[6].get(d[30]),d[6],d[20]!==void 0?d[17].set(d[30],d[20]):0,d[31]="ad_id",d[21]=d[6].get(d[31]),d[6],d[21]!==void 0?d[17].set(d[31],d[21]):0,d[32]="page_id",d[22]=d[6].get(d[32]),d[6],d[22]!==void 0?d[17].set(d[32],d[22]):0,d[33]="photo_id",d[23]=d[6].get(d[33]),d[6],d[23]!==void 0?d[17].set(d[33],d[23]):0,d[34]="photo_index",d[24]=d[6].get(d[34]),d[6],c.i64.neq(d[24],void 0)?d[17].set(d[34],d[24]):0,d[35]="fallback_url",d[25]=d[6].get(d[35]),d[6],d[25]!==void 0?d[17].set(d[35],d[25]):0,d[36]="product_id",d[26]=d[6].get(d[36]),d[6],d[26]!==void 0?d[17].set(d[36],d[26]):0,d[37]="user_id",d[27]=d[6].get(d[37]),d[6],d[27]!==void 0?d[17].set(d[37],d[27]):0,d[16]=d[17])):c.sequence([function(a){return d[13]==="XMSGZorroMessageExtras"?c.resolve((d[18]=new c.Map(),d[20]="is_enabled",d[19]=d[6].get(d[20]),d[6],d[19]!==void 0?d[18].set(d[20],d[19]):0,d[17]=d[18])):c.sequence([function(a){return d[13]==="XMSGGenAISuggestedPromptExtras"?c.resolve((d[19]=new c.Map(),d[22]="prompt_type",d[20]=d[6].get(d[22]),d[6],d[20]!==void 0?d[19].set(d[22],d[20]):0,d[23]="qpl_join_id",d[21]=d[6].get(d[23]),d[6],d[21]!==void 0?d[19].set(d[23],d[21]):0,d[18]=d[19])):c.sequence([function(a){return d[13]==="XMSGGenAIMultiModalExtras"?c.resolve((d[20]=new c.Map(),d[24]="should_skip_genai_eval",d[21]=d[6].get(d[24]),d[6],d[21]!==void 0?d[20].set(d[24],d[21]):0,d[25]="associated_multimodal_message_id",d[22]=d[6].get(d[25]),d[6],d[22]!==void 0?d[20].set(d[25],d[22]):0,d[26]="qpl_join_id",d[23]=d[6].get(d[26]),d[6],d[23]!==void 0?d[20].set(d[26],d[23]):0,d[19]=d[20])):c.sequence([function(a){return d[13]==="XMSGGenAIFlashImagineExtras"?c.resolve((d[21]=new c.Map(),d[24]="seed",d[22]=d[6].get(d[24]),d[6],c.i64.neq(d[22],void 0)?d[21].set(d[24],d[22]):0,d[25]="qpl_join_id",d[23]=d[6].get(d[25]),d[6],d[23]!==void 0?d[21].set(d[25],d[23]):0,d[20]=d[21])):c.sequence([function(a){return d[13]==="XMSGShareSheetExtras"?c.resolve((d[22]=new c.Map(),d[24]="recipient_selection_session_id",d[23]=d[6].get(d[24]),d[6],d[23]!==void 0?d[22].set(d[24],d[23]):0,d[21]=d[22])):c.sequence([function(a){return d[13]==="XMSGGenAIAssistantAPIExtras"?c.sequence([function(a){return d[23]=new c.Map(),d[53]="referrer_session_id",d[24]=d[6].get(d[53]),d[6],d[24]!==void 0?d[23].set(d[53],d[24]):0,d[54]="thread_session_id",d[25]=d[6].get(d[54]),d[6],d[25]!==void 0?d[23].set(d[54],d[25]):0,d[55]="prompt_id",d[26]=d[6].get(d[55]),d[6],d[26]!==void 0?d[23].set(d[55],d[26]):0,d[56]="prompt_type",d[27]=d[6].get(d[56]),d[6],d[27]!==void 0?d[23].set(d[56],d[27]):0,d[57]="prompt_fit_topic",d[28]=d[6].get(d[57]),d[6],d[28]!==void 0?d[23].set(d[57],d[28]):0,d[58]="location_extras",d[29]=d[6].get(d[58]),d[6],d[29]?d[30]=!1:d[30]=!0,d[30]?0:(d[29]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[81]="has_previous_perm_prompt",d[78]=d[29].get(d[81]),d[29],d[78]!==void 0?d[77].set(d[81],d[78]):0,d[82]="latitude",d[79]=d[29].get(d[82]),d[29],d[79]!==void 0?d[77].set(d[82],d[79]):0,d[83]="longitude",d[80]=d[29].get(d[83]),d[29],d[80]!==void 0?d[77].set(d[83],d[80]):0,d[76]=d[77]),d[23].set(d[58],d[76])),d[59]="qpl_join_id",d[31]=d[6].get(d[59]),d[6],d[31]!==void 0?d[23].set(d[59],d[31]):0,d[60]="meta_ai_prompt_type",d[32]=d[6].get(d[60]),d[6],d[32]!==void 0?d[23].set(d[60],d[32]):0,d[61]="is_subsequent_send",d[33]=d[6].get(d[61]),d[6],d[33]!==void 0?d[23].set(d[61],d[33]):0,d[62]="context_injection_type",d[34]=d[6].get(d[62]),d[6],d[34]!==void 0?d[23].set(d[62],d[34]):0,d[63]="context_injection_timestamp_ms",d[35]=d[6].get(d[63]),d[6],d[35]!==void 0?d[23].set(d[63],d[35]):0,d[64]="meta_ai_response_to_persist",d[36]=d[6].get(d[64]),d[6],d[36]?d[37]=!1:d[37]=!0,d[37]?c.resolve():c.sequence([function(a){return d[36]?d[75]=!1:d[75]=!0,d[75]?c.resolve(d[76]=void 0):c.sequence([function(a){return d[77]=new c.Map(),d[84]="text",d[78]=d[36].get(d[84]),d[36],d[78]!==void 0?d[77].set(d[84],d[78]):0,d[85]="bot_response_id",d[79]=d[36].get(d[85]),d[36],d[79]!==void 0?d[77].set(d[85],d[79]):0,d[86]="bot_request_id",d[80]=d[36].get(d[86]),d[36],d[80]!==void 0?d[77].set(d[86],d[80]):0,d[87]="external_search_params",d[81]=d[36].get(d[87]),d[36],d[81]?d[82]=!1:d[82]=!0,d[82]?c.resolve():c.sequence([function(a){return d[81]?d[89]=!1:d[89]=!0,d[89]?c.resolve(d[90]=void 0):c.sequence([function(a){return d[91]=new c.Map(),d[99]="search_result_uri",d[92]=d[81].get(d[99]),d[81],d[92]?d[93]=!1:d[93]=!0,d[93]?c.resolve():c.sequence([function(a){return d[92]?d[104]=!1:d[104]=!0,d[104]?c.resolve(d[105]=void 0):c.sequence([function(a){return d[106]=c.createArray(),d[107]=c.i64.of_int32(d[92].length),c.i64.gt(d[107],c.i64.cast([0,0]))?c.loopAsync(d[107],function(a){return d[108]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[92],d[108]).then(function(a){return a=a,d[109]=a[0],d[110]=a[1],a})},function(a){return d[111]=(d[106].push(d[109]),d[106])}])}):c.resolve()},function(a){return d[105]=d[106]}])},function(a){return d[91].set(d[99],d[105])}])},function(a){return d[100]="search_query",d[94]=d[81].get(d[100]),d[81],d[94]!==void 0?d[91].set(d[100],d[94]):0,d[101]="attribution_link",d[95]=d[81].get(d[101]),d[81],d[95]!==void 0?d[91].set(d[101],d[95]):0,d[102]="search_engine",d[96]=d[81].get(d[102]),d[81],d[96]!==void 0?d[91].set(d[102],d[96]):0,d[103]="references_title",d[97]=d[81].get(d[103]),d[81],d[97]?d[98]=!1:d[98]=!0,d[98]?c.resolve():c.sequence([function(a){return d[97]?d[104]=!1:d[104]=!0,d[104]?c.resolve(d[105]=void 0):c.sequence([function(a){return d[106]=c.createArray(),d[107]=c.i64.of_int32(d[97].length),c.i64.gt(d[107],c.i64.cast([0,0]))?c.loopAsync(d[107],function(a){return d[108]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[97],d[108]).then(function(a){return a=a,d[109]=a[0],d[110]=a[1],a})},function(a){return d[111]=(d[106].push(d[109]),d[106])}])}):c.resolve()},function(a){return d[105]=d[106]}])},function(a){return d[91].set(d[103],d[105])}])},function(a){return d[90]=d[91]}])},function(a){return d[77].set(d[87],d[90])}])},function(a){return d[88]="followup_prompt_text",d[83]=d[36].get(d[88]),d[36],d[83]!==void 0?d[77].set(d[88],d[83]):0,d[76]=d[77]}])},function(a){return d[23].set(d[64],d[76])}])},function(a){return d[65]="gql_dark_test_qpl_join_id",d[38]=d[6].get(d[65]),d[6],d[38]!==void 0?d[23].set(d[65],d[38]):0,d[66]="gql_dark_test_client_start_time",d[39]=d[6].get(d[66]),d[6],d[39]!==void 0?d[23].set(d[66],d[39]):0,d[67]="prompt_context",d[40]=d[6].get(d[67]),d[6],d[40]?d[41]=!1:d[41]=!0,d[41]?0:(d[40]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[80]="context_token",d[78]=d[40].get(d[80]),d[40],d[78]!==void 0?d[77].set(d[80],d[78]):0,d[81]="context_token_type",d[79]=d[40].get(d[81]),d[40],c.i64.neq(d[79],void 0)?d[77].set(d[81],d[79]):0,d[76]=d[77]),d[23].set(d[67],d[76])),d[68]="imagine_flash_extras",d[42]=d[6].get(d[68]),d[6],d[42]?d[43]=!1:d[43]=!0,d[43]?0:(d[42]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[80]="seed",d[78]=d[42].get(d[80]),d[42],c.i64.neq(d[78],void 0)?d[77].set(d[80],d[78]):0,d[81]="qpl_join_id",d[79]=d[42].get(d[81]),d[42],d[79]!==void 0?d[77].set(d[81],d[79]):0,d[76]=d[77]),d[23].set(d[68],d[76])),d[69]="conversation_marker_id",d[44]=d[6].get(d[69]),d[6],d[44]!==void 0?d[23].set(d[69],d[44]):0,d[70]="multi_modal_extras",d[45]=d[6].get(d[70]),d[6],d[45]?d[46]=!1:d[46]=!0,d[46]?0:(d[45]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[81]="should_skip_genai_eval",d[78]=d[45].get(d[81]),d[45],d[78]!==void 0?d[77].set(d[81],d[78]):0,d[82]="associated_multimodal_message_id",d[79]=d[45].get(d[82]),d[45],d[79]!==void 0?d[77].set(d[82],d[79]):0,d[83]="qpl_join_id",d[80]=d[45].get(d[83]),d[45],d[80]!==void 0?d[77].set(d[83],d[80]):0,d[76]=d[77]),d[23].set(d[70],d[76])),d[71]="ads_extras",d[47]=d[6].get(d[71]),d[6],d[47]?d[48]=!1:d[48]=!0,d[48]?0:(d[47]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[79]="context",d[78]=d[47].get(d[79]),d[47],d[78]!==void 0?d[77].set(d[79],d[78]):0,d[76]=d[77]),d[23].set(d[71],d[76])),d[72]="suggested_prompt_extras",d[49]=d[6].get(d[72]),d[6],d[49]?d[50]=!1:d[50]=!0,d[50]?0:(d[49]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[77]=new c.Map(),d[80]="prompt_type",d[78]=d[49].get(d[80]),d[49],d[78]!==void 0?d[77].set(d[80],d[78]):0,d[81]="qpl_join_id",d[79]=d[49].get(d[81]),d[49],d[79]!==void 0?d[77].set(d[81],d[79]):0,d[76]=d[77]),d[23].set(d[72],d[76])),d[73]="disable_server_mqtt_typing_indicator",d[51]=d[6].get(d[73]),d[6],d[51]!==void 0?d[23].set(d[73],d[51]):0,d[74]="enable_web_scraping",d[52]=d[6].get(d[74]),d[6],d[52]!==void 0?d[23].set(d[74],d[52]):0,d[22]=d[23]}]):c.sequence([function(a){return d[13]==="XMSGProductHighlightExtras"?c.resolve((d[24]=new c.Map(),d[27]="product_highlight_type",d[25]=d[6].get(d[27]),d[6],d[25]!==void 0?d[24].set(d[27],d[25]):0,d[28]="conversation_marker",d[26]=d[6].get(d[28]),d[6],d[26]!==void 0?d[24].set(d[28],d[26]):0,d[23]=d[24])):c.sequence([function(a){return d[13]==="XMSGMagicMessengerExtras"?c.resolve((d[25]=new c.Map(),d[27]="is_magic_thread",d[26]=d[6].get(d[27]),d[6],d[26]!==void 0?d[25].set(d[27],d[26]):0,d[24]=d[25])):c.sequence([function(a){return d[13]==="XMSGAdsAIExtras"?c.resolve((d[26]=new c.Map(),d[28]="context",d[27]=d[6].get(d[28]),d[6],d[27]!==void 0?d[26].set(d[28],d[27]):0,d[25]=d[26])):c.sequence([function(a){return d[13]==="XMSGBizappExtras"?c.resolve((d[27]=new c.Map(),d[30]="message_source",d[28]=d[6].get(d[30]),d[6],d[28]!==void 0?d[27].set(d[30],d[28]):0,d[31]="message_trigger",d[29]=d[6].get(d[31]),d[6],d[29]!==void 0?d[27].set(d[31],d[29]):0,d[26]=d[27])):c.sequence([function(a){return d[27]=new c.Map(),d[28]=d[6].keys(),d[29]=c.i64.of_int32(d[28].length),c.i64.gt(d[29],c.i64.cast([0,0]))?c.loopAsync(d[29],function(a){return d[30]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[28],d[30]).then(function(a){return a=a,d[31]=a[0],d[32]=a[1],a})},function(a){return d[33]=d[6].get(d[31]),d[6],d[27].set(d[31],d[33])}])}):c.resolve()},function(a){return d[26]=d[27]}])},function(a){return d[25]=d[26]}])},function(a){return d[24]=d[25]}])},function(a){return d[23]=d[24]}])},function(a){return d[22]=d[23]}])},function(a){return d[21]=d[22]}])},function(a){return d[20]=d[21]}])},function(a){return d[19]=d[20]}])},function(a){return d[18]=d[19]}])},function(a){return d[17]=d[18]}])},function(a){return d[16]=d[17]}])},function(a){return d[15]=d[16]}])},function(a){return d[14]=d[15]}])},function(a){return d[14].set("__typename",d[13]),d[12]=d[14]}])},function(a){return d[4].set(d[10],d[12])}])},function(a){return d[8]=d[4].get("product_type"),d[4],d[0]=d[8]}]):c.resolve(d[0]=void 0)},function(e){return c.i64.eq(a[1],c.i64.cast([0,7]))?c.resolve((e=[a[0],c.i64.cast([0,1024])],d[1]=e[0],d[2]=e[1],e)):c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?(c.i64.eq(a[0],c.i64.cast([0,0]))?d[12]=a[0]:d[12]=void 0,f=[d[12],void 0,c.i64.cast([0,20])],d[3]=f[0],d[4]=f[1],d[5]=f[2],f):(e=b.item,f=[e.threadKey,e.clientThreadKey,e.authorityLevel],d[3]=f[0],d[4]=f[1],d[5]=f[2],f)})},function(e){return d[12]=c.i64.of_int32(a[6].length),c.i64.eq(a[1],c.i64.cast([0,1]))&&c.i64.gt(d[12],c.i64.cast([0,0]))?(d[13]=c.i64.of_int32(a[6].length),c.i64.gt(d[13],c.i64.cast([0,0]))?c.loopAsync(d[13],function(e){return d[14]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[14]).then(function(a){return a=a,d[15]=a[0],d[16]=a[1],a})},function(a){return d[17]=d[15].get("contact_id"),d[15],d[18]=d[15].get("contact_type"),d[15],d[19]=d[15].get("contact_name"),d[15],d[20]=d[15].get("contact_profile_photo"),d[15],c.storedProcedure(b("LSVerifyContactRowExists"),d[17],c.i64.cast([0,0]),d[20],d[19],d[18],void 0,void 0,void 0,void 0,!1,!1,c.i64.cast([0,0]),void 0,!1,c.i64.cast([0,20]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),c.i64.cast([0,0]),void 0,void 0)}])}):c.resolve()):c.resolve()},function(e){return a[5]!==void 0?c.sequence([function(d){return c.storedProcedure(b("LSMessagePointQuery"),a[0],a[5],a[1],void 0)},function(b){return b=[a[0],void 0],d[7]=b[0],d[8]=b[1],b}]):c.sequence([function(e){return(c.i64.eq(a[1],c.i64.cast([0,2]))||c.i64.eq(a[1],c.i64.cast([0,5]))||d[0]==="CTM")&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.sequence([function(e){return d[14]=c.createArray(),d[15]=c.i64.of_int32(a[6].length),c.i64.gt(d[15],c.i64.cast([0,0]))?c.loopAsync(d[15],function(e){return d[28]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[28]).then(function(a){return a=a,d[29]=a[0],d[30]=a[1],a})},function(a){return d[31]=d[29].get("contact_id"),d[29],d[32]=d[29].get("contact_type"),d[29],d[33]=d[29].get("contact_name"),d[29],d[34]=d[29].get("contact_profile_photo"),d[29],d[35]=(d[14].push(d[31]),d[14])}])}):c.resolve()},function(a){return d[16]=c.i64.of_int32(d[14].length),d[17]=c.createArray(),c.sequence([function(a){return d[28]=c.createArray(),d[29]=c.i64.of_int32(d[14].length),c.i64.gt(d[29],c.i64.cast([0,0]))?c.loopAsync(d[29],function(a){return d[31]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[14],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(a){return d[34]=(d[28].push(c.i64.to_string(d[32])),d[28])}])}):c.resolve()},function(a){return d[30]=d[28].join(","),d[18]=d[30]}])},function(a){return c.groupBy(c.filter(c.db.table(14).fetch(),function(a){return d[14].some(function(b){return c.i64.eq(a.contactId,b)})}),"threadKey").forEach(function(a){return c.i64.eq(a.group_count,d[16])?d[28]=(d[17].push(a.threadKey),d[17]):0})},function(a){return d[19]=c.createArray(),c.sequence([function(a){return d[28]=c.createArray(),d[29]=c.i64.of_int32(d[17].length),c.i64.gt(d[29],c.i64.cast([0,0]))?c.loopAsync(d[29],function(a){return d[31]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[17],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(a){return d[34]=(d[28].push(c.i64.to_string(d[32])),d[28])}])}):c.resolve()},function(a){return d[30]=d[28].join(","),d[20]=d[30]}])},function(a){return c.groupBy(c.filter(c.db.table(14).fetch(),function(a){return d[17].some(function(b){return c.i64.eq(a.threadKey,b)})}),"threadKey").forEach(function(a){return c.i64.eq(a.group_count,d[16])?d[28]=(d[19].push(a.threadKey),d[19]):0})},function(a){return c.sequence([function(a){return d[28]=c.createArray(),d[29]=c.i64.of_int32(d[19].length),c.i64.gt(d[29],c.i64.cast([0,0]))?c.loopAsync(d[29],function(a){return d[31]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(a){return d[34]=(d[28].push(c.i64.to_string(d[32])),d[28])}])}):c.resolve()},function(a){return d[30]=d[28].join(","),d[21]=d[30]}])},function(b){return c.islc(c.filter(c.db.table(9).fetchDesc([[[c.merge({lt:c.i64.cast([0,5])},a[1])],[c.merge({gt:c.i64.cast([0,5])},a[1])],[c.merge(c.i64.cast([0,5]),a[1])]],"threadTypeLastActivityTimestampMs"]),function(b){return d[19].some(function(a){return c.i64.eq(b.threadKey,a)})&&(c.i64.neq(b.threadType,c.i64.cast([0,5]))&&b.threadName===void 0||c.i64.eq(b.threadType,c.i64.cast([0,5]))&&b.threadName===a[2])&&c.i64.eq(b.threadType,a[1])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[void 0,void 0,c.i64.cast([0,20])],d[22]=e[0],d[23]=e[1],d[24]=e[2],e):(b=a.item,e=[b.threadKey,b.clientThreadKey,b.authorityLevel],d[22]=e[0],d[23]=e[1],d[24]=e[2],e)})},function(e){return c.i64.neq(d[22],void 0)?c.sequence([function(e){return d[0]==="CTM"?c.sequence([function(e){return a[8]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[8]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[45]="product_type",d[40]=d[38].get(d[45]),d[38],d[40]!==void 0?d[39].set(d[45],d[40]):0,d[46]="product_extras",d[41]=d[38].get(d[46]),d[38],d[41]?d[42]=!1:d[42]=!0,d[42]?c.resolve():c.sequence([function(a){return d[41]?d[47]=!1:d[47]=!0,d[47]?c.resolve(d[48]=void 0):c.sequence([function(a){return d[49]=d[41].get("__typename"),d[41],d[49]==="XMSGStoryReplyExtras"?c.resolve((d[51]=new c.Map(),d[54]="logging",d[52]=d[41].get(d[54]),d[41],d[52]?d[53]=!1:d[53]=!0,d[53]?0:(d[52]?d[55]=!1:d[55]=!0,d[55]?d[56]=void 0:(d[57]=new c.Map(),d[65]="story_author_fbid",d[58]=d[52].get(d[65]),d[52],d[58]!==void 0?d[57].set(d[65],d[58]):0,d[66]="camera_post_type",d[59]=d[52].get(d[66]),d[52],d[59]!==void 0?d[57].set(d[66],d[59]):0,d[67]="story_type",d[60]=d[52].get(d[67]),d[52],d[60]!==void 0?d[57].set(d[67],d[60]):0,d[68]="post_source",d[61]=d[52].get(d[68]),d[52],d[61]!==void 0?d[57].set(d[68],d[61]):0,d[69]="fb_post_type",d[62]=d[52].get(d[69]),d[52],d[62]!==void 0?d[57].set(d[69],d[62]):0,d[70]="conversation_starter_type",d[63]=d[52].get(d[70]),d[52],d[63]!==void 0?d[57].set(d[70],d[63]):0,d[71]="story_reply_type",d[64]=d[52].get(d[71]),d[52],d[64]!==void 0?d[57].set(d[71],d[64]):0,d[56]=d[57]),d[51].set(d[54],d[56])),d[50]=d[51])):c.sequence([function(a){return d[49]==="XMSGMarketplaceExtras"?c.sequence([function(a){return d[52]=new c.Map(),d[71]="listing_id",d[53]=d[41].get(d[71]),d[41],d[53]!==void 0?d[52].set(d[71],d[53]):0,d[72]="initial_clicked_component",d[54]=d[41].get(d[72]),d[41],d[54]!==void 0?d[52].set(d[72],d[54]):0,d[73]="initial_tracking",d[55]=d[41].get(d[73]),d[41],d[55]!==void 0?d[52].set(d[73],d[55]):0,d[74]="referral_surface",d[56]=d[41].get(d[74]),d[41],d[56]!==void 0?d[52].set(d[74],d[56]):0,d[75]="referral_story_type",d[57]=d[41].get(d[75]),d[41],d[57]!==void 0?d[52].set(d[75],d[57]):0,d[76]="referral_ui_component",d[58]=d[41].get(d[76]),d[41],d[58]!==void 0?d[52].set(d[76],d[58]):0,d[77]="surface",d[59]=d[41].get(d[77]),d[41],d[59]!==void 0?d[52].set(d[77],d[59]):0,d[78]="tracking",d[60]=d[41].get(d[78]),d[41],d[60]!==void 0?d[52].set(d[78],d[60]):0,d[79]="ui_component",d[61]=d[41].get(d[79]),d[41],d[61]!==void 0?d[52].set(d[79],d[61]):0,d[80]="ad_id",d[62]=d[41].get(d[80]),d[41],d[62]!==void 0?d[52].set(d[80],d[62]):0,d[81]="server_session_id",d[63]=d[41].get(d[81]),d[41],d[63]!==void 0?d[52].set(d[81],d[63]):0,d[82]="cf_page_id",d[64]=d[41].get(d[82]),d[41],d[64]!==void 0?d[52].set(d[82],d[64]):0,d[83]="live_shopping_video_id",d[65]=d[41].get(d[83]),d[41],d[65]!==void 0?d[52].set(d[83],d[65]):0,d[84]="logging_id",d[66]=d[41].get(d[84]),d[41],c.i64.neq(d[66],void 0)?d[52].set(d[84],d[66]):0,d[85]="photo_ids",d[67]=d[41].get(d[85]),d[41],d[67]?d[68]=!1:d[68]=!0,d[68]?c.resolve():c.sequence([function(a){return d[88]=c.createArray(),d[89]=c.i64.of_int32(d[67].length),c.i64.gt(d[89],c.i64.cast([0,0]))?c.loopAsync(d[89],function(a){return d[90]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[67],d[90]).then(function(a){return a=a,d[91]=a[0],d[92]=a[1],a})},function(a){return d[93]=(d[88].push(d[91]),d[88])}])}):c.resolve()},function(a){return d[52].set(d[85],d[88])}])},function(a){return d[86]="is_customized_message",d[69]=d[41].get(d[86]),d[41],d[69]!==void 0?d[52].set(d[86],d[69]):0,d[87]="referral_code",d[70]=d[41].get(d[87]),d[41],d[70]!==void 0?d[52].set(d[87],d[70]):0,d[51]=d[52]}]):c.sequence([function(a){return d[49]==="XMSGClickToMessengerAdExtras"?c.resolve((d[53]=new c.Map(),d[64]="encrypted_ads_token",d[54]=d[41].get(d[64]),d[41],d[54]!==void 0?d[53].set(d[64],d[54]):0,d[65]="product_type",d[55]=d[41].get(d[65]),d[41],d[55]!==void 0?d[53].set(d[65],d[55]):0,d[66]="post_id",d[56]=d[41].get(d[66]),d[41],d[56]!==void 0?d[53].set(d[66],d[56]):0,d[67]="ad_id",d[57]=d[41].get(d[67]),d[41],d[57]!==void 0?d[53].set(d[67],d[57]):0,d[68]="page_id",d[58]=d[41].get(d[68]),d[41],d[58]!==void 0?d[53].set(d[68],d[58]):0,d[69]="photo_id",d[59]=d[41].get(d[69]),d[41],d[59]!==void 0?d[53].set(d[69],d[59]):0,d[70]="photo_index",d[60]=d[41].get(d[70]),d[41],c.i64.neq(d[60],void 0)?d[53].set(d[70],d[60]):0,d[71]="fallback_url",d[61]=d[41].get(d[71]),d[41],d[61]!==void 0?d[53].set(d[71],d[61]):0,d[72]="product_id",d[62]=d[41].get(d[72]),d[41],d[62]!==void 0?d[53].set(d[72],d[62]):0,d[73]="user_id",d[63]=d[41].get(d[73]),d[41],d[63]!==void 0?d[53].set(d[73],d[63]):0,d[52]=d[53])):c.sequence([function(a){return d[49]==="XMSGZorroMessageExtras"?c.resolve((d[54]=new c.Map(),d[56]="is_enabled",d[55]=d[41].get(d[56]),d[41],d[55]!==void 0?d[54].set(d[56],d[55]):0,d[53]=d[54])):c.sequence([function(a){return d[49]==="XMSGGenAISuggestedPromptExtras"?c.resolve((d[55]=new c.Map(),d[58]="prompt_type",d[56]=d[41].get(d[58]),d[41],d[56]!==void 0?d[55].set(d[58],d[56]):0,d[59]="qpl_join_id",d[57]=d[41].get(d[59]),d[41],d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55])):c.sequence([function(a){return d[49]==="XMSGGenAIMultiModalExtras"?c.resolve((d[56]=new c.Map(),d[60]="should_skip_genai_eval",d[57]=d[41].get(d[60]),d[41],d[57]!==void 0?d[56].set(d[60],d[57]):0,d[61]="associated_multimodal_message_id",d[58]=d[41].get(d[61]),d[41],d[58]!==void 0?d[56].set(d[61],d[58]):0,d[62]="qpl_join_id",d[59]=d[41].get(d[62]),d[41],d[59]!==void 0?d[56].set(d[62],d[59]):0,d[55]=d[56])):c.sequence([function(a){return d[49]==="XMSGGenAIFlashImagineExtras"?c.resolve((d[57]=new c.Map(),d[60]="seed",d[58]=d[41].get(d[60]),d[41],c.i64.neq(d[58],void 0)?d[57].set(d[60],d[58]):0,d[61]="qpl_join_id",d[59]=d[41].get(d[61]),d[41],d[59]!==void 0?d[57].set(d[61],d[59]):0,d[56]=d[57])):c.sequence([function(a){return d[49]==="XMSGShareSheetExtras"?c.resolve((d[58]=new c.Map(),d[60]="recipient_selection_session_id",d[59]=d[41].get(d[60]),d[41],d[59]!==void 0?d[58].set(d[60],d[59]):0,d[57]=d[58])):c.sequence([function(a){return d[49]==="XMSGGenAIAssistantAPIExtras"?c.sequence([function(a){return d[59]=new c.Map(),d[89]="referrer_session_id",d[60]=d[41].get(d[89]),d[41],d[60]!==void 0?d[59].set(d[89],d[60]):0,d[90]="thread_session_id",d[61]=d[41].get(d[90]),d[41],d[61]!==void 0?d[59].set(d[90],d[61]):0,d[91]="prompt_id",d[62]=d[41].get(d[91]),d[41],d[62]!==void 0?d[59].set(d[91],d[62]):0,d[92]="prompt_type",d[63]=d[41].get(d[92]),d[41],d[63]!==void 0?d[59].set(d[92],d[63]):0,d[93]="prompt_fit_topic",d[64]=d[41].get(d[93]),d[41],d[64]!==void 0?d[59].set(d[93],d[64]):0,d[94]="location_extras",d[65]=d[41].get(d[94]),d[41],d[65]?d[66]=!1:d[66]=!0,d[66]?0:(d[65]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[117]="has_previous_perm_prompt",d[114]=d[65].get(d[117]),d[65],d[114]!==void 0?d[113].set(d[117],d[114]):0,d[118]="latitude",d[115]=d[65].get(d[118]),d[65],d[115]!==void 0?d[113].set(d[118],d[115]):0,d[119]="longitude",d[116]=d[65].get(d[119]),d[65],d[116]!==void 0?d[113].set(d[119],d[116]):0,d[112]=d[113]),d[59].set(d[94],d[112])),d[95]="qpl_join_id",d[67]=d[41].get(d[95]),d[41],d[67]!==void 0?d[59].set(d[95],d[67]):0,d[96]="meta_ai_prompt_type",d[68]=d[41].get(d[96]),d[41],d[68]!==void 0?d[59].set(d[96],d[68]):0,d[97]="is_subsequent_send",d[69]=d[41].get(d[97]),d[41],d[69]!==void 0?d[59].set(d[97],d[69]):0,d[98]="context_injection_type",d[70]=d[41].get(d[98]),d[41],d[70]!==void 0?d[59].set(d[98],d[70]):0,d[99]="context_injection_timestamp_ms",d[71]=d[41].get(d[99]),d[41],d[71]!==void 0?d[59].set(d[99],d[71]):0,d[100]="meta_ai_response_to_persist",d[72]=d[41].get(d[100]),d[41],d[72]?d[73]=!1:d[73]=!0,d[73]?c.resolve():c.sequence([function(a){return d[72]?d[111]=!1:d[111]=!0,d[111]?c.resolve(d[112]=void 0):c.sequence([function(a){return d[113]=new c.Map(),d[120]="text",d[114]=d[72].get(d[120]),d[72],d[114]!==void 0?d[113].set(d[120],d[114]):0,d[121]="bot_response_id",d[115]=d[72].get(d[121]),d[72],d[115]!==void 0?d[113].set(d[121],d[115]):0,d[122]="bot_request_id",d[116]=d[72].get(d[122]),d[72],d[116]!==void 0?d[113].set(d[122],d[116]):0,d[123]="external_search_params",d[117]=d[72].get(d[123]),d[72],d[117]?d[118]=!1:d[118]=!0,d[118]?c.resolve():c.sequence([function(a){return d[117]?d[125]=!1:d[125]=!0,d[125]?c.resolve(d[126]=void 0):c.sequence([function(a){return d[127]=new c.Map(),d[135]="search_result_uri",d[128]=d[117].get(d[135]),d[117],d[128]?d[129]=!1:d[129]=!0,d[129]?c.resolve():c.sequence([function(a){return d[128]?d[140]=!1:d[140]=!0,d[140]?c.resolve(d[141]=void 0):c.sequence([function(a){return d[142]=c.createArray(),d[143]=c.i64.of_int32(d[128].length),c.i64.gt(d[143],c.i64.cast([0,0]))?c.loopAsync(d[143],function(a){return d[144]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[128],d[144]).then(function(a){return a=a,d[145]=a[0],d[146]=a[1],a})},function(a){return d[147]=(d[142].push(d[145]),d[142])}])}):c.resolve()},function(a){return d[141]=d[142]}])},function(a){return d[127].set(d[135],d[141])}])},function(a){return d[136]="search_query",d[130]=d[117].get(d[136]),d[117],d[130]!==void 0?d[127].set(d[136],d[130]):0,d[137]="attribution_link",d[131]=d[117].get(d[137]),d[117],d[131]!==void 0?d[127].set(d[137],d[131]):0,d[138]="search_engine",d[132]=d[117].get(d[138]),d[117],d[132]!==void 0?d[127].set(d[138],d[132]):0,d[139]="references_title",d[133]=d[117].get(d[139]),d[117],d[133]?d[134]=!1:d[134]=!0,d[134]?c.resolve():c.sequence([function(a){return d[133]?d[140]=!1:d[140]=!0,d[140]?c.resolve(d[141]=void 0):c.sequence([function(a){return d[142]=c.createArray(),d[143]=c.i64.of_int32(d[133].length),c.i64.gt(d[143],c.i64.cast([0,0]))?c.loopAsync(d[143],function(a){return d[144]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[133],d[144]).then(function(a){return a=a,d[145]=a[0],d[146]=a[1],a})},function(a){return d[147]=(d[142].push(d[145]),d[142])}])}):c.resolve()},function(a){return d[141]=d[142]}])},function(a){return d[127].set(d[139],d[141])}])},function(a){return d[126]=d[127]}])},function(a){return d[113].set(d[123],d[126])}])},function(a){return d[124]="followup_prompt_text",d[119]=d[72].get(d[124]),d[72],d[119]!==void 0?d[113].set(d[124],d[119]):0,d[112]=d[113]}])},function(a){return d[59].set(d[100],d[112])}])},function(a){return d[101]="gql_dark_test_qpl_join_id",d[74]=d[41].get(d[101]),d[41],d[74]!==void 0?d[59].set(d[101],d[74]):0,d[102]="gql_dark_test_client_start_time",d[75]=d[41].get(d[102]),d[41],d[75]!==void 0?d[59].set(d[102],d[75]):0,d[103]="prompt_context",d[76]=d[41].get(d[103]),d[41],d[76]?d[77]=!1:d[77]=!0,d[77]?0:(d[76]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[116]="context_token",d[114]=d[76].get(d[116]),d[76],d[114]!==void 0?d[113].set(d[116],d[114]):0,d[117]="context_token_type",d[115]=d[76].get(d[117]),d[76],c.i64.neq(d[115],void 0)?d[113].set(d[117],d[115]):0,d[112]=d[113]),d[59].set(d[103],d[112])),d[104]="imagine_flash_extras",d[78]=d[41].get(d[104]),d[41],d[78]?d[79]=!1:d[79]=!0,d[79]?0:(d[78]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[116]="seed",d[114]=d[78].get(d[116]),d[78],c.i64.neq(d[114],void 0)?d[113].set(d[116],d[114]):0,d[117]="qpl_join_id",d[115]=d[78].get(d[117]),d[78],d[115]!==void 0?d[113].set(d[117],d[115]):0,d[112]=d[113]),d[59].set(d[104],d[112])),d[105]="conversation_marker_id",d[80]=d[41].get(d[105]),d[41],d[80]!==void 0?d[59].set(d[105],d[80]):0,d[106]="multi_modal_extras",d[81]=d[41].get(d[106]),d[41],d[81]?d[82]=!1:d[82]=!0,d[82]?0:(d[81]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[117]="should_skip_genai_eval",d[114]=d[81].get(d[117]),d[81],d[114]!==void 0?d[113].set(d[117],d[114]):0,d[118]="associated_multimodal_message_id",d[115]=d[81].get(d[118]),d[81],d[115]!==void 0?d[113].set(d[118],d[115]):0,d[119]="qpl_join_id",d[116]=d[81].get(d[119]),d[81],d[116]!==void 0?d[113].set(d[119],d[116]):0,d[112]=d[113]),d[59].set(d[106],d[112])),d[107]="ads_extras",d[83]=d[41].get(d[107]),d[41],d[83]?d[84]=!1:d[84]=!0,d[84]?0:(d[83]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[115]="context",d[114]=d[83].get(d[115]),d[83],d[114]!==void 0?d[113].set(d[115],d[114]):0,d[112]=d[113]),d[59].set(d[107],d[112])),d[108]="suggested_prompt_extras",d[85]=d[41].get(d[108]),d[41],d[85]?d[86]=!1:d[86]=!0,d[86]?0:(d[85]?d[111]=!1:d[111]=!0,d[111]?d[112]=void 0:(d[113]=new c.Map(),d[116]="prompt_type",d[114]=d[85].get(d[116]),d[85],d[114]!==void 0?d[113].set(d[116],d[114]):0,d[117]="qpl_join_id",d[115]=d[85].get(d[117]),d[85],d[115]!==void 0?d[113].set(d[117],d[115]):0,d[112]=d[113]),d[59].set(d[108],d[112])),d[109]="disable_server_mqtt_typing_indicator",d[87]=d[41].get(d[109]),d[41],d[87]!==void 0?d[59].set(d[109],d[87]):0,d[110]="enable_web_scraping",d[88]=d[41].get(d[110]),d[41],d[88]!==void 0?d[59].set(d[110],d[88]):0,d[58]=d[59]}]):c.sequence([function(a){return d[49]==="XMSGProductHighlightExtras"?c.resolve((d[60]=new c.Map(),d[63]="product_highlight_type",d[61]=d[41].get(d[63]),d[41],d[61]!==void 0?d[60].set(d[63],d[61]):0,d[64]="conversation_marker",d[62]=d[41].get(d[64]),d[41],d[62]!==void 0?d[60].set(d[64],d[62]):0,d[59]=d[60])):c.sequence([function(a){return d[49]==="XMSGMagicMessengerExtras"?c.resolve((d[61]=new c.Map(),d[63]="is_magic_thread",d[62]=d[41].get(d[63]),d[41],d[62]!==void 0?d[61].set(d[63],d[62]):0,d[60]=d[61])):c.sequence([function(a){return d[49]==="XMSGAdsAIExtras"?c.resolve((d[62]=new c.Map(),d[64]="context",d[63]=d[41].get(d[64]),d[41],d[63]!==void 0?d[62].set(d[64],d[63]):0,d[61]=d[62])):c.sequence([function(a){return d[49]==="XMSGBizappExtras"?c.resolve((d[63]=new c.Map(),d[66]="message_source",d[64]=d[41].get(d[66]),d[41],d[64]!==void 0?d[63].set(d[66],d[64]):0,d[67]="message_trigger",d[65]=d[41].get(d[67]),d[41],d[65]!==void 0?d[63].set(d[67],d[65]):0,d[62]=d[63])):c.sequence([function(a){return d[63]=new c.Map(),d[64]=d[41].keys(),d[65]=c.i64.of_int32(d[64].length),c.i64.gt(d[65],c.i64.cast([0,0]))?c.loopAsync(d[65],function(a){return d[66]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[64],d[66]).then(function(a){return a=a,d[67]=a[0],d[68]=a[1],a})},function(a){return d[69]=d[41].get(d[67]),d[41],d[63].set(d[67],d[69])}])}):c.resolve()},function(a){return d[62]=d[63]}])},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[50].set("__typename",d[49]),d[48]=d[50]}])},function(a){return d[39].set(d[46],d[48])}])},function(a){return d[43]=d[39].get("product_extras"),d[39],d[43]!==void 0?(d[47]=d[43].get("__typename"),d[43],d[47]==="XMSGClickToMessengerAdExtras"?(d[50]=new c.Map(),d[61]="encrypted_ads_token",d[51]=d[43].get(d[61]),d[43],d[51]!==void 0?d[50].set(d[61],d[51]):0,d[62]="product_type",d[52]=d[43].get(d[62]),d[43],d[52]!==void 0?d[50].set(d[62],d[52]):0,d[63]="post_id",d[53]=d[43].get(d[63]),d[43],d[53]!==void 0?d[50].set(d[63],d[53]):0,d[64]="ad_id",d[54]=d[43].get(d[64]),d[43],d[54]!==void 0?d[50].set(d[64],d[54]):0,d[65]="page_id",d[55]=d[43].get(d[65]),d[43],d[55]!==void 0?d[50].set(d[65],d[55]):0,d[66]="photo_id",d[56]=d[43].get(d[66]),d[43],d[56]!==void 0?d[50].set(d[66],d[56]):0,d[67]="photo_index",d[57]=d[43].get(d[67]),d[43],c.i64.neq(d[57],void 0)?d[50].set(d[67],d[57]):0,d[68]="fallback_url",d[58]=d[43].get(d[68]),d[43],d[58]!==void 0?d[50].set(d[68],d[58]):0,d[69]="product_id",d[59]=d[43].get(d[69]),d[43],d[59]!==void 0?d[50].set(d[69],d[59]):0,d[70]="user_id",d[60]=d[43].get(d[70]),d[43],d[60]!==void 0?d[50].set(d[70],d[60]):0,d[48]=d[50]):d[48]=void 0,d[48]!==void 0?(d[50]=d[48].get("page_id"),d[48],d[49]=d[50]):d[49]=void 0,d[44]=d[49]):d[44]=void 0,d[30]=d[44]}]):c.resolve(d[30]=void 0)},function(a){return d[31]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[33]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[33]).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[35]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[35]).then(function(a){return a=a,d[36]=a[0],a})},function(e){return d[30]!==void 0?d[37]=c.i64.from_string(d[30]):d[37]=d[32],a[8]!==void 0?c.sequence([function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[8]).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[39]=new c.Map(),d[44]="product_type",d[40]=d[38].get(d[44]),d[38],d[40]!==void 0?d[39].set(d[44],d[40]):0,d[45]="product_extras",d[41]=d[38].get(d[45]),d[38],d[41]?d[42]=!1:d[42]=!0,d[42]?c.resolve():c.sequence([function(a){return d[41]?d[46]=!1:d[46]=!0,d[46]?c.resolve(d[47]=void 0):c.sequence([function(a){return d[48]=d[41].get("__typename"),d[41],d[48]==="XMSGStoryReplyExtras"?c.resolve((d[50]=new c.Map(),d[53]="logging",d[51]=d[41].get(d[53]),d[41],d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[54]=!1:d[54]=!0,d[54]?d[55]=void 0:(d[56]=new c.Map(),d[64]="story_author_fbid",d[57]=d[51].get(d[64]),d[51],d[57]!==void 0?d[56].set(d[64],d[57]):0,d[65]="camera_post_type",d[58]=d[51].get(d[65]),d[51],d[58]!==void 0?d[56].set(d[65],d[58]):0,d[66]="story_type",d[59]=d[51].get(d[66]),d[51],d[59]!==void 0?d[56].set(d[66],d[59]):0,d[67]="post_source",d[60]=d[51].get(d[67]),d[51],d[60]!==void 0?d[56].set(d[67],d[60]):0,d[68]="fb_post_type",d[61]=d[51].get(d[68]),d[51],d[61]!==void 0?d[56].set(d[68],d[61]):0,d[69]="conversation_starter_type",d[62]=d[51].get(d[69]),d[51],d[62]!==void 0?d[56].set(d[69],d[62]):0,d[70]="story_reply_type",d[63]=d[51].get(d[70]),d[51],d[63]!==void 0?d[56].set(d[70],d[63]):0,d[55]=d[56]),d[50].set(d[53],d[55])),d[49]=d[50])):c.sequence([function(a){return d[48]==="XMSGMarketplaceExtras"?c.sequence([function(a){return d[51]=new c.Map(),d[70]="listing_id",d[52]=d[41].get(d[70]),d[41],d[52]!==void 0?d[51].set(d[70],d[52]):0,d[71]="initial_clicked_component",d[53]=d[41].get(d[71]),d[41],d[53]!==void 0?d[51].set(d[71],d[53]):0,d[72]="initial_tracking",d[54]=d[41].get(d[72]),d[41],d[54]!==void 0?d[51].set(d[72],d[54]):0,d[73]="referral_surface",d[55]=d[41].get(d[73]),d[41],d[55]!==void 0?d[51].set(d[73],d[55]):0,d[74]="referral_story_type",d[56]=d[41].get(d[74]),d[41],d[56]!==void 0?d[51].set(d[74],d[56]):0,d[75]="referral_ui_component",d[57]=d[41].get(d[75]),d[41],d[57]!==void 0?d[51].set(d[75],d[57]):0,d[76]="surface",d[58]=d[41].get(d[76]),d[41],d[58]!==void 0?d[51].set(d[76],d[58]):0,d[77]="tracking",d[59]=d[41].get(d[77]),d[41],d[59]!==void 0?d[51].set(d[77],d[59]):0,d[78]="ui_component",d[60]=d[41].get(d[78]),d[41],d[60]!==void 0?d[51].set(d[78],d[60]):0,d[79]="ad_id",d[61]=d[41].get(d[79]),d[41],d[61]!==void 0?d[51].set(d[79],d[61]):0,d[80]="server_session_id",d[62]=d[41].get(d[80]),d[41],d[62]!==void 0?d[51].set(d[80],d[62]):0,d[81]="cf_page_id",d[63]=d[41].get(d[81]),d[41],d[63]!==void 0?d[51].set(d[81],d[63]):0,d[82]="live_shopping_video_id",d[64]=d[41].get(d[82]),d[41],d[64]!==void 0?d[51].set(d[82],d[64]):0,d[83]="logging_id",d[65]=d[41].get(d[83]),d[41],c.i64.neq(d[65],void 0)?d[51].set(d[83],d[65]):0,d[84]="photo_ids",d[66]=d[41].get(d[84]),d[41],d[66]?d[67]=!1:d[67]=!0,d[67]?c.resolve():c.sequence([function(a){return d[87]=c.createArray(),d[88]=c.i64.of_int32(d[66].length),c.i64.gt(d[88],c.i64.cast([0,0]))?c.loopAsync(d[88],function(a){return d[89]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[66],d[89]).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[92]=(d[87].push(d[90]),d[87])}])}):c.resolve()},function(a){return d[51].set(d[84],d[87])}])},function(a){return d[85]="is_customized_message",d[68]=d[41].get(d[85]),d[41],d[68]!==void 0?d[51].set(d[85],d[68]):0,d[86]="referral_code",d[69]=d[41].get(d[86]),d[41],d[69]!==void 0?d[51].set(d[86],d[69]):0,d[50]=d[51]}]):c.sequence([function(a){return d[48]==="XMSGClickToMessengerAdExtras"?c.resolve((d[52]=new c.Map(),d[63]="encrypted_ads_token",d[53]=d[41].get(d[63]),d[41],d[53]!==void 0?d[52].set(d[63],d[53]):0,d[64]="product_type",d[54]=d[41].get(d[64]),d[41],d[54]!==void 0?d[52].set(d[64],d[54]):0,d[65]="post_id",d[55]=d[41].get(d[65]),d[41],d[55]!==void 0?d[52].set(d[65],d[55]):0,d[66]="ad_id",d[56]=d[41].get(d[66]),d[41],d[56]!==void 0?d[52].set(d[66],d[56]):0,d[67]="page_id",d[57]=d[41].get(d[67]),d[41],d[57]!==void 0?d[52].set(d[67],d[57]):0,d[68]="photo_id",d[58]=d[41].get(d[68]),d[41],d[58]!==void 0?d[52].set(d[68],d[58]):0,d[69]="photo_index",d[59]=d[41].get(d[69]),d[41],c.i64.neq(d[59],void 0)?d[52].set(d[69],d[59]):0,d[70]="fallback_url",d[60]=d[41].get(d[70]),d[41],d[60]!==void 0?d[52].set(d[70],d[60]):0,d[71]="product_id",d[61]=d[41].get(d[71]),d[41],d[61]!==void 0?d[52].set(d[71],d[61]):0,d[72]="user_id",d[62]=d[41].get(d[72]),d[41],d[62]!==void 0?d[52].set(d[72],d[62]):0,d[51]=d[52])):c.sequence([function(a){return d[48]==="XMSGZorroMessageExtras"?c.resolve((d[53]=new c.Map(),d[55]="is_enabled",d[54]=d[41].get(d[55]),d[41],d[54]!==void 0?d[53].set(d[55],d[54]):0,d[52]=d[53])):c.sequence([function(a){return d[48]==="XMSGGenAISuggestedPromptExtras"?c.resolve((d[54]=new c.Map(),d[57]="prompt_type",d[55]=d[41].get(d[57]),d[41],d[55]!==void 0?d[54].set(d[57],d[55]):0,d[58]="qpl_join_id",d[56]=d[41].get(d[58]),d[41],d[56]!==void 0?d[54].set(d[58],d[56]):0,d[53]=d[54])):c.sequence([function(a){return d[48]==="XMSGGenAIMultiModalExtras"?c.resolve((d[55]=new c.Map(),d[59]="should_skip_genai_eval",d[56]=d[41].get(d[59]),d[41],d[56]!==void 0?d[55].set(d[59],d[56]):0,d[60]="associated_multimodal_message_id",d[57]=d[41].get(d[60]),d[41],d[57]!==void 0?d[55].set(d[60],d[57]):0,d[61]="qpl_join_id",d[58]=d[41].get(d[61]),d[41],d[58]!==void 0?d[55].set(d[61],d[58]):0,d[54]=d[55])):c.sequence([function(a){return d[48]==="XMSGGenAIFlashImagineExtras"?c.resolve((d[56]=new c.Map(),d[59]="seed",d[57]=d[41].get(d[59]),d[41],c.i64.neq(d[57],void 0)?d[56].set(d[59],d[57]):0,d[60]="qpl_join_id",d[58]=d[41].get(d[60]),d[41],d[58]!==void 0?d[56].set(d[60],d[58]):0,d[55]=d[56])):c.sequence([function(a){return d[48]==="XMSGShareSheetExtras"?c.resolve((d[57]=new c.Map(),d[59]="recipient_selection_session_id",d[58]=d[41].get(d[59]),d[41],d[58]!==void 0?d[57].set(d[59],d[58]):0,d[56]=d[57])):c.sequence([function(a){return d[48]==="XMSGGenAIAssistantAPIExtras"?c.sequence([function(a){return d[58]=new c.Map(),d[88]="referrer_session_id",d[59]=d[41].get(d[88]),d[41],d[59]!==void 0?d[58].set(d[88],d[59]):0,d[89]="thread_session_id",d[60]=d[41].get(d[89]),d[41],d[60]!==void 0?d[58].set(d[89],d[60]):0,d[90]="prompt_id",d[61]=d[41].get(d[90]),d[41],d[61]!==void 0?d[58].set(d[90],d[61]):0,d[91]="prompt_type",d[62]=d[41].get(d[91]),d[41],d[62]!==void 0?d[58].set(d[91],d[62]):0,d[92]="prompt_fit_topic",d[63]=d[41].get(d[92]),d[41],d[63]!==void 0?d[58].set(d[92],d[63]):0,d[93]="location_extras",d[64]=d[41].get(d[93]),d[41],d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[116]="has_previous_perm_prompt",d[113]=d[64].get(d[116]),d[64],d[113]!==void 0?d[112].set(d[116],d[113]):0,d[117]="latitude",d[114]=d[64].get(d[117]),d[64],d[114]!==void 0?d[112].set(d[117],d[114]):0,d[118]="longitude",d[115]=d[64].get(d[118]),d[64],d[115]!==void 0?d[112].set(d[118],d[115]):0,d[111]=d[112]),d[58].set(d[93],d[111])),d[94]="qpl_join_id",d[66]=d[41].get(d[94]),d[41],d[66]!==void 0?d[58].set(d[94],d[66]):0,d[95]="meta_ai_prompt_type",d[67]=d[41].get(d[95]),d[41],d[67]!==void 0?d[58].set(d[95],d[67]):0,d[96]="is_subsequent_send",d[68]=d[41].get(d[96]),d[41],d[68]!==void 0?d[58].set(d[96],d[68]):0,d[97]="context_injection_type",d[69]=d[41].get(d[97]),d[41],d[69]!==void 0?d[58].set(d[97],d[69]):0,d[98]="context_injection_timestamp_ms",d[70]=d[41].get(d[98]),d[41],d[70]!==void 0?d[58].set(d[98],d[70]):0,d[99]="meta_ai_response_to_persist",d[71]=d[41].get(d[99]),d[41],d[71]?d[72]=!1:d[72]=!0,d[72]?c.resolve():c.sequence([function(a){return d[71]?d[110]=!1:d[110]=!0,d[110]?c.resolve(d[111]=void 0):c.sequence([function(a){return d[112]=new c.Map(),d[119]="text",d[113]=d[71].get(d[119]),d[71],d[113]!==void 0?d[112].set(d[119],d[113]):0,d[120]="bot_response_id",d[114]=d[71].get(d[120]),d[71],d[114]!==void 0?d[112].set(d[120],d[114]):0,d[121]="bot_request_id",d[115]=d[71].get(d[121]),d[71],d[115]!==void 0?d[112].set(d[121],d[115]):0,d[122]="external_search_params",d[116]=d[71].get(d[122]),d[71],d[116]?d[117]=!1:d[117]=!0,d[117]?c.resolve():c.sequence([function(a){return d[116]?d[124]=!1:d[124]=!0,d[124]?c.resolve(d[125]=void 0):c.sequence([function(a){return d[126]=new c.Map(),d[134]="search_result_uri",d[127]=d[116].get(d[134]),d[116],d[127]?d[128]=!1:d[128]=!0,d[128]?c.resolve():c.sequence([function(a){return d[127]?d[139]=!1:d[139]=!0,d[139]?c.resolve(d[140]=void 0):c.sequence([function(a){return d[141]=c.createArray(),d[142]=c.i64.of_int32(d[127].length),c.i64.gt(d[142],c.i64.cast([0,0]))?c.loopAsync(d[142],function(a){return d[143]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[127],d[143]).then(function(a){return a=a,d[144]=a[0],d[145]=a[1],a})},function(a){return d[146]=(d[141].push(d[144]),d[141])}])}):c.resolve()},function(a){return d[140]=d[141]}])},function(a){return d[126].set(d[134],d[140])}])},function(a){return d[135]="search_query",d[129]=d[116].get(d[135]),d[116],d[129]!==void 0?d[126].set(d[135],d[129]):0,d[136]="attribution_link",d[130]=d[116].get(d[136]),d[116],d[130]!==void 0?d[126].set(d[136],d[130]):0,d[137]="search_engine",d[131]=d[116].get(d[137]),d[116],d[131]!==void 0?d[126].set(d[137],d[131]):0,d[138]="references_title",d[132]=d[116].get(d[138]),d[116],d[132]?d[133]=!1:d[133]=!0,d[133]?c.resolve():c.sequence([function(a){return d[132]?d[139]=!1:d[139]=!0,d[139]?c.resolve(d[140]=void 0):c.sequence([function(a){return d[141]=c.createArray(),d[142]=c.i64.of_int32(d[132].length),c.i64.gt(d[142],c.i64.cast([0,0]))?c.loopAsync(d[142],function(a){return d[143]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[132],d[143]).then(function(a){return a=a,d[144]=a[0],d[145]=a[1],a})},function(a){return d[146]=(d[141].push(d[144]),d[141])}])}):c.resolve()},function(a){return d[140]=d[141]}])},function(a){return d[126].set(d[138],d[140])}])},function(a){return d[125]=d[126]}])},function(a){return d[112].set(d[122],d[125])}])},function(a){return d[123]="followup_prompt_text",d[118]=d[71].get(d[123]),d[71],d[118]!==void 0?d[112].set(d[123],d[118]):0,d[111]=d[112]}])},function(a){return d[58].set(d[99],d[111])}])},function(a){return d[100]="gql_dark_test_qpl_join_id",d[73]=d[41].get(d[100]),d[41],d[73]!==void 0?d[58].set(d[100],d[73]):0,d[101]="gql_dark_test_client_start_time",d[74]=d[41].get(d[101]),d[41],d[74]!==void 0?d[58].set(d[101],d[74]):0,d[102]="prompt_context",d[75]=d[41].get(d[102]),d[41],d[75]?d[76]=!1:d[76]=!0,d[76]?0:(d[75]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[115]="context_token",d[113]=d[75].get(d[115]),d[75],d[113]!==void 0?d[112].set(d[115],d[113]):0,d[116]="context_token_type",d[114]=d[75].get(d[116]),d[75],c.i64.neq(d[114],void 0)?d[112].set(d[116],d[114]):0,d[111]=d[112]),d[58].set(d[102],d[111])),d[103]="imagine_flash_extras",d[77]=d[41].get(d[103]),d[41],d[77]?d[78]=!1:d[78]=!0,d[78]?0:(d[77]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[115]="seed",d[113]=d[77].get(d[115]),d[77],c.i64.neq(d[113],void 0)?d[112].set(d[115],d[113]):0,d[116]="qpl_join_id",d[114]=d[77].get(d[116]),d[77],d[114]!==void 0?d[112].set(d[116],d[114]):0,d[111]=d[112]),d[58].set(d[103],d[111])),d[104]="conversation_marker_id",d[79]=d[41].get(d[104]),d[41],d[79]!==void 0?d[58].set(d[104],d[79]):0,d[105]="multi_modal_extras",d[80]=d[41].get(d[105]),d[41],d[80]?d[81]=!1:d[81]=!0,d[81]?0:(d[80]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[116]="should_skip_genai_eval",d[113]=d[80].get(d[116]),d[80],d[113]!==void 0?d[112].set(d[116],d[113]):0,d[117]="associated_multimodal_message_id",d[114]=d[80].get(d[117]),d[80],d[114]!==void 0?d[112].set(d[117],d[114]):0,d[118]="qpl_join_id",d[115]=d[80].get(d[118]),d[80],d[115]!==void 0?d[112].set(d[118],d[115]):0,d[111]=d[112]),d[58].set(d[105],d[111])),d[106]="ads_extras",d[82]=d[41].get(d[106]),d[41],d[82]?d[83]=!1:d[83]=!0,d[83]?0:(d[82]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[114]="context",d[113]=d[82].get(d[114]),d[82],d[113]!==void 0?d[112].set(d[114],d[113]):0,d[111]=d[112]),d[58].set(d[106],d[111])),d[107]="suggested_prompt_extras",d[84]=d[41].get(d[107]),d[41],d[84]?d[85]=!1:d[85]=!0,d[85]?0:(d[84]?d[110]=!1:d[110]=!0,d[110]?d[111]=void 0:(d[112]=new c.Map(),d[115]="prompt_type",d[113]=d[84].get(d[115]),d[84],d[113]!==void 0?d[112].set(d[115],d[113]):0,d[116]="qpl_join_id",d[114]=d[84].get(d[116]),d[84],d[114]!==void 0?d[112].set(d[116],d[114]):0,d[111]=d[112]),d[58].set(d[107],d[111])),d[108]="disable_server_mqtt_typing_indicator",d[86]=d[41].get(d[108]),d[41],d[86]!==void 0?d[58].set(d[108],d[86]):0,d[109]="enable_web_scraping",d[87]=d[41].get(d[109]),d[41],d[87]!==void 0?d[58].set(d[109],d[87]):0,d[57]=d[58]}]):c.sequence([function(a){return d[48]==="XMSGProductHighlightExtras"?c.resolve((d[59]=new c.Map(),d[62]="product_highlight_type",d[60]=d[41].get(d[62]),d[41],d[60]!==void 0?d[59].set(d[62],d[60]):0,d[63]="conversation_marker",d[61]=d[41].get(d[63]),d[41],d[61]!==void 0?d[59].set(d[63],d[61]):0,d[58]=d[59])):c.sequence([function(a){return d[48]==="XMSGMagicMessengerExtras"?c.resolve((d[60]=new c.Map(),d[62]="is_magic_thread",d[61]=d[41].get(d[62]),d[41],d[61]!==void 0?d[60].set(d[62],d[61]):0,d[59]=d[60])):c.sequence([function(a){return d[48]==="XMSGAdsAIExtras"?c.resolve((d[61]=new c.Map(),d[63]="context",d[62]=d[41].get(d[63]),d[41],d[62]!==void 0?d[61].set(d[63],d[62]):0,d[60]=d[61])):c.sequence([function(a){return d[48]==="XMSGBizappExtras"?c.resolve((d[62]=new c.Map(),d[65]="message_source",d[63]=d[41].get(d[65]),d[41],d[63]!==void 0?d[62].set(d[65],d[63]):0,d[66]="message_trigger",d[64]=d[41].get(d[66]),d[41],d[64]!==void 0?d[62].set(d[66],d[64]):0,d[61]=d[62])):c.sequence([function(a){return d[62]=new c.Map(),d[63]=d[41].keys(),d[64]=c.i64.of_int32(d[63].length),c.i64.gt(d[64],c.i64.cast([0,0]))?c.loopAsync(d[64],function(a){return d[65]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[63],d[65]).then(function(a){return a=a,d[66]=a[0],d[67]=a[1],a})},function(a){return d[68]=d[41].get(d[66]),d[41],d[62].set(d[66],d[68])}])}):c.resolve()},function(a){return d[61]=d[62]}])},function(a){return d[60]=d[61]}])},function(a){return d[59]=d[60]}])},function(a){return d[58]=d[59]}])},function(a){return d[57]=d[58]}])},function(a){return d[56]=d[57]}])},function(a){return d[55]=d[56]}])},function(a){return d[54]=d[55]}])},function(a){return d[53]=d[54]}])},function(a){return d[52]=d[53]}])},function(a){return d[51]=d[52]}])},function(a){return d[50]=d[51]}])},function(a){return d[49]=d[50]}])},function(a){return d[49].set("__typename",d[48]),d[47]=d[49]}])},function(a){return d[39].set(d[45],d[47])}])},function(a){return d[43]=d[39].get("product_extras"),d[39],d[43]!==void 0?(d[46]=d[43].get("__typename"),d[43],d[46]==="XMSGClickToMessengerAdExtras"?(d[48]=new c.Map(),d[59]="encrypted_ads_token",d[49]=d[43].get(d[59]),d[43],d[49]!==void 0?d[48].set(d[59],d[49]):0,d[60]="product_type",d[50]=d[43].get(d[60]),d[43],d[50]!==void 0?d[48].set(d[60],d[50]):0,d[61]="post_id",d[51]=d[43].get(d[61]),d[43],d[51]!==void 0?d[48].set(d[61],d[51]):0,d[62]="ad_id",d[52]=d[43].get(d[62]),d[43],d[52]!==void 0?d[48].set(d[62],d[52]):0,d[63]="page_id",d[53]=d[43].get(d[63]),d[43],d[53]!==void 0?d[48].set(d[63],d[53]):0,d[64]="photo_id",d[54]=d[43].get(d[64]),d[43],d[54]!==void 0?d[48].set(d[64],d[54]):0,d[65]="photo_index",d[55]=d[43].get(d[65]),d[43],c.i64.neq(d[55],void 0)?d[48].set(d[65],d[55]):0,d[66]="fallback_url",d[56]=d[43].get(d[66]),d[43],d[56]!==void 0?d[48].set(d[66],d[56]):0,d[67]="product_id",d[57]=d[43].get(d[67]),d[43],d[57]!==void 0?d[48].set(d[67],d[57]):0,d[68]="user_id",d[58]=d[43].get(d[68]),d[43],d[58]!==void 0?d[48].set(d[68],d[58]):0,d[47]=d[48]):d[47]=void 0,d[47]!==void 0?(d[48]=new c.Map(),d[48].set("product_extras",d[47]),d[48].set("client_thread_key",d[37]),d[48].set("offline_threading_id",c.i64.to_string(d[34])),d[48].set("admin_text_otid",c.i64.to_string(d[36])),d[49]=d[48].get("client_thread_key"),d[48],d[50]=c.toJSON(d[48]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[49]),c.i64.cast([0,1020]),d[50],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()):c.resolve()}]):c.resolve()}]):c.resolve()},function(e){return c.i64.eq(d[24],c.i64.cast([0,20]))&&!1&&!1?c.sequence([function(e){return c.storedProcedure(b("LSCreateGroupThreadWithAdminText"),d[14],void 0,a[2],void 0).then(function(a){return a=a,d[30]=a[0],a})},function(a){return a=[d[30],c.i64.cast([0,80])],d[28]=a[0],d[29]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[1],c.i64.cast([0,5]))?c.sequence([function(e){return c.storedProcedure(b("LSVerifyThreadRowExistsV2"),d[22],a[1],c.i64.cast([0,1]),c.i64.cast([0,20]))},function(a){return d[30]=c.i64.cast([0,20])}]):c.sequence([function(e){return c.i64.eq(d[24],c.i64.cast([0,80]))&&!1&&!1?d[31]=d[24]:d[31]=c.i64.cast([0,40]),c.storedProcedure(b("LSVerifyThreadRowExists"),d[22],a[1],c.i64.cast([0,1]))},function(a){return d[30]=d[31]}])},function(a){return a=[d[22],d[30]],d[28]=a[0],d[29]=a[1],a}])},function(a){return a=[d[28],d[29]],d[26]=a[0],d[27]=a[1],a}]):c.sequence([function(e){return d[36]=c.i64.of_int32(a[6].length),c.i64.gt(d[36],c.i64.cast([0,0]))?c.loopAsync(d[36],function(e){return d[37]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[6],d[37]).then(function(a){return a=a,d[38]=a[0],d[39]=a[1],a})},function(a){return d[40]=d[38].get("contact_id"),d[38],d[41]=d[38].get("contact_type"),d[38],d[42]=d[38].get("contact_name"),d[38],d[43]=d[38].get("contact_profile_photo"),d[38],c.storedProcedure(b("LSVerifyContactRowExists"),d[40],c.i64.cast([0,0]),d[43],d[42],d[41],void 0,void 0,void 0,void 0,!1,!1,c.i64.cast([0,0]),void 0,!1,c.i64.cast([0,20]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),c.i64.cast([0,0]),void 0,void 0)}])}):c.resolve()},function(e){return void 0?d[28]=!1:d[28]=!0,d[28]?(e=["",void 0,void 0,void 0,void 0],d[29]=e[0],d[30]=e[1],d[31]=e[2],d[32]=e[3],d[33]=e[4],e):(d[36]=(void 0).get("nullstate_description_text1"),void 0,d[36]!==void 0?d[37]=d[36]:d[37]="",d[38]=(void 0).get("nullstate_description_text2"),void 0,d[39]=(void 0).get("nullstate_description_text3"),void 0,d[40]=(void 0).get("nullstate_description_text4"),void 0,d[41]=(void 0).get("nullstate_description_text5"),void 0,e=[d[37],d[38],d[39],d[40],d[41]],d[29]=e[0],d[30]=e[1],d[31]=e[2],d[32]=e[3],d[33]=e[4],e),c.sequence([function(e){return d[36]=new c.Map(),d[36].set("nullstate_description_text1",d[29]),d[36].set("nullstate_description_text2",d[30]),d[36].set("nullstate_description_text3",d[31]),d[36].set("nullstate_description_text4",d[32]),d[36].set("nullstate_description_text5",d[33]),c.storedProcedure(b("LSLocalCreateOptimisticGroupThread"),d[14],"",a[2],!0,a[8]).then(function(a){return a=a,d[37]=a[0],a})},function(a){return c.storedProcedure(b("LSInsertNewMessageRange"),d[37],c.i64.cast([0,0]),c.i64.cast([2328,1316134911]),"","",c.i64.cast([0,0]),c.i64.cast([0,0]),!1,!1,void 0)},function(a){return a=[d[37],void 0],d[34]=a[0],d[35]=a[1],a}])},function(a){return a=[d[34],d[35]],d[26]=a[0],d[27]=a[1],a}])},function(a){return a=[d[26],d[27]],d[12]=a[0],d[13]=a[1],a}]):c.sequence([function(e){return c.i64.eq(a[1],c.i64.cast([0,19]))?c.sequence([function(e){return d[16]=new c.Map(),d[16].set("thread_fbid",a[0]),d[16].set("force_upsert",!1),d[16].set("use_open_messenger_transport",!1),d[16].set("sync_group",c.i64.cast([0,104])),d[16].set("metadata_only",!1),d[16].set("preview_only",!0),d[17]=d[16].get("thread_fbid"),d[16],d[18]=c.toJSON(d[16]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[17]),c.i64.cast([0,209]),d[18],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return b=[a[0],void 0],d[14]=b[0],d[15]=b[1],b}]):c.sequence([function(d){return c.i64.eq(a[1],c.i64.cast([0,5]))?c.storedProcedure(b("LSVerifyThreadRowExistsV2"),a[0],a[1],c.i64.cast([0,1]),c.i64.cast([0,20])):c.storedProcedure(b("LSVerifyThreadRowExists"),a[0],a[1],c.i64.cast([0,1]))},function(e){return c.i64.lt(d[5],c.i64.cast([0,60]))?c.storedProcedure(b("LSInsertNewMessageRange"),a[0],c.i64.cast([0,0]),c.i64.cast([2328,1316134911]),"","",c.i64.cast([0,0]),c.i64.cast([0,0]),!1,!1,void 0):c.resolve()},function(b){return b=[a[0],void 0],d[14]=b[0],d[15]=b[1],b}])},function(a){return a=[d[14],d[15]],d[12]=a[0],d[13]=a[1],a}])},function(a){return a=[d[12],d[13]],d[7]=a[0],d[8]=a[1],a}])},function(e){return c.i64.eq(d[8]==null?d[5]:d[8],c.i64.cast([0,20]))?c.sequence([function(e){return c.i64.neq(a[4],void 0)?c.resolve(d[12]=a[4]):c.sequence([function(a){return c.storedProcedure(b("LSComputeOptimisticThreadCapabilities"),d[7]).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[12]=d[13]}])},function(a){return c.forEach(c.db.table(9).fetch([[[d[7]]]]),function(a){var b=a.update;a.item;return b({capabilities:d[12]})})}]):c.resolve()},function(a){return c.db.table(9).fetch([[[d[7]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[d[7],c.i64.cast([0,0])],d[9]=e[0],d[10]=e[1],e):(b=a.item,b.isDisappearingMode?(e=[b.disappearingThreadKey,c.i64.cast([0,1024])],d[12]=e[0],d[13]=e[1],e):(a=[d[7],b.mailboxType],d[12]=a[0],d[13]=a[1],a),e=[d[12],d[13]],d[9]=e[0],d[10]=e[1],e)})},function(a){return a=[d[9],d[10]],d[1]=a[0],d[2]=a[1],a}])},function(a){return a=[d[1],d[2]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyThreadViewStoredProcedure";a.__tables__=["threads","participants"];e.exports=a}),null);
__d("LSVerifyThreadViewStoredProcedure",["LSSynchronousPromise","LSVerifyThreadView","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSVerifyThreadView")(e.threadKey,e.threadType,e.threadName,e.threadPictureUrl,e.threadCapabilities,e.messageId,e.contacts,e.mailboxType,e.threadMetadata,e.enableCcThreadMetadataFix,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MAWMiActLoadExistingThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWMiActBulkCreateThreadInActWithMiData","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Running verify thread exists sproc for state "," threadKey: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Retry ACT thread creation for threadKey: ",""]);k=function(){return a};return a}function l(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite",void 0,void 0,f.id+":34")}function m(a,b){var e=c("qex")._("1384")===!0;return e?d("MAWMiActBulkCreateThreadInActWithMiData").miActBulkCreateThreadInActWithMiData([{description:b,fbid:a.serverThreadKey,isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType),jid:a.jidInt64,lastActivityTimestampMs:a.thread.lastActivityTimestampMs,lastReadWatermarkTimestampMs:a.thread.lastReadWatermarkTimestampMs}],"load_existing_thread").then(c("emptyFunction")):d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData({description:b,fbid:a.serverThreadKey,isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType),jid:a.jidInt64,lastActivityTimestampMs:a.thread.lastActivityTimestampMs,lastReadWatermarkTimestampMs:a.thread.lastReadWatermarkTimestampMs}).then(c("emptyFunction"))}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,"loadExistingThread"));switch(f.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(b)));return m(f,e);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:c("promiseDone")(d("WALoggerDeferred").LOG(j(),f.type,(i||(i=d("I64"))).to_string(b)));return l(a,b);default:f.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",f.type)}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("MAWStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return h._("__JHASH__UWjxpCaN-z9__JHASH__")};b=function(){return h._("__JHASH__V3HCCnNPCO3__JHASH__")};g.MAW_MISSED_CALL_STRING=a;g.MAW_OPTIMISTIC_SNIPPET=b}),226);
__d("withCometPlaceholder",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");a=function(a,b,d){b===void 0&&(b=null);return function(e){return i.jsx(c("CometPlaceholder.react"),{fallback:b,name:d,children:i.jsx(a,babelHelpers["extends"]({},e))})}};g.withCometPlaceholder=a}),98);
__d("MWPPresenceBadge.react",["fbt","BaseStyledBadge.react","MessengerMSplitFlag","react","react-compiler-runtime","withCometPlaceholder"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");b=d("withCometPlaceholder").withCometPlaceholder(a,null,"MWPPresenceBadge");var k={border:{borderTopColor:"x6zyg47",borderEndColor:"x1xm1mqw",borderBottomColor:"xpn8fn3",borderStartColor:"xtct9fg",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(4),e=a.borderThemeColor,f=a.isActiveStatePresence;a=a.size;if(b[0]!==e||b[1]!==f||b[2]!==a){var g;g=!c("MessengerMSplitFlag").is_msplit_account&&f?j.jsx(c("BaseStyledBadge.react"),{accessibilityText:h._("__JHASH__KJ9BpmLEozf__JHASH__"),border:!0,colorXStyle:k.green,size:a,xstyle:(g=e)!=null?g:k.border}):null;b[0]=e;b[1]=f;b[2]=a;b[3]=g}else g=b[3];return g}g["default"]=b}),226);
__d("MWPReQLPresenceBadge.react",["MWPPresenceBadge.react","cr:10679","react","react-compiler-runtime","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");e=d("withCometPlaceholder").withCometPlaceholder(a,null,"MWPReQLPresenceBadge");function a(a){var e=d("react-compiler-runtime").c(4),f=a.borderThemeColor,g=a.size;a=a.threadKey;a=b("cr:10679")(a);var h;e[0]!==f||e[1]!==a||e[2]!==g?(h=i.jsx(c("MWPPresenceBadge.react"),{borderThemeColor:f,isActiveStatePresence:a,size:g}),e[0]=f,e[1]=a,e[2]=g,e[3]=h):h=e[3];return h}g["default"]=e}),98);
__d("MWFacepileBadge.react",["CometPlaceholder.react","MWPReQLPresenceBadge.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.borderThemeColor,f=a.size;a=a.threadKey;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWFacepileBadge",children:i.jsx(c("MWPReQLPresenceBadge.react"),{borderThemeColor:e,size:f,threadKey:a})}),b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];return g}g["default"]=a}),98);
__d("getMWLSThreadEventTimeSnippetForDisplay",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){switch(a){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return""}}function k(a){a=a.split(":");var b=a.slice(0,2).join(":");a=a[2].slice(2,5);return b+a}function a(a,b){var c=Date.now();a=a!=null?(i||(i=d("I64"))).to_float(a):0;b=b!=null?(i||(i=d("I64"))).to_float(b):a*2;var e=new Date(a),f=a-6048e5,g=a-864e5,l=c<=f;g=c<=a&&c>=g;f=c<=a&&c>=f&&!g;a=c>=a&&c<=b;c=e.toDateString();b=k(e.toLocaleTimeString());c=c.split(" ");e=e.getDay();var m=new Date();m=m.getDate();if(l)return h._("__JHASH__cS8t2sI0Htu__JHASH__",[h._param("month",c[2]),h._param("day",c[1]),h._param("time",b)]).toString();if(f)return h._("__JHASH__ny3UpSYZ8bI__JHASH__",[h._param("day of week",j(e)),h._param("time",b)]).toString();if(g)return m!==e?h._("__JHASH__USFKplv1Ozv__JHASH__",[h._param("time",b)]).toString():h._("__JHASH__3T2JoQLM2nn__JHASH__",[h._param("time",b)]).toString();return a?h._("__JHASH__2gXijGJL5uw__JHASH__").toString():h._("__JHASH__J5Yn1Tsi1-V__JHASH__").toString()}g["default"]=a}),226);
__d("useStringWithSubstitutions",["fbt","CometLruCache","CurrentMessengerUser","Env","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSVerifyContactRowExistsStoredProcedure","Promise","ReQL","ReQLSuspense","gkx","nullthrows","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||d("react"),o=n.useEffect,p=n.useMemo;n=Boolean((k||(k=c("Env"))).isMessengerDotComOnComet)?"Messenger":c("gkx")("22979")?"Instagram":"Facebook";var q=h._("__JHASH__9kaBCOd2SjE__JHASH__",[h._param("Platform Name",n)]).toString(),r=/(\$?)\$([a-zA-Z_]+)(?:\((.*?)\))?/g,s=/()(@)(?:(\d*?)@msgr)/g,t=d("CometLruCache").create(100);function u(a,e){var f=(l||(l=d("I64"))).to_string(e);if(t.has(f))return(i||(i=b("Promise"))).resolve();t.set(f,!0);return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:l.of_int32(c("LSAuthorityLevel").OPTIMISTIC),blockedByViewerStatus:l.of_int32(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:l.of_int32(c("LSContactIdType").FBID),contactType:l.of_int32(c("LSContactType").USER),contactViewerRelationship:l.of_int32(c("LSContactViewerRelationship").UNKNOWN),gender:l.of_int32(c("LSContactGender").UNKNOWN),id:e,isBlocked:!1,isMemorialized:!1,isSelf:e===d("CurrentMessengerUser").getID(),workForeignEntityType:l.of_int32(c("LSContactWorkForeignEntityType").UNKNOWN)})}function v(a,b){var c=0,d=a.length-1;while(c<=d){var e=c+d>>1;a[e][0]<b?c=e+1:d=e-1}return d}function w(a,b,c,d){var e=[[-1,0]];a=a.replace(c,function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),f=1;f<b;f++)c[f-1]=arguments[f];var g=c[c.length-2],h=d.apply(void 0,[a].concat(c));if(h.length===a.length)return h;e.push([g,a.length-h.length+e[e.length-1][1]]);return h});if(e.length===1)return{textWithSubstitutions:a,updatedRanges:b};c=[];for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;var i=v(e,h.offset);c.push(babelHelpers["extends"]({},h,{length:h.length-(e[i+1]!=null&&e[i+1][0]<=h.offset+h.length?e[i+1][1]-e[i][1]:0),offset:h.offset-e[i][1]}))}return{textWithSubstitutions:a,updatedRanges:c}}var x={CONTACT_FIRST_NAME:[function(a){return function(b){return d("ReQL").fromTableAscending(a.tables.contacts,["name","firstName","id"]).getKeyRange(b).map(function(a){var b=a.firstName;a=a.name;return(b=b)!=null?b:a})}},function(a){return q},u],CONTACT_FULL_NAME:[function(a){return function(b){return d("ReQL").fromTableAscending(a.tables.contacts,["name"]).getKeyRange(b).map(function(a){a=a.name;return a})}},function(a){return q},u],PARTICIPANT_FIRST_NAME:[function(a){return function(b,c){var e=c.threadKey;return d("ReQL").fromTableAscending(a.tables.contacts,["name","firstName","id"]).getKeyRange(b).map(function(b){var c=b.firstName,g=b.id;b=b.name;g=e==null?null:d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.participants,["nickname"]).getKeyRange(e,g),f.id+":186");return(g=(g=g==null?void 0:g.nickname)!=null?g:c)!=null?g:b})}},function(a){return q},u],PARTICIPANT_FULL_NAME:[function(a){return function(b,c){var e=c.threadKey;return d("ReQL").fromTableAscending(a.tables.contacts,["name","id"]).getKeyRange(b).map(function(b){var c=b.id;b=b.name;c=e==null?null:d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.participants,["nickname"]).getKeyRange(e,c),f.id+":205");return(c=c==null?void 0:c.nickname)!=null?c:b})}},function(a){return q},u]};function y(a,e,g,h,k,m){var n=(j||(j=c("useReStore")))(),q=d("Int64Hooks").useMemoInt64(function(){return{threadKey:g}},[g]),r=p(function(){var b,e=[],f=0;if(a!=null){h.lastIndex=0;while((b=h.exec(a))!==null){b=c("nullthrows")(b);b[0];var g=b[1],i=b[2],j=b[3];g||(function(){var a=(l||(l=d("I64"))).of_string_opt(j);if(a==null||j==="0")m&&c("FBLogger")("messenger_e2ee_web").mustfix("Invalid user id for substitution key %s: %s",i,j);else{var b=f,g=k[i];g!=null&&(e.push([g[0](n)(a,q).take(1).map(function(a){return[b,a]}),function(b){return g[2](b,a)}]),f++)}})()}}return e},[q,n,a,h,k]),s=d("ReQLSuspense").useArray(function(){return r.length?r.length===1?r[0][0]:d("ReQL").union.apply(void 0,r.map(function(a){return a[0]})):d("ReQL").empty()},[r],f.id+":281"),t=p(function(){return new Map(s)},[s]);o(function(){var a=r.map(function(a,b){a[0];a=a[1];return t.has(b)?null:a}).filter(Boolean);a.length&&c("promiseDone")(n.runInTransaction(function(c){return(i||(i=b("Promise"))).all(a.map(function(a){return a(c)}))},"readwrite",void 0,void 0,f.id+":308"))},[n,r,t]);return p(function(){if(a==null)return null;var b=0;return w(a,e,h,function(a,c,e,f){var g=k[e];return c||g==null||(l||(l=d("I64"))).of_string_opt(f)==null?a:t.get(b++)||k[e][1](f)})},[a,e,h,t,k])}function a(a,b){return(a=y(a,[],b,r,x,!0))==null?void 0:(b=a.textWithSubstitutions)==null?void 0:b.replace==null?void 0:b.replace(/\$\$/g,"$$")}function e(a,b,c){var e=d("react-compiler-runtime").c(2),f;e[0]!==c?(f={"@":[function(a){return function(b){return c.has((l||(l=d("I64"))).to_string(b))?d("ReQL").fromTableAscending(a.tables.contacts,["name"]).getKeyRange(b).map(z):d("ReQL").empty()}},function(a){return c.has(a)?"@"+q:"@"+a+"@msgr"},u]},e[0]=c,e[1]=f):f=e[1];e=f;f=e;return y(a,b,void 0,s,f,!1)}function z(a){a=a.name;return"@"+a}g.useStringWithSubstitutions=a;g.useStringWithMentionSubstitutionsAndUpdatedRanges=e}),226);
__d("MWThreadSnippetForDisplay.react",["CometTextWithEntities.react","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatTextTransform","MWGroupBlockingProtectionUtils","ReStoreVaulting","ThreadStatus","cr:4217","getMWLSThreadEventTimeSnippetForDisplay","react","react-compiler-runtime","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){return null}var k=(b=b("cr:4217"))!=null?b:a;function e(a){var b=d("react-compiler-runtime").c(8),e=a.snippetRaw;a=a.thread;var f=d("MWCMThreadTypes.react").isUnjoinedCMThread(a.threadType),g=k(a),h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType);if(b[0]!==g||b[1]!==e){var l;l=e==null?null:(l=g)!=null?l:((l=d("ReStoreVaulting").maybeUnvault(e))!=null?l:e).replace(/\uDB80\uDC00/,"(Y)");b[0]=g;b[1]=e;b[2]=l}else l=b[2];g=l;e=d("MWGroupBlockingProtectionUtils").useMWGetSnippetForBlockingProtection(a.threadKey,a.threadType);h=(l=d("useStringWithSubstitutions").useStringWithSubstitutions(h?g:null,a.threadKey))!=null?l:g;if(h==null)return null;l=a.threadStatus!=null&&(i||(i=d("I64"))).equal(a.threadStatus,(i||(i=d("I64"))).of_int32(c("ThreadStatus").PAUSED));if(f&&!l&&a.eventStartTimestampMs!=null){b[3]!==a.eventEndTimestampMs||b[4]!==a.eventStartTimestampMs?(g=c("getMWLSThreadEventTimeSnippetForDisplay")(a.eventStartTimestampMs,a.eventEndTimestampMs),b[3]=a.eventEndTimestampMs,b[4]=a.eventStartTimestampMs,b[5]=g):g=b[5];return g}if(e!=null)return e;b[6]!==h?(f=j.jsx(c("CometTextWithEntities.react"),{text:h,transforms:d("MWChatTextTransform").textTransforms}),b[6]=h,b[7]=f):f=b[7];return f}var l=j.memo(e);function f(a){var b=d("react-compiler-runtime").c(4),c=a.snippetRaw;a=a.thread;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=["threadKey","threadType","threadStatus","eventStartTimestampMs","eventEndTimestampMs"],b[0]=e):e=b[0];a=d("Int64Hooks").usePickInt64(a,e);b[1]!==c||b[2]!==a?(e=j.jsx(l,{snippetRaw:c,thread:a}),b[1]=c,b[2]=a,b[3]=e):e=b[3];return e}g["default"]=f}),98);
__d("verifyChatTabContactExists",["LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyContactRowExistsStoredProcedure","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=a.db,g=a.threadKey;a=a.threadType;if(d("LSMessagingThreadTypeUtil").isOpenOneToOne(a))return e.runInTransaction(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:i.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:i.ofNumber(c("LSContactIdType").FBID),contactType:i.ofNumber(c("LSContactType").USER),contactViewerRelationship:i.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:i.ofNumber(c("LSContactGender").UNKNOWN),id:g,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:i.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})},"readwrite",void 0,void 0,f.id+":40");else return(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("verifyChatTabThreadExists",["I64","LSFactory","LSIntEnum","LSMailboxType","LSMessagingThreadTypeUtil","LSVec","LSVerifyThreadRowExistsStoredProcedure","LSVerifyThreadViewStoredProcedure","ReQL","asyncToGeneratorRuntime","cr:8531","useIsChatPreviewsEnabled","verifyChatTabContactExists"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.db,g=a.threadKey,j=a.threadType;yield c("verifyChatTabContactExists")({db:e,threadKey:g,threadType:j});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(g)));var k=a==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.community_folders).getKeyRange(a.parentThreadKey));if(b("cr:8531")!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(j)&&((a==null?void 0:a.clientThreadKey)==null||!(h||(h=d("I64"))).equal(g,a.clientThreadKey)))return b("cr:8531")(e,g,"verifyChatTabThreadExists");a=a==null?!1:d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,k==null?void 0:k.communityType);if(a)return e.runInTransaction(function(a){return c("LSVerifyThreadViewStoredProcedure")(c("LSFactory")(a),{contacts:c("LSVec").ofArray([]),mailboxType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),threadKey:g,threadType:j})},"readwrite",void 0,void 0,f.id+":74").then(function(){});else return e.runInTransaction(function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(i||(i=d("LSIntEnum"))).ofNumber(1),threadKey:g,threadType:j})},"readwrite",void 0,void 0,f.id+":87")});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MWV2EnsureThatChatTabExists",["I64","Int64Hooks","LSMessagingThreadTypeUtil","Promise","promiseDone","react-compiler-runtime","useReStore","verifyChatTabThreadExists"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,d,e,f){return l(d,e,f)?(j||(j=b("Promise"))).resolve():c("verifyChatTabThreadExists")({db:a,threadKey:d,threadType:e})}function a(a,b,e){var f=d("react-compiler-runtime").c(6),g=(i||(i=c("useReStore")))(),h,j;f[0]!==e||f[1]!==g||f[2]!==a||f[3]!==b?(h=function(){c("promiseDone")(k(g,a,b,e))},j=[e,g,a,b],f[0]=e,f[1]=g,f[2]=a,f[3]=b,f[4]=h,f[5]=j):(h=f[4],j=f[5]);d("Int64Hooks").useEffectInt64(h,j)}function l(a,b,c){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)&&c!=null&&(h||(h=d("I64"))).equal(a,c)}g.ensureThatChatTabExists=k;g.useMWV2EnsureThatChatTabExists=a;g.isOptimisticSecureThread=l}),98);
__d("useGetContactsToShow",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","getLSMediaContactProfilePictureUrl","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=d("react-compiler-runtime").c(30),g;f[0]!==e?(g=function(a){return a.filter(function(a){return!(h||(h=d("I64"))).equal(a.id,e)})},f[0]=e,f[1]=g):g=f[1];g=g;var k=b.length,l,m,n;if(f[2]!==e||f[3]!==b||f[4]!==g||f[5]!==k||f[6]!==a.threadType){var o=[];l=[];if(k!==0){var p=b[0],q=b[1];l=g(b.filter(Boolean).filter(j));bb0:switch(k){case 1:p!=null&&c("getLSMediaContactProfilePictureUrl")(p)!==""&&(o=[p]);break bb0;case 2:d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&l.length===1&&c("getLSMediaContactProfilePictureUrl")(l[0])!==""?o=[l[0]]:d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&p!=null&&q!=null&&c("getLSMediaContactProfilePictureUrl")(p)!==""&&c("getLSMediaContactProfilePictureUrl")(q)!==""&&(o=[p,q]);break bb0;default:l.length>=2&&(o=l)}}m=d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&l.length===0;if(f[11]!==e||f[12]!==b){f[14]!==e?(p=function(a){return a!=null&&(h||(h=d("I64"))).equal(a.id,e)},f[14]=e,f[15]=p):p=f[15];q=b.find(p);f[11]=e;f[12]=b;f[13]=q}else q=f[13];n=q;p=o.sort(i).slice(0,2);f[2]=e;f[3]=b;f[4]=g;f[5]=k;f[6]=a.threadType;f[7]=l;f[8]=m;f[9]=n;f[10]=p}else l=f[7],m=f[8],n=f[9],p=f[10];var r=p;if(f[16]!==l||f[17]!==m||f[18]!==k||f[19]!==r||f[20]!==((q=n)==null?void 0:q.id)||f[21]!==a.threadType){o=function(){var b;k===2&&!m&&d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&r.length===1&&(h||(h=d("I64"))).equal(r[0].id,(b=(b=n)==null?void 0:b.id)!=null?b:(h||(h=d("I64"))).minus_one)&&c("FBLogger")("messenger_web_product").mustfix("One to one thread with participants is showing self contact. Num contacts without self: %s",l.length)};f[16]=l;f[17]=m;f[18]=k;f[19]=r;f[20]=(b=n)==null?void 0:b.id;f[21]=a.threadType;f[22]=o}else o=f[22];g=l;f[23]!==m||f[24]!==k||f[25]!==r||f[26]!==n||f[27]!==g.length||f[28]!==a.threadType?(p=[k,m,a.threadType,r,n,g.length],f[23]=m,f[24]=k,f[25]=r,f[26]=n,f[27]=g.length,f[28]=a.threadType,f[29]=p):p=f[29];d("Int64Hooks").useEffectInt64(o,p);return r}function i(a,b){return b.rank-a.rank}function j(a){return c("getLSMediaContactProfilePictureUrl")(a)!==""}g["default"]=a}),98);
__d("useGetSnippetFromLS",["I64","LSAuthorityLevel","LSIntEnum","MAWStrings","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(9),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.messages||b[1]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrderAuthority")).bounds({gte:[a.threadKey,(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),(i||(i=d("I64"))).zero],lt:[a.threadKey,h.ofNumber(c("LSAuthorityLevel").OPTIMISTIC),i.max_int]})},b[0]=e.tables.messages,b[1]=a.threadKey,b[2]=g):g=b[2];var k;b[3]!==e||b[4]!==a.threadKey?(k=[e,a.threadKey],b[3]=e,b[4]=a.threadKey,b[5]=k):k=b[5];g=d("ReQLSuspense").useFirst(g,k,f.id+":30");b[6]!==g||b[7]!==a.snippet?(k=g!=null?{shouldHideTimestamp:!0,snippet:d("MAWStrings").MAW_OPTIMISTIC_SNIPPET().toString()}:{shouldHideTimestamp:!1,snippet:a.snippet},b[6]=g,b[7]=a.snippet,b[8]=k):k=b[8];return k}g["default"]=a}),98);
__d("useMWFacepileGetContactsToShow",["I64","LSAuthorityLevel","MWPActor.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","gkx","react-compiler-runtime","useGetContactsToShow","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var g=d("react-compiler-runtime").c(14),k=e===void 0?!1:e;e=d("MWPActor.react").useActor();var l=(i||(i=c("useReStore")))(),m;g[0]!==l.tables.contacts||g[1]!==l.tables.participants||g[2]!==k||g[3]!==a?(m=function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(l.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(l.tables.contacts,["rank","profilePictureFallbackUrl","profilePictureUrl","profilePictureUrlExpirationTimestampMs","id","name","authorityLevel"])).filter(function(a){a=a[1];return c("gkx")("8481")&&(a==null||c("getLSMediaContactProfilePictureUrl")(a)==="")?!1:!k||a!=null&&k&&(h||(h=d("I64"))).to_int32(a.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE}).take(3)},g[0]=l.tables.contacts,g[1]=l.tables.participants,g[2]=k,g[3]=a,g[4]=m):m=g[4];var n;g[5]!==l||g[6]!==k||g[7]!==a?(n=[l,a,k],g[5]=l,g[6]=k,g[7]=a,g[8]=n):n=g[8];m=d("ReQLSuspense").useArray(m,n,f.id+":61");g[9]!==m?(n=m.map(j),g[9]=m,g[10]=n):n=g[10];m=n;g[11]!==a||g[12]!==b?(n={threadKey:a,threadType:b},g[11]=a,g[12]=b,g[13]=n):n=g[13];return c("useGetContactsToShow")(n,m,e)}function j(a){a=a[1];return a}g["default"]=a}),98);
__d("useMWIsThreadPresenceActive",["I64","Int64Hooks","MWPActor.react","PresenceStatusContext","ReQL","asyncToGeneratorRuntime","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useContext,k=e.useState,l=c("requireDeferred")("MessengerMQTTPresence").__setRef("useMWIsThreadPresenceActive");function a(a){var e=d("react-compiler-runtime").c(9),f=c("useAsyncReStore")(),g=d("MWPActor.react").useActor(),h=j(c("PresenceStatusContext")),l;e[0]!==h?(l=h.getChatVisibility(),e[0]=h,e[1]=l):l=e[1];var q=l;l=k(!1);var r=l[0],s=l[1],t;e[2]!==g||e[3]!==q||e[4]!==f||e[5]!==h||e[6]!==a?(l=function(){var e=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield f);if(!q){s(!1);return p}var c=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.participants,["contactId"]).getKeyRange(a).filter(function(a){a=a.contactId;return!(i||(i=d("I64"))).equal(a,g)}).map(o)));b=c.some(function(a){a=h.getStatus(a);if(a==null)return!1;a=a.status;return a===2});s(b);b=h.addListener(function(){var a=h.getOnlineIDs(),b=new Set(a);a=c.some(function(a){return b.has(a)});s(a)});c.forEach(n);return b});function c(){return e.apply(this,arguments)}return c}(),j=e();return function(){return c("promiseDone")(j.then(m))}},t=[a,g,q,h,f],e[2]=g,e[3]=q,e[4]=f,e[5]=h,e[6]=a,e[7]=l,e[8]=t):(l=e[7],t=e[8]);d("Int64Hooks").useEffectInt64(l,t);return r}function m(a){a()}function n(a){return l.onReady(function(b){return b.sendAdditionalBuddyRequest(a)})}function o(a){a=a.contactId;return(i||(i=d("I64"))).to_string(a)}function p(){}g["default"]=a}),98);
__d("useMWIsThreadPresenceActiveWrapper",["cr:7667"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:7667")(a)}g["default"]=a}),98);
__d("useMWThreadSnippetForDisplay",["FBLogger","I64","LSMessagingThreadTypeUtil","MAWAdminMsg","MAWAdminMsgCTA","MAWLocalizationType","MAWODSProxy","MAWThreadCutover","WAOdsEnums","cr:11031","cr:11034","gkx","react","react-compiler-runtime","useGetSnippetFromLS"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(a){var b=d("react-compiler-runtime").c(15),e=k(a),f=e.isOpenThreadSnippet,g=e.lastMessageCtaType,h=e.shouldHideTimestamp,i=e.snippet;b[0]!==a.threadType?(e=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=e):e=b[1];var m=e;b[2]!==f||b[3]!==m||b[4]!==i?(e=function(){i===""&&m?(c("FBLogger")("CentralizedThreadUpdateMS5").mustfix("Snippet is %s","empty"),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"snippet_is_empty"})):i==null&&m?(c("FBLogger")("CentralizedThreadUpdateMS5").mustfix("Snippet is %s","null"),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"snippet_is_null"})):c("gkx")("8628")&&m&&(i===l||i===n)?q(i===n):c("gkx")("8629")&&f!=null&&f&&(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"open_thread_snippet"}),c("FBLogger")("CentralizedThreadUpdateMS5").info("Open thread snippet used for secure thread"),(i==null||i==="")&&c("FBLogger")("CentralizedThreadUpdateMS5").mustfix("Open thread snippet cannot be empty or null"))},b[2]=f,b[3]=m,b[4]=i,b[5]=e):e=b[5];var o;b[6]!==f||b[7]!==m||b[8]!==i||b[9]!==a.threadKey?(o=[i,m,a.threadKey,f],b[6]=f,b[7]=m,b[8]=i,b[9]=a.threadKey,b[10]=o):o=b[10];j(e,o);b[11]!==g||b[12]!==h||b[13]!==i?(a={lastMessageCtaType:g,shouldHideTimestamp:h,snippet:i},b[11]=g,b[12]=h,b[13]=i,b[14]=a):a=b[14];return a}function k(a){var e=d("react-compiler-runtime").c(22),f=c("useGetSnippetFromLS")(a),g=b("cr:11031")(a),h;e[0]!==a.threadType?(h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),e[0]=a.threadType,e[1]=h):h=e[1];var k=h,l=d("MAWThreadCutover").useCutoverOpenThread(a.threadKey);h=l==null?void 0:l.threadKey;var m=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(h);h=(h=b("cr:11034")(a.threadKey))!=null?h:(i||(i=d("I64"))).zero;var n;e[2]!==m||e[3]!==k||e[4]!==l||e[5]!==a.lastActivityTimestampMs?(n=function(){k&&!m&&l!=null&&(i||(i=d("I64"))).gt(l.lastActivityTimestampMs,a.lastActivityTimestampMs)&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"thread_not_bumped_on_open_activity"})},e[2]=m,e[3]=k,e[4]=l,e[5]=a.lastActivityTimestampMs,e[6]=n):n=e[6];var o;e[7]!==m||e[8]!==k||e[9]!==l||e[10]!==a.lastActivityTimestampMs||e[11]!==a.threadKey?(o=[k,m,l,a.lastActivityTimestampMs,a.threadKey],e[7]=m,e[8]=k,e[9]=l,e[10]=a.lastActivityTimestampMs,e[11]=a.threadKey,e[12]=o):o=e[12];j(n,o);n=!1;if(k&&c("gkx")("8629")&&!m&&l!=null&&(i||(i=d("I64"))).gt(l.lastActivityTimestampMs,h)){o=l.snippet;h=l.lastMessageCtaType;var q;e[13]!==h||e[14]!==o?(q={isOpenThreadSnippet:!0,lastMessageCtaType:h,shouldHideTimestamp:!1,snippet:o},e[13]=h,e[14]=o,e[15]=q):q=e[15];return q}if(k){n=c("gkx")("6477")?(q=g==null?void 0:g.shouldHideTimestamp)!=null?q:!1:c("gkx")("8687")?f.shouldHideTimestamp:!1}o=k&&c("gkx")("6477")?g==null?void 0:g.snippet:k&&c("gkx")("8687")?f.snippet:a.snippet;h=k&&c("gkx")("6477")?g==null?void 0:g.lastMessageCtaType:a.lastMessageCtaType;if(k&&c("gkx")("8628")&&(o===""||o==null)){e[16]!==m?(q=p(m),e[16]=m,e[17]=q):q=e[17];return q}e[18]!==h||e[19]!==n||e[20]!==o?(f={lastMessageCtaType:h,shouldHideTimestamp:n,snippet:o},e[18]=h,e[19]=n,e[20]=o,e[21]=f):f=e[21];return f}var l=d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION),m=d("MAWAdminMsgCTA").getCtaTypeByAdminType(d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION),n=d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE),o=d("MAWAdminMsgCTA").getCtaTypeByAdminType(d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE);function p(a){var b;a?(a=n,b=o):(a=l,b=m);return{lastMessageCtaType:b,shouldHideTimestamp:!1,snippet:a}}function q(a){a?(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"default_dual_thread_cutover_snippet"}),c("FBLogger")("CentralizedThreadUpdateMS5").info("Default dual thread cutover snippet used for secure thread")):(d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TC_MS5_OPEN_SNIPPET,key:"default_e2ee_thread_snippet"}),c("FBLogger")("CentralizedThreadUpdateMS5").info("Default e2ee thread snippet used for secure thread"))}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EphemeralMediaViewMode",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONCE:0,REPLAYABLE:1,PERMANENT:2});f["default"]=a}),66);
__d("LSHotEmojiSize",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SMALL:1,MEDIUM:2,LARGE:3});f["default"]=a}),66);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSMessageReplySourceTypeV2",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24});f["default"]=a}),66);
__d("LSReplyMessageAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,SOUND_BITE:9,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18});f["default"]=a}),66);
__d("LSThreadMediaGalleryGroup",[],(function(a,b,c,d,e,f){a=Object.freeze({PHOTOS_AND_VIDEOS:0,FILES_ONLY:1,LINKS:2});f["default"]=a}),66);
__d("MAWAdminMsgType",[],(function(a,b,c,d,e,f){"use strict";a="currentUserAddedDevice";b="participantAddedDevice";c="currentUserRemovedDevice";d="participantRemovedDevice";e="currentUserUpdatedDevice";var g="participantUpdatedDevice",h="participantAddedYou",i="participantAddedYouAndOneUser",j="participantAddedYouAndMoreThanOneUsers",k="unknowUserAddedYou",l="unknowUserAddedYouAndOneUser",m="unknowUserAddedYouAndMoreThanOneUser",n="unknownUserAddedOneUser",o="unknownUserAddedTwoUser",p="unknownUserAddedMoreThanTwoUser",q="participantAddedOneUser",r="participantAddedTwoUser",s="participantAddedMoreThanTwoUser",t="currentUserRemovedOneParticipant",u="currentUserRemovedTwoParticipant",v="currentUserRemovedMoreThanTwoParticipant",w="currentUserAddedOneParticipant",x="currentUserAddedTwoParticipant",y="currentUserAddedMoreThanTwoParticipant",z="participantRemovedYou",A="participantRemovedYouAndOneUser",B="participantRemovedYouAndMoreThanOneUsers",C="unknowUserRemovedYou",D="unknowUserRemovedYouAndOneUser",E="unknowUserRemovedYouAndMoreThanOneUser",F="unknownUserRemovedOneUser",G="unknownUserRemovedTwoUser",H="unknownUserRemovedMoreThanTwoUser",I="participantRemovedOneUser",J="participantRemovedTwoUser",K="participantRemovedMoreThanTwoUser",L="participantLeftGroup",M="currentUserLeftGroup",N="participantCustomizeParticipantNickname",O="participantClearParticipantNickname",P="participantCustomizeCurrentUserNickname",Q="currentUserSetOwnNickname",aa="currentUserClearOwnNickname",ba="currentUserClearParticipantNickname",ca="participantSetOwnNickname",da="participantClearOwnNickname",ea="participantClearCurrentUserNickname",fa="currentUserCustomizeNickname",ga="currentUserNamedGroup",ha="unkonwnUserNamedGroup",ia="participantNamedGroup",ja="currentUserCustomizeHotlike",ka="participantCustomizeHotlike",la="currentUserCustomizeTheme",ma="currentUserCustomizePhoto",na="participantCustomizeTheme",oa="participantCustomizePhoto",pa="currentUserSetAddModeAdminOnly",qa="currentUserSetAddModeAllMembers",ra="participantSetAddModeAdminOnly",sa="participantSetAddModeAllMembers",ta="serverSetAddModeAdminOnly",ua="serverSetAddModeAllMembers",R="currentUserPinnedMessage",S="currentUserUnpinnedMessage",T="participantPinnedMessage",U="participantUnpinnedMessage",V="cutoverThreadAdminMessage",W="cutoverIGDThreadAdminMessage",X="cutoverRollbackAdminMessage",Y="dualThreadCutoverAdminMessage",Z="e2eeThreadDescription",$="e2eeThreadUKOSAAdminMessage",va="debugMsg",wa="reachabilityError",xa="twoUsersConnected",ya="twoUsersConnectedOneMSplit";y={CURRENT_USER_ADDED_DEVICE:a,CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:y,CURRENT_USER_ADDED_ONE_PARTICIPANT:w,CURRENT_USER_ADDED_TWO_PARTICIPANTS:x,CURRENT_USER_CLEAR_OWN_NICKNAME:aa,CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:ba,CURRENT_USER_CUSTOMIZE_HOTLIKE:ja,CURRENT_USER_CUSTOMIZE_NICKNAME:fa,CURRENT_USER_CUSTOMIZE_PHOTO:ma,CURRENT_USER_CUSTOMIZE_THEME:la,CURRENT_USER_LEFT_GROUP:M,CURRENT_USER_NAMED_GROUP:ga,CURRENT_USER_PINNED_MESSAGE:R,CURRENT_USER_REMOVED_DEVICE:c,CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:v,CURRENT_USER_REMOVED_ONE_PARTICIPANT:t,CURRENT_USER_REMOVED_TWO_PARTICIPANTS:u,CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:pa,CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:qa,CURRENT_USER_SET_OWN_NICKNAME:Q,CURRENT_USER_UNPINNED_MESSAGE:S,CURRENT_USER_UPDATED_DEVICE:e,CUTOVER_IGD_THREAD_ADMIN_MESSAGE:W,CUTOVER_ROLLBACK_ADMIN_MESSAGE:X,CUTOVER_THREAD_ADMIN_MESSAGE:V,DEBUG_MSG:va,DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:Y,E2EE_THREAD_DESCRIPTION:Z,E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:$,PARTICIPANT_ADDED_DEVICE:b,PARTICIPANT_ADDED_MORE_THAN_TWO_USER:s,PARTICIPANT_ADDED_ONE_USER:q,PARTICIPANT_ADDED_TWO_USER:r,PARTICIPANT_ADDED_YOU:h,PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:j,PARTICIPANT_ADDED_YOU_AND_ONE_USER:i,PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:ea,PARTICIPANT_CLEAR_OWN_NICKNAME:da,PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:O,PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:P,PARTICIPANT_CUSTOMIZE_HOTLIKE:ka,PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:N,PARTICIPANT_CUSTOMIZE_PHOTO:oa,PARTICIPANT_CUSTOMIZE_THEME:na,PARTICIPANT_LEFT_GROUP:L,PARTICIPANT_NAMED_GROUP:ia,PARTICIPANT_PINNED_MESSAGE:T,PARTICIPANT_REMOVED_DEVICE:d,PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:K,PARTICIPANT_REMOVED_ONE_USER:I,PARTICIPANT_REMOVED_TWO_USER:J,PARTICIPANT_REMOVED_YOU:z,PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:B,PARTICIPANT_REMOVED_YOU_AND_ONE_USER:A,PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:ra,PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:sa,PARTICIPANT_SET_OWN_NICKNAME:ca,PARTICIPANT_UNPINNED_MESSAGE:U,PARTICIPANT_UPDATED_DEVICE:g,REACHABILITY_ERROR:wa,SERVER_SET_ADD_MODE_ADMIN_ONLY:ta,SERVER_SET_ADD_MODE_ALL_MEMBERS:ua,TWO_USERS_CONNECTED:xa,TWO_USERS_CONNECTED_ONE_MSPLIT:ya,UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:p,UNKNOWN_USER_ADDED_ONE_USER:n,UNKNOWN_USER_ADDED_TWO_USER:o,UNKNOWN_USER_ADDED_YOU:k,UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:m,UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:l,UNKNOWN_USER_NAMED_GROUP:ha,UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:H,UNKNOWN_USER_REMOVED_ONE_USER:F,UNKNOWN_USER_REMOVED_TWO_USER:G,UNKNOWN_USER_REMOVED_YOU:C,UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:E,UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:D};f.CURRENT_USER_ADDED_DEVICE=a;f.CURRENT_USER_PINNED_MESSAGE=R;f.CURRENT_USER_UNPINNED_MESSAGE=S;f.PARTICIPANT_PINNED_MESSAGE=T;f.PARTICIPANT_UNPINNED_MESSAGE=U;f.CUTOVER_THREAD_ADMIN_MESSAGE=V;f.CUTOVER_IGD_THREAD_ADMIN_MESSAGE=W;f.CUTOVER_ROLLBACK_ADMIN_MESSAGE=X;f.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE=Y;f.E2EE_THREAD_DESCRIPTION=Z;f.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE=$;f.ADMIN_MSG_TYPE=y}),66);
__d("MAWLocalizationType",["MAWAdminMsgType"],(function(a,b,c,d,e,f,g){"use strict";a="emptySnippet";b="currentUserCreatedGroup";c="participantCreatedGroup";e="unknownUserCreatedGroup";f="currentUserGotPromoted";var h="currentUserGotDemoted",i="participantGotPromoted",j="participantGotDemoted",k="participantPromotedYou",l="participantDemotedYou",m="currentUserPromotedParticipant",n="currentUserDemotedParticipant",o="participantDemotedParticipant",p="participantPromotedParticipant",q="participantSelfDemoted",r="currentUserSelfDemoted",s="currentUserSendText",t="currentUserSendImage",u="currentUserSendVideo",v="currentUserSendAudio",w="currentUserSendGif",x="currentUserSendSticker",y="participantSendText",z="participantSendTextInGroup",A="participantSendImage",B="participantSendVideo",C="participantSendAudio",D="participantSendGif",E="participantSendSticker",F="unavailableSnippet",G="unknownUserEphemeralSettingTurnedOnSeconds",H="unknownUserEphemeralSettingTurnedOnMinutes",I="unknownUserEphemeralSettingTurnedOnHours",J="unknownUserEphemeralSettingTurnedOnDays",K="youEphemeralSettingTurnedOnSeconds",L="youEphemeralSettingTurnedOnMinutes",M="youEphemeralSettingTurnedOnHours",N="youEphemeralSettingTurnedOnDays",O="participantEphemeralSettingTurnedOnSeconds",P="participantEphemeralSettingTurnedOnMinutes",Q="participantEphemeralSettingTurnedOnHours",R="participantEphemeralSettingTurnedOnDays",S="unknownUserEphemeralSettingChangeSeconds",T="unknownUserEphemeralSettingChangeMinutes",U="unknownUserEphemeralSettingChangeHours",V="unknownUserEphemeralSettingChangeDays",W="youEphemeralSettingChangeSeconds",X="youEphemeralSettingChangeMinutes",Y="youEphemeralSettingChangeHours",aa="youEphemeralSettingChangeDays",ba="participantEphemeralSettingChangeSeconds",ca="participantEphemeralSettingChangeMinutes",da="participantEphemeralSettingChangeHours",ea="participantEphemeralSettingChangeDays",fa="unknownUserEphemeralSettingTurnedOff",ga="youEphemeralSettingTurnedOff",ha="participantEphemeralSettingTurnedOff",ia="ephemeralSettingsAutoReset",ja="currentUserUnsentMessage",ka="participantUnsentMessage",la="participantReactMessage",ma="participantReactMessageInGroup",Z="unknownUserEphemeralTakeScreenshot",na="unknownUserEphemeralRecordScreen",oa="youEphemeralTakeScreenshot",pa="youEphemeralRecordScreen",qa="participantEphemeralTakeScreenshot",ra="participantEphemeralRecordScreen",sa="icdcAlertAdminMessage",ta="yourDeviceICDCAlertAdminMessage",$="currentUserSendAttachment",ua="participantSendAttachment",va="currentUserSentPost",wa="currentUserSentReel",xa="currentUserSentStory",ya="currentUserSentEvent",za="currentUserMentionedStoryIG",Aa="currentUserReceivedStoryMentionIG",Ba="participantSentPost",Ca="participantSentReel",Da="participantSentStory",Ea="participantSentEvent",Fa="currentUserSentStoryHighlight",Ga="participantSentStoryHighlight",Ha="currentUserMissedAudioCall",Ia="participantMissedAudioCall",Ja="currentUserMissedVideoCall",Ka="participantMissedVideoCall",La="currentUserAudioCalled",Ma="participantAudioCalled",Na="currentUserVideoCalled",Oa="participantVideoCalled",Pa="currentUserStartedGroupAudioCall",Qa="participantStartedGroupAudioCall",Ra="currentUserStartedGroupVideoCall",Sa="participantStartedGroupVideoCall",Ta="currentUserBumpedOwnMessage",Ua="currentUserBumpedMessage",Va="participantBumpedOwnMessage",Wa="participantBumpedParticipantMessage",Xa="participantBumpedCurrentUserMessage",Ya="userSendUnavailableMessage",Za="userSendEncryptedMessage",$a="currentUserSendUnrenderableMessage",ab="participantSendUnrenderableMessage",bb="currentUserSendLocationFallback",cb="participantSendLocation",db="currentUserSendLocation",eb="participantSendLocation",fb="currentUserSendPollCreationFallback",gb="participantSendPollCreation",hb="currentUserSendContactShareFallback",ib="participantSendContactShareFallback",jb="currentUserSendStoryMentionFallback",kb="currentUserSendStoryMention",lb="participantSendStoryMention",mb="participantSendStoryMentionFallback",nb="currentUserSendPostMentionFallback",ob="participantSendPostMentionFallback",pb="currentUserSendNoteMentionFallback",qb="participantSendNoteMentionFallback",rb="metaAISendMessageFallback",sb="currentUserSendBumpMessageFallback",tb="participantSendBumpMessageFallback",ub="participantSendBumpMessageOriginalUnavailable",vb="currentUserSendStickerReceiverFetchMessageFallback",wb="participantSendStickerReceiverFetchMessageFallback",xb="viewOncePhotoMessageFallback",yb="viewOnceVideoMessageFallback",zb="unavailableStory";d=babelHelpers["extends"]({},d("MAWAdminMsgType").ADMIN_MSG_TYPE,{CURRENT_USER_AUDIO_CALLED:La,CURRENT_USER_BUMPED_MESSAGE:Ua,CURRENT_USER_BUMPED_OWN_MESSAGE:Ta,CURRENT_USER_CREATED_GROUP:b,CURRENT_USER_DEMOTED_PARTICIPANT:n,CURRENT_USER_GOT_DEMOTED:h,CURRENT_USER_GOT_PROMOTED:f,CURRENT_USER_MENTIONED_STORY_IG:za,CURRENT_USER_MISSED_AUDIO_CALL:Ha,CURRENT_USER_MISSED_VIDEO_CALL:Ja,CURRENT_USER_PROMOTED_PARTICIPANT:m,CURRENT_USER_RECEIVED_STORY_MENTION_IG:Aa,CURRENT_USER_SELF_DEMOTED:r,CURRENT_USER_SEND_ATTACHMENT:$,CURRENT_USER_SEND_AUDIO:v,CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:sb,CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:hb,CURRENT_USER_SEND_GIF:w,CURRENT_USER_SEND_IMAGE:t,CURRENT_USER_SEND_LOCATION:db,CURRENT_USER_SEND_LOCATION_FALLBACK:bb,CURRENT_USER_SEND_NOTE_MENTION_FALLBACK:pb,CURRENT_USER_SEND_POLL_CREATION_FALLBACK:fb,CURRENT_USER_SEND_POST_MENTION_FALLBACK:nb,CURRENT_USER_SEND_STICKER:x,CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:vb,CURRENT_USER_SEND_STORY_MENTION:kb,CURRENT_USER_SEND_STORY_MENTION_FALLBACK:jb,CURRENT_USER_SEND_TEXT:s,CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:$a,CURRENT_USER_SEND_VIDEO:u,CURRENT_USER_SENT_EVENT:ya,CURRENT_USER_SENT_POST:va,CURRENT_USER_SENT_REEL:wa,CURRENT_USER_SENT_STORY:xa,CURRENT_USER_SENT_STORY_HIGHLIGHT:Fa,CURRENT_USER_STARTED_GROUP_AUDIO_CALL:Pa,CURRENT_USER_STARTED_GROUP_VIDEO_CALL:Ra,CURRENT_USER_UNSENT_MESSAGE:ja,CURRENT_USER_VIDEO_CALLED:Na,EMPTY_SNIPPET:a,EPHEMERAL_SETTINGS_AUTO_RESET:ia,ICDC_ALERT_ADMIN_MESSAGE:sa,META_AI_SEND_MESSAGE_FALLBACK:rb,PARTICIPANT_AUDIO_CALLED:Ma,PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:Xa,PARTICIPANT_BUMPED_OWN_MESSAGE:Va,PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:Wa,PARTICIPANT_CREATED_GROUP:c,PARTICIPANT_DEMOTED_PARTICIPANT:o,PARTICIPANT_DEMOTED_YOU:l,PARTICIPANT_EPHEMERAL_RECORD_SCREEN:ra,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:ea,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:da,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:ca,PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:ba,PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:ha,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:R,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:Q,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:P,PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:O,PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:qa,PARTICIPANT_GOT_DEMOTED:j,PARTICIPANT_GOT_PROMOTED:i,PARTICIPANT_MISSED_AUDIO_CALL:Ia,PARTICIPANT_MISSED_VIDEO_CALL:Ka,PARTICIPANT_PROMOTED_PARTICIPANT:p,PARTICIPANT_PROMOTED_YOU:k,PARTICIPANT_REACT_MESSAGE:la,PARTICIPANT_REACT_MESSAGE_IN_GROUP:ma,PARTICIPANT_SELF_DEMOTED:q,PARTICIPANT_SEND_ATTACHMENT:ua,PARTICIPANT_SEND_AUDIO:C,PARTICIPANT_SEND_BUMP_MESSAGE:tb,PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK:ub,PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:ib,PARTICIPANT_SEND_GIF:D,PARTICIPANT_SEND_IMAGE:A,PARTICIPANT_SEND_LOCATION:eb,PARTICIPANT_SEND_LOCATION_FALLBACK:cb,PARTICIPANT_SEND_NOTE_MENTION_FALLBACK:qb,PARTICIPANT_SEND_POLL_CREATION_FALLBACK:gb,PARTICIPANT_SEND_POST_MENTION_FALLBACK:ob,PARTICIPANT_SEND_STICKER:E,PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:wb,PARTICIPANT_SEND_STORY_MENTION:lb,PARTICIPANT_SEND_STORY_MENTION_FALLBACK:mb,PARTICIPANT_SEND_TEXT:y,PARTICIPANT_SEND_TEXT_IN_GROUP:z,PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:ab,PARTICIPANT_SEND_VIDEO:B,PARTICIPANT_SENT_EVENT:Ea,PARTICIPANT_SENT_POST:Ba,PARTICIPANT_SENT_REEL:Ca,PARTICIPANT_SENT_STORY:Da,PARTICIPANT_SENT_STORY_HIGHLIGHT:Ga,PARTICIPANT_STARTED_GROUP_AUDIO_CALL:Qa,PARTICIPANT_STARTED_GROUP_VIDEO_CALL:Sa,PARTICIPANT_UNSENT_MESSAGE:ka,PARTICIPANT_VIDEO_CALLED:Oa,UNAVAILABLE_SNIPPET:F,UNAVAILABLE_STORY:zb,UNKNOWN_USER_CREATED_GROUP:e,UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:na,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:V,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:U,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:T,UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:S,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:fa,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:J,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:I,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:H,UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:G,UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:Z,USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:Za,USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:Ya,VIEW_ONCE_PHOTO_MESSAGE:xb,VIEW_ONCE_VIDEO_MESSAGE:yb,YOU_EPHEMERAL_RECORD_SCREEN:pa,YOU_EPHEMERAL_SETTING_CHANGE_DAYS:aa,YOU_EPHEMERAL_SETTING_CHANGE_HOURS:Y,YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:X,YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:W,YOU_EPHEMERAL_SETTING_TURNED_OFF:ga,YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:N,YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:M,YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:L,YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:K,YOU_EPHEMERAL_TAKE_SCREENSHOT:oa,YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:ta});g.CURRENT_USER_CREATED_GROUP=b;g.CURRENT_USER_SEND_TEXT=s;g.CURRENT_USER_SEND_IMAGE=t;g.CURRENT_USER_SEND_VIDEO=u;g.CURRENT_USER_SEND_AUDIO=v;g.CURRENT_USER_SEND_GIF=w;g.CURRENT_USER_SEND_STICKER=x;g.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS=G;g.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT=Z;g.CURRENT_USER_SEND_ATTACHMENT=$;g.LOCALIZATION_TYPE=d}),98);
__d("getMAWLocalizedBumpMsgReplySnippet",["fbt","FBLogger"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,d){switch(a){case"currentUserBumpedOwnMessage":return h._("__JHASH__xEJdAn7fswx__JHASH__");case"currentUserBumpedMessage":return d!=null?h._("__JHASH__V_CNNTmY2Ph__JHASH__",[h._param("name",d)]):h._("__JHASH__e4ANPYcuBv3__JHASH__");case"participantBumpedCurrentUserMessage":return h._("__JHASH__Za_lnuBTLtf__JHASH__",[h._param("sender_name",b)]);case"participantBumpedOwnMessage":return h._("__JHASH___jAChXL58Au__JHASH__",[h._param("name",b)]);case"participantBumpedParticipantMessage":return d!=null?h._("__JHASH__DhJx8omw4RX__JHASH__",[h._param("sender_name",b),h._param("reply_source_sender_name",d)]):h._("__JHASH__nH0a2aTUw0L__JHASH__",[h._param("user_name",b)]);default:a;c("FBLogger")("messenger_e2ee_web").mustfix("unexpected bump type %s",a);return""}}g["default"]=a}),226);
__d("getMAWLocalizedFallbackMsgSnippet",["fbt","FBLogger","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){switch(a){case"userSendEncryptedMessage":return c("gkx")("2161")?h._("__JHASH__fyDhKh6gGJz__JHASH__"):h._("__JHASH__4OgzNQUOXys__JHASH__");case"currentUserSendUnrenderableMessage":return h._("__JHASH__jc4jswoQ0uZ__JHASH__");case"participantSendUnrenderableMessage":return h._("__JHASH__rJAaVw-bGTJ__JHASH__");case"currentUserSendLocationFallback":return h._("__JHASH__uqLzpXLWV1L__JHASH__");case"participantSendLocation":return h._("__JHASH__arQtWP-wajD__JHASH__");case"currentUserSendPollCreationFallback":return h._("__JHASH__yYAB5ipDjSn__JHASH__");case"participantSendPollCreation":return h._("__JHASH__9_u_h4197t1__JHASH__");case"currentUserSendContactShareFallback":return h._("__JHASH__Lucxb4lp5Bj__JHASH__");case"participantSendContactShareFallback":return h._("__JHASH__l8E1YgNTl-P__JHASH__");case"currentUserSendStoryMentionFallback":return h._("__JHASH__eI2fGAdx8aY__JHASH__");case"participantSendStoryMentionFallback":return h._("__JHASH__cgqiUXxl6Ro__JHASH__");case"currentUserSendPostMentionFallback":return h._("__JHASH__PZpIyNYvIJk__JHASH__");case"participantSendPostMentionFallback":return h._("__JHASH__ZZH6zoWCM7w__JHASH__");case"currentUserSendNoteMentionFallback":return h._("__JHASH__6rTG-69neIL__JHASH__");case"participantSendNoteMentionFallback":return h._("__JHASH__rrd4aExCZRq__JHASH__");case"metaAISendMessageFallback":return h._("__JHASH__rKW2TUo65Qw__JHASH__");case"currentUserSendBumpMessageFallback":return h._("__JHASH__wGbdzlw9c2x__JHASH__");case"participantSendBumpMessageFallback":return h._("__JHASH__ERQ_-V0YrzM__JHASH__");case"participantSendStickerReceiverFetchMessageFallback":return h._("__JHASH__QW1C8s0lKTa__JHASH__");case"currentUserSendStickerReceiverFetchMessageFallback":return h._("__JHASH__G-xm1MPFQ2m__JHASH__");case"userSendUnavailableMessage":return c("gkx")("2161")?h._("__JHASH__kUWcn8afzj2__JHASH__"):h._("__JHASH__Q-6u14LxgkX__JHASH__");case"participantSendBumpMessageOriginalUnavailable":return h._("__JHASH__4OgzNQUOXys__JHASH__");case"unavailableStory":return h._("__JHASH__f0lEvrX0NwD__JHASH__");case"viewOncePhotoMessageFallback":return h._("__JHASH__KCDXWiSStNg__JHASH__");case"viewOnceVideoMessageFallback":return h._("__JHASH__QmDiAWEBf9c__JHASH__");default:a;c("FBLogger")("messenger_e2ee_web").mustfix("unexpected content fallback type %s",a);return""}}g["default"]=a}),226);
__d("MAWAdminMsg",["fbt","MAWLocalizationType","getMAWLocalizedBumpMsgReplySnippet","getMAWLocalizedFallbackMsgSnippet"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e){switch(e){case d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET:return"";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP:return h._("__JHASH__28E9UX9VhHs__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP:return h._("__JHASH__vc0hFTqTXzB__JHASH__",[h._param("actor",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP:return h._("__JHASH__nIQsgwg4jav__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:return h._("__JHASH__ioocxZa3RHl__JHASH__",[h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:return h._("__JHASH__BkA5SKyiWz8__JHASH__",[h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:return h._("__JHASH__3pkJPr0kqiB__JHASH__",[h._param("actor",b[0]),h._param("custom group name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:return h._("__JHASH__7HvCssg8rpe__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:return h._("__JHASH__HcuOxk4Ti9n__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:return h._("__JHASH__z8kxY36E7hc__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:return h._("__JHASH__CWI7wNEpg6X__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:return h._("__JHASH__dMTvVUpHIHh__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return h._("__JHASH__B5b_7hBmzMu__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:return h._("__JHASH__IquH8JP7g3o__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:return h._("__JHASH__6LexHwivW4N__JHASH__",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:return h._("__JHASH__xpYfCqAeoRq__JHASH__",[h._param("user_name",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:return h._("__JHASH__6Z1J4va4_8C__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:return h._("__JHASH__Usbik5t1nBt__JHASH__",[h._param("actor",b[0]),h._param("user_name",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:return h._("__JHASH__P_OgxVnWQoE__JHASH__",[h._param("actor",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:return h._("__JHASH__bobEEsoK5wj__JHASH__",[h._param("actor",b[0]),h._param("user_name",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:return h._("__JHASH__XQQ_fX0JL2u__JHASH__",[h._param("actor",b[0]),h._param("user_name_1",b[1]),h._param("user_name_2",b[2])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:return h._("__JHASH__gdN-cHBGTgb__JHASH__",[h._param("actor",b[0]),h._param("user_name_1",b[1]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:return h._("__JHASH__T1eI6-R4Ys3__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:return h._("__JHASH___J2BJijyg1Y__JHASH__",[h._param("user_name_1",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:return h._("__JHASH__GQYeJHPPFBL__JHASH__",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return h._("__JHASH__7gBXJGJs1RC__JHASH__",[h._param("name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP:return h._("__JHASH__twBESU9lMQ5__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:return h._("__JHASH__P-TnfmXUkkU__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:return h._("__JHASH__TyOeMbh9c3n__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:return h._("__JHASH__g2Y-AkokbQi__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:return h._("__JHASH__QbDk7QLMtd0__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:return h._("__JHASH__vcVM9mG_n59__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:return h._("__JHASH__0ly_0rO21jd__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:return h._("__JHASH__aRkzLhFK0tk__JHASH__",[h._param("actor",b[0]),h._param("target",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:return h._("__JHASH__wIEAcacoGC2__JHASH__",[h._param("actor",b[0]),h._param("target",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:return h._("__JHASH__BVroDb3uWvG__JHASH__",[h._param("target",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:return h._("__JHASH__XW8QFefwwka__JHASH__",[h._param("target",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:return h._("__JHASH__-JHaYRzvfpN__JHASH__",[h._param("actor",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:return h._("__JHASH__h_Dfa2FiN92__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:return h._("__JHASH__3iBxxmwApDO__JHASH__").toString()+": "+a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:return a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:return b[0]+": "+a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:return h._("__JHASH__4-ojL4cFyDj__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:return h._("__JHASH___R0NFo7psqZ__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:return h._("__JHASH__NHZzbHt5fju__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:return h._("__JHASH__GgLzAe6GAAY__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:return h._("__JHASH__WYnHcQZeijb__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:return h._("__JHASH__SkQ-qpSqtIH__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:return h._("__JHASH__Z9w9ch9TmJt__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:return h._("__JHASH__-kgYEsPaCeZ__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:return h._("__JHASH__BxMycMKsI8g__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:return h._("__JHASH__AdIYNNW8_BB__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:return h._("__JHASH__HZfnisG5R39__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG:return h._("__JHASH__Mv-TBSZDdsn__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG:return h._("__JHASH__XUTKHUpfCZy__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:return h._("__JHASH__NkOpuZkYe13__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION:return h._("__JHASH__LFSYTOj65rJ__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:return h._("__JHASH__u9NG1-EYfRE__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO:return h._("__JHASH__GZrAjs4uDve__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO:return h._("__JHASH__B_Zg5gCb8wv__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:return h._("__JHASH__-LJU6ON9QlF__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER:return h._("__JHASH__j_PEgQByu4Z__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST:return h._("__JHASH__kF-N_lTEwQJ__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL:return h._("__JHASH__T_Dsx3yPqqa__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT:return h._("__JHASH__1gzdEGkoXLS__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:return h._("__JHASH__V7iXBY7GwFs__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION:return h._("__JHASH__b1af6uIHMmw__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY:return h._("__JHASH__ssliyU4f4NG__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT:return h._("__JHASH___YfY9t5KQWL__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT:return h._("__JHASH__8KU-2G3ySrJ__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET:return h._("__JHASH__7Iefg1P6g_q__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED:return h._("__JHASH__m7k67dqAe-2__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT:return h._("__JHASH__aRupJlbtkO6__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR:return h._("__JHASH__NRCMN2f5KgC__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._("__JHASH__yoeh6xz8ysN__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._("__JHASH__IR8E-wTaoC7__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._("__JHASH__FtQHajIZT7O__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._("__JHASH__X1cC2Zoa_3e__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._("__JHASH__q1Dv0IsA2nN__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._("__JHASH__p0MNCtvKqaA__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._("__JHASH__kwfHljZ5QBG__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._("__JHASH__LHoPMyBE8HS__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:return h._("__JHASH__rFeQsz2D0mv__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:return h._("__JHASH__vASZV8VZvhw__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:return h._("__JHASH__Xyk76kpov4j__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:return h._("__JHASH__qtvuopqU1MA__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._("__JHASH__tOdgin1piov__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._("__JHASH__tU7ZycHCBtt__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS:return h._("__JHASH__SXTBhBt2NNW__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS:return h._("__JHASH__oSyzRtJUP0d__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:return h._("__JHASH__J_nCpYMiV9y__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return h._("__JHASH__cFpYB9yRAJx__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return h._("__JHASH__2BRCng4CCeO__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return h._("__JHASH__EP_oerZBdU2__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return h._("__JHASH__djtpytkb6Sh__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._("__JHASH__hcupvvFLxCq__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._("__JHASH__fBAvJP2p_1B__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS:return h._("__JHASH__4ozbPFF4k4a__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS:return h._("__JHASH__WyaiaRRbnKj__JHASH__",[h._plural(parseInt(a[0],10),"number")]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:return h._("__JHASH__iNw3Tti4Hyx__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:return h._("__JHASH__fCn7GcPwiSh__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:return h._("__JHASH__g-ahVqaxxG1__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:return h._("__JHASH__WlJQEt8_oGK__JHASH__",[h._plural(parseInt(a[0],10),"number"),h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF:return h._("__JHASH__Loj0OkThL6V__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF:return h._("__JHASH__tR4q6c00--C__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:return h._("__JHASH__M2dZfT7rhFT__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET:return h._("__JHASH__iGMaDEsRW87__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:return h._("__JHASH__HpovaTJp70W__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE:return h._("__JHASH__zbO84srNMHF__JHASH__",[h._param("first name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:return h._("__JHASH__31MoZ8hsHC1__JHASH__",[h._param("name",b[0]),h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE:return h._("__JHASH__5oboVZPgKpA__JHASH__",[h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT:return h._("__JHASH__j47-K7rZuN___JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN:return h._("__JHASH__NNSrUYXKqRz__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT:return h._("__JHASH__7NL8DHtxILK__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN:return h._("__JHASH__vrGwrec4csR__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:return h._("__JHASH__GAoFX2GSYx-__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:return h._("__JHASH__f2dqrRKp1Rl__JHASH__",[h._param("user",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return h._("__JHASH__84N8vT7fmIh__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:return h._("__JHASH__k7nqRDWCEqt__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:return h._("__JHASH__vzYvZZNuBUQ__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:return h._("__JHASH__kEvDhH7xulF__JHASH__",[h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:return h._("__JHASH__xyM-QHTai_C__JHASH__",[h._param("user_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:return h._("__JHASH__5P3Id9aMhA-__JHASH__",[h._param("user_name_1",b[0]),h._param("user_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:return h._("__JHASH__8qUm4dkQH-w__JHASH__",[h._param("user_name_1",b[0]),h._param("number of participants",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG:return a[0];case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL:e=b[0];return e!=null?h._("__JHASH__3CQShXTU-3b__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__ZdLYEgeUYUi__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL:e=b[0];return e!=null?h._("__JHASH__hSqnAb21UU0__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__FhbzN0qv73L__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL:e=b[0];return e!=null?h._("__JHASH__YM-2KpKGx7o__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__rUeoGw7ywMT__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL:e=b[0];return e!=null?h._("__JHASH__PRszNN6obpG__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__IdxQnq18Kxe__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED:e=b[0];return e!=null?h._("__JHASH__qpT_2Hq8aLK__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__1D3Mug6ESYE__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED:e=b[0];return e!=null?h._("__JHASH__Q2D56NwN4Z2__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__-LOVer9reHI__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED:return h._("__JHASH__N6tiOur0IeU__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:return h._("__JHASH__281zrADSR3K__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL:e=b[0];return e!=null?h._("__JHASH__BRFQbCVtB3g__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__Y_6qv9Uzxa8__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:return h._("__JHASH__-bjuy5QVW7S__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL:e=b[0];return e!=null?h._("__JHASH__G7PmoxqH97J__JHASH__",[h._param("user",e)]).toString():h._("__JHASH__6N0ah9mUAzA__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:return h._("__JHASH__EEsmX-_LHlK__JHASH__",[h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:return h._("__JHASH__6MdK4yng1UK__JHASH__",[h._param("participant_name",b[0]),h._param("emoji",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:return h._("__JHASH__GyMG8O-C9S5__JHASH__",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:return a[1]!=null?h._("__JHASH__WKommDcgo9P__JHASH__",[h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._("__JHASH__t4yd3Wxrq8W__JHASH__",[h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:return h._("__JHASH__yuNBxRHgSDK__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:return h._("__JHASH__Zr0kCIYub20__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:return h._("__JHASH__VWcKR_3CcNp__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return h._("__JHASH__endRDxlBVzL__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:return h._("__JHASH__yI8AwJDDXA8__JHASH__",[h._param("participant_name_1",b[0]),h._param("participant_name_2",b[1]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:return h._("__JHASH__Nu4trdH0AZV__JHASH__",[h._param("participant_name_1",b[0]),h._param("participant_name_2",b[1])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:return a[1]!=null?h._("__JHASH__pUsACsMNiGM__JHASH__",[h._param("participant_name",b[0]),h._param("theme_name",a[0]),h._param("theme_emoji",a[1])]).toString():h._("__JHASH__5cPy2yotEtg__JHASH__",[h._param("participant_name",b[0]),h._param("theme_name",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:return h._("__JHASH__Dxwz5K9j7Bk__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:return h._("__JHASH__40grJO79VQ___JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return h._("__JHASH__mXVL0NDisiY__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:return h._("__JHASH__6qQ7QWA5Qmg__JHASH__",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:return h._("__JHASH__oAeegILBLai__JHASH__",[h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:return h._("__JHASH__NEVYqiJ_yny__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:return h._("__JHASH__QyW1FG-2acm__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:return h._("__JHASH__-bMyTbFv0nI__JHASH__",[h._param("participant_name",b[0]),h._param("nickname",a[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:return h._("__JHASH__Yhh1rYSenJQ__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:return h._("__JHASH__cwzLDs_ko4T__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:return h._("__JHASH__x0YG4R4fIWJ__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:return h._("__JHASH__OS47S8NROIK__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:return h._("__JHASH__qoR_RAXP6cF__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:return h._("__JHASH__QFNAQIQatHV__JHASH__",[h._param("participant_name",b[0])]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:return h._("__JHASH__BGd7wYLVNyr__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:return h._("__JHASH__ogqmOECI7p3__JHASH__").toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE,null,null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,null,b[0]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,b[0],null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,b[0],null).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:return c("getMAWLocalizedBumpMsgReplySnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,b[0],b[1]).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK:return c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK).toString();default:return""}}g.buildLocalizedString=a}),226);
__d("MAWAdminMsgNormalized",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE:return{contactIds:b,contents:[]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:a=b[0];var c=b[1];return{contactIds:[a],contents:[c]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:a=b[0];c=b[1];var e=b[2];return{contactIds:[a,c],contents:[e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:a=b[0];c=b[1];e=b[2];return{contactIds:[a],contents:[c,e]};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:default:return{contactIds:[],contents:b}}}g.deconstructContactIdsFromAdminContent=a}),98);
__d("MAWAsyncEBPendingQueryPromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h=new Map(),i=new Map(),j=new Map(),k=new Map(),l=new Map(),m=new Map();function a(a){var c=new(g||(g=b("Promise")))(function(b,c){i.set(a,b),k.set(a,c)});h.set(a,c);return c}function c(a,b){j.set(a,b)}function d(a){return j.get(a)}function e(a){var c=new(g||(g=b("Promise")))(function(b,c){l.set(a,{data:null,resolve:b}),m.set(a,c)});return c}function n(a,b){var c=i.get(a);c!=null&&(i["delete"](a),c(b));c=l.get(a);c!=null&&l.set(a,{data:b,resolve:c.resolve})}function o(a,b){var c=k.get(a);c!=null&&(i["delete"](a),c(b));c=m.get(a);c!=null&&(m["delete"](a),c(b),l["delete"](a))}function p(a){var b=l.get(a);b!=null&&b.data!=null&&(b.resolve(b.data),l["delete"](a),m["delete"](a))}f.getPendingQueryPromiseFromTrace=a;f.setJidFromThreadId=c;f.getJidFromThreadId=d;f.getWaitForRestorePromiseFromTrace=e;f.resolvePendingQueryIfPresent=n;f.rejectPendingQueryIfPresent=o;f.resolvePendingQueryUponReStore=p}),66);
__d("MAWSubscribeToContactNames",["fbt","$InternalEnum","Env","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i;d=b("$InternalEnum").Mirrored(["FIRST_NAME","FULL_NAME"]);var j=Boolean((i||(i=c("Env"))).isMessengerDotComOnComet)?"Messenger":c("gkx")("22979")?"Instagram":"Facebook";function k(){return h._("__JHASH__qNfUY0OKWF7__JHASH__",[h._param("Platform Name",j)]).toString()}function a(a,b){return(a=a.get(b))!=null?a:k()}g.ContactNameMode=d;g.getUnknownUser=k;g.getContactNameFromLookup=a}),226);
__d("MAWThreadCustomizationUtils",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME}function b(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME}g.skipNicknameCheck=a;g.nicknameOnlyForFirstParticipantChecking=b}),98);
__d("fillArray",[],(function(a,b,c,d,e,f){function a(a,b){var c=new Array(a);for(var d=0;d<a;d++)c[d]=b;return c}f["default"]=a}),66);
__d("mapPull",[],(function(a,b,c,d,e,f){function a(a,b,c){var d=new Map();for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;d.set(c(g),b(g))}return d}f["default"]=a}),66);
__d("MAWBridgeBuildMsgMentions",["MAWLocalizationType","MAWSubscribeToContactNames","MAWThreadCustomizationUtils","WAJids","emptyFunction","fillArray","mapPull"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.length>0?a.join(","):void 0}function i(a,b){return a.index-b.index}function j(a,b){return a==null||a===""?a:Array.from(b).reduce(function(a,b){var c=b[0];b=b[1];return a.replaceAll(c,b)},a)}function k(a,b){return a==null||a===""?[]:Array.from(b.keys()).flatMap(function(b){return Array.from(a.matchAll(b))}).sort(i)}function l(a,b,e,f){e=c("mapPull")(e,function(a){var c=a[0];a[1];return d("MAWSubscribeToContactNames").getContactNameFromLookup(b,c)},function(a){a[0];a=a[1];return a});var g=k(a,e),i=[],l=[],m=[],n=0;for(g of g){var o=d("WAJids").unsafeCoerceToUserJid(g[0]);i.push(d("WAJids").userIdFromJid(o));var p=d("MAWSubscribeToContactNames").getContactNameFromLookup(e,o);l.push(p.length+1);m.push(Math.max(g.index-1+n,0));n+=p.length-o.length}p=k(f,e);for(o of p){g=d("WAJids").unsafeCoerceToUserJid(o[0]);i.push(d("WAJids").userIdFromJid(g))}n=c("fillArray")(i.length,"p");return{mentionIds:h(i),mentionLengths:h(l),mentionOffsets:h(m),mentionTypes:h(n),replyMessageText:j(f,e),text:j(a,e)}}function m(a,b,c,e){a=l(a,c,e);e=a.text;a=b.map(function(a){return d("MAWSubscribeToContactNames").getContactNameFromLookup(c,a)});return[e,a]}function a(a,b,e){b=c("mapPull")(b,c("emptyFunction").thatReturnsArgument,d("WAJids").userIdFromJid);return l(a,b,b,e)}function n(a,b,c,e,f){return b&&c>0||e?f===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$CONTACT_FIRST_NAME("+a+")":"$CONTACT_FULL_NAME("+a+")":f===d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME?"$PARTICIPANT_FIRST_NAME("+a+")":"$PARTICIPANT_FULL_NAME("+a+")"}function b(a,b,e,f){b=c("mapPull")((b=b)!=null?b:[],c("emptyFunction").thatReturnsArgument,d("WAJids").userIdFromJid);if(b.size===0||a==null||a===""){var g=d("MAWSubscribeToContactNames").ContactNameMode.FIRST_NAME;(f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP)&&(g=d("MAWSubscribeToContactNames").ContactNameMode.FULL_NAME);var h=d("MAWThreadCustomizationUtils").nicknameOnlyForFirstParticipantChecking(f),i=d("MAWThreadCustomizationUtils").skipNicknameCheck(f);f=e.map(function(a,b){return n(a,h,b,i,g)});return[a,f]}f=new Map([].concat(Array.from(b.keys()),e).map(function(a){return[a,"$PARTICIPANT_FULL_NAME("+a+")"]}));return m(a,e,f,b)}g.buildMsgTextWithMentions=a;g.buildThreadSnippetWithMentions=b}),98);
__d("MAWBridgeBuildThreadSnippet",["MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWLocalizationType","MAWVault","first","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a!=null?d("MAWVault").unvault(a):void 0}function i(a,b,c){if(a==null)return b;b=[].concat(b);switch(c){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:b[0]=a;break}return b}function j(a){return a.replace(/\$/g,"$$$$")}function a(a,b){var e=a.snippetContactIDs,f=a.snippetMentionJIDs,g=a.snippetParams,k=a.snippetSenderContactId;a=a.snippetType;if(g==null||a==null||e==null)return b;k!=null&&!e.includes(k)&&c("justknobx")._("3140")&&e.push(k);b=h(c("first")(g));k=d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(b==null?null:j(b),f,e,a);b=k[0];f=k[1];return d("MAWAdminMsg").buildLocalizedString(i(b,g,a),f,a)}g.buildBridgeThreadSnippet=a}),98);
__d("MAWDbChatId__UNSAFE_DO_NOT_USE",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).of_float(a)}function b(a,b){return a+"_"+b}g.convertToChatId64__DEPRECATED=a;g.craftAltIndex__DEPRECATED=b}),98);
__d("MAWHexUtils",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.toString(16);return(a.length-1).toString(16)+a}function b(a){for(var b=1;b<a.length;b++){var d=a.substring(0,b),e=a.substring(b);if(e.length-1===parseInt(d,16))return parseInt(e,16)}throw c("err")("Cannot convert the order-preserving-hex back to number")}g.orderPreservingHex=a;g.reverseOrderPreservingHex=b}),98);
__d("WAMsg",["WAAssertUnreachable","WAJids","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.author,c=a.chat;a=a.externalId;return c+"_"+a+"_"+b}function h(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return{author:a.id.author,deleteTs:a.deleteTs,ephemeralSetting:a.ephemeralSetting,expirationTs:a.expirationTs,externalId:a.id.externalId,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.ts};case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return{author:a.id.author,externalId:a.id.externalId,sentTs:a.sentTs,ts:a.ts};default:a.type;return null}}function b(a){var b=h(a);if(b==null)return null;switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("WAMsgType").MSG_TYPE.TEXT});case d("WAMsgType").MSG_TYPE.IMAGE:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.IMAGE});case d("WAMsgType").MSG_TYPE.VIDEO:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.VIDEO});case d("WAMsgType").MSG_TYPE.PTT:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.STICKER});case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.RECEIVER_FETCH});case d("WAMsgType").MSG_TYPE.GIF:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL});case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.UNAVAILABLE});case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.REACTION:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.DOCUMENT_FILE:case d("WAMsgType").MSG_TYPE.EDIT_ACTION:return null;default:return c("WAAssertUnreachable")(a.type)}}function e(a){if(d("WAJids").isAuthorSystem(a.author))throw c("err")("Cannot send @system messages");else return{author:a.author,chat:a.chat,externalId:a.externalId}}g.craftWAMsgIdString=a;g.asQuotedMsg=b;g.asProtocolMsgId=e}),98);
__d("MAWDbMsg",["FBLogger","I64","MAWDbChatId__UNSAFE_DO_NOT_USE","MAWHexUtils","MAWMsgType","WAMsg","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i=[(i=d("MAWMsgType")).MSG_TYPE.REVOKED,i.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,i.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,i.MSG_TYPE.GROUP_INVITE,i.MSG_TYPE.SK_DISTRIBUTION,i.MSG_TYPE.RAVEN_ACTION];var j=0,k=Number.MAX_SAFE_INTEGER;function a(a){return v(a)?a:null}function b(a){return a}function e(a){return a}var l="futureproof",m="futureproof_spam",n="spam",o="toBeRead",p="e2ee_admin_msg",q="cutover_admin_msg";function r(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m"}function f(a,b,e){a=d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m";return!c("justknobx")._("621")?a:a+"_"+e.externalId}function s(a,b){return!c("justknobx")._("1903")?r(a,b):d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_um"}function t(a,b){return!c("justknobx")._("1903")?r(a,b):d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_r"}function u(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_DEBUG_"+d("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4))}function v(a){a=a.split("_");return a.length>=3&&a[0]!==""&&a[1]!==""&&a[2]==="m"}function w(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,o)}function x(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,p)}function y(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,q)}function z(a){a=a.split("_");a[0];a=a[1];return d("MAWHexUtils").reverseOrderPreservingHex(a)}function A(a){return d("MAWHexUtils").orderPreservingHex(a)+"_"}function B(a){return d("MAWHexUtils").orderPreservingHex(a)+"_z"}function C(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.XMA:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!1}throw c("FBLogger")("maw_db").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',a.type)}function D(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!1}throw c("FBLogger")("maw_db").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',a.type)}function E(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:return!0;case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!1;default:c("FBLogger")("maw_db").mustfix('Invalid msg type for isPhotoOrVideoMediaMsg check: "%s"',a.type);return!1}}function F(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!1;default:c("FBLogger")("maw_db").mustfix('Invalid msg type for isDocumentFileMediaMsg check: "%s"',a.type);return!1}}function G(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("maw_db").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',a.type)}function H(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("maw_db").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',a.type)}function I(a){return K(a.type)}function J(a){return a.type===d("MAWMsgType").MSG_TYPE.ADMIN}function K(a){return a==="EphemeralSyncResponse"||a==="EphemeralSettingChangeFromCurrentDevice"||a==="GroupInvite"||a==="SenderKeyDistribution"||a==="RavenAction"||a==="EditAction"}function L(a){return a==="RavenAction"}function M(a){return a.originalTs!=null?a.originalTs:N(a)}function N(a){return a.serverTs!=null?a.serverTs:a.ts}function O(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return N(a)*1e3}function P(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function Q(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return a.msgContent;case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return a.editMsgContent;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return}throw c("FBLogger")("maw_db").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',a.type)}function R(a){return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}function S(a){return(h||(h=d("I64"))).to_float(a)}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=i;g.MIN_MSG_SORT_ORDER=j;g.MAX_MSG_SORT_ORDER=k;g.toMsgId=a;g.stanzaIdToMsgId=b;g.instamadilloMsgIdToMsgId=e;g.FUTUREPROOF_ALT_INDEX=l;g.FUTUREPROOF_SPAM_ALT_INDEX=m;g.SPAM_ALT_INDEX=n;g.craftMsgId=r;g.craftMsgIdV2=f;g.craftUnrenderedMsgId=s;g.craftReactionId=t;g.craftDebugMsgId=u;g.isValidMsgId=v;g.craftToBeReadAltIndex=w;g.craftE2eeAdminMsgAltIndex=x;g.craftCutoverAdminMsgAltIndex=y;g.getInChatMsgIdFromMsgId=z;g.msgIdsInChatLowerBound=A;g.msgIdsInChatUpperBound=B;g.isXMAMsg=C;g.isMediaMsg=D;g.isPhotoOrVideoMediaMsg=E;g.isDocumentFileMediaMsg=F;g.isContentMsg=G;g.isMsgEligibleForTriggeringEphemeralSyncResponse=H;g.isUnrenderedMsg=I;g.isAdminMsg=J;g.isUnrenderedMsgType=K;g.isRavenActionMsgType=L;g.getOriginalTsFromMsg=M;g.getCanonicalTsFromMsg=N;g.getSortOrderWithFallback=O;g.getSortOrderFromPrevious=P;g.getMsgContent=Q;g.getWAMsgId=R;g.convertMsgRowId64=S}),98);
__d("WABlobToArrayBuffer",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(h||(h=b("Promise")))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("err")("blobToArrayBuffer got error because result is not ArrayBuffer: "+typeof a))};e.onerror=function(){var a;d((a=e.error)!=null?a:c("err")("blobToArrayBuffer got unknown error"))};e.readAsArrayBuffer(a)})}g.blobToArrayBuffer=a}),98);
__d("MAWImageUtils",["Promise","WABlobToArrayBuffer","cr:8676","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="image/jpeg",j=100,k=c("justknobx")._("2338")*1024,l=c("justknobx")._("2340"),m=c("justknobx")._("2545");function n(a,d){d===void 0&&(d=!0);var e;return new(h||(h=b("Promise")))(function(b,f){e=new Image();var g=/^(?:data|blob):/.test(a);d&&!g&&e.setAttribute("crossOrigin","anonymous");e.onload=b;e.onabort=function(){f(function(){throw c("err")("Error loading image from provided URL")})};e.onerror=function(){f(function(){throw c("err")("Wrong blob type")})};e.src=a}).then(function(){return e})}function o(a,c,d,e){d===void 0&&(d=!1);if(a.toBlob)return new(h||(h=b("Promise")))(function(b){var d=e==null?void 0:e/100;a.toBlob(b,c,d)}).then(function(e){var f=k,g=l/100;return d&&e.size>=f?new(h||(h=b("Promise")))(function(b){a.toBlob(b,c,g)}):e});else{var f,g=(f=b("cr:8676")==null?void 0:b("cr:8676").dataURLtoBlob)!=null?f:window.dataURLtoBlob;return(h||(h=b("Promise"))).resolve(g(a.toDataURL(c))).then(function(e){var f=k,i=l/100;return d&&e.size>=f?(h||(h=b("Promise"))).resolve(g(a.toDataURL(c,i))):e})}}function a(a,d,e,f){return n(a).then(function(a){var b=document.createElement("canvas");b.width=a.naturalWidth;b.height=a.naturalHeight;var c=b.getContext("2d");f!==!0&&r(b);c.drawImage(a,0,0);return o(b,d,!1,e).then(function(b){return{blob:b,height:a.naturalHeight,width:a.naturalWidth}})})["catch"](function(a){return(h||(h=b("Promise"))).reject((a=a)!=null?a:c("err")("Error loading image from URL"))})}var p=function(a){return!c("gkx")("5179")?a.arrayBuffer():d("WABlobToArrayBuffer").blobToArrayBuffer(a)};function e(a,b){return n(a).then(function(a){var c=document.createElement("canvas"),d=a.naturalWidth,e=a.naturalHeight,f=c.getContext("2d");e=s(e,d,b);c.width=e.width;c.height=e.height;var g=c.width,h=c.height;q(c);f.drawImage(a,0,0,g,h);return o(c,i,!0).then(function(a){return p(a).then(function(a){return{height:h,jpegThumbnail:a,width:g}})})})}function f(a,b){return n(a).then(function(a){a=s(a.naturalHeight,a.naturalWidth,b);return{height:a.height,width:a.width}})}function q(a){var b=a.getContext("2d");b.fillStyle="rgb(247,247,247)";b.fillRect(0,0,a.width,a.height)}function r(a){var b=a.getContext("2d");b.fillStyle="rgb(255,255,255)";b.fillRect(0,0,a.width,a.height)}function s(a,b,c){b=b!=null?b:c;a=a!=null?a:c;b>a?b>c&&(a*=c/b,b=c):a>c&&(b*=c/a,a=c);return{height:Math.round(Math.max(a,1)),width:Math.round(Math.max(b,1))}}function t(a){return n(a).then(function(a){return{height:a.naturalHeight,width:a.naturalWidth}})}g.TYPE_JPEG=i;g.IMG_THUMB_MAX_EDGE=j;g.STICKER_THUMBNAIL_MAX_SIZE=m;g.canvasToBlob=o;g.urlToFile=a;g.urlToThumbnail=e;g.urlToThumbnailSpec=f;g.boundHeightWidth=s;g.urlToImageSpec=t}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID());if((h||(h=c("ExecutionEnvironment"))).isInWorker){var b=d("WAGlobals").getMyUserJid();d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:b===a?"same":"different"});return b}return a}g.getMyUserJid=a}),98);
__d("WAHashUtils",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function b(a,b){return d("WABase64").encodeB64UrlSafe(a,b)}function c(a){return a}function e(a){return a}function f(a){return""+a.slice(0,3)}g.toPlaintextHash=a;g.toCiphertextHash=b;g.stringToPlaintextHash=c;g.toHashedPlaintextHash=e;g.sanitisePlaintextHash=f}),98);
__d("getReplyContentForNoteReply",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.author,e=a.msgId;c=d("WAJids").authorToUserId(c,b);b=(b=a.quote)==null?void 0:(b=b.content.msgContent)==null?void 0:b.content;a=(a=a.quote)==null?void 0:a.content.expirationTs;return{isNoteReply:!0,replyMediaExpirationTimestampMs:a!=null?a*1e3:void 0,replyMessageText:b,replySourceId:e,replyToUserId:c}}g["default"]=a}),98);
__d("MAWBridgeMsg",["LSHotEmojiSize","LSIntEnum","MAWDbMsg","MAWImageUtils","MAWMediaGalleryM2Utils","MAWMsgType","MAWUserJidWrapper","MAWVault","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAHashUtils","WAJids","WALogger","WAMsgType","getReplyContentForNoteReply","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWBridgeMsg] Missing content for external link share XMA message"]);i=function(){return a};return a}function j(a,b,e){var f,g;f=((f=a.quote)==null?void 0:f.content.type)===d("WAMsgType").NOTE_REPLY;if(f)return c("getReplyContentForNoteReply")(a,e);f=(f=a.quote)==null?void 0:f.content;if(d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)||d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)){var h=a.author,i=a.mediaId,j=a.msgId,k=d("WAJids").authorToUserId(h,e);if(d("MAWXMAUtils").isXMAStoryMention(a.xmaMessageType)){var l=a.threadJid,m;l!=null&&(m=d("WAJids").interpretAsUserJid(l));m!=null&&(k=d("WAJids").userIdFromJid(m))}i!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","bridge_msg_get_reply_content");return{isFBStoryMention:d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),isIGStoryMention:d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(a.xmaMessageType),isMsgHighlightsTabFriendUpdatesReply:d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),isStoryHighlightShare:d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),isStoryReply:d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType),replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyMediaUrlMimeType:i!=null?"image/jpeg":void 0,replyPlaintextHash:(l=a.plaintextHash)!=null?l:void 0,replySenderIsMe:h===d("WAJids").AUTHOR_ME||k===e,replySourceId:j,replySourceTimestampMs:a.sortOrderMs,replyStatusType:i!=null?"Image":void 0,replyToUserId:k,storyShareAuthor:b==null?void 0:b.storyShareAuthor}}l=(f==null?void 0:f.type)===d("MAWMsgType").MSG_TYPE.XMA&&c("gkx")("458");if(f==null||(f==null?void 0:f.msgId)==null&&(f==null?void 0:f.sourceId)==null&&!l)return;h=f||{};j=h.author;i=h.mediaId;k=h.msgId;var n=h.plaintextHash,o=h.sourceId,p=h.specialTextSize,q=h.ts,r=h.type;h=h.xmaMessageType;q=q!=null?q*1e3:void 0;g=f.type===d("MAWMsgType").MSG_TYPE.TEXT||d("MAWXMAUtils").isXMAExternalLinkShare(h)?(g=f.msgContent)==null?void 0:g.content:void 0;var s=d("WAJids").authorToUserId(j,e),t=f.type===d("MAWMsgType").MSG_TYPE.TEXT?f.msgContent.mentionedJids:void 0;j=j===d("WAJids").AUTHOR_ME||s===e;e=b||{};b=e.replyMediaId;var u=e.replyMediaPreviewHeight,v=e.replyMediaPreviewWidth,w=e.replyMediaUrlFallback,x=e.replyMediaUrlMimeType,y=e.replyPlaintextHash;e=e.replyXMAId;if(d("MAWXMAUtils").isXMAStoryReply(h)){return{isStoryProducerReply:d("MAWXMAUtils").isXMAStoryProducerReply(h),isStoryReaction:d("MAWXMAUtils").isXMAStoryReaction(h),isStoryReply:!0,replyMediaExpirationTimestampMs:f==null?void 0:f.expirationTs,replyMediaId:i,replyMediaUrlMimeType:i!=null?"image/jpeg":void 0,replyPlaintextHash:(f=y!=null?d("WAHashUtils").stringToPlaintextHash(y):n)!=null?f:void 0,replySenderIsMe:j,replySourceId:o,replySourceTimestampMs:q,replyStatusType:i!=null?"Image":void 0,replyToUserId:s}}n=d("MAWImageUtils").boundHeightWidth(u,v,96*.8);f=n.height;o=n.width;return{isIGXMAPostShare:d("MAWXMAUtils").isIGXMAPostShare(h),isIGXMAStoryShare:d("MAWXMAUtils").isIGXMAStoryShare(h),isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:r===d("MAWMsgType").MSG_TYPE.STICKER?f:u,replyMediaPreviewWidth:r===d("MAWMsgType").MSG_TYPE.STICKER?o:v,replyMediaUrlFallback:w,replyMediaUrlMimeType:x,replyMentionedJids:t,replyMessageText:g,replyPlaintextHash:y!=null?d("WAHashUtils").stringToPlaintextHash(y):void 0,replySenderIsMe:j,replySourceId:l&&k==null?a.msgId:k,replySourceTimestampMs:q,replyStatusType:p===1||p===2||p===3?d("MAWMsgType").MSG_TYPE.STICKER:r,replyToUserId:s,replyXMAId:e}}function a(a){a=a.specialTextSize;switch(a){case 1:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL);case 2:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM);case 3:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").NONE)}}function b(a,b,e,f,g){var h,k,l=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid());h=((h=a.isForwarded)!=null?h:!1)&&a.type!==d("MAWMsgType").MSG_TYPE.STICKER;k=(k=a.forwardingScore)!=null?k:0;var m=d("MAWDbMsg").getCanonicalTsFromMsg(a),n=j(a,e,l),o=d("MAWXMAUtils").isXMAStoryShare(a.xmaMessageType),p=d("MAWXMAUtils").isXMAStoryReaction(a.xmaMessageType),q=d("MAWXMAUtils").isXMAExternalLinkShare(a.xmaMessageType),r=d("MAWXMAUtils").isIGXMAStoryMention(a.xmaMessageType),s=d("MAWXMAUtils").isFBXMAStoryMention(a.xmaMessageType),t=d("MAWXMAUtils").isXMAStoryHighlightShare(a.xmaMessageType),u=d("MAWXMAUtils").isXMAPostPrivateReply(a.xmaMessageType),v=d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType),w=d("MAWDbMsg").getSortOrderWithFallback(a),x=a.externalId;f=c("justknobx")._("3424")&&d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled({isSilent:!0})&&a.source==="media_restore"?"EncryptedBackupsMedia":f;var y=void 0;if(!c("justknobx")._("2996"))y=(e==null?void 0:e.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(e==null?void 0:e.replyPlaintextHash):void 0;else{y=(e==null?void 0:e.replyPlaintextHash)!=null?d("WAHashUtils").stringToPlaintextHash(e==null?void 0:e.replyPlaintextHash):(e=n==null?void 0:n.replyPlaintextHash)!=null?e:void 0}switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:e=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},n,{ack:a.ack,chatJid:a.threadJid,content:e,editCount:a.editCount,ephemeralDurationInSec:(e=a.ephemeralSetting)==null?void 0:e.ephemeralExpirationInSec,externalId:x,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,mentionedJids:a.msgContent.mentionedJids,msgId:a.msgId,offlineMsg:b,replyPlaintextHash:y,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,specialTextSize:a.specialTextSize,transportKey:f,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return babelHelpers["extends"]({},n,{ack:a.ack,chatJid:a.threadJid,ephemeralDurationInSec:(e=a.ephemeralSetting)==null?void 0:e.ephemeralExpirationInSec,externalId:x,forwardingScore:k,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyPlaintextHash:y,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},n,{ack:a.ack,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyPlaintextHash:y,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type,unsupportedType:a.msgContent.subtype});case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return{ack:a.ack,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},n,{ack:a.ack,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,replyPlaintextHash:y,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type});case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return{ack:a.ack,adminContent:a.msgContent.adminMsgContent.map(function(a){return a==="Facebook User"?"0":a}),adminType:a.msgContent.adminType,adminVersion:a.msgContent.version,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.REVOKED:return{ack:a.ack,chatJid:a.threadJid,externalId:x,forwardingScore:k,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isForwarded:h,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type};case d("MAWMsgType").MSG_TYPE.XMA:var z;e=(e=a.msgContent)==null?void 0:e.content;z=e!=null?d("MAWVault").isVaulted(e)?(z=a.msgContent)==null?void 0:z.content:d("MAWVault").vault(e):void 0;q&&z==null&&d("WALogger").WARN(i());e=c("justknobx")._("1191")||p||q?z:void 0;return babelHelpers["extends"]({},n,{ack:a.ack,chatJid:a.threadJid,content:e,ephemeralDurationInSec:(q=a.ephemeralSetting)==null?void 0:q.ephemeralExpirationInSec,externalId:x,forwardingScore:k,instanceKey:g,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isExpiredXmaMsg:a.isExpiredXmaMsg,isFBStoryMention:s,isForwarded:h,isIGStoryMention:r,isMsgHighlightsTabFriendUpdatesReply:v,isPostPrivateReply:u,isStoryHighlightShare:t,isStoryReaction:p,isStoryShare:o,mentionedJids:(z=a.msgContent)==null?void 0:z.mentionedJids,msgId:a.msgId,offlineMsg:b,replyPlaintextHash:y,sender:d("WAJids").authorToUserId(a.author,l),sortOrderMs:w,transportKey:f,ts:m,type_:a.type,xmaMessageType:a.xmaMessageType});default:return c("WAAssertUnreachable")(a.type)}}g.getSpecialTextSize=a;g.createBridgeMsg=b}),98);
__d("MAWFTSIsMessageValidForSearch",["MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0}function a(a){var b=a.msgContent,c=a.sortOrderMs,e=a.type;b=b==null?void 0:b.content;if(b==null||c==null)return null;if(e!==d("MAWMsgType").MSG_TYPE.TEXT&&e!==d("MAWMsgType").MSG_TYPE.XMA)return null;return h(a)?null:{content:b,sortOrderMs:c}}g.verifyMessageValidity=a}),98);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWDbMsg","MAWFTSIsMessageValidForSearch","MAWVault","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e;c===void 0&&(c=!0);var f=d("MAWFTSIsMessageValidForSearch").verifyMessageValidity(a);if(f==null)return null;var g=d("MAWCurrentUser").getID(),h=a.author,i=a.externalId,j=a.msgId;e=(e=a.threadJid)!=null?e:b;if(e==null)return null;b=f.content;f=f.sortOrderMs;e={chatJid:e,externalId:i,msg:{msgId:j,sender:d("WAJids").authorToUserId(h,g),ts:d("MAWDbMsg").getCanonicalTsFromMsg(a)},sortOrderMs:f};i=b;return babelHelpers["extends"]({},e,{msg:babelHelpers["extends"]({},e.msg,{content:i!=null?d("MAWVault").isVaulted(i)?c?i:d("MAWVault").unvault(i):c?d("MAWVault").vault(i):i:void 0})})}b="message_content_search";c="non_message_content_search";g.createBridgeSearchMsg=a;g.MESSAGE_CONTENT_SEARCH=b;g.NON_MESSAGE_CONTENT_SEARCH=c}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]);c=a;f["default"]=c}),66);
__d("MAWBridgeUIEventDataValidation",["FBLogger","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){c("FBLogger")("maw_bridge").catching(b).mustfix("Cannot convert string to i64: %s",a)}}g.stringToI64Opt=a}),98);
__d("MAWDbReaction",["MAWAckLevel","MAWUserJidWrapper","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MAWUserJidWrapper").getMyUserJid();if(a.reactToAuthor!=="@me"&&a.reactToAuthor!==b||a.reaction==null)return null;b=a.author==="@me"||a.author==="@system"?null:a.author;return b==null?null:babelHelpers["extends"]({},a,{author:b,reaction:a.reaction,reactToAuthor:"@me"})}function b(a,b,c){var e=d("MAWUserJidWrapper").getMyUserJid();return a.find(function(a){return a.threadJid===b&&d("WAJids").authorToUserId(a.author,e)===d("WAJids").authorToUserId(c,e)})}function c(a){return a}function e(a,b,c,e,f,g,h,i,j,k,l,m,n){m===void 0&&(m=d("MAWAckLevel").ACK.clock);m={ack:m,author:k,externalId:b,groupingKey:g,reaction:f,reactionId:c,reactToAuthor:h,reactToExternalId:e,reactToMsgId:i,senderTimestampMs:n,threadJid:a,ts:j};return l!=null?babelHelpers["extends"]({},m,{rowId:l}):m}function f(a){return a.senderTimestampMs!=null?d("WATimeUtils").castLongIntToMillisTime(a.senderTimestampMs):d("WATimeUtils").castUnixTimeToMillisTime(a.ts)}g.castToIncomingDbReaction=a;g.findMatchingReaction=b;g.reactionIdToMsgId=c;g.formatReactionForDb=e;g.getReactionTimeMs=f}),98);
__d("MAWExtractMsFromExternalId",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new Date(a).getTime()>0}var j=2199023255551;function a(a){a=Number((h||(h=d("I64"))).to_string(h.and_(h.lsr_(a,22),h.of_float(j))));if(i(a)){a=Math.floor(Number(a)%1e5/100);return a}}g.extractMsFromExternalId=a}),98);
__d("MAWCalculateBumpTimestampMs",["I64","MAWDbReaction","MAWExtractMsFromExternalId","MAWTimeUtils","WATimeUtils","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){b=b==null?null:d("MAWExtractMsFromExternalId").extractMsFromExternalId(b);return(h||(h=d("I64"))).add(d("MAWTimeUtils").millisTimeToTimestamp(a),h.of_int32((a=b)!=null?a:0))}function a(a){var b=a.msg;a=a.throwIfNoServerTs;a=a?c("nullthrows")(b.serverTs):b.serverTs;return i(d("WATimeUtils").castUnixTimeToMillisTime((a=a)!=null?a:b.ts),(h||(h=d("I64"))).of_string(b.externalId))}function b(a){return i(d("MAWDbReaction").getReactionTimeMs(a),(h||(h=d("I64"))).of_string(a.externalId))}g.calculateBumpTimestampMs=i;g.calculateBumpTimestampMsForMsg=a;g.calculateBumpTimestampMsForReaction=b}),98);
__d("WADbContact",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;f.NON_CONTACT=a;f.ONE_WAY_CONTACT=b;f.REVERSED_ONE_WAY_CONTACT=c;f.TWO_WAY_CONTACT=d}),66);
__d("MAWContactRelationshipType",["I64","LSContactBitOffset","WADbContact"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("LSContactBitOffset").hasWithDefault(64,a,!0);a=(h||(h=d("I64"))).ge(a.contactViewerRelationship,h.of_string("2"));if(a&&b)return d("WADbContact").ONE_WAY_CONTACT;else if(!a&&!b)return d("WADbContact").REVERSED_ONE_WAY_CONTACT;else if(a&&!b)return d("WADbContact").TWO_WAY_CONTACT;return d("WADbContact").NON_CONTACT}g.getContactRelationshipType=a}),98);
__d("MAWDbXMA",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}function b(a){return a}function c(a){return(h||(h=d("I64"))).to_float(a)}g.convertNumbersToXMAIds=a;g.convertNumberToXMAId=b;g.convertXMAId64ToXMAId=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j={dyi:c("justknobx")._("467"),frontloaded:20,initial:20,paginated:c("justknobx")._("3177"),point:1,search:c("justknobx")._("2477")};function a(a,b,e,f){if(b!=null){q({querySource:e,runningInWorker:(e=f)!=null?e:!1,taskSource:a,traceId:b,triggerType:"paginated"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function b(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource;a=a.traceId;if(a!=null){q({querySource:b,runningInWorker:(b=e)!=null?b:!1,taskSource:f,traceId:a,triggerType:"initial"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function e(a,b,e){if(b!=null){q({querySource:"LS",runningInWorker:(e=e)!=null?e:!1,taskSource:a,traceId:b,triggerType:"dyi"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function f(a,b,e){if(b!=null){q({querySource:"LS",runningInWorker:(e=e)!=null?e:!1,taskSource:a,traceId:b,triggerType:"frontloaded"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function k(a,b,e,f){if(b!=null){q({querySource:e,runningInWorker:(e=f)!=null?e:!1,taskSource:a,traceId:b,triggerType:"point"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function l(a){var b=a.querySource,e=a.runningInWorker;a=a.traceId;if(a!=null){q({querySource:b,runningInWorker:(b=e)!=null?b:!1,taskSource:c("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:a,triggerType:"search"})}(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function m(a,b){a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLSuccessThroughBridge(c("qpl")._(521476165,"2432"),void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endSuccess(c("qpl")._(521476165,"2432"),{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function n(a,b,e){e===void 0&&(e="restore_failure"),a!=null&&(b!=null&&b?d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521476165,"2432"),e,void 0,d("WAHashStringToNumber").hashStringToNumber(a)):c("QPLUserFlow").endFailure(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function o(a){v("echo",a)}function p(a){v("protobuf",a)}function q(a){var b=a.querySource,e=a.runningInWorker,f=a.taskSource,g=a.traceId;a=a.triggerType;if(e!=null&&e){var h;d("MAWQplProxy").startQplUserFlow(c("qpl")._(521476165,"2432"),{bool:{runningInWorker:(h=e)!=null?h:!1},"int":{requestedMessagesCount:(h=j[a])!=null?h:10},string:{querySource:b,taskSource:w(f),traceId:g,triggerType:a}},d("WAHashStringToNumber").hashStringToNumber(g),c("justknobx")._("2950"))}else{c("QPLUserFlow").start(c("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:(h=e)!=null?h:!1},"int":{requestedMessagesCount:(e=j[a])!=null?e:10},string:{querySource:b,taskSource:w(f),traceId:g,triggerType:a}},instanceKey:d("WAHashStringToNumber").hashStringToNumber(g),timeoutInMs:c("justknobx")._("2950")})}}function r(a){var b=a.pointName,e=a.traceId;a=a.type;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),{string:{type:a}},{instanceKey:d("WAHashStringToNumber").hashStringToNumber(e)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(e)})}function s(a){var b=a.annotations,e=a.pointName;a=a.traceId;c("QPLUserFlow").addAnnotations(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)});c("QPLUserFlow").addPoint(c("qpl")._(521476165,"2432"),e,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function t(a){var b=a.annotations,e=a.pointName;a=a.traceId;a!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),e,{annotations:b,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function u(a){var b=a.pointName;a=a.traceId;d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521476165,"2432"),b,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)})}function v(a,b){b=b?(i||(i=d("LSIntEnum"))).unwrapIntEnum(b):null;(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+a+"."+w(b))}function w(a){return(a=a==null?void 0:a.toString())!=null?a:"unknown"}g.markEBRestorePaginated=a;g.markEBRestoreInitial=b;g.markEBRestoreDYI=e;g.markEBRestoreFrontloaded=f;g.markEBRestorePoint=k;g.markEBRestoreSearch=l;g.markEBRestoreSuccess=m;g.markEBRestoreFail=n;g.markEBRestoreEcho=o;g.markEBRestoreProtobuf=p;g.addQPLRestorePoint=r;g.addQPLRestorePointWithAnnotations=s;g.addQPLRestorePointWithAnnotationsWorker=t;g.addQPLRestorePointWorker=u}),98);
__d("MAWEphemeralConsts",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=300;b=600;c=900;e=1800;d=Math.imul((f=d("WATimeUtils")).HOUR_SECONDS,6);var h=Math.imul(f.HOUR_SECONDS,12),i=Math.imul(f.DAY_SECONDS,14),j=1e3,k=5,l=10,m=30,n=60,o=d;g.fiveMinutesInSeconds=a;g.tenMinutesInSeconds=b;g.fifteenMinutesInSeconds=c;g.thirtyMinutesInSeconds=e;g.oneHourInSeconds=f.HOUR_SECONDS;g.sixHoursInSeconds=d;g.twelveHoursInSeconds=h;g.oneDayInSeconds=f.DAY_SECONDS;g.ephemeralMaxDelectionWindowForUnseenMessage=i;g.msPerSec=j;g.fiveSeconds=k;g.tenSeconds=l;g.thirtySeconds=m;g.oneMinuteInSeconds=n;g.ephemeralReportingWindowInSeconds=o}),98);
__d("MAWFolderTypes",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=10;var g={ARCHIVED:e,INBOX:a,OTHER:c,PENDING:b,SPAM:d};f.INBOX=a;f.PENDING=b;f.OTHER=c;f.SPAM=d;f.ARCHIVED=e;f.FOLDER_ID=g}),66);
__d("MAWJobDefinitions",["MAWExternalId"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function b(a){return a}e={acceptGroupInvite:function(a,b,c,d,e,f){f=i(f);return{args:{chatJid:a,inviteCode:d,invitedParticipantUserId:c,inviteExpirationTs:e,inviterUserId:b},scheduleConfig:(a=f)!=null?a:void 0,type:"acceptGroupInvite"}},addGroupParticipants:function(a,b,c,d){d=i(d);return{args:{group:a,s2sInstanceKey:c,users:b},scheduleConfig:(a=d)!=null?a:void 0,type:"addGroupParticipants"}},deleteMsgsForMe:function(a,b){b=i(b);return{args:{msgIds:a},scheduleConfig:(a=b)!=null?a:void 0,type:"deleteMsgsForMe"}},demoteGroupParticipants:function(a,b,c){c=i(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"demoteGroupParticipants"}},downloadAndHandleMedia:function(a,b,c,d,e,f,g){e=i(g);return{args:{hash:b,metricInstanceKeys:f,msgType:d,protocolMsgId:a,qplEntryPoint:c},scheduleConfig:(g=e)!=null?g:void 0,type:"downloadAndHandleMedia"}},forwardMsg:function(a,b,c,e,f,g,h){h=i(h);c=(c=c)!=null?c:{};var j=c.s2sInstanceKey;c.s2sUserFlowQPLEvent;c=babelHelpers.objectWithoutPropertiesLoose(c,["s2sInstanceKey","s2sUserFlowQPLEvent"]);return{args:{args:c,chatJid:a,ephemeralSetting:e,externalId:(c=f)!=null?c:d("MAWExternalId").generateExternalId(),isFirstMsg:g,protocolMsgId:b,s2sInstanceKey:j},scheduleConfig:(a=h)!=null?a:void 0,type:"forwardMsg"}},getSpams:function(a){a=i(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"getSpams"}},handleFutureproofMsg:function(a){a=i(a);return{args:{},scheduleConfig:(a=a)!=null?a:void 0,type:"handleFutureproofMsg"}},handleSpamMsg:function(a){a=i(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"handleSpamMsg"}},igdReportUserSpam:function(a,b){var c=a.chatJid,d=a.context,e=a.frxParams,f=a.frxTags,g=a.msgs,h=a.reportedMessageId,j=a.spamFlow;a=a.userJid;b=i(b);return{args:{chatJid:c,context:d,frxParams:e,frxTags:f,msgs:g,reportedMessageId:h,spamFlow:j,userJid:a},scheduleConfig:(c=b)!=null?c:void 0,type:"igdReportUserSpam"}},igdSendMsg:function(a,b){var c=a.actorID;a=a.taskID;b=i(b);return{args:{actorID:c,taskID:a},scheduleConfig:(c=b)!=null?c:void 0,type:"igdSendMsg"}},leaveGroups:function(a,b){b=i(b);return{args:{groups:a},scheduleConfig:(a=b)!=null?a:void 0,type:"leaveGroups"}},markThreadAsRead:function(a,b,c,d,e,f,g){g=i(g);return{args:{chatJid:a,isBlocked:c,isReadReceiptsDisabled:f,isRestricted:d,relationship:b,upTo:e},scheduleConfig:(a=g)!=null?a:void 0,type:"markThreadAsRead",uniqKey:e==null?void 0:e.externalId}},promoteGroupParticipants:function(a,b,c){c=i(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"promoteGroupParticipants"}},removeGroupParticipants:function(a,b,c){c=i(c);return{args:{group:a,users:b},scheduleConfig:(a=c)!=null?a:void 0,type:"removeGroupParticipants"}},reportUserSpam:function(a,b,c,d,e,f,g,h,j,k){j=i(j);return{args:{chatJid:c,context:f,frxParams:g,frxTags:e,isIgd:d,openMsgs:k,reportedMessageId:h,spamFlow:b,userJid:a},scheduleConfig:(c=j)!=null?c:void 0,type:"reportUserSpam"}},resendWrittenAppData:function(a,b){b=i(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:"resendWrittenAppData"}},restoreMessagesFromEncryptedBackups:function(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p){n=i(n);return{args:{deanonApiPayload:o,hasMoreAfter:e,hasMoreBefore:d,instanceKey:k,isMediaGalleryRestore:p,isPointQuery:f,messages:c,minMsgId:g,optimisticMsgs:l,startSortKey:j,taskSource:m,threadId:b,traceId:h,transportKey:a},scheduleConfig:(o=n)!=null?o:void 0,type:"restoreMessagesFromEncryptedBackups"}},restoreProtobufsFromEncryptedBackups:function(a,b,c,d,e,f,g,h,j,k,l,m,n,o,p){m=i(m);return{args:{deanonApiPayload:o,echoMessages:a,hasMoreAfter:f,hasMoreBefore:e,instanceKey:l,isMediaGalleryRestore:p,isPointQuery:g,messages:d,minMsgId:h,referenceTimestamp:k,requestId:j,taskSource:n,threadId:c,transportKey:b},scheduleConfig:(o=m)!=null?o:void 0,type:"restoreProtobufsFromEncryptedBackups"}},revokeMsgs:function(a,b){b=i(b);return{args:a,scheduleConfig:(a=b)!=null?a:void 0,type:"revokeMsgs"}},sendAppData:function(a,b,c){c=i(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendAppData"}},sendEditMsg:function(a,b,c){c=i(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendEditMsg"}},sendEphemeralSettingMsg:function(a,b,c,e){e=i(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendEphemeralSettingMsg"}},sendGroupInviteMsg:function(a,b,c){c=i(c);return{args:{args:a,externalId:(a=b)!=null?a:d("MAWExternalId").generateExternalId()},scheduleConfig:(b=c)!=null?b:void 0,type:"sendGroupInviteMsg"}},sendMediaMsg:function(a,b,c,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){s=i(s);return{args:{args:{duration:k,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:j,jpegThumbnailWidth:h,mediaGroupMetadata:x,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:c,source:t,width:f},attachmentType:w,chatJid:a,externalId:(k=r)!=null?k:d("MAWExternalId").generateExternalId(),file:b},scheduleConfig:(m=s)!=null?m:void 0,type:"sendMediaMsg"}},sendMediaMsgV2:function(a,b,c,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){s=i(s);return{args:{args:{duration:k,ephemeralSetting:m,filename:u,height:g,isFirstMsg:q,isForwarded:p,isPtt:l,jpegThumbnail:e,jpegThumbnailHeight:j,jpegThumbnailWidth:h,mediaGroupMetadata:y,offlineAttachmentId:v,openMessageOtid:o,quote:n,s2sInstanceKey:w,source:t,width:f},attachmentType:x,chatJid:a,externalId:(k=r)!=null?k:d("MAWExternalId").generateExternalId(),mimeType:b,plaintext:c},scheduleConfig:(m=s)!=null?m:void 0,type:"sendMediaMsgV2"}},sendMsg:function(a,b,c,e){e=i(e);return{args:{args:b,chatJid:a,externalId:(b=c)!=null?b:d("MAWExternalId").generateExternalId()},scheduleConfig:(a=e)!=null?a:void 0,type:"sendMsg"}},sendReactionMsg:function(a,b,c,e,f,g,h,j){h=i(h);return{args:{args:{groupingKey:"",reaction:f,reactToAuthor:c,reactToProtocolMsgId:b,s2sInstanceKey:e,source:j},chatJid:a,externalId:(f=g)!=null?f:d("MAWExternalId").generateExternalId()},scheduleConfig:(c=h)!=null?c:void 0,type:"sendReactionMsg"}},sendWrittenAppData:function(a,b){b=i(b);return{args:{appDataExternalId:a},scheduleConfig:(a=b)!=null?a:void 0,type:"sendWrittenAppData"}},sendWrittenMsg:function(a,b,c,d){c===void 0&&(c="message");d=i(d);return{args:{protocolMsgId:a,s2sInstanceKey:b,type:c},scheduleConfig:(a=d)!=null?a:void 0,type:"sendWrittenMsg"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,j,k,l){l=i(l);return{args:{args:g,associatedMsgContent:f,associatedMsgContentExternalId:(g=j)!=null?g:d("MAWExternalId").generateExternalId(),chatJid:a,faviconFile:e,headerFile:c,previewFile:b,xmaArgs:k,xmaMsgExternalId:(f=h)!=null?f:d("MAWExternalId").generateExternalId()},scheduleConfig:(j=l)!=null?j:void 0,type:"sendXMAShareMsg"}},setGroupSubject:function(a,b,c){c=i(c);return{args:{group:a,subject:b},scheduleConfig:(a=c)!=null?a:void 0,type:"setGroupSubject"}},startInstamadilloDYI:function(a,b){b=i(b);return{args:{qplInstanceKey:a},scheduleConfig:(a=b)!=null?a:void 0,type:"startInstamadilloDYI"}},updateBackupEntFbidForMedia:function(a,b,c,d){d=i(d);return{args:{backupEntFbid:b,deliveryObjectId:a,traceId:c},scheduleConfig:(b=d)!=null?b:void 0,type:"updateBackupEntFbidForMedia"}},uploadRetroactiveThreadsAndMessages:function(a){a=i(a);return{args:void 0,scheduleConfig:(a=a)!=null?a:void 0,type:"uploadRetroactiveThreadsAndMessages"}}};function c(a,b){return h(a,b)}function h(a,b){var c=b.scheduleConfig,e=babelHelpers.objectWithoutPropertiesLoose(b,["scheduleConfig"]);c={args:{},scheduleConfig:c,type:a};b.externalIdJob&&(c.args.externalId=d("MAWExternalId").generateExternalId());c.args=babelHelpers["extends"]({},c.args,e);b.uniqueJob&&(c.uniqKey=a);return c}function i(a){if(a==null)return;return{jobId:a.jobId,maxTimeoutMs:a.maxTimeoutMs,priority:a.priority}}g.toThreadJidPrimaryId=a;g.toEncodedEchoMessage=b;g.jobSerializers=e;g.createStartJobInfo=c;g.createStartJobInfoGeneric=h;g.serializeJobScheduledConfig=i}),98);
__d("MAWMsg",["$InternalEnum","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSReplyMessageAttachmentType","MAWMsgType","WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e,f,g,h){if(a===d("MAWMsgType").MSG_TYPE.TEXT)if(b)return(i||(i=d("LSIntEnum"))).ofNumber(8192);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.IMAGE||a===d("MAWMsgType").MSG_TYPE.VIDEO||a===d("MAWMsgType").MSG_TYPE.RAVEN)return(i||(i=d("LSIntEnum"))).ofNumber(2);else if(a===d("MAWMsgType").MSG_TYPE.PTT)return(i||(i=d("LSIntEnum"))).ofNumber(4);else if(a===d("MAWMsgType").MSG_TYPE.FUTUREPROOF)return k(g);else if(a===d("MAWMsgType").MSG_TYPE.CIPHERTEXT)return(i||(i=d("LSIntEnum"))).ofNumber(65536);else if(a===d("MAWMsgType").MSG_TYPE.UNAVAILABLE)return(i||(i=d("LSIntEnum"))).ofNumber(262144);else if(a===d("MAWMsgType").MSG_TYPE.GIF)return(i||(i=d("LSIntEnum"))).ofNumber(16384);else if(a===d("MAWMsgType").MSG_TYPE.STICKER)return(i||(i=d("LSIntEnum"))).ofNumber(4096);else if(a===d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE)return(i||(i=d("LSIntEnum"))).ofNumber(64);else if(a===d("MAWMsgType").MSG_TYPE.XMA)if(e!=null&&e)return(i||(i=d("LSIntEnum"))).ofNumber(256);else return h===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH?(i||(i=d("LSIntEnum"))).ofNumber(536870912):(i||(i=d("LSIntEnum"))).ofNumber(1024);else if(a===d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE)if(!f)return(i||(i=d("LSIntEnum"))).ofNumber(33554432);else return(i||(i=d("LSIntEnum"))).ofNumber(1);else if(a===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH)return!c("gkx")("5624")?(i||(i=d("LSIntEnum"))).ofNumber(67108864):(i||(i=d("LSIntEnum"))).ofNumber(134217728);else return(i||(i=d("LSIntEnum"))).ofNumber(1)}function k(a){switch(a){case"locationMessage":case"liveLocationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(524288);case"pollCreationMessage":return(i||(i=d("LSIntEnum"))).ofNumber(1048576);case"contactShareMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2097152);case"storyMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(4194304);case"postMentionMessage":return(i||(i=d("LSIntEnum"))).ofNumber(2147483648);case"metaAiMessage":return(i||(i=d("LSIntEnum"))).ofNumber(8388608);case"bumpMessage":return(i||(i=d("LSIntEnum"))).ofNumber(16777216);case"stickerReceiverFetchMessage":return(i||(i=d("LSIntEnum"))).ofNumber(67108864);case"noteMention":return(i||(i=d("LSIntEnum"))).ofNumber(1073741824);default:return(i||(i=d("LSIntEnum"))).ofNumber(131072)}}function e(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function f(a,b){var e=a.replyAttachmentType;if(e==null)return!1;b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);return b&&a.replyAttachmentId==null?!1:(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))||(j||(j=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))}function l(a){return(j||(j=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(134217728))}function m(a){a=a.displayedContentTypes;if((j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(32)))return!0;else return!1}function n(a){return(j||(j=d("I64"))).lt(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))}function o(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1024))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912))}function p(a){a=a.displayedContentTypes;return(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(65536))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(131072))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(524288))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1048576))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2097152))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4194304))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2147483648))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(8388608))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16777216))||(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1073741824))?!0:(j||(j=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(262144))}var q=(b=b("$InternalEnum"))({PLAYED:0,SCREENSHOTTED:1,FORCE_DISABLED:2}),r=b({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4}),s=b({VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2});b=b({IMAGE:0,VIDEO:1});g.text=(h=d("MAWMsgType")).MSG_TYPE.TEXT;g.image=h.MSG_TYPE.IMAGE;g.video=h.MSG_TYPE.VIDEO;g.ptt=h.MSG_TYPE.PTT;g.unsent=h.MSG_TYPE.REVOKED;g.gif=h.MSG_TYPE.GIF;g.bumpExistingMessage=h.MSG_TYPE.BUMP_EXISTING_MESSAGE;g.getDisplayedContentTypes=a;g.isMediaMsg=e;g.isMediaReplyAttachmentType=f;g.isReceiverFetchMsg=l;g.isAdminMsg=m;g.isOptimistic=n;g.isXMAMsg=o;g.isPlaceholder=p;g.MAWRavenActionNotifType=q;g.MAWRavenMsgEphemeralMediaState=r;g.MAWRavenMsgEphemeralType=s;g.MAWRavenMsgMediaType=b}),98);
__d("MAWParseXMAFBConfig",["WAArmadilloXMA.pb","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([(b=d("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY,b.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT,c("gkx")("8746")?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:null,c("gkx")("5481")?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:null,c("gkx")("23929")?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:null,c("gkx")("4902")?d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:null].concat(c("gkx")("6952")?[d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING]:[]).filter(Boolean));function a(a){return a==null?!1:h.has(a)}g.FB_SUPPORTED_TARGET_TYPES=h;g.isFBSupportedTargetType=a}),98);
__d("RavenMessagingState",[],(function(a,b,c,d,e,f){a=Object.freeze({PERMANENT:0,UNSEEN:1,SEEN:2,REPLAYED:3,EXPIRED:4});f["default"]=a}),66);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return c("RavenMessagingState").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return c("RavenMessagingState").UNSEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return c("RavenMessagingState").SEEN;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return c("RavenMessagingState").REPLAYED;case d("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return c("RavenMessagingState").EXPIRED}},i=function(a){switch(a){case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return c("EphemeralMediaViewMode").PERMANENT;case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return c("EphemeralMediaViewMode").REPLAYABLE;case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return c("EphemeralMediaViewMode").READ_ONCE}};b=function(a,b){return{ephemeralMediaState:b,ephemeralMediaViewMode:i(a)}};function a(a,b){switch(b){case d("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?c("RavenMessagingState").SEEN:h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN)return c("RavenMessagingState").SEEN;else if(a===d("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN)return c("RavenMessagingState").REPLAYED;return h(a);case d("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return h(a)}}g.getEphemeralMediaState=h;g.getEphemeralMediaViewMode=i;g.deriveRavenSettings=b;g.getNextRavenMessageEphemeralState=a}),98);
__d("MAWThreadBumpType",[],(function(a,b,c,d,e,f){"use strict";a="NO_UPDATE";b="LOCAL_ONLY";c="LOCAL_AND_SERVER";d=Object.freeze({LOCAL_AND_SERVER:c,LOCAL_ONLY:b,NO_UPDATE:a});f.THREAD_BUMP_TYPE=d}),66);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("MAWUIJob",["ExecutionEnvironment","MAWBridge","WAJobOrchestratorTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilPersisted called in the worker, which is a bug for job: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters waitUntilCompleted called in the worker, which is a bug for job: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIJobStarters fireAndForget called in the worker, which is a bug for job: ",""]);k=function(){return a};return a}var l={priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION};a={fireAndForget:function(a){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(k(),a.type);d("MAWBridge").getBridge().fireAndForget("backend","runJobFireAndForget",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}))},waitUntilCompleted:function(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(j(),a.type);a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilCompleted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}),void 0,b,e);return a},waitUntilPersisted:function(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker&&d("WALogger").ERROR(i(),a.type);a=d("MAWBridge").getBridge().sendAndReceive("backend","runJobWaitUntilPersisted",babelHelpers["extends"]({},a,{scheduleConfig:(a=a.scheduleConfig)!=null?a:l}),void 0,b,e);return a}};g.UIJobStarters=a}),98);
__d("MAWThreadEvent",["LSContactUtils","MAWBridge","MAWBridgeSendAndReceive","MAWContactRelationshipType","MAWJobDefinitions","MAWUIJob","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";b="placeholderConvertSubscription";function a(a,b,e){d("MAWBridge").getBridge().setHandlers("threadEvent",{placeholderConvertSubscription:function(f){var g=f.chatJid;f=f.msgId;a===g&&c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:f}).then(function(a){if(a==null)return;d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").jobSerializers.markThreadAsRead(g,b&&d("MAWContactRelationshipType").getContactRelationshipType(b),b?d("LSContactUtils").isContactBlocked(b):!1,b?d("LSContactUtils").isContactRestricted(b):!1,a,e))}))}})}g.PLACEHOLDER_CONVERT_SUBSCRIPTION=b;g.setThreadEventHandler=a}),98);
__d("MAWThreadUpdateType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=Object.freeze({BUMP_THREAD:c,MARK_THREAD_AS_UNREAD:d,NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:a,SNIPPET_ONLY:b});f.THREAD_UPDATE_TYPE=e}),66);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);
__d("WAByteArray",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b;var c=new Uint8Array(a);for(a=a-1;a>=0;a--)c[a]=b&255,b>>>=8;return c}function b(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function c(a,b){if(!a||!b)return!1;a=new Uint8Array(a);b=new Uint8Array(b);var c=a.length,d=b.length;if(c!==d)return!1;for(d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}f.intToBytes=a;f.uint8ArrayToBuffer=b;f.compareArrayBuffer=c}),66);
__d("WAGetSafeQPLError",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return"<null>";return a instanceof Error||typeof a==="string"?a.toString():"<unknown>"}f.getSafeQPLErrorMessage=a}),66);
__d("WAMapWithDefault",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,b!=null?this.$2=new Map(b):this.$2=new Map()}var b=a.prototype;b.size=function(){return this.$2.size};b.clear=function(){this.$2.clear()};b["delete"]=function(a){return this.$2["delete"](a)};b.get=function(a){var b=this.$2.get(a);if(b!=null)return b;else{b=this.$1(a);this.$2.set(a,b);return b}};b.keys=function(){return this.$2.keys()};b.entries=function(){return this.$2.entries()};b.update=function(b,c){c=new Map(this.$2).set(b,c(this.get(b)));return new a(this.$1,c)};b.toMap=function(){return new Map(this.$2)};return a}();f.MapWithDefault=a}),66);
__d("WAMediaQplHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null||a<0||a>100*1024*1024)return"invalid_size";else if(a<=1*1024)return"size lower than 1 KB";else if(a<=50*1024)return"size between 1 KB and 50 KB";else if(a<=100*1024)return"size between 50 KB and 100 KB";else if(a<=500*1024)return"size between 100 KB and 500 KB";else if(a<=1*1024*1024)return"size between 500 KB and 1 MB";else if(a<=2*1024*1024)return"size between 1 MB and 2 MB";else if(a<=5*1024*1024)return"size between 2 MB and 5 MB";else if(a<=10*1024*1024)return"size between 5 MB and 10 MB";else if(a<=20*1024*1024)return"size between 10 MB and 20 MB";else if(a<=30*1024*1024)return"size between 20 MB and 30 MB";else if(a<=50*1024*1024)return"size between 30 MB and 50 MB";else return"size above 50 MB"}f.convertIntegerSizeToStringBucket=a}),66);
__d("WAPREList",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",CREATE_GROUP:"create_group",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DELETE_THREAD:"delete_thread",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",EB_RESTORE_WITH_HIM:"eb_restore_with_him",EBDB_INIT:"ebdb_init",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",REMOVE_PARTICIPANTS:"remove_participants",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key",WORKER_SCHEDULER:"worker_scheduler",WORKER_SCHEDULER_STUCK:"worker_scheduler_stuck",WORM:"worm"});f.PRE_METRIC=a}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]);j=function(){return a};return a}c=6e4;e=18e4;f=10*60*1e3;var k=0;function a(){var c=[];function e(a){c.push(a)}function b(){d("WALogger").WARN(j()),c.length=0}function a(a){c.length===0&&d("WALogger").WARN(i(),a.name,a.stage),c.forEach(function(b){b(a)})}return{subscribe:e,notify:a,clear:b}}a=a();var l=a.notify,m=a.clear;a=a.subscribe;var n;"FinalizationRegistry"in self&&"WeakRef"in self&&(n=new FinalizationRegistry(function(a){var b=a.event;a=a.eventFlow;if(a.isActive())try{d("WALogger").ERROR(h(),b)}catch(a){}}));var o=new Set([d("WAPREList").PRE_METRIC.SEND_MESSAGE,d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function b(a,b,c,d){var e;c==null&&k++;var f=(e=c)!=null?e:k,g="open";c==null?l({name:a,stage:"START",instanceKey:f,annotations:b,timeoutInMs:d}):l({name:a,stage:"RESUME",instanceKey:f,annotations:b});var h;function i(){if(h!=null){var a=h.deref();if(a!=null){var b;(b=n)==null?void 0:b.unregister(a)}}}e={addPoint:function(c,b){l({name:a,stage:"POINT",reason:c,instanceKey:f,annotations:b})},addAnnotations:function(b){l({name:a,stage:"ANNOTATE",instanceKey:f,annotations:b})},endSuccess:function(b){l({name:a,stage:"SUCCESS",instanceKey:f,annotations:b}),g="closed",i()},endCancel:function(b){l({name:a,stage:"CANCEL",instanceKey:f,annotations:b}),i()},endFail:function(c,b){l({name:a,stage:"FAIL",reason:c,instanceKey:f,annotations:b}),g="closed",i()},getFlowDetails:function(){return{name:a,instanceKey:f}},isActive:function(){return g==="open"}};n&&!o.has(a)&&c==null&&(n.register(e,{event:a,eventFlow:{endCancel:e.endCancel,isActive:e.isActive}}),h=new WeakRef(e));return e}g.QPL_DEFAULT_TIMEOUT_IN_MS=c;g.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=e;g.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=f;g.clear=m;g.subscribe=a;g.startMetric=b}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);/*FB_PKG_DELIM*/
__d("ArmadilloReceiveWriteDbSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5721");b=d("FalcoLoggerInternal").create("armadillo_receive_write_db_success",a);e=b;g["default"]=e}),98);
__d("BootloaderEventsPerf",["invariant","Bootloader","BootloaderEvents","ResourceTimingStore","objectEntries","objectValues"],(function(a,b,c,d,e,f,g,h){var i={total_count:0,total_bytes:0,downloaded_count:0,downloaded_bytes:0,cached_count:0,cached_bytes:0,inlined_count:0,inlined_bytes:0,duration:0,missing_count:0};function j(a,b,c){return Math.max(0,((c=c)!=null?c:0)-Math.max(a,(c=b)!=null?c:0))}function k(){return{blocking:babelHelpers["extends"]({},i),nonblocking:babelHelpers["extends"]({},i),"default":babelHelpers["extends"]({},i)}}function l(a,b,c){var e,f;if(c==null)e=0,f="downloaded";else if(c[1])e=c[0].length,f="inlined";else{c=d("ResourceTimingStore").getEntryForURL(c[0]);c?(e=c.encodedBodySize,f=c.transferSize===0?"cached":"downloaded"):(e=0,f="downloaded",a.missing_count++)}a.total_count++;a.total_bytes+=e;if(!b)return;a.duration=Math.max(a.duration,b);switch(f){case"downloaded":a.downloaded_count++;a.downloaded_bytes+=e;break;case"inlined":a.inlined_count++;a.inlined_bytes+=e;break;case"cached":a.cached_count++;a.cached_bytes+=e;break}}function m(a,b,d,e,f){var g=c("Bootloader").getResourceState(b);l(a,j(d,g.loadStart,g.loadEnd),e);g.loadError!=null&&f.add(b)}function n(a,b,d,e){var f=k();for(var a=c("objectEntries")(a),g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var l=j[0];j=j[1];for(var j=j,n=Array.isArray(j),o=0,j=n?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=j.length)break;p=j[o++]}else{o=j.next();if(o.done)break;p=o.value}p=p;var q=p[0];p=p[1];var r=void 0,s=void 0;switch(p.type){case"async":s=null;r=d;break;case"js":case"css":s=[p.src,p.d===1];r=f;break;default:p,h(0,3721)}m(r[l],q,b,s,e)}}return f}function o(a,b){var e={unpredicted:d("BootloaderEvents").newResourceMapSet(),ef:d("BootloaderEvents").newResourceMapSet(),overpredicted:d("BootloaderEvents").newResourceMapSet()};for(var f=c("objectEntries")(b),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i.entries(),k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];a[j].has(n)?e.ef[j].set(n,m):e.overpredicted[j].set(n,m)}}for(n=c("objectEntries")(a),m=Array.isArray(n),l=0,n=m?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(m){if(l>=n.length)break;k=n[l++]}else{l=n.next();if(l.done)break;k=l.value}i=k;j=i[0];h=i[1];for(g=h.entries(),f=Array.isArray(g),a=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(a>=g.length)break;k=g[a++]}else{a=g.next();if(a.done)break;k=a.value}i=k;h=i[0];k=i[1];b[j].has(h)||e.unpredicted[j].set(h,k)}}return e}function a(a){var b=a.efData,c=a.rsrcs,d=a.startTime,e=new Set(),f;if(b){var g=o(c,b.tierOne);f=g.unpredicted;g={ef:n(g.ef,b.fetchRsrcsStart,k(),e),overpredicted:n(g.overpredicted,b.fetchRsrcsStart,k(),e)};b={ef_fetch_predictions:b.fetchPredictionsEnd-b.fetchPredictionsStart,ef_fetch_start_wait:b.fetchPredictionsEnd-b.fetchRsrcsStart,ef_head_start:d-b.fetchRsrcsStart}}else f=c,g={},b={};c=babelHelpers["extends"]({unpredicted:n(f,d,k(),e)},g);return{source:a.source,source_detail:a.sourceDetail,is_first_identical:a.isFirstIdentical,timeslice_context:(f=a.timesliceContext)==null?void 0:f.name,start_time:d,err_count:e.size,resources:c,durations:babelHelpers["extends"]({jsmods_wait:a.jsmodsStart-d,jsmods:a.jsmodsEnd-a.jsmodsStart,jsmods_done_wait:a.jsmodsEnd-d,download_done_wait:a.logTime-d},b),payloadStats:a.payloadStats}}function b(a){var b=a.startTime,e=0,f=0,g=0,h=0;for(var i=a.components,m=Array.isArray(i),o=0,i=m?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(m){if(o>=i.length)break;p=i[o++]}else{o=i.next();if(o.done)break;p=o.value}p=p;p=c("Bootloader").getComponentTiming(p);var q=p.tierTwoStart,r=p.tierTwoEnd,s=p.tierThreeStart;p=p.tierThreeEnd;e=Math.max(e,j(b,q,r));f=Math.max(f,j(b,b,r));g=Math.max(g,j(b,s,p));h=Math.max(h,j(b,b,p))}q=new Set();r=k();s=n(a.tierOne,b,r,q);p=n(a.tierTwo,b,r,q);o=n(a.tierThree,b,r,q);m=r.blocking.downloaded_count!=0;i=k();var t=d("BootloaderEvents").newResourceMapSet(),u=new Set(),v=[a.tierOne,a.tierTwo,a.tierThree];for(var w=0;w<v.length;w++){var x=v[w];for(var x=c("objectValues")(x),y=Array.isArray(x),z=0,x=y?x:x[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{z=x.next();if(z.done)break;A=z.value}A=A;for(var A=A.keys(),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}D=D;u.add(D)}}}D=0;C=0;B=0;for(A=a.beRequests.values(),z=Array.isArray(A),y=0,A=z?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(z){if(y>=A.length)break;x=A[y++]}else{y=A.next();if(y.done)break;x=y.value}v=x;D+=j(b,b,v.requestStart);C+=v.serverGenTime;B+=v.jsmodsEnd-v.jsmodsStart;l(i[m?"blocking":"nonblocking"],v.responseStart-v.requestStart,[v.uri,!1]);for(w=c("objectEntries")(v.rsrcs),x=Array.isArray(w),v=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var E;if(x){if(v>=w.length)break;E=w[v++]}else{v=w.next();if(v.done)break;E=v.value}E=E;var F=E[0];E=E[1];for(var E=E,G=Array.isArray(E),H=0,E=G?E:E[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=E.length)break;I=E[H++]}else{H=E.next();if(H.done)break;I=H.value}I=I;var J=I[0];I=I[1];u.has(J)||t[F].set(J,I)}}}J=n(t,b,r,q);return{ref:a.ref,components:a.components,timeslice_context:(I=a.timesliceContext)==null?void 0:I.name,start_time:b,err_count:q.size,resources:{t1:s,t2:p,t3:o,be:i,unpredicted:J,async:r},durations:{fetch_start_wait:a.fetchStartTime-b,be_start_wait:D,be_server_gen:C,be_jsmods:B,callback_wait:a.callbackStart-b,callback:a.callbackEnd-a.callbackStart,bootload_done_wait:a.callbackEnd-b,rdfd_requirelazy:e,rdfd_done_wait:f,rd_requirelazy:g,rd_done_wait:h}}}function e(a){a.start_time;var b=a.resources,d=a.durations;a=babelHelpers.objectWithoutPropertiesLoose(a,["start_time","resources","durations"]);for(var b=c("objectEntries")(b),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=c("objectEntries")(g),i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=g.length)break;k=g[j++]}else{j=g.next();if(j.done)break;k=j.value}k=k;var l=k[0];k=k[1];for(var k=c("objectEntries")(k),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];a[h+"_"+l+"_resources_"+p]=Math.round(Number(o))}}}for(p=c("objectEntries")(d),o=Array.isArray(p),n=0,p=o?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(o){if(n>=p.length)break;m=p[n++]}else{n=p.next();if(n.done)break;m=n.value}k=m;l=k[0];j=k[1];a[l+"_duration"]=Math.round(Number(j))}if(a.payloadStats){for(i=c("objectEntries")(a.payloadStats),g=Array.isArray(i),h=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(h>=i.length)break;f=i[h++]}else{h=i.next();if(h.done)break;f=h.value}e=f;b=e[0];d=e[1];for(m=c("objectEntries")(d),k=Array.isArray(m),l=0,m=k?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(k){if(l>=m.length)break;j=m[l++]}else{l=m.next();if(l.done)break;j=l.value}n=j;o=n[0];p=n[1];a[b+"_"+o+"_count"]=Math.round(Number(p))}}delete a.payloadStats}return a}g.computeHRData=a;g.computeBLData=b;g.flattenData=e}),98);
__d("BootloaderLoggingStatusEnum",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["SUCCESS","TIMEOUT"]);c=a;f["default"]=c}),66);
__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")}),null);
__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1823926");b=d("FalcoLoggerInternal").create("haste_response",a);e=b;g["default"]=e}),98);
__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;function a(a){var b=a.bl_sample_rate,e=a.hr_sample_rate,f=a.parent_lid;if(h||!(b||e))return;h=!0;d("ResourceTimingStore").init();var g=function(a){return{ms_since_navstart:Math.round(a-c("performanceNavigationStart")()),parent_lid:f,pkg_cohort:c("SiteData").pkg_cohort,request_path:(a=c("CometTimeSpentNavigation").getPathInfo())==null?void 0:a.name,svn_rev:c("SiteData").client_revision}};e&&d("BootloaderEvents").onHasteResponse(function(a){return c("HasteResponseFalcoEvent").log(function(){var b=d("BootloaderEventsPerf").computeHRData(a),c=d("BootloaderEventsPerf").flattenData(b);return babelHelpers["extends"]({},c,g(b.start_time))})});var i=function(a,b,e){a=d("BootloaderEventsPerf").computeBLData(a);var f=d("BootloaderEventsPerf").flattenData(a);c("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},f,g(a.start_time),{status:b}),{weight:e})};b&&d("BootloaderEvents").onBootload(function(a){return i(a,"SUCCESS",b)});var j=1;d("BootloaderEvents").onBootloaderCallbackTimeout(function(a){return i(a,"TIMEOUT",j)})}g.initLogging=a}),98);
__d("LSDataTraceFlushDeferred",["MetaConfig","Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSDataTraceFlush").__setRef("LSDataTraceFlushDeferred");function a(a){if(!c("MetaConfig")._("62"))return(h||(h=b("Promise"))).resolve(function(){});else return i.load().then(function(b){return b.flushExpiredDataTraces(a)})}g.watchForExpiredTraces=a}),98);
__d("LSTruncateTableAndSetShowError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(a){return b.forEach(b.db.table(115).fetch(),function(a){return a["delete"]()})},function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(115).add({statusId:b.i64.cast([0,0]),timestampMs:c[0],errorShouldBeShown:a[0]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSConnectivityTruncateTableAndSetShowErrorStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatus",["LSTruncateTableAndSetShowError"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(114).fetch(),function(a){return a["delete"]()})},function(b){return d[0]=c.i64.of_float(Date.now()),c.db.table(114).add({statusId:void 0,timestampMs:d[0],internetConnectionState:a[0]})},function(d){return c.storedProcedure(b("LSTruncateTableAndSetShowError"),c.i64.neq(a[0],c.i64.cast([0,1])))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSConnectivityDeleteAllAndInsertConnectivityStatusStoredProcedure";a.__tables__=["connectivity_status"];e.exports=a}),null);
__d("LSDeleteAllAndInsertConnectivityStatusStoredProcedure",["LSDeleteAllAndInsertConnectivityStatus","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSDeleteAllAndInsertConnectivityStatus")(e.internetConnectionState,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSCookie",["$InternalEnum","Cookie","CookieCore","CurrentEnvironment","CurrentMessengerUser","FBLogger","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","MessengerLogHistory","MqttWebDeviceID","ReQL","SortedAsyncIterable","isPromise","isStringNullOrEmpty","pageID","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("$InternalEnum")({SYNCING:"1",NOT_SYNCING:"0"}),l=d("MessengerLogHistory").getInstance("client_init"),m=c("CurrentEnvironment").instagramdotcom?"igd_ls":"m_ls",n={c:{},d:c("MqttWebDeviceID").clientID,s:k.NOT_SYNCING,u:c("pageID")};function o(a){function b(a){d("CookieCore").setWithDomain_FOR_MESSENGER_LS_ONLY(m,JSON.stringify(a),window.location.hostname)}var e=c("Cookie").get(m);if(e==null){var f;b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f));return}f=JSON.parse(e);if(f.u==null){b(babelHelpers["extends"]({},f,(e={},e[d("CurrentMessengerUser").getIDorEIMU()]=a,e)))}else{b((f={},f[d("CurrentMessengerUser").getIDorEIMU()]=a,f))}}function a(){c("Cookie").clear(m)}function p(a){if(typeof a!=="object")return null;if(a==null)return null;var b=a.c,c=a.d,d=a.s;a=a.u;d=typeof d==="string"?k.cast(d):null;b=typeof b==="object"&&b!=null?Object.entries(b).reduce(function(a,b){var c=b[0];b=b[1];if(a==null||typeof b!=="string")return null;a[c]=b;return a},{}):null;if(typeof c!=="string")return null;if(d==null)return null;if(b==null)return null;return typeof a!=="string"?null:{c:b,d:c,s:d,u:a}}function q(){var a=c("Cookie").get(m);if(c("isStringNullOrEmpty")(a))return n;a=JSON.parse(a);var b=d("CurrentMessengerUser").getIDorEIMU(),e=p(a);a=typeof a==="object"&&a!=null?p(a[b]):null;return(a=(b=a)!=null?b:e)!=null?a:n}function r(a){var b=q();if(b.u!==c("pageID"))return;var e={};a.forEach(function(a){a[0];a=a[1];var b=a.currentCursor;a=a.groupId;b!=null&&(e[(i||(i=d("I64"))).to_string(a)]=b)});l.debug("Updated sync cookie to set syncing=false, saving latest cursors");o(babelHelpers["extends"]({},b,{c:e,s:k.NOT_SYNCING}))}var s=[1,2,d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()?null:95];function e(a){var b=d("SortedAsyncIterable").toArray(d("ReQL").union.apply(void 0,s.map(function(b){return b==null?d("ReQL").empty():d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(b))})));if((h||(h=c("isPromise")))(b)){c("promiseDone")(b.then(function(a){r(a)}));return}r(b)}function f(){try{var a=q();l.debug("Updated sync cookie to set syncing=true");o(babelHelpers["extends"]({},a,{s:k.SYNCING,u:c("pageID")}))}catch(a){c("FBLogger")("ls_web_init").catching(a).warn("Failed to sync cookie")}}g.Status=k;g.DEFAULT_COOKIE=n;g.clear=a;g.get=q;g.syncBeforeUnload=e;g.setSyncing=f}),98);
__d("LSPlatformDeviceId",["ChannelClientID","FBLogger","LSCookie","MqttWebDeviceID","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){if(c("gkx")("21118"))return c("MqttWebDeviceID").clientID;else return c("ChannelClientID").getID()}b=h();function a(a){a==null&&c("FBLogger")("messenger_browser_clients").info("Missed provider type for deviceId");return a==="persisted"?d("LSCookie").get().d:h()}g.deviceId=b;g.getDeviceIdForProviderType=a}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSSyncStoredProcedureUtils",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c!=null?(h||(h=d("I64"))).of_float(Date.now()+c):b.minTimeToSyncTimestampMs;yield a.pending_tasks.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b.failureCount,h.one),minTimeToSyncTimestampMs:c}))});return j.apply(this,arguments)}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));if(b==null)return;return i(a,b,c)});return k.apply(this,arguments)}function c(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{failureCount:(h||(h=d("I64"))).add(b==null?void 0:b.failureCount,h.one)}))});return l.apply(this,arguments)}function e(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=(yield a.network_requests.get(b,c));if(b==null)return;yield a.network_requests.put(babelHelpers["extends"]({},b,{epochId:void 0,networkTaskIdentifier:void 0}))});return m.apply(this,arguments)}g.incrementPendingTaskFailureCount=i;g.incrementPendingTasksTaskFailureCount=a;g.incrementNetworkRequestsTaskFailureCount=c;g.closeEpoch=e}),98);
__d("LSHandleTaskSendFailureForQueue2",["I64","LSSyncStoredProcedureUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("LSSyncStoredProcedureUtils").incrementPendingTasksTaskFailureCount(a,b,c),yield d("LSSyncStoredProcedureUtils").incrementNetworkRequestsTaskFailureCount(a,b,(h||(h=d("I64"))).neg_one),yield d("LSSyncStoredProcedureUtils").closeEpoch(a,b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSHandleTaskSendSuccessForQueue2",["I64","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.network_requests.get(b,(h||(h=d("I64"))).neg_one));if(c==null||c.epochId==null)return;yield a.network_requests["delete"](b,h.neg_one)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("LSPlatformRequestId",[],(function(a,b,c,d,e,f){"use strict";var g=4;function a(){var a=g;g+=1;return a}b={generate:a};f["default"]=b}),66);
__d("LSPlatformRequestScheduler",["clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.requests=new Map()}var b=a.prototype;b.schedule=function(a,b,d){var e=this.requests.get(b);e!=null&&c("clearTimeout")(e);this.requests.set(b,c("setTimeout")(a,d))};b.cleanup=function(){this.requests.forEach(function(a){return c("clearTimeout")(a)})};return a}();g["default"]=a}),98);
__d("LSPlatformServerResponseHandler",["FBLogger","Promise","asyncToGeneratorRuntime","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.eval=a,this.currentlyRunning=(h||(h=b("Promise"))).resolve()}var d=a.prototype;d.evalWhenReady=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=[];try{var e=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to download dependencies")},3e4);d.push(e);yield a;c("clearTimeout")(e);a=c("setTimeout")(function(){c("FBLogger")("messenger_web_product").mustfix("waited longer than 30 seconds to eval sync script")},3e4);d.push(a);yield this.eval(b);c("clearTimeout")(a)}catch(a){d.forEach(function(a){return c("clearTimeout")(a)}),c("FBLogger")("messenger_web_product").catching(a).mustfix("syncscript execution failed "+(a==null?void 0:a.message))}});function d(b,c){return a.apply(this,arguments)}return d}();d.evalInOrderReceived=function(a,b){var c=this,d=this.currentlyRunning.then(function(){return c.evalWhenReady(a,babelHelpers["extends"]({},b,{priority:"sync_script"}))});this.currentlyRunning=d;return d};return a}();g["default"]=a}),98);
__d("LSBeginHandlingFireForgetTasksForQueueStoredProcedure",["LSBeginHandlingFireForgetTasksForQueue","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSBeginHandlingFireForgetTasksForQueue")(e.queueName,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSSerializeTaskStoredProcedure",["LSSerializeTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSSerializeTask")(e.taskId,e.taskLabel,e.taskValue,e.requiresAuthentication,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSBeginHandlingPendingTasksForQueue2",["I64","LSFactory","LSIntEnum","LSPendingTasksPluginType","LSSerializeTaskStoredProcedure","LSShape","LSVec","Promise","ReQL","XPlatReactCrypto","asyncToGeneratorRuntime","gkx","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=500,l=3e4,m=5,n=50,o=7;function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield a.lightspeed_task_context.get(b));return a==null||a.requiresAuthentication});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));return a==null?{context:void 0,failureCount:(i||(i=d("I64"))).neg_one,httpUrlOverride:void 0,minTimeToSyncTimestampMs:i.neg_one,pluginType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),queueName:""}:a});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b)));return a==null?0:(i||(i=d("I64"))).to_float(a.lastSyncRequestTimestampMs)});return u.apply(this,arguments)}function v(a,b,c){b=(i||(i=d("I64"))).equal(a.failureCount,(i||(i=d("I64"))).zero)||b;if(b)return 0;b=(i||(i=d("I64"))).to_float(a.failureCount)>o?(i||(i=d("I64"))).to_float(a.failureCount)-o:(i||(i=d("I64"))).to_float(a.failureCount);a=Math.min((1<<Math.min(b-1,o))*k,l);b=c+a;return Math.max(b-Date.now(),0)}function w(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(i||(i=d("I64"))).add(i.lsl_(i.of_float(a[0]),32),i.of_float(a[1]))}function x(){var a=(i||(i=d("I64"))).of_float(Date.now());return i.and_(i.or_(i.lsl_(a,22),i.and_(w(),i.castExn([0,4194303]))),i.castExn([2147483647,4294967295]))}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=x(),e=(yield a.network_requests.get(b,(i||(i=d("I64"))).neg_one));e==null?yield a.network_requests.add({epochId:c,failureCount:(i||(i=d("I64"))).zero,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.of_float(Date.now()),syncDatabaseId:i.neg_one,taskQueueName:b}):yield a.network_requests.put(babelHelpers["extends"]({},e,{epochId:c,lastSyncRequestTimestampMs:(i||(i=d("I64"))).of_float(Date.now())}));return c});return z.apply(this,arguments)}function A(a,b){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(b).filter(function(a){return a.epochId!=null})))!=null});return B.apply(this,arguments)}function C(a,b,c){var e=(i||(i=d("I64"))).to_float(a.minTimeToSyncTimestampMs),f=Date.now();e=e-f;f=e<=0;return f?v(a,b,c):e}function D(a){return a.httpUrlOverride!=null||(i||(i=d("I64"))).to_float(a.failureCount)>o}function E(a){return a.timeoutTimestampMs!=null?(i||(i=d("I64"))).to_float(a.timeoutTimestampMs)<=Date.now():!1}function F(a){return a===90..toString()||a===130..toString()||a===153..toString()}function G(a,b,c,d,e){e=e===0?void 0:e;return{failureCount:e,label:a,payload:b,queueName:c,taskId:d}}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=(yield c("LSSerializeTaskStoredProcedure")(c("LSFactory")(a),{requiresAuthentication:e,taskId:b.taskId,taskLabel:b.context,taskValue:b.taskValue}));e=a[0];var f=a[1];a[2];a=a[3];if(e==null){if(a!=null)return{minRetryDelayMs:a};return}return G(f,e,b.queueName,b.taskId,(i||(i=d("I64"))).to_float(b.failureCount))});return I.apply(this,arguments)}function J(a,b,c){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(b.context==null){yield a.pending_tasks["delete"](b.taskId);return}var d=E(b);if(d){yield a.pending_tasks["delete"](b.taskId);return}return H(a,b,c)});return K.apply(this,arguments)}function L(a,b){b=b>=(c("gkx")("26373")&&a===String(207)?n:m)||F(a);return!b}function M(a,b){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield a.pending_tasks.get(b.taskId));c!=null&&(i||(i=d("I64"))).equal(b.firstExecutedTimestampMs,(i||(i=d("I64"))).zero)&&(yield a.pending_tasks.put(babelHelpers["extends"]({},c,{firstExecutedTimestampMs:(i||(i=d("I64"))).of_float(Date.now())})))});return N.apply(this,arguments)}function O(a,b){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(c.length===0)return{epochId:void 0,tasks:[]};var e=[],f=c[0].httpUrlOverride,g=(yield (h||(h=b("Promise"))).all(c.map(function(b){return p(a,b.taskId)}))).some(Boolean);for(c of c){var j=c.httpUrlOverride===f,k=(yield p(a,c.taskId))===g;yield M(a,c);if(!j||!k)break;j=(yield J(a,c,g));if(j!=null&&j.payload!=null)e.push(j);else if((j==null?void 0:j.minRetryDelayMs)!=null){k=(yield a.pending_tasks.get(c.taskId));if(k!=null){yield a.pending_tasks.put(babelHelpers["extends"]({},k,{failureCount:(i||(i=d("I64"))).add((k=k.failureCount)!=null?k:(i||(i=d("I64"))).zero,i.one),minTimeToSyncTimestampMs:i.add(j.minRetryDelayMs,i.of_float(Date.now()))}))}}else yield a.pending_tasks["delete"](c.taskId);if(!L(c.context,e.length))break}return{epochId:void 0,tasks:e}});return P.apply(this,arguments)}function Q(a,b,c,d,e){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){e===void 0&&(e=!0);b=(yield O(a,b));var f=b.tasks;if(f.length===0)return{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:!1,workItemType:4};if(e===!0){f=(yield y(a,c));b.epochId=f}e=(yield r(a,c));return{httpUrlOverride:e.httpUrlOverride,networkPayload:b,nextSyncMs:void 0,queueName:c,skipRealtimeGateway:D(e),workItemType:d}});return R.apply(this,arguments)}function S(a,b,c){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(yield r(a,b)),g=(yield t(a,b));f=C(f,e,g);e=f!==0;if(e)return[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:f,queueName:b,skipRealtimeGateway:!1,workItemType:3}];g=[];e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.pending_tasks.index("queueNameTaskId")).getKeyRange(b)));f=e.filter(c("isNativeTask"));if(f.length>0){f=(yield Q(a,f,b,2,c("gkx")("4778")===!0));g.push(f)}f=e.filter(function(a){return!c("isNativeTask")(a)});if(f.length>0){e=(yield Q(a,f,b,1));g.push(e)}return g});return T.apply(this,arguments)}function U(a,b,c){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=!(yield A(a,b));return d?S(a,b,c):[{httpUrlOverride:void 0,networkPayload:void 0,nextSyncMs:void 0,queueName:b,skipRealtimeGateway:!1,workItemType:4}]});return V.apply(this,arguments)}function a(a,b){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.ignoreSoftDelay;b=b.queueName;a=(yield U(a,b,e));return a.map(function(a){var b;return d("LSShape").ofRecord({network_payload:d("LSShape").ofRecord({epoch_id:(b=a.networkPayload)==null?void 0:b.epochId,tasks:c("LSVec").ofArray(((b=(b=a.networkPayload)==null?void 0:b.tasks)!=null?b:[]).map(function(a){var b;return d("LSShape").ofRecord({failure_count:a.failureCount!=null?(i||(i=d("I64"))).of_float(a.failureCount):void 0,label:(b=a.label)!=null?b:void 0,payload:a.payload,queue_name:a.queueName,task_id:a.taskId})}))}),next_sync_ms:a.nextSyncMs!=null?(i||(i=d("I64"))).of_float(a.nextSyncMs):void 0,queue_name:a.queueName,skip_realtime_gateway:a.skipRealtimeGateway,work_item_type:(j||(j=d("LSIntEnum"))).ofNumber(a.workItemType)})})});return W.apply(this,arguments)}a._updateTaskIfNeeded=M;a._getHeadOfNormalQueue=r;a._lastSyncRequestTimestampForQueue=t;a._exponentialBackoffForNormalQueue=v;a._generateNewEpoch=x;a._openNewEpochForQueue=y;a._isEpochOpenForQueue=A;a._calculateDelayForNormalQueue=C;a._queueShouldSkipRealtimeGateway=D;a._isNativeTask=c("isNativeTask");a._taskIsTimedOut=E;a._taskShouldStopBatching=F;a._buildTaskPayloadExpressionForNormalTaskWithParameters=G;a._buildTaskPayloadExpressionForValidatedNormalTask=H;a._buildTaskPayloadExpressionForUnvalidatedNormalTask=J;a._workForNormalQueueWithoutDelay=Q;a._workForNormalQueueWithClosedEpoch=S;a._buildWorkForNormalQueue=U;a._buildNetworkPayloadShapeForTasks=O;a._canContinueBatchingForQueue=L;g["default"]=a}),98);
__d("MWPBeginHandlingPendingTasksForQueue",["LSBeginHandlingFireForgetTasksForQueueStoredProcedure","LSBeginHandlingPendingTasksForQueue2","LSFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d){var e=d.fireAndForgetTask,g=d.ignoreSoftDelay,h=d.queueName;d=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(e===!0){var b=(yield c("LSBeginHandlingFireForgetTasksForQueueStoredProcedure")(c("LSFactory")(a),{queueName:h}));b=b[0];return[b]}return c("LSBeginHandlingPendingTasksForQueue2")(a,{ignoreSoftDelay:g,queueName:h})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":37"));return d});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MWPlatformTaskUtils",["FBLogger","I64","JSScheduler","MetaConfig","Promise","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){function f(){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield a(e)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for task queue %s",e.queueName)}});return g.apply(this,arguments)}if((j||(j=d("I64"))).gt(e.priority,(j||(j=d("I64"))).zero)&&c("MetaConfig")._("78")){var h=function(){f()};(i||(i=c("JSScheduler"))).scheduleLoggingPriCallback(h)}else c("promiseDone")(f())}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{yield a(b)}catch(a){c("FBLogger")("messenger_web_product").catching(a).warn("Failed to calculate work for fire forget queue %s",b.queueName)}});return m.apply(this,arguments)}function a(a,c){var e=new Set(),f=[],g=[];g.push(a.tables.pending_tasks.index("queueNameTaskId").subscribe(function(a,b){var c;if(b.operation==="delete"){e.add(a[0]);return}a=b.operation==="put"&&b.prevValue==null||b.operation==="add";c=b.operation==="put"&&(j||(j=d("I64"))).compare(b.value.failureCount,(c=(c=b.prevValue)==null?void 0:c.failureCount)!=null?c:(j||(j=d("I64"))).zero)>0;(a||c)&&e.add(b.value.queueName);(b.operation==="add"&&b.value.dataTraceId==null||b.value.dataTraceId==="")&&f.push(b.value)}));g.push(a.tables.network_requests.subscribe(function(a,b){a=a[0];if(a==="")return;b.operation==="delete"?e.add(a):b.value.epochId==null&&e.add(a)}));g.push(a.subscribeToCommit(function(){var g=Array.from(e);e.clear();f=[];g.forEach(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).bounds({gte:[b]})));b!=null&&k(c,b)});return function(a){return e.apply(this,arguments)}}())}));return g}function e(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks))),c=new Set();for(b of b){if(c.has(b.queueName))continue;c.add(b.queueName);k(e,b)}})())}function n(a,e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.pending_fire_and_forget_tasks)));yield (h||(h=b("Promise"))).all(g.map(function(a){return l(e,a)}));c("promiseDone")(a.runInTransaction(function(a){return(h||(h=b("Promise"))).all(g.map(function(b){return a.pending_fire_and_forget_tasks["delete"](b.taskId)}))},"readwrite","background",void 0,f.id+":196"))})())}function o(a,b){var c=!1,d=[];d.push(a.tables.pending_fire_and_forget_tasks.subscribe(function(a,b){if(b.operation==="delete")return;a=b.operation==="put"&&b.prevValue==null||b.operation==="add";a&&(c=!0)}));d.push(a.subscribeToCommit(function(){c&&n(a,b),c=!1}));return d}g.checkQueuesWhenPendingTaskTableUpdates=a;g.checkAllPendingTasksForWork=e;g.checkAllFireForgetTasksForWork=n;g.checkQueuesWhenPendingFireForgetTaskTableUpdates=o}),98);
__d("LSPlatformTaskSystemTransport",["CurrentMessengerUser","FBLogger","I64","JSResourceForInteraction","JSScheduler","LSDatabaseProviderType","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBeginHandlingPendingTasksForQueue","MWPBumpEntityKey","MWPlatformTaskUtils","Promise","ReQL","asyncToGeneratorRuntime","cr:4031","cr:6668","gkx","isInstamadillo","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=500,m=c("JSResourceForInteraction")("publishLSPlatformDeidentifiedPayload").__setRef("LSPlatformTaskSystemTransport"),n=new Set([632,765,60011,1006,1018].map(function(a){return a.toString()}));a=function(){function a(a,e,f,g){var h=this;this.key="ls";this.$8=!1;this.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield c("MWPBeginHandlingPendingTasksForQueue")(h.$1,{ignoreSoftDelay:b,queueName:a}));for(a of b)yield h.$17(d("LSShape").toRecord(a))});return function(b,c){return a.apply(this,arguments)}}();this.$1=a;this.$2=e;this.$3=f;this.$4=g;this.$8=d("LSDatabaseProviderType").isProviderPersisted(a);this.$5=new(c("LSPlatformRequestScheduler"))();this.$6=new(c("LSPlatformServerResponseHandler"))(f);this.$7=this.$9();this.$10()}var e=a.prototype;e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!(c("gkx")("5962")||c("isInstamadillo")())){var d=(yield this.$2.publish(b));return d}d=a.filter(function(a){return a.label!=null&&n.has(a.label)});if(d.length<a.length){d.length>0&&c("FBLogger")("maw_ohai").mustfix("Deidentifed tasks label %s sent together with normal tasks",d[0].label);a=(yield this.$2.publish(b));return a}a=d[0];d=(yield m.load());d=(yield d(babelHelpers["extends"]({},b,{taskLabel:a.label})));return d});function d(b,c){return a.apply(this,arguments)}return d}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendFailureForQueue2")(b,a)},"readwrite",void 0,void 0,f.id+":153")});function d(b){return a.apply(this,arguments)}return d}();e.$13=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.$1.runInTransaction(function(b){return c("LSHandleTaskSendSuccessForQueue2")(b,a)},"readwrite","background",void 0,f.id+":162")});function d(b){return a.apply(this,arguments)}return d}();e.$14=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSVec").toArray(a.tasks).slice(0).map(function(a){return d("LSShape").toRecord(a)});a=a[0];if(a==null)return;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(this.$1.tables.pending_tasks).getKeyRange(a.task_id)));return a==null?void 0:a.dataTraceId});function e(b){return a.apply(this,arguments)}return e}();e.$15=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;if(a.network_payload==null)return;var g=d("LSShape").toRecord(a.network_payload);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return g&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(g.tasks))});var i=this.$4;try{yield (j||(j=b("Promise"))).all(c("LSVec").toArray(g.tasks).map(function(a){return d("LSShape").toRecord(a)}).map(function(b){var g=c("LSPlatformRequestId").generate();return f.$11([b],{payload:d("LSJson").stringify(d("LSShape").ofRecord({label:b.label,payload:b.payload,version:i})),queueName:a.queue_name,requestId:g,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,type_:(h||(h=d("I64"))).of_int32(e)})}))}catch(a){}});function e(b,c){return a.apply(this,arguments)}return e}();e.$16=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a.network_payload==null)return;var f=d("LSShape").toRecord(a.network_payload),g=c("LSVec").toArray(f.tasks).map(function(a){return d("LSShape").toRecord(a)}),j=(yield this.$14(f));(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSending(f.tasks))});var l=c("LSPlatformRequestId").generate(),m,n=c("qex")._("789");if(n!=null&&n!=="default"){var o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o)}try{m=(yield this.$11(g,{payload:d("LSJson").stringify(d("LSShape").ofRecord(babelHelpers["extends"]({},f,{version_id:this.$4},j==null?{}:{data_trace_id:j}))),queueName:a.queue_name,requestId:l,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,type_:(h||(h=d("I64"))).of_int32(e)}))}catch(b){if(n!=null&&n!=="default"){o=n+"."+(i||(i=d("LSIntEnum"))).toNumber(d("LSMailboxInitialSyncCursor").syncChannel)+"."+e.toString();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception");b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",o+".exception.notconnected")}b.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout?d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_timeout"):b.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected?(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_notconnected"),c("FBLogger")("messenger_web_product").warn("Publishing a task to the server not connected")):(d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","send_fail_generic"),c("FBLogger")("messenger_web_product").warn("Error while publishing a task for request: %s, error %s",e,JSON.stringify(b)));yield this.$12(a.queue_name)}if(m!=null&&m.type==="taskresponse")try{j=m.downloadTask;var p=m.payload;l={experiments:p.ex,sp:p.sp,syncScript:p.payload,target:p.target,taskNames:g.map(function(a){return a.label}).filter(Boolean)};this.$8?yield this.$6.evalWhenReady(j,l):yield this.$3(l);yield this.$13(a.queue_name);(k||(k=c("JSScheduler"))).scheduleLoggingPriCallback(function(){return f&&(b("cr:6668")==null?void 0:b("cr:6668").recordTaskSent(f.tasks,p.payload))})}catch(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","handle_task_failure"),c("FBLogger")("messenger_web_product").catching(b).mustfix("Encountered an error while processing a task response via realtime transport"),yield this.$12(a.queue_name)}});function e(b,c){return a.apply(this,arguments)}return e}();e.decideWhatToDoWithTask=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var h=this,i=(yield c("MWPBeginHandlingPendingTasksForQueue")(a,{fireAndForgetTask:g,ignoreSoftDelay:!1,queueName:e,transportKey:f}));c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a of i)yield h.$17(d("LSShape").toRecord(a))})())});function e(b,c,d,e){return a.apply(this,arguments)}return e}();e.$17=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this.$5,f=this.$18;function g(a,b){e.schedule(function(){c("promiseDone")(f(a,!1))},a,b!=null?(h||(h=d("I64"))).to_float(b):l)}var i=(h||(h=d("I64"))).to_int32(a.work_item_type);switch(i){case 1:yield this.$16(a,3);break;case 5:yield this.$15(a,4);break;case 3:g(a.queue_name,a.next_sync_ms);break;case 2:yield b("cr:4031").handleLSWork(this.$1,a,d("CurrentMessengerUser").getAccountID());break;case 4:break;default:c("FBLogger")("messenger_web_product").warn("Unknown Task type of %s",i)}});function e(b){return a.apply(this,arguments)}return e}();e.$9=function(){var a=this,e=this.$1;return this.$2.onReconnect(function(){c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).bounds({gte:d("ReQL").key("")})));yield (j||(j=b("Promise"))).all(e.map(function(b){b=b.taskQueueName;return c("LSHandleTaskSendFailureForQueue2")(a,b)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":467")),a.$10()})};e.$10=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.decideWhatToDoWithTask(a.$1,b)})};e.cleanup=function(){this.$7()};return a}();g["default"]=a}),98);
__d("LSFetchBackupIds",["LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] Beginning execution."),d[7]=c.i64.cast([0,0]),d[8]=new c.Map(),d[8].set("backup_tenancy",a[0]),d[8].set("trace_id",void 0),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50008]),d[9],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,d[7]).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[1]=c.i64.of_float(Date.now()),d[2]=c.i64.random(),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[1],d[0])),d[6]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsFetchBackupIdsStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[6]].join("")),c.i64.eq(c.i64.mod_(d[2],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[7]=",",d[8]=c.createArray(),void 0!==void 0?d[9]=(d[8].push(void 0),d[8]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupIdsStoredProcedure",[d[4],d[7],d[5],d[7],d[6]].join(""),d[8],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsFetchBackupIdsStoredProcedure";a.__tables__=["encrypted_backups"];e.exports=a}),null);
__d("LSFetchBackupIdsStoredProcedure",["LSFetchBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSFetchBackupIds")(e.backupTenancy,e.traceId,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","ODS","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=a.cancelEndPoint,d=a.event,e=a.instanceKey;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(d,{string:{source:a}},{instanceKey:e});c("QPLUserFlow").addPoint(d,"cancel",{instanceKey:e});c("QPLUserFlow").addAnnotations(d,{string:{cancel_end_point:b}},{instanceKey:e});c("QPLUserFlow").endCancel(d,{instanceKey:e})}function a(a){var b=a.event,d=a.instanceKey,e=a.onClose;a=a.source;a!=null&&c("QPLUserFlow").addAnnotations(b,{string:{source:a}},{instanceKey:d});i({cancelEndPoint:"dialog_x_button",event:b,instanceKey:d});e()}function b(a){var b=a.annotations,e=a.event,f=a.instanceKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(e,"success",{instanceKey:f});c("QPLUserFlow").endSuccess(e,{annotations:b,instanceKey:f});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,c("MWEBODSEntityKey.enum").SUCCESS)}function e(a){var b=a.annotations,e=a.errorName,f=a.event,g=a.instanceKey,i=a.odsEntityKey;a=a.odsEntityName;c("QPLUserFlow").addPoint(f,"failure",{instanceKey:g});c("QPLUserFlow").endFailure(f,e,{annotations:b,instanceKey:g});a&&(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),a,(f=i)!=null?f:c("MWEBODSEntityKey.enum").FAIL)}g.cancelFlow=i;g.closeDialogCancelFlow=a;g.endSuccess=b;g.endFailure=e}),98);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] Beginning execution."),c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1487]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.db.table(172).fetch([[[c.i64.cast([0,1])]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1488]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[9]?d[10]=!0:d[10]=!1,d[10]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[1]=c.i64.cast([0,0])}]):(f=e.item,c.sequence([function(e){return d[11]=f.backupId,d[10]=f.authorityLevel,c.i64.eq(d[10],c.i64.cast([0,20]))?c.resolve(d[9]=c.i64.cast([0,1])):c.sequence([function(e){return c.i64.eq(d[10],c.i64.cast([0,80]))?c.sequence([function(e){return c.i64.eq(d[11],void 0)?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1492]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[13]=c.i64.cast([0,2])}]):c.sequence([function(e){return c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),void 0!==void 0?d[18]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[14]=c.i64.cast([-1,4294967295])}]):c.sequence([function(e){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[11])&&c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1490]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,4])}]):(e.item,c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1491]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[15]=c.i64.cast([0,3])}]))})},function(a){return d[14]=d[15]}])},function(a){return d[13]=d[14]}])},function(a){return d[12]=d[13]}]):c.sequence([function(e){return c.sequence([function(d){return a[0]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[0],c.i64.cast([0,1489]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[12]=c.i64.cast([-1,4294967295])}])},function(a){return d[9]=d[12]}])},function(a){return d[1]=d[9]}]))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsProcessBackupIdsStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsProcessBackupIdsStoredProcedure";a.__tables__=["encrypted_backups","secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSProcessBackupIdsStoredProcedure",["LSProcessBackupIds","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});e=c("LSProcessBackupIds")(e.traceId,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MWEncryptedBackupsProcessBackupIdsDEPRECATED",["FBLogger","LSFactory","LSIntEnum","LSProcessBackupIdsStoredProcedure","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLEvent","QPLUserFlow","ReQL","WebSession","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("gkx")("23914");function l(a){if(k){var e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((i||(i=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:e,processBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});return a.runInTransaction(function(a){return c("LSProcessBackupIdsStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":53").then(function(a){a=(j||(j=d("LSIntEnum"))).unwrapIntEnum(a[0]);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent,"EB_STATE_"+a+".");d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").processBackupIdsQPLEvent});return a})}else return(h||(h=b("Promise"))).resolve(0)}function a(a,b){return a.tables.encrypted_backups.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.encrypted_backups)),function(d){if(d!=null){c("promiseDone")(l(a),b,function(a){c("FBLogger")("labyrinth_web").catching(a).info("Error in db transaction")});return}})})}g.processBackupIdsStoredProcedure=l;g.subscribeToEncryptedBackupsRow=a}),98);
__d("MWEncryptedBackupsListenForChangesToBackupStateInitPath",["EBAPIWorkerCheck","I64","LSAuthorityLevel","LSDataTraceType","LSEncryptedBackupsBackupTenancy","LSFactory","LSFetchBackupIdsStoredProcedure","LSIntEnum","LSIssueMessageRangeQueryTaskStoredProcedure","LSMEBTaskCreationSource","MAWEBRestoreTrackingUtils","MAWMainTraceUtils","MAWOfflineQueueStatus","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsProcessBackupIdsDEPRECATED","Promise","QPLEvent","QPLUserFlow","ReQL","WAJids","WATagsLogger","WebSession","gkx","isInstamadilloEB","promiseDone","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[EB Prefetch] Issuing message range query for thread "," with params ",""]);l=function(){return a};return a}var m=c("gkx")("23961"),n=c("qex")._("121")===!0;function a(a){function b(){var b=d("ReQL").fromTableAscending(a.tables.encrypted_backups),e=b.subscribe(function(a,b){if(b.operation==="delete"||!(i||(i=d("I64"))).equal(b.value.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;e();c("QPLUserFlow").getActiveFlowIDs().includes((k||(k=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))&&d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent})});b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").getActiveFlowIDs().includes((k||(k=d("QPLEvent"))).getMarkerId(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent))||c("QPLUserFlow").start(d("MWChatEncryptedBackupsQPLEvents").fetchBackupIdsQPLEvent,{annotations:{string:{ebSessionIdentifier:b,fetchBackupIdsVersion:"msys",sessionTabId:d("WebSession").getId()}}});c("promiseDone")(a.runInTransaction(function(a){return c("LSFetchBackupIdsStoredProcedure")(c("LSFactory")(a),{backupTenancy:(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)})},"readwrite",void 0,void 0,f.id+":93"),function(){return p(a)})}(n||c("isInstamadilloEB")())&&b();var e=d("ReQL").fromTableAscending(a.tables.encrypted_backups_status_trigger);return e.subscribe(b)}function o(a){return a.runInTransaction(function(a){var e=d("MAWOfflineQueueStatus").getAllThreadsWithOfflineQueueIncomplete();return(h||(h=b("Promise"))).all(e.map(function(b){var e=d("WAJids").threadIdForChatJid(b),f=d("MAWMainTraceUtils").createTraceId();c("promiseDone")(d("MAWMainTraceUtils").startTraceWithTxn(a,(i||(i=d("I64"))).of_float(Date.now()),f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE)));e={isPointQuery:!1,newerNumMessages:i.zero,numMessages:i.of_int32(20),source:j.ofNumber(c("LSMEBTaskCreationSource").UNKNOWN),threadId:e,traceId:f};d("WATagsLogger").TAGS(["labyrinth_web","eb_prefetch",f]).LOG(l(),b,JSON.stringify(e));d("MAWEBRestoreTrackingUtils").markEBRestoreFrontloaded(c("LSMEBTaskCreationSource").UNKNOWN,f,!1);return c("LSIssueMessageRangeQueryTaskStoredProcedure")(c("LSFactory")(a),e)}))},"readonly",void 0,void 0,f.id+":121")}function p(a){var b=d("MAWOfflineQueueStatus").isOfflineQueueComplete();m&&!b&&c("promiseDone")(d("MWEncryptedBackupsProcessBackupIdsDEPRECATED").processBackupIdsStoredProcedure(a),function(b){if(c("gkx")("3551")===!0&&d("EBAPIWorkerCheck").runningInWorker())return;b===3&&c("promiseDone")(o(a))})}e={listenForChangesToBackupState:a,preloadEBData:p};g["default"]=e}),98);
__d("MWPlatformTaskSystem",["LSPlatformRequestScheduler","MWPlatformTaskUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var e=this;this.$1=a;this.$2=b;this.$3=new(c("LSPlatformRequestScheduler"))();this.$4=d("MWPlatformTaskUtils").checkQueuesWhenPendingTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!1)});this.$5=d("MWPlatformTaskUtils").checkQueuesWhenPendingFireForgetTaskTableUpdates(a,function(b){var c=b.queueName;b=b.transportKey;return e.$6(a,c,b,!0)});this.$7()}var e=a.prototype;e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield this.$2.decideWhatToDoWithTask(a,b,c,d)});function c(b,c,d,e){return a.apply(this,arguments)}return c}();e.$7=function(){var a=this;d("MWPlatformTaskUtils").checkAllPendingTasksForWork(this.$1,function(b){b=b.queueName;return a.$6(a.$1,b)})};e.cleanup=function(){this.$4.forEach(function(a){return a()}),this.$5.forEach(function(a){return a()}),this.$2.cleanup()};return a}();g["default"]=a}),98);
__d("EBLS",["LSDataTraceFlushDeferred","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSDefaultSyncGroups","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSMetadata","LSPlatformDeviceId","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSPlatformRealtimeTransport","LSPlatformTaskSystemTransport","LSReStoreWrapper","LSVersion","MAWBridge","MAWLSVaultingHooks","MAWVaultMaterialsStorage","MWEncryptedBackupsListenForChangesToBackupStateInitPath","MWPlatformTaskSystem","MWSetupEBStateDB","MqttEnv","Promise","ServerAppID","WATagsLogger","WAWaitForUserUnblocked","asyncToGeneratorRuntime","cr:6197","emptyFunction","err","getMWLSRegion","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync cleaning up"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting sucess"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscribing to mqtt sync status change events"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Watching for expired traces"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting backup state listeners"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting task system"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting realtime transport"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clearing epoch before resume sync..."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Getting datascript evaluator success"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync starting..."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["finished init successfully"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["created config"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Initialised db"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set failed: ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status set successfully"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Platform client sync connection status: ",""]);y=function(){return a};return a}var z=d("WATagsLogger").TAGS(["EBLS"]);function a(){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWaitForUserUnblocked").waitForUserUnblocked();return D()});return A.apply(this,arguments)}var B,C;function D(){if(B)return B;B=E();return B}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield G());z.DEV(v());var e={appId:c("nullthrows")(c("ServerAppID").app_id),executeGraphQLLightSpeedRequest:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=(yield d("MAWBridge").getBridge().sendAndReceive("event","executeGraphQLLightSpeedRequest",{args:b}));return e});function c(){return a.apply(this,arguments)}return c}(),getDb:G,getEval:function(){return c("LSDatascriptEvaluatorMaybeDeferred")()},platformName:"Messenger",realtimeUnderylingTransport:function(b,a){return c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),a,{getInstance:d("LSDedicatedMqttChannel").getInstance(function(){return!0},(b={},b[d("MqttEnv").MqttGkNames.mqttweb_global_connection_counter]=!1,b),function(a,b){return b},c("emptyFunction")),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})},region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!1,syncParams:c("LSPlatformMessengerSyncParams")};z.DEV(u());var f=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");a=(yield K(a,e,f));z.DEV(t());return a});return F.apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(C)return C;yield d("MAWVaultMaterialsStorage").setupVaultMaterials();C=new(i||(i=b("Promise")))(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("MWSetupEBStateDB").makeEBStateDB(!0));if(e==null)throw c("err")("persistence is null");e=d("LSReStoreWrapper").createLSReStore(e,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0);yield e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("LSDefaultSyncGroups").seedDb(a,void 0)});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":146");a(e)});return function(b){return a.apply(this,arguments)}}());return C});return H.apply(this,arguments)}function I(a){var b=c("MWEncryptedBackupsListenForChangesToBackupStateInitPath").listenForChangesToBackupState(a);return function(){b&&b()}}function J(a,b){var e=b==="Connected"?(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(h||(h=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);z.DEV(y(),b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":178"),function(){z.DEV(x())},function(a){z.ERROR(w(),a==null?void 0:a.message);throw a})}function K(a,b,c){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){z.DEV(s());var g=(yield e.getEval());z.DEV(r());var h=g()(a);z.DEV(q());z.DEV(p());var i=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(e.realtimeUnderylingTransport,e.appId,f);z.DEV(o());var t=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,i,h,e.schemaVersion));z.DEV(n());var u=null;b("cr:6197")!=null&&c("promiseDone")(b("cr:6197")(),function(b){u=b(a,i,h,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest)});var v=I(a);z.DEV(m());var w;c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){w=a}));z.DEV(l());i.onConnectionStatusChange(function(b){J(a,b)});z.DEV(k());return{cleanup:function(){var a;z.DEV(j());t==null?void 0:t.cleanup();i.cleanup();(a=u)==null?void 0:a.cleanup();v();w==null?void 0:w()}}});return L.apply(this,arguments)}g.init=a;g.genLSClient=D;g.getLSStorage=G;g.platformClientInit=K}),98);
__d("EncryptedBackupTaskSkippedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5727");b=d("FalcoLoggerInternal").create("encrypted_backup_task_skipped",a);e=b;g["default"]=e}),98);
__d("LSJSONOp",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127});c=a;f["default"]=c}),66);
__d("LSSelectOrder",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["ASC","DESC"]);c=a;f["default"]=c}),66);
__d("LSDatascriptJSONEval",["FBLogger","LS","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);j=function(){return a};return a}function k(a,b,d){if((h||(h=c("isPromise")))(a))return a.then(b,d);try{return b(a)}catch(a){if(d)return d(a);else throw a}}a=function(){function a(a,b,d,e){var f=this;e===void 0&&(e=[]);this.$4={};this.$5=[];this.$6=null;this.$7=function(a){return k(f.$8(a),function(a){return a},function(b){c("FBLogger")("messenger_web_product").catching(b).mustfix("Error evaluating step op: %s",Array.isArray(a)?a[0]:"<primitive value>");throw b})};this.$1=b;this.$2=a;this.$3=d;for(b=0;b<e.length;b++)this.$4[b]=e[b]}var d=a.prototype;d.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))};d.$8=function(a){var d=this;if(!Array.isArray(a))return a;var e=a[0];a=a.slice(1);var f=a;switch(e){case 8:return f.map(this.$7);case 2:return this.$4[f[0]];case 3:return k(this.$7(f[1]),function(a){return d.$4[f[0]]=a});case 4:return k(this.$7(f[2]),function(a){var b=f[0],c=f[1];for(var e=0;e<c;e++,b++)d.$4[b]=a[e];return a});case 12:a=f[0];e=f[1];var g=[];for(a=a;a<e;a++)g[a]=this.$4[a];return g;case 1:var h;a=function(a){h=k(h,function(){return d.$7(f[a])})};for(e=0;e<f.length;e++)a(e);return h;case 5:return(g=this.$1).storedProcedure.apply(g,f.map(this.$7));case 6:return(e=this.$1).nativeTypeOperation.apply(e,f.map(this.$7));case 7:return(a=this.$1).nativeOperation.apply(a,f.map(this.$7));case 9:return;case 10:return Infinity;case 11:return NaN;case 13:return this.$7(f[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(f[0]));case 15:return this.$1.blobs.of_string(this.$7(f[0]));case 16:return this.$1.blob(this.$7(f[0]));case 17:return this.$1.i64.of_float(this.$7(f[0]));case 18:g=this.$7(f[0]);return g!=null?this.$1.i64.to_float(g):void 0;case 19:return this.$1.i64.from_string(this.$7(f[0]));case 70:return this.$1.i64.cast(this.$7(f[0]));case 20:return this.$1.i64.to_string(this.$7(f[0]));case 21:return(e=this.$3)==null?void 0:(a=e.gk)==null?void 0:a[f[0]];case 22:var l;g=f[0];e=f[1];a=f[2];var m=f[3];l=(l=this.$3)==null?void 0:(l=l.qe)==null?void 0:(l=l[g])==null?void 0:(g=l[e])==null?void 0:g[a];if(l==null)return l;switch(m){case"BOOL":case"STR":return l;case"I64":if(typeof l!=="object")throw c("FBLogger")("messenger_web_product").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(l.toString())}return;case 23:if(this.$7(f[0]))return this.$7(f[1]);else if(f[2]!=null)return this.$7(f[2]);return;case 24:return this.$7(f[0])||this.$7(f[1]);case 25:return this.$7(f[0])&&this.$7(f[1]);case 26:return!this.$7(f[0]);case 27:return this.$7(f[0])==null;case 28:return this.$1.notnull(this.$7(f[0]));case 29:return this.$7(f[0])===this.$7(f[1]);case 30:return this.$1.i64.eq(this.$7(f[0]),this.$7(f[1]));case 31:return this.$1.blobs.eq(this.$7(f[0]),this.$7(f[1]));case 32:return this.$7(f[0])!==this.$7(f[1]);case 33:return this.$1.i64.neq(this.$7(f[0]),this.$7(f[1]));case 34:return this.$1.blobs.neq(this.$7(f[0]),this.$7(f[1]));case 35:return this.$7(f[0])>this.$7(f[1]);case 36:return this.$1.i64.gt(this.$7(f[0]),this.$7(f[1]));case 37:return this.$1.blobs.gt(this.$7(f[0]),this.$7(f[1]));case 38:return this.$7(f[0])>=this.$7(f[1]);case 39:return this.$1.i64.ge(this.$7(f[0]),this.$7(f[1]));case 40:return this.$1.blobs.ge(this.$7(f[0]),this.$7(f[1]));case 41:return this.$7(f[0])<this.$7(f[1]);case 42:return this.$1.i64.lt(this.$7(f[0]),this.$7(f[1]));case 43:return this.$1.blobs.lt(this.$7(f[0]),this.$7(f[1]));case 44:return this.$7(f[0])<=this.$7(f[1]);case 45:return this.$1.i64.le(this.$7(f[0]),this.$7(f[1]));case 46:return this.$1.blobs.le(this.$7(f[0]),this.$7(f[1]));case 47:return this.$1["throw"](f[0]);case 48:return this.$1.print(this.$7(f[0]));case 49:e=this.$7(f[0]);g=f[1];a=this.$1.logger(e);switch(g){case"mustfix":return a.mustfix(e);case"info":return a.info(e);case"warn":return a.warn(e);case"debug":return a.debug(e);default:throw c("FBLogger")("messenger_web_product").mustfixThrow("Invalid logger level %s",g)}case 50:return f.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(f[0]));case 51:l=this.$7(f[0]);l.push(this.$7(f[1]));return l;case 52:return this.$1.i64.of_int32(this.$7(f[0]).length);case 53:return new this.$1.Map();case 54:return this.$7(f[0]).get(this.$7(f[1]));case 55:return this.$7(f[0]).set(this.$7(f[1]),this.$7(f[2]));case 56:return this.$7(f[0]).keys();case 57:return this.$7(f[0])["delete"](this.$7(f[1]));case 58:return this.$7(f[0]).has(this.$7(f[1]));case 59:return this.$7(f[0]).join(this.$7(f[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(f[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return this.$1.localizeAsync(this.$7(f[0]),this.$7(f[1]));case 66:return this.$1.localizeV2Async(this.$7(f[0]),this.$7(f[1]));case 68:return this.$7(f[0])+this.$7(f[1]);case 69:return this.$1.i64.add(this.$7(f[0]),this.$7(f[1]));case 71:return(a=this.$3)==null?void 0:(e=a.justknob)==null?void 0:e[f[0]];case 72:return(g=this.$3)==null?void 0:(m=g.iggk)==null?void 0:m[f[0]];case 100:return this.$5[f[0]][f[1]];case 101:if(this.$6==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[f[0]];case 102:return this.$5[this.$7(f[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(f[0]).trim();case 75:return this.$7(f[0]).split(this.$7(f[1])).join(this.$7(f[2]));case 76:return f.map(this.$7).join("");case 77:return this.$1.like(this.$7(f[0]),this.$7(f[1]));case 78:return[0,this.$7(f[0]).length];case 79:l=f.map(this.$7);a=l[0];e=l.slice(1);return e.includes(a);case 80:return this.$7(f[1]).includes(this.$7(f[0]));case 81:return this.$7(f[0])-this.$7(f[1]);case 82:return this.$7(f[0])*this.$7(f[1]);case 83:return this.$7(f[0])/this.$7(f[1]);case 84:return this.$7(f[0])%this.$7(f[1]);case 91:return this.$1.i64.lsl_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 92:return this.$1.i64.lsr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 93:return this.$1.i64.asr_(this.$7(f[0]),this.$1.i64.to_int32(this.$7(f[1])));case 94:return this.$1.i64.and_(this.$7(f[0]),this.$7(f[1]));case 95:return this.$1.i64.or_(this.$7(f[0]),this.$7(f[1]));case 96:return this.$1.i64.xor(this.$7(f[0]),this.$7(f[1]));case 85:return this.$1.i64.sub(this.$7(f[0]),this.$7(f[1]));case 86:return this.$1.i64.mul(this.$7(f[0]),this.$7(f[1]));case 87:return this.$1.i64.div(this.$7(f[0]),this.$7(f[1]));case 88:return this.$1.i64.mod_(this.$7(f[0]),this.$7(f[1]));case 89:g=f.map(this.$7);var n=g[0];m=g.slice(1);return m.some(function(a){return d.$1.i64.eq(n,a)});case 90:var o=this.$7(f[0]);return this.$7(f[1]).some(function(a){return d.$1.i64.eq(o,a)});case 97:return this.$7(f[0])?this.$7(f[1]):this.$7(f[2]);case 98:l=this.$7(f[0]);e=this.$7(f[1]);return(l||e)&&!(l&&e);case 99:return(a=this.$7(f[0]))!=null?a:this.$7(f[1]);case 103:return;case 104:return b.call(null,f[0]);case 105:g=function(){var b=d.$7(f[0]),e=f[1],g=c("LS").n,a,h=function(b){a=k(a,function(){d.$4[e]=b;return d.$7(f[2])})};for(var l=g(j());d.$1.i64.lt(l,b);l=d.$1.i64.add(l,g(i())))h(l);return{v:a}}();if(typeof g==="object")return g.v;case 106:return this.$7(f[0]);case 107:throw c("FBLogger")("messenger_web_product").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(f[0])};case 109:return{gte:this.$7(f[0])};case 110:return{lt:this.$7(f[0])};case 111:return{lte:this.$7(f[0])};case 112:return f.length===1?this.$7(f[0]):(m=this.$1).merge.apply(m,f.map(this.$7));case 113:l=f[0];e=f[1];a=f.slice(2);g=a.map(this.$7);switch(e){case"ASC":return(m=this.$1.db.table(l)).fetch.apply(m,g);case"DESC":return(a=this.$1.db.table(l)).fetchDesc.apply(a,g)}return;case 114:return this.$1.filter(this.$7(f[0]),function(a){d.$6=a;a=d.$7(f[1]);d.$6=null;return a});case 115:return(e=this.$1).sortBy.apply(e,f.map(this.$7));case 116:return this.$1.forEach(this.$7(f[0]),function(a){return a["delete"]()});case 117:return this.$1.islc(this.$7(f[0]),0,this.$7(f[1]));case 118:return this.$1.count(this.$7(f[0]));case 119:return this.$1.db.table(f[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(f[0]),function(a){var b=a.item;a=a.update;var c={};d.$6=b;for(b=1;b<f.length;b+=2)c[f[b]]=d.$7(f[b+1]);d.$6=null;return a(c)});case 121:m=f[0];l={};for(a=1;a<f.length;a+=2)l[f[a]]=this.$7(f[a+1]);return this.$1.db.table(m).add(l);case 122:g=f[0];e={};for(a=1;a<f.length;a+=2)e[f[a]]=this.$7(f[a+1]);return this.$1.db.table(g).put(e);case 123:return this.$1.forEach(this.$7(f[0]),function(a){a=a.item;d.$5[f[1]]=a;return d.$7(f[2])});case 124:return this.$7(f[0]).next().then(function(a){var b=a.done;a=a.value;if(b)return d.$7(f[3]);else{b=f[1];if(b!=null){d.$5[b]=a.item;return d.$7(f[2])}}return 0});case 125:return this.$7(f[0]).slice(0,this.$7(f[1]));case 126:return this.$1.groupBy(this.$7(f[0]),f[1]).forEach(function(a){d.$5[f[2]]=a;return d.$7(f[3])});case 127:return this.$7(f[0]).substr(this.$1.i64.to_int32(this.$7(f[1])),this.$1.i64.to_int32(this.$7(f[2])))}};return a}();g["default"]=a}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DASM:1,JS:2,JSON:3});c=a;f["default"]=c}),66);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(a,b,c,d,e,f,g){"use strict";var h;d={createScript:function(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];d.forEach(function(a){if(typeof window!=="undefined"&&typeof window.trustedTypes!=="undefined"&&!window.trustedTypes.isScript(a))throw c("err")("Trusted Function requires TrustedScripts args only.")});var f=d.slice(0,-1).join(","),g=d.pop().toString();return"(function anonymous(\n     "+f+"\n     ) {\n     "+g+"\n     })"}};var i=c("TrustedTypes").createPolicy("unsafe-function-do-not-use",d);function b(){for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];if(c("TrustedTypes").isSupportedNatively()&&(h||(h=c("Env"))).useTrustedTypes){var f=i.createScript.apply(i,[""].concat(d));return a.eval(f)}else return babelHelpers.construct(Function,d)}g.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=i;g.createTrustedFunction=b}),98);
__d("LSDatascriptEvaluator",["FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var e=function(b){return function(c,d){var e;return a==null?void 0:(e=a.qe)==null?void 0:(e=e[c])==null?void 0:(c=e[b])==null?void 0:c[d]}},f=new Proxy({getBool:e("fb"),getNumber:e("fb"),getString:e("fb")},{get:function(a,b){return b in a?a[b]:{getBool:e(b),getNumber:e(b),getString:e(b)}}}),g=function(b){var c;return a==null?void 0:(c=a.gk)==null?void 0:c[b]};g.ig=function(b){var c;return a==null?void 0:(c=a.iggk)==null?void 0:c[b]};var h={getBool:function(b){var c;return a==null?void 0:(c=a.justknob)==null?void 0:c[b]}};return function(a){var e;e=d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((e=c("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),e.createScript("qex"),e.createScript("justknobx"),e.createScript("return "+b));return e(g,f,h)(c("LSFactory")(a,{dynamic:!0}))}}var i=function(a){return c("FBLogger")("messenger_web_product","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',(a=a)!=null?a:-1)};function j(a,b){var d=JSON.parse(b),e=(b=a)!=null?b:{gk:{},iggk:{},justknob:{},qe:{}};return function(a){return new(c("LSDatascriptJSONEval"))(d,c("LSFactory")(a,{dynamic:!0}),e).eval()}}function k(a,b,d){if(!c("justknobx")._("3078"))return l(a,b,d);if(d==null)throw i(d);switch(d){case 3:return j(a,b);default:throw i(d)}}function l(a,b,d){if(d==null){c("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!");return h(a,b)}switch(d){case 3:return j(a,b);case 2:return h(a,b);case 1:throw c("FBLogger")("messenger_web_product","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function a(a){return function(b){if(b==null)throw c("FBLogger")("messenger_comet").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(e){var g=e.experiments,h=e.priority,i=e.syncScript,j=e.target;e=e.taskNames;g=g!=null?JSON.parse(g):null;try{var l=k(g,i,j);return b.runInTransaction(function(b){a&&a();return l(b)},"readwrite",h,{taskNames:e,type:"sync_script"},f.id+":231")}catch(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web_product").catching(a).mustfix("Error executing sync script");throw a}}}}a.__debugModuleName="LSDatascriptEvaluator";g.default=a}),98);
__d("MWPExecuteTaskBridge",["FBLogger","QuickPerformanceLogger","cr:6551"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e){var f=d.event,g=d.taskID;(h||(h=c("QuickPerformanceLogger"))).markerPoint(f,"execute_task_through_bridge",{instanceKey:g});if(b("cr:6551")==null||b("cr:6551")[e]==null){(h||(h=c("QuickPerformanceLogger"))).markerPoint(f,"handler_not_found",{instanceKey:g});throw c("FBLogger")("ls_web_init").mustfixThrow("No bridge task handler found for %s",e)}h.markerPoint(f,"bridge_api_call",{instanceKey:g});return b("cr:6551")[e](a,d)}g.executeTask=a}),98);
__d("MWPHandleNativeTask",["FBLogger","I64","LSHandleTaskSendFailureForQueue2","LSHandleTaskSendSuccessForQueue2","LSJson","MWPExecuteTaskBridge","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","isNativeTask","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var j=e.queue_name;e=c("qpl")._(164763515,"1216");var l=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.pending_tasks.index("queueNameTaskId")).getKeyRange(j).filter(c("isNativeTask"))));if(l==null){(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"fetch_pending_task_failed");c("FBLogger")("ls_web_init").warn("MWPHandleNativeTask: Error cannot find a pending task for queue: %s",j);return}if(!c("isNativeTask")(l)){(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"non_native_task_found");c("FBLogger")("ls_web_init").warn("MWPHandleNativeTask: Non-Native tasks should not be handled by MWPHandleNativeTask.",j);return}var m=(h||(h=d("I64"))).to_float(l==null?void 0:l.taskId);(i||(i=c("QuickPerformanceLogger"))).markerStart(e,m);i.markerAnnotate(e,{string:{source:"MWPHandleNativeTask_handleTask"}},{instanceKey:m});i.markerPoint(e,"fetch_pending_task",{instanceKey:m});var n;try{(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"parse_task",{instanceKey:m}),n=k(l)}catch(a){(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"parse_task_failed",{instanceKey:m});c("FBLogger")("ls_web_init").catching(a).warn("Error parsing native task payload with pluginType %s and transportKey %s for queue: %s",(h||(h=d("I64"))).to_string(l.pluginType),l.transportKey,j);return}var o=l.context;try{(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"task_execute",{instanceKey:m}),i.markerAnnotate(e,{string:{source:"MWPHandleNativeTask_handleTask",task:JSON.stringify(l),taskName:o}},{instanceKey:m}),yield d("MWPExecuteTaskBridge").executeTask(n,{actorID:g,event:e,source:"MWPHandleNativeTask_handleTask",taskID:(h||(h=d("I64"))).to_float(l.taskId)},o),i.markerPoint(e,"task_execute_success",{instanceKey:m}),yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("LSHandleTaskSendSuccessForQueue2")(a,j);return a.pending_tasks["delete"](l.taskId)});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",void 0,f.id+":125"),i.markerEnd(e,2,m)}catch(b){(i||(i=c("QuickPerformanceLogger"))).markerPoint(e,"task_execute_failed",{instanceKey:m});i.markerEnd(e,3,m);c("FBLogger")("ls_web_init").catching(b).mustfix("Error handling native task for %s.",l==null?void 0:l.context);try{yield a.runInTransaction(function(a){return c("LSHandleTaskSendFailureForQueue2")(a,j)},"readwrite",void 0,void 0,f.id+":151")}catch(a){c("FBLogger")("ls_web_init").catching(a).mustfix("Error bumping failure cound for task")}}});return j.apply(this,arguments)}function k(a){if(a.taskValue==null)throw c("FBLogger")("ls_web_init").warn("MWPHandleNativeTask: task value is null, nothing to parse");try{var b=a.taskValue!==""?d("LSJson").parse(a.taskValue):"";return b}catch(b){throw c("FBLogger")("ls_web_init").catching(b).mustfix(" Error parsing native task payload for queue: %s, falling back to null payload",a.queueName)}}e={handleLSWork:a};g["default"]=e}),98);
__d("WASmaxInPreKeysRotateSignedResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysRequestErrors").parseRequestErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorRequestErrors:b.value}))}g.parseRotateSignedResponseRequestError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInPreKeysServerErrors").parseServerErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorServerErrors:b.value}))}g.parseRotateSignedResponseServerError=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseSuccess",["WASmaxInPreKeysIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseRotateSignedResponseSuccess=a}),98);
__d("WASmaxInPreKeysRotateSignedResponseValidationError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(c.value,"text");if(!e.success)return e;var f=d("WASmaxParseUtils").attrIntRange(c.value,"code",400,499);if(!f.success)return f;c=d("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(c.value);if(!c.success)return c;a=d("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorText:e.value,errorCode:f.value,errorIdentityKeyMixin:c.value},a.value))}g.parseRotateSignedResponseValidationError=a}),98);
__d("WASmaxOutPreKeysRotateSignedRequest",["WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WASmaxOutPreKeysSignedPreKeyMixin"],(function(a,b,c,d,e,f,g){function a(a){a=a.signedPreKeyMixinArgs;a=d("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(d("WASmaxJsx").smax("iq",{type:"set"},d("WASmaxOutPreKeysSignedPreKeyMixin").mergeSignedPreKeyMixin(d("WASmaxJsx").smax("rotate",null),a)));return a}g.makeRotateSignedRequest=a}),98);
__d("WASmaxPreKeysRotateSignedRPC",["WAComms","WASmaxInPreKeysRotateSignedResponseRequestError","WASmaxInPreKeysRotateSignedResponseServerError","WASmaxInPreKeysRotateSignedResponseSuccess","WASmaxInPreKeysRotateSignedResponseValidationError","WASmaxOutPreKeysRotateSignedRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=d("WASmaxOutPreKeysRotateSignedRequest").makeRotateSignedRequest(a);k.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=k.sent;g=d("WASmaxInPreKeysRotateSignedResponseSuccess").parseRotateSignedResponseSuccess(f,e);if(!g.success){k.next=7;break}return k.abrupt("return",{name:"RotateSignedResponseSuccess",value:g.value});case 7:h=d("WASmaxInPreKeysRotateSignedResponseValidationError").parseRotateSignedResponseValidationError(f,e);if(!h.success){k.next=10;break}return k.abrupt("return",{name:"RotateSignedResponseValidationError",value:h.value});case 10:i=d("WASmaxInPreKeysRotateSignedResponseRequestError").parseRotateSignedResponseRequestError(f,e);if(!i.success){k.next=13;break}return k.abrupt("return",{name:"RotateSignedResponseRequestError",value:i.value});case 13:j=d("WASmaxInPreKeysRotateSignedResponseServerError").parseRotateSignedResponseServerError(f,e);if(!j.success){k.next=16;break}return k.abrupt("return",{name:"RotateSignedResponseServerError",value:j.value});case 16:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RotateSigned",{Success:g,ValidationError:h,RequestError:i,ServerError:j}));case 17:case"end":return k.stop()}},null,this)}g.sendRotateSignedRPC=a}),98);
__d("WARotateSignedPreKeyProtocol",["WACryptoManager","WAErrorMessage","WAGlobals","WAHandleFailureUtils","WAMakeSignedPreKeyMixin","WAResultOrError","WASmaxPreKeysRotateSignedRPC","WATagsLogger","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["successfully rotated new skey"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ServerError: "," ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["RequestError: "," ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ValidationError: "," ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["generated skey. Start rotating skey..."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["start generating skey..."]);m=function(){return a};return a}var n=d("WATagsLogger").TAGS(["rotateSignedPreKeyProtocol"]);function a(){var a,c,e,f,g,o,p,q,r,s,t;return b("regeneratorRuntime").async(function(u){while(1)switch(u.prev=u.next){case 0:n.LOG(m());u.prev=1;u.next=4;return b("regeneratorRuntime").awrap(d("WAGlobals").getWaOneQueue().enqueue(function(a){a=a.cryptoManager;return d("WACryptoManager").generateSignedPreKey(a)},{operationType:"generate_signed_prekey",flush:!0,afterInit:!0}));case 4:a=u.sent;n.LOG(l());u.next=8;return b("regeneratorRuntime").awrap(d("WASmaxPreKeysRotateSignedRPC").sendRotateSignedRPC({signedPreKeyMixinArgs:d("WAMakeSignedPreKeyMixin").makeSignedPreKeyMixin(a)}));case 8:c=u.sent;u.t0=c.name;u.next=u.t0==="RotateSignedResponseValidationError"?12:u.t0==="RotateSignedResponseRequestError"?15:u.t0==="RotateSignedResponseServerError"?19:23;break;case 12:e=c.value,f=e.errorCode,g=e.errorText,o=e.errorIdentityKeyMixin;n.ERROR(k(),f,g);return u.abrupt("return",d("WAResultOrError").makeError({type:"validation-error",identity:o.elementValue}));case 15:p=c.value.errorRequestErrors.value.code;q=c.value.errorRequestErrors.name;n.ERROR(j(),p,q);return u.abrupt("return",d("WAResultOrError").makeError({type:"request-error"}));case 19:r=c.value.errorServerErrors.value.code;s=c.value.errorServerErrors.name;n.ERROR(i(),r,s);return u.abrupt("return",d("WAResultOrError").makeError({type:"server-error"}));case 23:c.name;n.LOG(h());return u.abrupt("return",d("WAResultOrError").makeResult());case 26:u.next=36;break;case 28:u.prev=28;u.t1=u["catch"](1);t=d("WAErrorMessage").maybeGetMessageFromError(u.t1);if(!t.includes("No lastSignedPrekeyId and registration")){u.next=35;break}u.next=34;return b("regeneratorRuntime").awrap(d("WAHandleFailureUtils").reregisterPhone());case 34:return u.abrupt("return",d("WAResultOrError").makeError({type:"no-prekey-reregistered"}));case 35:throw u.t1;case 36:case"end":return u.stop()}},null,this,[[1,28]])}g.rotateSignedPreKeyProtocol=a}),98);
__d("WARotateSignedPreKey",["Promise","WAGenerateAndUploadPreKeys","WALoggerTag","WARotateSignedPreKeyProtocol","WATagsLogger","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["rotateSignedPreKey failed."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while generating and uploading prekeys: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Signed prekey failed server validation. need to upload all keys."]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS([c("WALoggerTag").SignedPrekeyRotation,c("WALoggerTag").SignedPrekey]);function a(a){var e;return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(d("WARotateSignedPreKeyProtocol").rotateSignedPreKeyProtocol());case 2:e=a.sent;if(!(e.success||e.error.type==="no-prekey-reregistered")){a.next=5;break}return a.abrupt("return");case 5:if(!(e.error.type==="validation-error")){a.next=9;break}l.ERROR(k());d("WAGenerateAndUploadPreKeys").generateAndUploadPreKeys(null,{reason:"signed prekey failed server validation"})["catch"](function(a){l.ERROR(j(),a)});return a.abrupt("return",(h||(h=b("Promise"))).resolve());case 9:l.ERROR(i());throw c("err")("rotateSignedPreKey RPC failed: "+e.error.type);case 11:case"end":return a.stop()}},null,this)}g.rotateSignedPreKey=a}),98);
__d("WebWorkerInitDeferred",["cr:7429"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.blLoggingCavalryFields&&b("cr:7429").initLogging(a.blLoggingCavalryFields)}g.initDeferred=a}),98);/*FB_PKG_DELIM*/
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1755537");b=d("FalcoLoggerInternal").create("dgw_client",a);e=b;g["default"]=e}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(a,b,c,d,e,f,g){"use strict";var h;a="dgw_client";var i=b("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),j={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function k(a){switch(a){case i.GROUPED_STREAM_COMPONENT:case i.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e=function(){function a(a,b,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$5=""+a,this.$1=b,this.$4=c,this.$3=d,this.$6=e,this.$2=f,this.$7=g}a.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};var b=a.prototype;b.bumpODSKey=function(a,b,c){c===void 0&&(c=1);if(!d("Random").coinflip(c))return;a=this.$4+"."+a+"."+b;(h||(h=d("ODS"))).bumpEntityKey(3589,"dgw_web_client",a,c)};b.logEvent=function(a,b,c,d,e){d===void 0&&(d=!1),this.$2||this.$8(a,b,null,j.INFO,c,d,e)};b.$8=function(a,b,d,e,f,g,h){var i=this;g===void 0&&(g=!1);if(g&&!this.$7)return;(k(a)&&this.$1!=null||!k(a)&&this.$6!=null)&&c("DgwClientFalcoEvent").log(function(){var c;return{event:b,logging_id:(c=h)!=null?c:i.$1,dgw_version:i.$5,message:d,severity:e,uuid:i.$3,dgw_component:a,extra_info:f,destination_tier:i.$4,sg_transport_id:i.$6,source:2}})};b.logError=function(a,b,c,d,e,f){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.ERROR,d,e,f)};b.logWarn=function(a,b,c,d,e){e===void 0&&(e=!1),this.$2||this.$8(a,b,c,j.WARNING,d,e)};return a}();g.DGW_MODULE=a;g.DGWLoggingComponent=i;g.DGWLoggingContext=e}),98);
__d("DGWAckManager",["DGWLoggingContext","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){var b=a.prototype;b.stopTracking=function(a){window.clearTimeout(this.$1),this.$3(a)};function a(a,b,c){var d=this;this.$3=c;this.sendId=a;this.$2=b;this.handleAckReceived=function(){d.stopTracking(!0)};this.$1=window.setTimeout(function(){d.stopTracking(!1)},b)}return a}();a=function(){function a(a){this.$1=new Map(),this.$2=a}var c=a.prototype;c.waitForAck=function(a,c){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");e=this.$1;g.prev=2;g.next=5;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,d){e.set(a,new i(a,c,b))}));case 5:f=g.sent;f===!0?this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+a,!0):(this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+a+" timed out after "+c+"ms"));e["delete"](a);return g.abrupt("return",f);case 11:g.prev=11;g.t0=g["catch"](2);this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error");e["delete"](a);throw g.t0;case 16:case"end":return g.stop()}},null,this,[[2,11]])};c.handleAckReceived=function(a){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var b=this.$1.get(a);if(b===void 0){this.$2.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked");this.$2.logWarn(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+a+" which was not being tracked");return}b.handleAckReceived()};c.clearPendingAcks=function(){var a=this;this.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size);this.$1.forEach(function(b,c,e){a.$2.logEvent(d("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+b.sendId,null,!0),b.stopTracking(!1),e["delete"](c)})};return a}();g.DGWAckManager=a}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0"});function a(a){if(a==="TEST")return h.TEST;else if(a==="FACEBOOK")return h.FACEBOOK;else if(a==="INTERNALFB")return h.INTERNALFB;else if(a==="OCULUS")return h.OCULUS;else if(a==="ENTERPRISEFB")return h.ENTERPRISEFB;else if(a==="RECRUITINGFB")return h.RECRUITINGFB;else if(a==="INSTAGRAM")return h.INSTAGRAM;else if(a==="HORIZON_WEB")return h.HORIZON_WEB;else if(a==="SPARK_WEB")return h.SPARK_WEB;else if(a==="ABRA")return h.ABRA;else throw c("err")("failed to convert string ("+a+") to DGWAuth Type")}function d(a){if(a===h.FACEBOOK)return"FACEBOOK";else if(a===h.INTERNALFB)return"INTERNALFB";else if(a===h.OCULUS)return"OCULUS";else if(a===h.ENTERPRISEFB)return"ENTERPRISEFB";else if(a===h.RECRUITINGFB)return"RECRUITINGFB";else if(a===h.INSTAGRAM)return"INSTAGRAM";else if(a===h.HORIZON_WEB)return"HORIZON_WEB";else if(a===h.SPARK_WEB)return"SPARK_WEB";else if(a===h.ABRA)return"ABRA";else return"TEST"}g.DGWAuth=h;g.fromStringToDGWAuth=a;g.fromDGWAuthToString=d}),98);
__d("DGWStream",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR"]);function a(a){switch(a){case g.UNAUTHENTICATED:case g.UNAUTHORIZED:case g.REJECTED:case g.BAD_REQUEST:case g.UNKNOWN_ERROR:case g.SERVER_INTERNAL_ERROR:return!1;default:return!0}}f.StreamError=g;f.isRetryableError=a}),66);
__d("DGWCppBridge",[],(function(l,m,n,o,p,q){var r=function(){var l=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(m){m=m||{};var m=typeof m!=="undefined"?m:{},n=function(){function m(){}function n(l,m){return function(){l.apply(m,arguments)}}function l(m){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof m!=="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];t(m,this)}function o(m,n){while(m._state===3)m=m._value;if(m._state===0){m._deferreds.push(n);return}m._handled=!0;l._immediateFn(function(){var l=m._state===1?n.onFulfilled:n.onRejected;if(l===null){(m._state===1?p:q)(n.promise,m._value);return}var o;try{o=l(m._value)}catch(l){q(n.promise,l);return}p(n.promise,o)})}function p(m,o){try{if(o===m)throw new TypeError("A promise cannot be resolved with itself.");if(o&&(typeof o==="object"||typeof o==="function")){var p=o.then;if(o instanceof l){m._state=3;m._value=o;r(m);return}else if(typeof p==="function"){t(n(p,o),m);return}}m._state=1;m._value=o;r(m)}catch(l){q(m,l)}}function q(l,m){l._state=2,l._value=m,r(l)}function r(m){m._state===2&&m._deferreds.length===0&&l._immediateFn(function(){m._handled||l._unhandledRejectionFn(m._value)});for(var n=0,p=m._deferreds.length;n<p;n++)o(m,m._deferreds[n]);m._deferreds=null}function s(l,m,n){this.onFulfilled=typeof l==="function"?l:null,this.onRejected=typeof m==="function"?m:null,this.promise=n}function t(l,m){var n=!1;try{l(function(l){if(n)return;n=!0;p(m,l)},function(l){if(n)return;n=!0;q(m,l)})}catch(l){if(n)return;n=!0;q(m,l)}}l.prototype["catch"]=function(l){return this.then(null,l)};l.prototype.then=function(l,n){var p=new this.constructor(m);o(this,new s(l,n,p));return p};l.all=function(m){return new l(function(l,n){if(!Array.isArray(m))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(m);if(o.length===0)return l([]);var p=o.length;function q(m,r){try{if(r&&(typeof r==="object"||typeof r==="function")){var s=r.then;if(typeof s==="function"){s.call(r,function(l){q(m,l)},n);return}}o[m]=r;--p===0&&l(o)}catch(l){n(l)}}for(var r=0;r<o.length;r++)q(r,o[r])})};l.resolve=function(m){return m&&typeof m==="object"&&m.constructor===l?m:new l(function(l){l(m)})};l.reject=function(m){return new l(function(l,n){n(m)})};l.race=function(m){return new l(function(n,o){if(!Array.isArray(m))return o(new TypeError("Promise.race accepts an array"));for(var p=0,q=m.length;p<q;p++)l.resolve(m[p]).then(n,o)})};l._immediateFn=typeof setImmediate==="function"&&function(l){setImmediate(l)}||function(l){setTimeout(l,0)};l._unhandledRejectionFn=function(l){typeof console!=="undefined"&&console};return l}(),o,s;m.ready=new n(function(l,m){o=l,s=m});var t={},u;for(u in m)Object.prototype.hasOwnProperty.call(m,u)&&(t[u]=m[u]);var v=[];(function(l,m){throw m});var w=!0,x=!1,y="";function z(l){return m.locateFile?m.locateFile(l,y):y+l}var A;(w||x)&&(x?y=self.location.href:typeof document!=="undefined"&&document.currentScript&&(y=document.currentScript.src),l&&(y=l),y.indexOf("blob:")!==0?y=y.substr(0,y.lastIndexOf("/")+1):y="",(function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.send(null);return m.responseText}catch(n){m=ga(l);if(m)return fa(m);throw n}},x&&(A=function(l){try{var m=new XMLHttpRequest();m.open("GET",l,!1);m.responseType="arraybuffer";m.send(null);return new Uint8Array(m.response)}catch(n){m=ga(l);if(m)return m;throw n}}),function(l,m,n){var o=new XMLHttpRequest();o.open("GET",l,!0);o.responseType="arraybuffer";o.onload=function(){if(o.status==200||o.status==0&&o.response){m(o.response);return}var p=ga(l);if(p){m(p.buffer);return}n()};o.onerror=n;o.send(null)}),function(l){document.title=l});m.print||emptyFunction.bind(console);var B=m.printErr||emptyFunction.bind(console);for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&(m[u]=t[u]);t=null;m.arguments&&(v=m.arguments);m.thisProgram&&m.thisProgram;m.quit&&m.quit;var C;m.wasmBinary&&(C=m.wasmBinary);m.noExitRuntime||!0;var D={Memory:function(l){this.buffer=new ArrayBuffer(l.initial*65536)},Module:function(l){},Instance:function(l,m){this.exports=function(l){function m(l){l.set=function(l,m){this[l]=m};l.get=function(l){return this[l]};return l}var n,o=new Uint8Array(123);for(var p=25;p>=0;--p)o[48+p]=52+p,o[65+p]=p,o[97+p]=26+p;o[43]=62;o[47]=63;function q(m,n,p){var q,r,l=0,s=n,t=p.length;n=n+(t*3>>2)-(p[t-2]=="=")-(p[t-1]=="=");for(;l<t;l+=4)q=o[p.charCodeAt(l+1)],r=o[p.charCodeAt(l+2)],m[s++]=o[p.charCodeAt(l)]<<2|q>>4,s<n&&(m[s++]=q<<4|r>>2),s<n&&(m[s++]=r<<6|o[p.charCodeAt(l+3)])}function r(l){q(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),q(n,1372,"gAkQ")}function s(l){var o=l.a,p=o.buffer;o.grow=xa;var q=new Int8Array(p),s=new Int16Array(p),t=new Int32Array(p),u=new Uint8Array(p),v=new Uint16Array(p),w=new Uint32Array(p);new Float32Array(p);new Float64Array(p);var x=Math.imul;Math.fround;Math.abs;var y=Math.clz32;Math.min;Math.max;Math.floor;Math.ceil;Math.trunc;Math.sqrt;l.abort;NaN;Infinity;var z=l.b,A=1051008,B;function C(o,p,l,r,m,n){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;var y=0,z=0,B;y=A-80|0;A=y;t[y+72>>2]=o;t[y+68>>2]=p;t[y+64>>2]=l;t[y+60>>2]=r;t[y+56>>2]=m;t[y+52>>2]=n;a:{if(t[y+52>>2]?!t[y+56>>2]|(!t[y+72>>2]|!t[y+68>>2]|(!t[y+64>>2]|!t[y+60>>2])):1){t[y+76>>2]=5;break a}t[t[y+64>>2]>>2]=0;t[t[y+60>>2]>>2]=0;p=t[y+68>>2];l=t[y+56>>2];r=t[y+52>>2];o=A+-64|0;A=o;t[o+56>>2]=t[y+72>>2];t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=0;t[o+36>>2]=t[o+56>>2];b:{c:{d:{while(1){if(!t[o+52>>2])break c;t[o+32>>2]=t[o+36>>2];q[o+31|0]=u[t[o+36>>2]];t[o+52>>2]=t[o+52>>2]-1;t[o+36>>2]=t[o+36>>2]+1;if(u[o+31|0]!=10?u[o+31|0]==2|u[o+31|0]==4|u[o+31|0]==9:1){t[o+40>>2]=t[o+40>>2]+1;continue}t[o+24>>2]=1;if(V(u[o+31|0])&1){z=o,B=X(u[o+31|0])&1,q[z+23|0]=B;t[o+16>>2]=q[o+23|0]&1?1:2;if(w[o+52>>2]<w[o+16>>2]){t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[o+52>>2]=t[o+52>>2]-t[o+16>>2];t[o+24>>2]=t[o+16>>2]+t[o+24>>2];t[o+36>>2]=t[o+16>>2]+t[o+36>>2];if(!(u[o+31|0]!=14?u[o+31|0]!=8:0)){t[o+40>>2]=t[o+40>>2]+1;continue}}if(w[o+52>>2]<3)break d;t[o+12>>2]=0;p=t[o+36>>2];l=u[p|0]|u[p+1|0]<<8;q[o+12|0]=l;q[o+13|0]=l>>>8;q[o+14|0]=u[p+2|0];t[o+52>>2]=t[o+52>>2]-3;t[o+24>>2]=t[o+24>>2]+3;t[o+36>>2]=t[o+36>>2]+3;if(w[o+12>>2]<=w[o+52>>2]){t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]=t[o+12>>2]+t[o+36>>2];t[o+52>>2]=t[o+52>>2]-t[o+12>>2];continue}break}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+48>>2]>>2]=t[o+32>>2];t[t[o+44>>2]>>2]=t[o+52>>2]+t[o+24>>2];break b}t[t[o+44>>2]>>2]=t[o+52>>2]}t[o+60>>2]=t[o+40>>2];A=o- -64|0;t[y+48>>2]=t[o+60>>2];if(!t[y+48>>2]){t[y+76>>2]=0;break a}z=y,B=D(x(t[y+48>>2],20)),t[z+44>>2]=B;if(!t[y+44>>2]){t[y+76>>2]=3;break a}t[y+40>>2]=t[y+44>>2];t[y+36>>2]=t[y+72>>2];t[y+32>>2]=t[y+68>>2]-t[t[y+52>>2]>>2];t[y+28>>2]=0;while(1){if(w[y+28>>2]<w[y+48>>2]){if(w[y+32>>2]<1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}q[y+27|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;e:{if(!u[y+27|0]|u[y+27|0]==1|(u[y+27|0]==2|u[y+27|0]==3)|(u[y+27|0]==4|u[y+27|0]==9|u[y+27|0]==10))break e;if(V(u[y+27|0])&1)break e;O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=6;break a}o=t[y+40>>2];t[o>>2]=u[y+27|0]&15|t[o>>2]&-16;f:{if(u[y+27|0]!=10?u[y+27|0]==2|u[y+27|0]==4|u[y+27|0]==9:1){o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441;t[y+40>>2]=t[y+40>>2]+20;break f}if(V(u[y+27|0])&1){o=A-48|0;A=o;t[o+40>>2]=t[y+40>>2];t[o+36>>2]=y+36;t[o+32>>2]=y+32;g:{if(!(V(t[t[o+40>>2]>>2]&15)&1)){t[o+44>>2]=1;break g}z=o,B=X(t[t[o+40>>2]>>2]&15)&1,q[z+31|0]=B;t[o+24>>2]=q[o+31|0]&1?1:2;if(w[t[o+32>>2]>>2]<w[o+24>>2]){t[o+44>>2]=1;break g}ba(t[o+40>>2]+4|0,t[t[o+36>>2]>>2],t[o+24>>2]);p=t[o+36>>2];t[p>>2]=t[o+24>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+24>>2];if((t[t[o+40>>2]>>2]&15)==8){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==14){p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441;t[o+44>>2]=0;break g}if(w[t[o+32>>2]>>2]<3){t[o+44>>2]=11;break g}t[o+20>>2]=0;p=t[t[o+36>>2]>>2];l=u[p|0]|u[p+1|0]<<8;q[o+20|0]=l;q[o+21|0]=l>>>8;q[o+22|0]=u[p+2|0];p=t[o+36>>2];t[p>>2]=t[p>>2]+3;p=t[o+32>>2];t[p>>2]=t[p>>2]-3;p=t[o+40>>2];t[p>>2]=t[p>>2]&-268435441|(t[o+20>>2]&16777215)<<4;if(w[t[o+32>>2]>>2]<w[o+20>>2]){t[o+44>>2]=11;break g}if((t[t[o+40>>2]>>2]&15)==15){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==5){t[t[o+40>>2]+12>>2]=t[o+20>>2];p=D(t[o+20>>2]);t[t[o+40>>2]+8>>2]=p;if(!t[t[o+40>>2]+8>>2]){t[o+44>>2]=3;break g}ba(t[t[o+40>>2]+8>>2],t[t[o+36>>2]>>2],t[o+20>>2]);p=t[o+36>>2];t[p>>2]=t[o+20>>2]+t[p>>2];p=t[o+32>>2];t[p>>2]=t[p>>2]-t[o+20>>2];t[o+44>>2]=0;break g}h:{if(!((t[t[o+40>>2]>>2]&15)!=6?(t[t[o+40>>2]>>2]&15)!=7:0)){z=o,B=Q(t[o+36>>2],t[o+32>>2],o+19|0,o+18|0),t[z+12>>2]=B;if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}break h}if(!((t[t[o+40>>2]>>2]&15)!=13?(t[t[o+40>>2]>>2]&15)!=12:0)){l=t[o+32>>2];p=A-32|0;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=o+19;t[p+12>>2]=o+16;s[p+10>>1]=0;i:{if(w[t[p+20>>2]>>2]<2){t[p+28>>2]=1;break i}l=t[t[p+24>>2]>>2];l=u[l|0]|u[l+1|0]<<8;q[p+10|0]=l;q[p+11|0]=l>>>8;l=t[p+24>>2];t[l>>2]=t[l>>2]+2;l=t[p+20>>2];t[l>>2]=t[l>>2]-2;q[t[p+16>>2]]=(v[p+10>>1]&32768)==32768;s[t[p+12>>2]>>1]=v[p+10>>1]&32767;t[p+28>>2]=0}t[o+12>>2]=t[p+28>>2];if(t[o+12>>2]){t[o+44>>2]=t[o+12>>2];break g}}}if((t[t[o+40>>2]>>2]&15)==12){p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==7){p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==13){l=t[o+32>>2];r=t[o+20>>2];m=t[o+40>>2]+12|0;n=t[o+40>>2];p=A-32|0;A=p;t[p+24>>2]=t[o+36>>2];t[p+20>>2]=l;t[p+16>>2]=r;t[p+12>>2]=m;t[p+8>>2]=n+16;j:{if(w[p+16>>2]<2){t[p+28>>2]=9;break j}t[t[p+8>>2]>>2]=t[p+16>>2]-2;if(w[t[p+20>>2]>>2]<w[t[p+8>>2]>>2]){t[p+28>>2]=1;break j}l=D(t[t[p+8>>2]>>2]);t[t[p+12>>2]>>2]=l;if(!t[t[p+12>>2]>>2]){t[p+28>>2]=3;break j}ba(t[t[p+12>>2]>>2],t[t[p+24>>2]>>2],t[t[p+8>>2]>>2]);l=t[p+24>>2];t[l>>2]=t[t[p+8>>2]>>2]+t[l>>2];l=t[p+20>>2];t[l>>2]=t[l>>2]-t[t[p+8>>2]>>2];t[p+28>>2]=0}A=p+32|0;t[o+8>>2]=t[p+28>>2];if(t[o+8>>2]){t[o+44>>2]=t[o+8>>2];break g}p=t[o+40>>2];s[p+8>>1]=q[o+19|0]&1|v[p+8>>1]&65534;p=t[o+40>>2];s[p+8>>1]=s[p+8>>1]&1|v[o+16>>1]<<1;t[o+44>>2]=0;break g}if((t[t[o+40>>2]>>2]&15)==6){z=o,B=M(t[o+36>>2],t[o+32>>2],t[o+20>>2],t[o+40>>2]+12|0,t[o+40>>2]+16|0),t[z+4>>2]=B;if(t[o+4>>2]){t[o+44>>2]=t[o+4>>2];break g}p=t[o+40>>2];q[p+8|0]=q[o+19|0]&1|u[p+8|0]&254;p=t[o+40>>2];q[p+8|0]=q[p+8|0]&1|u[o+18|0]<<1;t[o+44>>2]=0;break g}t[o+44>>2]=1}A=o+48|0;t[y+20>>2]=t[o+44>>2];if(!t[y+20>>2]){t[y+40>>2]=t[y+40>>2]+20;break f}O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+20>>2];break a}t[y+16>>2]=0;if(w[y+32>>2]<3){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=1;break a}o=t[y+36>>2];p=u[o|0]|u[o+1|0]<<8;q[y+16|0]=p;q[y+17|0]=p>>>8;q[y+18|0]=u[o+2|0];t[y+36>>2]=t[y+36>>2]+3;t[y+32>>2]=t[y+32>>2]-3;if(!(t[y+16>>2]==1|u[y+27|0]!=1)){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=7;break a}o=t[y+40>>2];t[o>>2]=t[o>>2]&-268435441|(t[y+16>>2]&16777215)<<4;if(u[y+27|0]==3){if(t[y+16>>2]!=1){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=10;break a}q[y+15|0]=0;if(w[y+32>>2]<1){J(t[y+44>>2]);t[y+76>>2]=1;break a}q[y+15|0]=u[t[y+36>>2]];t[y+36>>2]=t[y+36>>2]+1;t[y+32>>2]=t[y+32>>2]-1;k:{if(u[y+15|0]<=4){q[t[y+40>>2]+4|0]=u[y+15|0];break k}q[t[y+40>>2]+4|0]=4}t[y+40>>2]=t[y+40>>2]+20;break f}z=y,B=Q(y+36|0,y+32|0,y+14|0,y+13|0),t[z+8>>2]=B;if(t[y+8>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+8>>2];break a}if(u[y+27|0]==1){o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20;break f}if(!u[y+27|0]){z=y,B=M(y+36|0,y+32|0,t[y+16>>2],t[y+40>>2]+8|0,t[y+40>>2]+12|0),t[z+4>>2]=B;if(t[y+4>>2]){O(t[y+44>>2],t[y+28>>2]);t[y+76>>2]=t[y+4>>2];break a}o=t[y+40>>2];q[o+4|0]=q[y+14|0]&1|u[o+4|0]&254;o=t[y+40>>2];q[o+4|0]=q[o+4|0]&1|u[y+13|0]<<1;t[y+40>>2]=t[y+40>>2]+20}}t[y+28>>2]=t[y+28>>2]+1;continue}break}if(t[y+32>>2]){O(t[y+44>>2],t[y+48>>2]);t[y+76>>2]=1;break a}t[t[y+64>>2]>>2]=t[y+44>>2];t[t[y+60>>2]>>2]=t[y+48>>2];t[y+76>>2]=0}A=y+80|0;return t[y+76>>2]}function D(o){var q=0,l=0,r=0,m=0,n=0,s=0,u=0,v,w=0,x,p;w=8;a:{b:{if(o>>>0>4294967239)break b;while(1){w=w>>>0>8?w:8;l=t[603];n=l;m=t[602];u=m;o=o>>>0>8?o+3&-4:8;c:{if(o>>>0<=127){s=(o>>>3|0)-1|0;break c}r=y(o);s=((o>>>29-r^4)-(r<<2)|0)+110|0;if(o>>>0<=4095)break c;r=((o>>>30-r^2)-(r<<1)|0)+71|0;s=r>>>0<63?r:63}q=s;r=q&31;(q&63)>>>0>=32?(q=0,l=l>>>r|0):(q=l>>>r|0,l=((1<<r)-1&l)<<32-r|u>>>r);r=q;if(l|q){while(1){n=l;q=r;d:{if(q|l){m=q-1|0;v=m+1|0;u=m;m=l-1|0;u=(m|0)!=-1?v:u;m=y(l^m)+32|0;l=y(q^u);l=(l|0)==32?m:l;q=63-l|0;0-(l>>>0>63)|0;break d}q=64}m=q;q=m;l=q&31;(q&63)>>>0>=32?(q=0,u=r>>>l|0):(q=r>>>l|0,u=((1<<l)-1&r)<<32-l|n>>>l);r=q;s=m+s|0;n=s<<4;q=t[n+1384>>2];m=n+1376|0;e:{if((q|0)!=(m|0)){l=I(q,w,o);if(l)break b;l=t[q+4>>2];t[l+8>>2]=t[q+8>>2];t[t[q+8>>2]+4>>2]=l;t[q+8>>2]=m;l=n+1380|0;t[q+4>>2]=t[l>>2];t[l>>2]=q;t[t[q+4>>2]+8>>2]=q;s=s+1|0;l=(r&1)<<31|u>>>1;r=r>>>1|0;break e}x=t[603];q=s;v=q&63;l=v;n=l&31;l>>>0>=32?(l=0,m=-1>>>n|0):(l=-1>>>n|0,m=(1<<n)-1<<32-n|-1>>>n);m=m&-2;n=v&31;v>>>0>=32?(l=m<<n,v=0):(l=(1<<n)-1&m>>>32-n|l<<n,v=m<<n);n=l;m=0-q&63;l=m;q=l&31;l>>>0>=32?(l=-1<<q,q=0):(l=(1<<q)-1&-1>>>32-q|-1<<q,q=-1<<q);p=q&-2;q=m&31;m>>>0>=32?(m=0,q=l>>>q|0):(m=l>>>q|0,q=((1<<q)-1&l)<<32-q|p>>>q);l=q|v;B=n|m;t[602]=t[602]&l;t[603]=B&x;l=u^1}if(l|r)continue;break}m=t[602];n=t[603]}f:{if(n|m){r=y(n);r=63-((r|0)==32?y(m)+32|0:r)<<4;q=r+1376|0;r=t[r+1384>>2];g:{if(!n&m>>>0<1073741824)break g;s=98;if((q|0)==(r|0))break g;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if(!s)break g;s=s-1|0;if((q|0)!=(r|0))continue;break}}if(G(o+48|0))break f;if(!r|(q|0)==(r|0))break a;while(1){l=I(r,w,o);if(l)break b;r=t[r+8>>2];if((q|0)!=(r|0))continue;break}break a}if(!G(o+48|0))break a}l=0;if(o>>>0>4294967239)break b;r=w;q=0;while(1){s=q;if(r){r=r-1&r;q=q+1|0;continue}break}if(s>>>0<=1)continue;break}}return l}return 0}function E(o,p,l,r,m,n,x){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;n=n|0;x=x|0;var y=0,z=0;y=A-32|0;A=y;s[y+26>>1]=o;t[y+20>>2]=p;t[y+16>>2]=l;q[y+15|0]=r;s[y+12>>1]=m;t[y+8>>2]=n;t[y+4>>2]=x;a:{if(!(!(q[y+15|0]&1)|v[y+12>>1]<=32767)){t[y+28>>2]=4;break a}p=t[y+20>>2];l=t[y+16>>2];r=t[y+8>>2];m=t[y+4>>2];n=q[y+15|0]&1;o=A+-64|0;A=o;t[o+56>>2]=y+26;t[o+52>>2]=p;t[o+48>>2]=l;t[o+44>>2]=r;t[o+40>>2]=m;q[o+39|0]=2;q[o+38|0]=13;t[o+32>>2]=y+12;q[o+31|0]=n;q[o+30|0]=2;b:{c:{if(!(!t[o+52>>2]|(!t[o+44>>2]|!t[o+40>>2]))&&w[o+48>>2]<=16777215)break c;t[o+60>>2]=5;break b}t[o+24>>2]=t[o+48>>2]+(u[o+39|0]+(u[o+30|0]+4|0)|0);z=o,x=D(t[o+24>>2]),t[z+20>>2]=x;if(!t[o+20>>2]){t[o+60>>2]=3;break b}t[o+16>>2]=t[o+20>>2];q[t[o+16>>2]]=u[o+38|0];t[o+16>>2]=t[o+16>>2]+1;ba(t[o+16>>2],t[o+56>>2],u[o+30|0]);t[o+16>>2]=u[o+30|0]+t[o+16>>2];t[o+12>>2]=u[o+39|0]+t[o+48>>2];if(w[o+12>>2]<w[o+48>>2]){J(t[o+20>>2]);t[o+60>>2]=9;break b}p=t[o+16>>2];l=u[o+12|0]|u[o+13|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+14|0];t[o+16>>2]=t[o+16>>2]+3;if(q[o+31|0]&1)d:{if(u[o+38|0]==6){p=t[o+32>>2];q[p|0]=u[p|0]|128;break d}e:{if(u[o+38|0]==13){p=t[o+32>>2];s[p>>1]=v[p>>1]|32768;break e}J(t[o+20>>2]);t[o+60>>2]=1;break b}}ba(t[o+16>>2],t[o+32>>2],u[o+39|0]);t[o+16>>2]=u[o+39|0]+t[o+16>>2];ba(t[o+16>>2],t[o+52>>2],t[o+48>>2]);t[t[o+44>>2]>>2]=t[o+20>>2];t[t[o+40>>2]>>2]=t[o+24>>2];t[o+60>>2]=0}A=o- -64|0;t[y+28>>2]=t[o+60>>2]}A=y+32|0;return t[y+28>>2]}function F(o,p,l,r,m){o=o|0;p=p|0;l=l|0;r=r|0;m=m|0;var n=0,v=0;n=A-32|0;A=n;s[n+30>>1]=o;t[n+24>>2]=p;t[n+20>>2]=l;t[n+16>>2]=r;t[n+12>>2]=m;p=t[n+24>>2];l=t[n+20>>2];r=t[n+16>>2];m=t[n+12>>2];o=A-48|0;A=o;t[o+40>>2]=n+30;t[o+36>>2]=p;t[o+32>>2]=l;t[o+28>>2]=r;t[o+24>>2]=m;q[o+23|0]=2;q[o+22|0]=15;a:{if(!(t[o+24>>2]?t[o+28>>2]:0)){t[o+44>>2]=5;break a}t[t[o+28>>2]>>2]=0;t[t[o+24>>2]>>2]=0;if(!(w[o+32>>2]<=16777215?t[o+36>>2]:0)){t[o+44>>2]=5;break a}t[o+16>>2]=t[o+32>>2]+(u[o+23|0]+4|0);v=o,r=D(t[o+16>>2]),t[v+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break a}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+22|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];p=t[o+8>>2];l=u[o+32|0]|u[o+33|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+34|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+36>>2],t[o+32>>2]);t[o+8>>2]=t[o+32>>2]+t[o+8>>2];t[t[o+28>>2]>>2]=t[o+12>>2];t[t[o+24>>2]>>2]=t[o+16>>2];t[o+44>>2]=0}A=o+48|0;A=n+32|0;return t[o+44>>2]}function G(o){var p=0,l,r=0,m=0,n,s=0;r=t[343];l=o+3&-4;p=r+l|0;a:{b:{if(p>>>0<=r>>>0?l:0)break b;if(p>>>0>wa()<<16>>>0&&!(z(p|0)|0))break b;t[343]=p;break a}t[604]=48;r=-1}if((r|0)!=-1){l=o+r|0;p=l-16|0;t[p+12>>2]=16;t[p>>2]=16;o=t[600];o?s=t[o+8>>2]:s=0;c:{d:{if((s|0)==(r|0)){m=r-(t[r-4>>2]&-2)|0;n=t[m-4>>2];t[o+8>>2]=l;o=m-(n&-2)|0;l=-16;if(!(q[(o+t[o>>2]|0)-4|0]&1))break d;l=t[o+4>>2];t[l+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=l;p=p-o|0;t[o>>2]=p;break c}t[r+12>>2]=16;t[r>>2]=16;t[r+8>>2]=l;t[r+4>>2]=o;t[600]=r;l=16}o=r+l|0;p=p-o|0;t[o>>2]=p}t[((p&-4)+o|0)-4>>2]=p|1;s=o;m=t[o>>2]-8|0;e:{if(m>>>0<=127){p=(m>>>3|0)-1|0;break e}n=y(m);p=((m>>>29-n^4)-(n<<2)|0)+110|0;if(m>>>0<=4095)break e;p=((m>>>30-n^2)-(n<<1)|0)+71|0;p=p>>>0<63?p:63}l=p<<4;t[s+4>>2]=l+1376;l=l+1384|0;t[o+8>>2]=t[l>>2];t[l>>2]=o;t[t[o+8>>2]+4>>2]=o;l=t[603];o=p&31;(p&63)>>>0>=32?(p=1<<o,o=0):(p=(1<<o)-1&1>>>32-o,o=1<<o);t[602]=o|t[602];t[603]=p|l}return(r|0)!=-1}function la(o,p,l,r){o=o|0;p=p|0;l=l|0;r=r|0;var m=0,n=0;m=A-16|0;A=m;s[m+10>>1]=o;s[m+8>>1]=p;t[m+4>>2]=l;t[m>>2]=r;a:{if(v[m+8>>1]>32767){t[m+12>>2]=4;break a}p=t[m+4>>2];l=t[m>>2];o=A-48|0;A=o;t[o+40>>2]=m+10;t[o+36>>2]=p;t[o+32>>2]=l;q[o+31|0]=2;q[o+30|0]=12;t[o+24>>2]=m+8;q[o+23|0]=2;b:{if(!(t[o+32>>2]?t[o+36>>2]:0)){t[o+44>>2]=5;break b}t[o+16>>2]=u[o+31|0]+(u[o+23|0]+4|0);n=o,r=D(t[o+16>>2]),t[n+12>>2]=r;if(!t[o+12>>2]){t[o+44>>2]=3;break b}t[o+8>>2]=t[o+12>>2];q[t[o+8>>2]]=u[o+30|0];t[o+8>>2]=t[o+8>>2]+1;ba(t[o+8>>2],t[o+40>>2],u[o+23|0]);t[o+8>>2]=u[o+23|0]+t[o+8>>2];t[o+4>>2]=u[o+31|0];p=t[o+8>>2];l=u[o+4|0]|u[o+5|0]<<8;q[p|0]=l;q[p+1|0]=l>>>8;q[p+2|0]=u[o+6|0];t[o+8>>2]=t[o+8>>2]+3;ba(t[o+8>>2],t[o+24>>2],u[o+31|0]);t[t[o+32>>2]>>2]=t[o+16>>2];t[t[o+36>>2]>>2]=t[o+12>>2];t[o+44>>2]=0}A=o+48|0;t[m+12>>2]=t[o+44>>2]}A=m+16|0;return t[m+12>>2]}function H(o,p,l){o=o|0;p=p|0;l=l|0;var q=0,m=0,n=0,r=0,s=0;n=A+-64|0;A=n;m=1;a:{if(R(o,p,0))break a;m=0;if(!p)break a;q=A+-64|0;A=q;m=t[p>>2];r=t[m-4>>2];s=t[m-8>>2];t[q+20>>2]=0;t[q+16>>2]=1084;t[q+12>>2]=p;t[q+8>>2]=1132;m=0;ca(q+24|0,39);p=p+s|0;b:{if(R(r,1132,0)){t[q+56>>2]=1;ka[t[t[r>>2]+20>>2]](r,q+8|0,p,p,1,0);m=t[q+32>>2]==1?p:0;break b}ka[t[t[r>>2]+24>>2]](r,q+8|0,p,1,0);c:switch(t[q+44>>2]){case 0:m=t[q+48>>2]==1?t[q+36>>2]==1?t[q+40>>2]==1?t[q+28>>2]:0:0:0;break b;case 1:break c;default:break b}if(t[q+48>>2]|t[q+36>>2]!=1|t[q+40>>2]!=1?t[q+32>>2]!=1:0)break b;m=t[q+24>>2]}A=q- -64|0;p=m;m=0;if(!p)break a;ca(n+8|4,52);t[n+56>>2]=1;t[n+20>>2]=-1;t[n+16>>2]=o;t[n+8>>2]=p;ka[t[t[p>>2]+28>>2]](p,n+8|0,t[l>>2],1);o=t[n+32>>2];(o|0)==1&&(t[l>>2]=t[n+24>>2]);m=(o|0)==1}o=m;A=n- -64|0;return o|0}function I(o,p,l){var q=0,m,n=0,r=0;q=o+4|0;m=(q+p|0)-1&0-p;p=t[o>>2];if(m+l>>>0<=(p+o|0)-4>>>0){n=t[o+4>>2];t[n+8>>2]=t[o+8>>2];t[t[o+8>>2]+4>>2]=n;(q|0)!=(m|0)&&(m=m-q|0,n=o-(t[o-4>>2]&-2)|0,q=m+t[n>>2]|0,t[n>>2]=q,t[(n+(q&-4)|0)-4>>2]=q,o=o+m|0,p=p-m|0,t[o>>2]=p);a:{if(l+24>>>0<=p>>>0){q=(o+l|0)+8|0;p=(p-l|0)-8|0;t[q>>2]=p;t[(q+(p&-4)|0)-4>>2]=p|1;r=q;n=t[q>>2]-8|0;b:{if(n>>>0<=127){m=(n>>>3|0)-1|0;break b}p=y(n);m=((n>>>29-p^4)-(p<<2)|0)+110|0;if(n>>>0<=4095)break b;p=((n>>>30-p^2)-(p<<1)|0)+71|0;m=p>>>0<63?p:63}p=m;m=p<<4;t[r+4>>2]=m+1376;m=m+1384|0;t[q+8>>2]=t[m>>2];t[m>>2]=q;t[t[q+8>>2]+4>>2]=q;m=t[603];q=p&31;(p&63)>>>0>=32?(p=1<<q,r=0):(p=(1<<q)-1&1>>>32-q,r=1<<q);t[602]=r|t[602];t[603]=p|m;p=l+8|0;t[o>>2]=p;t[((p&-4)+o|0)-4>>2]=p;break a}t[(o+p|0)-4>>2]=p}o=o+4|0}else o=0;return o}function J(o){var p=0,l,q=0,m,n=0;if(o){l=o-4|0;m=t[l>>2];q=m;p=l;n=t[o-8>>2];o=n&-2;(o|0)!=(n|0)&&(p=l-o|0,q=t[p+4>>2],t[q+8>>2]=t[p+8>>2],t[t[p+8>>2]+4>>2]=q,q=o+m|0);o=l+m|0;l=t[o>>2];(l|0)!=t[(o+l|0)-4>>2]&&(m=t[o+4>>2],t[m+8>>2]=t[o+8>>2],t[t[o+8>>2]+4>>2]=m,q=q+l|0);t[p>>2]=q;t[((q&-4)+p|0)-4>>2]=q|1;n=p;q=t[p>>2]-8|0;a:{if(q>>>0<=127){o=(q>>>3|0)-1|0;break a}m=y(q);o=((q>>>29-m^4)-(m<<2)|0)+110|0;if(q>>>0<=4095)break a;o=((q>>>30-m^2)-(m<<1)|0)+71|0;o=o>>>0<63?o:63}l=o<<4;t[n+4>>2]=l+1376;l=l+1384|0;t[p+8>>2]=t[l>>2];t[l>>2]=p;t[t[p+8>>2]+4>>2]=p;l=t[603];p=o&31;(o&63)>>>0>=32?(o=1<<p,p=0):(o=(1<<p)-1&1>>>32-p,p=1<<p);t[602]=p|t[602];t[603]=o|l}}function K(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-48|0;A=p;t[p+40>>2]=n;t[p+36>>2]=o;t[p+32>>2]=l;a:{if(!(t[p+32>>2]?t[p+36>>2]:0)){t[p+44>>2]=5;break a}if(w[p+40>>2]>4){t[p+44>>2]=8;break a}t[p+28>>2]=5;m=p,l=D(t[p+28>>2]),t[m+24>>2]=l;if(!t[p+24>>2]){t[p+44>>2]=3;break a}t[p+20>>2]=t[p+24>>2];q[p+19|0]=3;q[t[p+20>>2]]=u[p+19|0];t[p+20>>2]=t[p+20>>2]+1;t[p+12>>2]=1;n=t[p+20>>2];o=u[p+12|0]|u[p+13|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;q[n+2|0]=u[p+14|0];t[p+20>>2]=t[p+20>>2]+3;q[p+11|0]=t[p+40>>2];q[t[p+20>>2]]=u[p+11|0];t[t[p+36>>2]>>2]=t[p+24>>2];t[t[p+32>>2]>>2]=t[p+28>>2];t[p+44>>2]=0}A=p+48|0;return t[p+44>>2]}function L(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(R(n,t[o>>2],m)){if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+32>>2]=p;b:{if(t[o+44>>2]==4)break b;s[o+52>>1]=0;n=t[n+8>>2];ka[t[t[n>>2]+20>>2]](n,o,l,l,1,m);if(u[o+53|0]){t[o+44>>2]=3;if(!u[o+52|0])break b;break a}t[o+44>>2]=4}t[o+20>>2]=l;t[o+40>>2]=t[o+40>>2]+1;if(t[o+36>>2]!=1|t[o+24>>2]!=2)break a;q[o+54|0]=1;return}n=t[n+8>>2];ka[t[t[n>>2]+24>>2]](n,o,l,p,m)}}function M(o,p,l,q,m){var n=0;n=A-32|0;A=n;t[n+24>>2]=o;t[n+20>>2]=p;t[n+16>>2]=l;t[n+12>>2]=q;t[n+8>>2]=m;a:{if(w[n+16>>2]<1){t[n+28>>2]=9;break a}t[t[n+8>>2]>>2]=t[n+16>>2]-1;if(w[t[n+20>>2]>>2]<w[t[n+8>>2]>>2]){t[n+28>>2]=1;break a}o=D(t[t[n+8>>2]>>2]);t[t[n+12>>2]>>2]=o;if(!t[t[n+12>>2]>>2]){t[n+28>>2]=3;break a}ba(t[t[n+12>>2]>>2],t[t[n+24>>2]>>2],t[t[n+8>>2]>>2]);o=t[n+24>>2];t[o>>2]=t[t[n+8>>2]>>2]+t[o>>2];o=t[n+20>>2];t[o>>2]=t[o>>2]-t[t[n+8>>2]>>2];t[n+28>>2]=0}A=n+32|0;return t[n+28>>2]}function N(n,o,l){n=n|0;o=o|0;l=l|0;var p=0,m=0;p=A-32|0;A=p;s[p+26>>1]=n;t[p+20>>2]=o;t[p+16>>2]=l;t[t[p+16>>2]>>2]=3;m=p,l=D(t[t[p+16>>2]>>2]),t[m+12>>2]=l;a:{if(!t[p+12>>2]){t[p+28>>2]=3;break a}t[t[p+20>>2]>>2]=t[p+12>>2];q[p+11|0]=14;q[t[p+12>>2]]=u[p+11|0];t[p+12>>2]=t[p+12>>2]+1;n=t[p+12>>2];o=u[p+26|0]|u[p+27|0]<<8;q[n|0]=o;q[n+1|0]=o>>>8;t[p+28>>2]=0}A=p+32|0;return t[p+28>>2]}function O(m,n){var l=0;l=A-16|0;A=l;t[l+12>>2]=m;t[l+8>>2]=n;t[l+4>>2]=0;while(1){if(w[l+4>>2]<w[l+8>>2]){t[l>>2]=t[l+12>>2]+x(t[l+4>>2],20);a:{if(!(t[t[l>>2]>>2]&15)){J(t[t[l>>2]+8>>2]);break a}b:{if((t[t[l>>2]>>2]&15)==5){J(t[t[l>>2]+8>>2]);break b}(t[t[l>>2]>>2]&15)==6&&J(t[t[l>>2]+12>>2])}}t[l+4>>2]=t[l+4>>2]+1;continue}break}J(t[l+12>>2]);A=l+16|0}function P(m,n,l,o){q[m+53|0]=1;a:{if(t[m+4>>2]!=(l|0))break a;q[m+52|0]=1;l=t[m+16>>2];if(!l){t[m+36>>2]=1;t[m+24>>2]=o;t[m+16>>2]=n;if((o|0)!=1|t[m+48>>2]!=1)break a;q[m+54|0]=1;return}if((n|0)==(l|0)){l=t[m+24>>2];(l|0)==2&&(t[m+24>>2]=o,l=o);if(t[m+48>>2]!=1|(l|0)!=1)break a;q[m+54|0]=1;return}q[m+54|0]=1;t[m+36>>2]=t[m+36>>2]+1}}function Q(n,o,l,p){var m;m=A-32|0;t[m+24>>2]=n;t[m+20>>2]=o;t[m+16>>2]=l;t[m+12>>2]=p;q[m+11|0]=0;a:{if(w[t[m+20>>2]>>2]<1){t[m+28>>2]=1;break a}q[m+11|0]=u[t[t[m+24>>2]>>2]];n=t[m+24>>2];t[n>>2]=t[n>>2]+1;n=t[m+20>>2];t[n>>2]=t[n>>2]-1;q[t[m+16>>2]]=(u[m+11|0]&128)==128;q[t[m+12>>2]]=u[m+11|0]&127;t[m+28>>2]=0}return t[m+28>>2]}function ma(n,o,l,p,m){n=n|0;o=o|0;l=l|0;p=p|0;m=m|0;if(R(n,t[o+8>>2],m)){da(o,l,p);return}a:{if(!R(n,t[o>>2],m))break a;if(!(t[o+20>>2]!=(l|0)?t[o+16>>2]!=(l|0):0)){if((p|0)!=1)break a;t[o+32>>2]=1;return}t[o+20>>2]=l;t[o+32>>2]=p;t[o+40>>2]=t[o+40>>2]+1;t[o+36>>2]!=1|t[o+24>>2]!=2||(q[o+54|0]=1);t[o+44>>2]=4}}function R(m,n,l){var o;if(!l)return t[m+4>>2]==t[n+4>>2];if((m|0)==(n|0))return 1;l=t[m+4>>2];m=u[l|0];n=t[n+4>>2];o=u[n|0];a:{if(!m|(o|0)!=(m|0))break a;while(1){o=u[n+1|0];m=u[l+1|0];if(!m)break a;n=n+1|0;l=l+1|0;if((m|0)==(o|0))continue;break}}return(m|0)==(o|0)}function na(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=9;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function S(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=10;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function T(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=2;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function U(m,n){m=m|0;n=n|0;var l=0,o=0;l=A-32|0;A=l;t[l+24>>2]=m;t[l+20>>2]=n;o=l,m=D(1),t[o+16>>2]=m;a:{if(!t[l+16>>2]){t[l+28>>2]=3;break a}q[l+15|0]=4;q[t[l+16>>2]]=u[l+15|0];t[t[l+24>>2]>>2]=t[l+16>>2];t[t[l+20>>2]>>2]=1;t[l+28>>2]=0}A=l+32|0;return t[l+28>>2]}function V(l){var m=0;m=A-16|0;A=m;t[m+12>>2]=l;l=1;a:{if(X(t[m+12>>2])&1)break a;l=1;if(t[m+12>>2]==15)break a;l=1;if(t[m+12>>2]==13)break a;l=1;if(t[m+12>>2]==12)break a;l=t[m+12>>2]==14}A=m+16|0;return l}function W(m,n,l){var o;o=t[m+16>>2];if(!o){t[m+36>>2]=1;t[m+24>>2]=l;t[m+16>>2]=n;return}a:{if((n|0)==(o|0)){if(t[m+24>>2]!=2)break a;t[m+24>>2]=l;return}q[m+54|0]=1;t[m+24>>2]=2;t[m+36>>2]=t[m+36>>2]+1}}function X(l){var m;m=A-16|0;t[m+12>>2]=l;l=1;a:{if(t[m+12>>2]==5)break a;l=1;if(t[m+12>>2]==6)break a;l=1;if(t[m+12>>2]==7)break a;l=t[m+12>>2]==8}return l}function Y(o,p,l,q,m,n){o=o|0;p=p|0;l=l|0;q=q|0;m=m|0;n=n|0;if(R(o,t[p+8>>2],n)){P(p,l,q,m);return}o=t[o+8>>2];ka[t[t[o>>2]+20>>2]](o,p,l,q,m,n)}function Z(){var m=0,n,l;while(1){n=m<<4;l=n+1376|0;t[n+1380>>2]=l;t[n+1384>>2]=l;m=m+1|0;if((m|0)!=64)continue;break}G(48)}function $(m,n,l,o){m=m|0;n=n|0;l=l|0;o=o|0;if(R(m,t[n+8>>2],0)){W(n,l,o);return}m=t[m+8>>2];ka[t[t[m>>2]+28>>2]](m,n,l,o)}function aa(o,p,l,q,m,n){o=o|0,p=p|0,l=l|0,q=q|0,m=m|0,n=n|0,R(o,t[p+8>>2],n)&&P(p,l,q,m)}function ba(m,n,l){if(l)while(1){q[m|0]=u[n|0];m=m+1|0;n=n+1|0;l=l-1|0;if(l)continue;break}}function ca(l,m){if(m)while(1){q[l|0]=0;l=l+1|0;m=m-1|0;if(m)continue;break}}function oa(m,n,l,o){m=m|0,n=n|0,l=l|0,o=o|0,R(m,t[n+8>>2],0)&&W(n,l,o)}function da(m,n,l){t[m+28>>2]==1|t[m+4>>2]!=(n|0)||(t[m+28>>2]=l)}function pa(l,m){l=l|0;m=m|0;return x(m,20)+l|0}function ea(l){l=l|0;return v[l+8>>1]>>>1|0}function qa(l){l=l|0;return s[l+8>>1]&1}function fa(l){l=l|0;return t[l+12>>2]}function ra(l){l=l|0;return t[l>>2]&15}function sa(l){l=l|0;return t[l+16>>2]}function ga(l){l=l|0;return v[l+4>>1]}function ha(l){l=l|0;return t[l+8>>2]}function ia(l){l=l|0;return u[l+4|0]}function ja(l){l=l|0;return l|0}function ta(l){return D(l)}function ua(l){l=l|0,J(l)}function va(l){l|0}n=u;r(l);var ka=m([null,ja,ua,va,va,H,aa,ma,oa,ua,Y,L,$]);function wa(){return p.byteLength/65536|0}function xa(l){l=l|0;var m=wa()|0;l=m+l|0;if(m<l&&l<65536){l=new ArrayBuffer(x(l,65536));var r=new Int8Array(l);r.set(q);q=new Int8Array(l);s=new Int16Array(l);t=new Int32Array(l);u=new Uint8Array(l);v=new Uint16Array(l);w=new Uint32Array(l);new Float32Array(l);new Float64Array(l);p=l;o.buffer=p;n=u}return m}return{c:Z,d:ta,e:ua,f:T,g:U,h:K,i:F,j:N,k:E,l:la,m:na,n:S,o:C,p:ra,q:ia,r:pa,s:ga,t:ha,u:fa,v:fa,w:sa,x:ea,y:qa,z:ea,A:ka}}return s(l)}(ha)},instantiate:function(l,m){return{then:function(n){var m=new D.Module(l);n({instance:new D.Instance(m)})}}},RuntimeError:Error};C=[];typeof D!=="object"&&Y("no native wasm support detected");var E,F=!1;function G(l,m){l||Y("Assertion failed: "+m)}function la(l,m){l%m>0&&(l+=m-l%m);return l}var H,I;function J(l){H=l,m.HEAP8=new Int8Array(l),m.HEAP16=new Int16Array(l),m.HEAP32=new Int32Array(l),m.HEAPU8=I=new Uint8Array(l),m.HEAPU16=new Uint16Array(l),m.HEAPU32=new Uint32Array(l),m.HEAPF32=new Float32Array(l),m.HEAPF64=new Float64Array(l)}u=m.INITIAL_MEMORY||2097152;m.wasmMemory?E=m.wasmMemory:E=new D.Memory({initial:u/65536,maximum:2147483648/65536});E&&(H=E.buffer);H.byteLength;J(H);var K,L=[],M=[],N=[];function O(){if(m.preRun){typeof m.preRun=="function"&&(m.preRun=[m.preRun]);while(m.preRun.length)ma(m.preRun.shift())}da(L)}function P(){da(M)}function Q(){if(m.postRun){typeof m.postRun=="function"&&(m.postRun=[m.postRun]);while(m.postRun.length)na(m.postRun.shift())}da(N)}function ma(l){L.unshift(l)}function R(l){M.unshift(l)}function na(l){N.unshift(l)}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(l,m){var n=l>>>16;l=l&65535;var o=m>>>16;m=m&65535;return l*m+(n*m+l*o<<16)|0});if(!Math.fround){var S=new Float32Array(1);Math.fround=function(l){S[0]=l;return S[0]}}Math.clz32||(Math.clz32=function(l){var m=32,n=l>>16;n&&(m-=16,l=n);n=l>>8;n&&(m-=8,l=n);n=l>>4;n&&(m-=4,l=n);n=l>>2;n&&(m-=2,l=n);n=l>>1;return n?m-2:m-l});Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)});var T=0,U=null,V=null;function W(l){T++,m.monitorRunDependencies&&m.monitorRunDependencies(T)}function X(l){T--;m.monitorRunDependencies&&m.monitorRunDependencies(T);if(T==0){U!==null&&(clearInterval(U),U=null);if(V){l=V;V=null;l()}}}m.preloadedImages={};m.preloadedAudios={};function Y(l){m.onAbort&&m.onAbort(l);l+="";B(l);F=!0;l="abort("+l+"). Build with -s ASSERTIONS=1 for more info.";l=new D.RuntimeError(l);s(l);throw l}var Z="data:application/octet-stream;base64,";function $(l){return l.startsWith(Z)}var aa="dgwcppbridge.wasm";$(aa)||(aa=z(aa));function ba(l){try{if(l==aa&&C)return new Uint8Array(C);var m=ga(l);if(m)return m;if(A)return A(l);else throw"both async and sync fetching of the wasm failed"}catch(l){Y(l)}}function ca(){return!C&&(w||x)&&typeof fetch==="function"?fetch(aa,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+aa+"'";return l.arrayBuffer()})["catch"](function(){return ba(aa)}):n.resolve().then(function(){return ba(aa)})}function oa(){var n={a:ha};function o(n,l){l=n.exports;m.asm=l;K=m.asm.A;R(m.asm.c);X("wasm-instantiate")}W("wasm-instantiate");function r(l){o(l.instance)}function t(l){return ca().then(function(l){l=D.instantiate(l,n);return l}).then(l,function(l){B("failed to asynchronously prepare wasm: "+l),Y(l)})}function u(){if(!C&&typeof D.instantiateStreaming==="function"&&!$(aa)&&typeof fetch==="function")return fetch(aa,{credentials:"same-origin"}).then(function(l){l=D.instantiateStreaming(l,n);return l.then(r,function(l){B("wasm streaming compile failed: "+l);B("falling back to ArrayBuffer instantiation");return t(r)})});else return t(r)}if(m.instantiateWasm)try{var l=m.instantiateWasm(n,o);return l}catch(l){B("Module.instantiateWasm callback failed with error: "+l);return!1}u()["catch"](s);return{}}function da(l){while(l.length>0){var n=l.shift();if(typeof n=="function"){n(m);continue}var o=n.func;typeof o==="number"?n.arg===void 0?K.get(o)():K.get(o)(n.arg):o(n.arg===void 0?null:n.arg)}}function pa(l){try{E.grow(l-H.byteLength+65535>>>16);J(E.buffer);return 1}catch(l){}}function ea(l){var m=I.length;l=l>>>0;var n=2147483648;if(l>n)return!1;for(var o=1;o<=4;o*=2){var p=m*(1+.2/o);p=Math.min(p,l+100663296);p=Math.min(n,la(Math.max(l,p),65536));p=pa(p);if(p)return!0}return!1}var qa=!1;function fa(l){var m=[];for(var n=0;n<l.length;n++){var o=l[n];o>255&&(qa&&G(!1,"Character code "+o+" ("+String.fromCharCode(o)+")  at offset "+n+" not in 0x00-0xFF."),o&=255);m.push(String.fromCharCode(o))}return m.join("")}var ra=typeof atob==="function"?atob:function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",o,p,q,r,s,t=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");do p=m.indexOf(l.charAt(t++)),q=m.indexOf(l.charAt(t++)),r=m.indexOf(l.charAt(t++)),s=m.indexOf(l.charAt(t++)),p=p<<2|q>>4,q=(q&15)<<4|r>>2,o=(r&3)<<6|s,n=n+String.fromCharCode(p),r!==64&&(n=n+String.fromCharCode(q)),s!==64&&(n=n+String.fromCharCode(o));while(t<l.length);return n};function sa(l){try{l=ra(l);var m=new Uint8Array(l.length);for(var n=0;n<l.length;++n)m[n]=l.charCodeAt(n);return m}catch(l){throw new Error("Converting base64 string to bytes failed.")}}function ga(l){if(!$(l))return;return sa(l.slice(Z.length))}var ha={b:ea,a:E};oa();m.___wasm_call_ctors=function(){return(m.___wasm_call_ctors=m.asm.c).apply(null,arguments)};m.__malloc=function(){return(m.__malloc=m.asm.d).apply(null,arguments)};m.__free=function(){return(m.__free=m.asm.e).apply(null,arguments)};m.__DgwCodecEncodeEmpty=function(){return(m.__DgwCodecEncodeEmpty=m.asm.f).apply(null,arguments)};m.__DgwCodecEncodeDeauth=function(){return(m.__DgwCodecEncodeDeauth=m.asm.g).apply(null,arguments)};m.__DgwCodecEncodeDrain=function(){return(m.__DgwCodecEncodeDrain=m.asm.h).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(m.__DgwCodecEncodeStreamGroup_EstabStream=m.asm.i).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(m.__DgwCodecEncodeStreamGroup_EndOfData=m.asm.j).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Data=function(){return(m.__DgwCodecEncodeStreamGroup_Data=m.asm.k).apply(null,arguments)};m.__DgwCodecEncodeStreamGroup_Ack=function(){return(m.__DgwCodecEncodeStreamGroup_Ack=m.asm.l).apply(null,arguments)};m.__DgwCodecEncodePing=function(){return(m.__DgwCodecEncodePing=m.asm.m).apply(null,arguments)};m.__DgwCodecEncodePong=function(){return(m.__DgwCodecEncodePong=m.asm.n).apply(null,arguments)};m.__DgwCodecDecode=function(){return(m.__DgwCodecDecode=m.asm.o).apply(null,arguments)};m.__getFrameType=function(){return(m.__getFrameType=m.asm.p).apply(null,arguments)};m.__getDrainReasonFromDrainFrame=function(){return(m.__getDrainReasonFromDrainFrame=m.asm.q).apply(null,arguments)};m.__getDGWFramePtr=function(){return(m.__getDGWFramePtr=m.asm.r).apply(null,arguments)};m.__getStreamIdFromStreamGroupFrame=function(){return(m.__getStreamIdFromStreamGroupFrame=m.asm.s).apply(null,arguments)};m.__getEncodedParamsFromEstablishStreamFrame=function(){return(m.__getEncodedParamsFromEstablishStreamFrame=m.asm.t).apply(null,arguments)};m.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(m.__getEncodedParamsSizeFromEstablishStreamFrame=m.asm.u).apply(null,arguments)};m.__getDataFromGroupedStreamDataFrame=function(){return(m.__getDataFromGroupedStreamDataFrame=m.asm.v).apply(null,arguments)};m.__getDataSizeFromGroupedStreamDataFrame=function(){return(m.__getDataSizeFromGroupedStreamDataFrame=m.asm.w).apply(null,arguments)};m.__getAckIdFromGroupedStreamDataFrame=function(){return(m.__getAckIdFromGroupedStreamDataFrame=m.asm.x).apply(null,arguments)};m.__getRequiresAckFromGroupedStreamDataFrame=function(){return(m.__getRequiresAckFromGroupedStreamDataFrame=m.asm.y).apply(null,arguments)};m.__getAckIdFromGroupedStreamAckFrame=function(){return(m.__getAckIdFromGroupedStreamAckFrame=m.asm.z).apply(null,arguments)};var ia;V=function l(){ia||ja(),ia||(V=l)};function ja(l){l||v;if(T>0)return;O();if(T>0)return;function n(){if(ia)return;ia=!0;m.calledRun=!0;if(F)return;P();o(m);m.onRuntimeInitialized&&m.onRuntimeInitialized();Q()}m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),n()},1)):n()}m.run=ja;if(m.preInit){typeof m.preInit=="function"&&(m.preInit=[m.preInit]);while(m.preInit.length>0)m.preInit.pop()()}ja();return m.ready}}();typeof q==="object"&&typeof p==="object"?p.exports=r:typeof define==="function"&&define.amd?define([],function(){return r}):typeof q==="object"&&(q.Module=r)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Promise","Random","URI","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=4;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=d("Random").random()*16|0;a=a==="x"?b:b&3|8;return a.toString(16)})}function k(a){var b=new TextDecoder();b=b.decode(a);a=c("Base64").encode(b);b=a.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return b}var l=null,m=null;function n(){m==null&&(m=(i||(i=b("Promise"))).resolve().then(function(){return c("DGWCppBridge")()}).then(function(a){l=a}));return m}e=function(){function a(){}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!c("gkx")("9999")){a.next=4;break}return a.abrupt("return",n());case 4:if(!(l!=null)){a.next=6;break}return a.abrupt("return");case 6:a.next=8;return b("regeneratorRuntime").awrap(c("DGWCppBridge")());case 8:l=a.sent;case 9:case"end":return a.stop()}},null,this)};a.constructConnectUrl=function(a){var b,e,f=a.appId,g=a.appVersion,i=a.authType,j=a.deviceId,l=a.dgwVersion,m=a.fbId,n=a.tier,o=a.loggingId,p=a.headers,q=a.endpoint,r=a.serviceId,s=a.regionHint;a=a.establishStreamFrame;var t=(b={},b[(e=d("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=f,b[e.HEADER_CONSTANTS.HEADER_APPVERSION]=g,b[e.HEADER_CONSTANTS.HEADER_AUTHTYPE]=i,b[e.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+l,b[e.HEADER_CONSTANTS.HEADER_UUID]=m,b[e.HEADER_CONSTANTS.HEADER_TARGET_TIER]=n,b);a!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=k(a));o!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=o);s!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=s);j!==void 0&&(t[d("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=j);Object.keys(p).forEach(function(a){var b=d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+a;Object.prototype.hasOwnProperty.call(t,b)||(t[b]=p[a])});f=new(h||(h=c("URI")))(q);f.setQueryData(t);f.setPath(f.getPath()+"/"+r);f.toString().length>2e3&&(delete t[d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],f.setQueryData(t));return f.toString()};return a}();f=function(){function a(a,b,c){this.$1=null,this.$2=a,this.$3=b,this.$4=c}a.initialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:if(!c("gkx")("9999")){a.next=4;break}return a.abrupt("return",n());case 4:if(!(l!=null)){a.next=6;break}return a.abrupt("return");case 6:a.next=8;return b("regeneratorRuntime").awrap(c("DGWCppBridge")());case 8:l=a.sent;case 9:case"end":return a.stop()}},null,this)};var e=a.prototype;e.malloc=function(a){try{a=l.__malloc(a);if(a===0){var b;(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0");return-1}return a}catch(a){(b=this.$2)==null?void 0:b.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",a.toString());return-1}};e.free=function(a){l.__free(a)};e.append=function(a){if(this.$1==null){this.$1=a;return}var b=this.$1.length,c=new Uint8Array(b+a.length);c.set(this.$1,0);c.set(a,b);this.$1=c};e.processData=function(){var a=this;if(this.$1==null)return;var b=this.$1.length,c=this.malloc(b);if(c===-1)return;var e=l.HEAPU8.subarray(c,c+b);if(this.$1)for(var f=0;f<e.length;++f)e[f]=this.$1[f];f=this.malloc(j*4);if(f===-1)return;e=f;var g=e+j,h=g+j,i=h+j;b=l.__DgwCodecDecode(c,b,e,g,h,i);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){this.free(f);(h=this.$2)==null?void 0:h.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return}c=l.HEAPU32.subarray(i/j,i/j+1)[0];if(this.$1==null){this.free(f);return}h=this.$1.length-c;if(this.$1&&this.$1.length>h){this.$1=new Uint8Array(((b=this.$1)==null?void 0:b.subarray(h))||[])}else this.$1=null;i=l.HEAPU32.subarray(g/j,g/j+1)[0];c=l.HEAPU32.subarray(e/j,e/j+1)[0];var k=[];for(b=0;b<i;++b){var m=l.__getDGWFramePtr(c,b);h=l.__getFrameType(m);switch(h){case d("DGWConstants").DgwFrameType.DgwFrameType_Drain:g=function(){var b=l.__getDrainReasonFromDrainFrame(m),c=d("DGWConstants").drainReasonToDrainReasonString(b);(b=a.$2)==null?void 0:b.logEvent(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+c);k.push(function(){var b;return(b=a.$3)==null?void 0:b.receivedDrainSignal(c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getEncodedParamsFromEstablishStreamFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getEncodedParamsSizeFromEstablishStreamFrame(m)));a.free(c);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEstablishStreamReceived(b,d)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:h=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getDataFromGroupedStreamDataFrame(m),d=new Uint8Array(l.HEAPU8.subarray(c,c+l.__getDataSizeFromGroupedStreamDataFrame(m)));a.free(c);var e=l.__getRequiresAckFromGroupedStreamDataFrame(m)?l.__getAckIdFromGroupedStreamDataFrame(m):null;k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamDataReceived(b,d,e)});return"break"}();if(h==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:g=function(){var b=l.__getStreamIdFromStreamGroupFrame(m),c=l.__getAckIdFromGroupedStreamAckFrame(m);k.push(function(){var d;return(d=a.$3)==null?void 0:d.onGroupedStreamAckReceived(b,c)});return"break"}();if(g==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:e=function(){var b=l.__getStreamIdFromStreamGroupFrame(m);k.push(function(){var c;return(c=a.$3)==null?void 0:c.onGroupedStreamEndOfDataReceived(b)});return"break"}();if(e==="break")break;case d("DGWConstants").DgwFrameType.DgwFrameType_Ping:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPingReceived()});break;case d("DGWConstants").DgwFrameType.DgwFrameType_Pong:k.push(function(){var b;return(b=a.$3)==null?void 0:b.onPongReceived()});break;default:break}this.free(m)}this.free(f);for(h=0;h<k.length;h++)k[h]()};e.encodeData=function(a,b,c,e){var f=this.malloc(a.length);if(f===-1)return null;var g=l.HEAPU8.subarray(f,f+a.length);for(var h=0;h<g.length;++h)g[h]=a[h];a=this.malloc(j*2);h=a;var i=a+j;e=l.__DgwCodecEncodeStreamGroup_Data(e,f,g.length,b,c,h,i);this.free(f);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(g=this.$2)==null?void 0:g.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}b=l.HEAPU32.subarray(h/j,h/j+1)[0];c=l.HEAPU32.subarray(i/j,i/j+1)[0];f=new Uint8Array(l.HEAPU8.subarray(b,b+c));this.free(b);this.free(a);return f};e.encodeAck=function(a,b){var c=this.malloc(j*2);if(c===-1)return null;var e=c,f=c+j;b=l.__DgwCodecEncodeStreamGroup_Ack(b,a,e,f);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(a=this.$2)==null?void 0:a.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b));return null}a=l.HEAPU32.subarray(e/j,e/j+1)[0];b=l.HEAPU32.subarray(f/j,f/j+1)[0];e=new Uint8Array(l.HEAPU8.subarray(a,a+b));this.free(a);this.free(c);return e};e.encodeDrain=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeDrain(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};e.encodeEstablishStream=function(a,b){var c=this.malloc(b.length);if(c===-1)return null;var e=l.HEAPU8.subarray(c,c+b.length);for(var f=0;f<b.length;++f)e[f]=b[f];e=this.malloc(j*2);f=e;var g=e+j;b=l.__DgwCodecEncodeStreamGroup_EstabStream(a,c,b.length,f,g);this.free(c);if(b!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){(c=this.$2)==null?void 0:c.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(b)+" for StreamId "+a);return null}c=l.HEAPU32.subarray(f/j,f/j+1)[0];b=l.HEAPU32.subarray(g/j,g/j+1)[0];a=new Uint8Array(l.HEAPU8.subarray(c,c+b));this.free(c);this.free(e);return a};e.encodeEndOfData=function(a){var b=this.malloc(j*2);if(b===-1)return null;var c=b,e=b+j;a=l.__DgwCodecEncodeStreamGroup_EndOfData(a,c,e);if(a!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(a));return null}f=l.HEAPU32.subarray(c/j,c/j+1)[0];a=l.HEAPU32.subarray(e/j,e/j+1)[0];c=new Uint8Array(l.HEAPU8.subarray(f,f+a));this.free(f);this.free(b);return c};e.encodePing=function(){if(this.$5!=null)return this.$5;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePing(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$5=b;return b};e.encodePong=function(){if(this.$6!=null)return this.$6;var a=this.malloc(j*2);if(a===-1)return null;var b=a,c=a+j,e=l.__DgwCodecEncodePong(b,c);if(e!==d("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var f;(f=this.$2)==null?void 0:f.logError(d("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+d("DGWConstants").DgwCodecReturnCodeToString(e));return null}f=l.HEAPU32.subarray(b/j,b/j+1)[0];e=l.HEAPU32.subarray(c/j,c/j+1)[0];b=new Uint8Array(l.HEAPU8.subarray(f,f+e));this.free(f);this.free(a);this.$6=b;return b};return a}();g.uuidv4=a;g.Uint8ArrayToBase64UrlStr=k;g.DGWUtils=e;g.DGWCodec=f}),98);
__d("DGWExponentialBackoff",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g,h={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},i=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.errors=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c===void 0&&(c=h);d.prev=1;d.next=4;return b("regeneratorRuntime").awrap(j(a,c));case 4:return d.abrupt("return",d.sent);case 7:d.prev=7;d.t0=d["catch"](1);throw d.t0.errors[d.t0.errors.length-1];case 10:case"end":return d.stop()}},null,this,[[1,7]])}function j(a,c){var d,e,f,g,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:d=0,e=[],f=c.baseRetryInterval,g=c.backoffFactor;case 4:if(!(d<=c.maxRetries)){j.next=20;break}j.prev=5;j.next=8;return b("regeneratorRuntime").awrap(a());case 8:h=j.sent;return j.abrupt("return",h);case 12:j.prev=12,j.t0=j["catch"](5),e.push(j.t0);case 15:j.next=17;return b("regeneratorRuntime").awrap(k(f*Math.pow(g,d)));case 17:++d;j.next=4;break;case 20:throw new i("Max call count exceeded",e);case 21:case"end":return j.stop()}},null,this,[[5,12]])}function k(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(new(g||(g=b("Promise")))(function(b){return window.setTimeout(b,a)}));case 2:case"end":return c.stop()}},null,this)}f.callWithExponentialBackoff=a}),66);
__d("DGWPinger",["DGWLoggingContext"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;if(this.$3){var b;(b=d("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout_fired.reset");this.$3=!1;this.$4();b.DGWLoggingContext.bumpODSKey(b.DGWLoggingComponent.PINGER,"timeout.newtimeout");this.$2=window.setTimeout(function(){a.$6()},this.$1)}else d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null);this.$1>0&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)};return a}();g.DGWPinger=a}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8});function a(a){switch(a){case g.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}c=function(){function a(){}var b=a.prototype;b.onStreamGroupError=function(){};b.onStreamGroupMustDrain=function(){};b.onStreamGroupTransportClose=function(){};return a}();f.DGWStreamGroupError=g;f.isRetryableError=a;f.NoOpDGWStreamGroupCallbacks=c}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=a}var b=a.prototype;b.transportEstablished=function(a){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open","readyState:"+a),this.$2=Date.now(),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")};b.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")};b.transportClosed=function(a,b){this.$4=Date.now(),a?(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",b))};b.transportEstablishmentFailure=function(a){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+a+" onLine:"+String(c("NetworkStatus").isOnline())),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")};b.streamEstablishmentTimeout=function(a,b,e){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",a,"streamId:"+b+", onLine:"+String(c("NetworkStatus").isOnline()),!1,e),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")};b.streamEstablishmentPending=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")};b.streamEstablishmentSuccess=function(a,b){this.$3.logEvent(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+a,!0,b),this.$3.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")};b.transportError=function(a,b,c){this.$3.logError(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,a,b,c)};b.receivedFrameForInactiveStream=function(a,b,c){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+a+", streamID: "+b,c)};b.ranOutOfStreamIds=function(a){this.$3.logWarn(d("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",a)};return a}();g.DGWTransportEvents=a}),98);
__d("DGWWebSocketTransport",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=new WebSocket(a);a.binaryType="arraybuffer";a.onopen=function(){};a.onclose=function(){};a.onerror=function(){};return a}f.getWebSocketConnection=a}),66);
__d("DGWStreamEvents",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$4=new Map(),this.$5=new Map(),this.$6=a,this.$1=b,c!=null&&(this.$8="streamId:"+c+"::")}var b=a.prototype;b.dataSent=function(a,b,c){var d=c?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,d,((d=this.$8)!=null?d:"")+"sendId:"+a+", payloadSize:"+b,!0);this.$4.set(a,{ackRequested:c,payloadSize:b,sendTimestamp:Date.now()})};b.ackReceived=function(a){var b;this.$6.logEvent(this.$1,"AckReceived",((b=this.$8)!=null?b:"")+"sendId:"+a,!0);this.$6.bumpODSKey(this.$1,"ack_received");b=this.$4.get(a);b!=null&&(b.ackReceivedTimestamp=Date.now())};b.ackSent=function(a){var b;this.$6.bumpODSKey(this.$1,"ack_sent");this.$6.logEvent(this.$1,"ACK sent",((b=this.$8)!=null?b:"")+"ackId:"+a,!0)};b.drainSent=function(a){var b;this.$6.logEvent(this.$1,"Drain sent",((b=this.$8)!=null?b:"")+"drainReason: "+a)};b.dataReceived=function(a,b,c){var d;this.$6.bumpODSKey(this.$1,"data_received");this.$6.logEvent(this.$1,"Data received",((d=this.$8)!=null?d:"")+"sendId:"+((d=c)!=null?d:"null")+", ackRequested:"+b.toString()+", payloadSize:"+a,!0);c!=null&&this.$5.set(c,{ackRequested:b,payloadSize:a,receiveTimestamp:Date.now()})};b.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)};b.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)};b.streamClosed=function(a,b){this.$7=Date.now();var c=this.$9();if(a){this.$6.bumpODSKey(this.$1,"stream_closed_gracefully");this.$6.logEvent(this.$1,"Stream closed gracefully",""+((a=this.$8)!=null?a:"")+c)}else{this.$6.bumpODSKey(this.$1,"stream_closed_with_error");this.$6.logError(this.$1,"Stream closed abnormally",b,""+((a=this.$8)!=null?a:"")+c)}};b.connectionEstablishmentFailure=function(a){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+a)};b.streamEstablishmentFailure=function(a,b){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+a.toString(),""+((a=this.$8)!=null?a:"")+b);this.$6.bumpODSKey(this.$1,"stream_establishment_failure")};b.error=function(a,b){b={msg:b,state:this.$9()};this.$6.logError(this.$1,a,JSON.stringify(b),this.$8)};b.$9=function(){var a={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(a)};return a}();f.DGWStreamEvents=a}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f,g,h){this.$1=a,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=b,this.$7=c,this.$8=e,this.$2=g,this.$9=f,this.$10=new(d("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(d("DGWStreamEvents").DGWStreamEvents)(this.$9,d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=h}var c=a.prototype;c.send=function(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=this.$11++%d("DGWConstants").MAX_ACK_ID;if(this.$14(a,!0,f)){h.next=3;break}return h.abrupt("return",!1);case 3:h.next=5;return b("regeneratorRuntime").awrap(this.$10.waitForAck(f,(e=c)!=null?e:d("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));case 5:g=h.sent;return h.abrupt("return",g);case 7:case"end":return h.stop()}},null,this)};c.sendAndForget=function(a){return this.$14(a,!1)};c.close=function(){var a=this.$2.encodeEndOfData(this.$1);if(a==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}a=this.$8.send(a);if(!a){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent();this.$5=!0;this.$4&&this.$15()};c.loggingContext=function(){return this.$9};c.__sendDrain=function(a){var b=d("DGWConstants").drainReasonToDrainReasonString(a);if(this.$5)return!1;a=this.$2.encodeDrain(a);if(a==null)return!1;this.$12.drainSent(b);b=this.$8.send(a);return b};c.__transportCloseHook=function(a){this.$13(),this.$10.clearPendingAcks(),a?(this.$12.error("Received StreamError","StreamErrorType: "+a),this.$6.onError(a)):this.$5&&this.$4?this.$15():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(d("DGWStream").StreamError.PREMATURE_CLOSE))};c.$15=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)};c.__dataReceivedHook=function(a,b){this.$12.dataReceived(a.length,b!=null,b),b!=null&&this.$16(b),this.$6.onDataReceived(a)};c.__ackReceivedHook=function(a){this.$12.ackReceived(a),this.$10.handleAckReceived(a)};c.__drainReceivedHook=function(a){this.$3===!1&&(this.$6.onStreamMustDrain(this,a),this.$3=!0)};c.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$15():this.$6.onServerHasFinishedSendingData(this)};c.$14=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c=0);if(this.$5){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally");return!1}a=this.$2.encodeData(a,b,c,this.$1);if(a==null)return!1;var e=this.$8.send(a);if(!e){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString());return!1}this.$12.dataSent(c,a.length,b);return!0};c.$16=function(a){var b=this.$2.encodeAck(a,this.$1);if(b==null){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+a);return!1}b=this.$8.send(b);if(!b){this.$9.logError(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+a);return!1}this.$12.ackSent(a);return!0};return a}();g.GroupedStream=a}),98);
__d("StreamIdGenerator",["err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("7667"),i=65535;a=function(){function a(){this.$1=new Set(),this.$2=0,this.$1.add(this.$2)}var b=a.prototype;b.getNextStreamId=function(){var a;if(!this.streamIdAvailable())throw c("err")("Max number of stream IDs reached");if(this.$1.size===0)return++this.$2;a=(a=this.$1.values().next().value)!=null?a:0;this.$1["delete"](a);return a};b.putBackStreamId=function(a){h&&this.$1.add(a)};b.streamIdAvailable=function(){return this.$1.size>0||this.$2<i};return a}();g.MAX_STREAM_ID=i;g.StreamIdGeneratorImpl=a}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","StreamIdGenerator","err","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("gkx")("4657"),j=function(a,b,c,e,f){var g=this;this.groupedStream=a;this.$1=window.setTimeout(function(){c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},e);this.handleEstablishFrameReceived=function(){window.clearTimeout(g.$1),b(g.groupedStream)};this.abortStream=function(a){f(),c(a)}};a=function(){function a(b,e,f,g,h,j,k,l){var m=this;this.$14=h;this.$16=this.__getStreamIdGenerator();this.$5=new Map();this.$6=new Map();this.$7=g.keepAliveMs;this.$8=!1;this.$3=!0;this.$4=!1;this.$12=f;this.$10=new TextEncoder();this.$11=new TextDecoder();this.$13=g;h={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(a){m.$13.streamGroupCallbacks.onStreamGroupMustDrain(a),m.$5.forEach(function(b){b.__drainReceivedHook(a)})},onGroupedStreamDataReceived:function(a,b,c){if(m.$5.has(a)){var d=m.$5.get(a);d==null?void 0:d.__dataReceivedHook(b,c)}else{m.$12.receivedFrameForInactiveStream("Data",a,"sendAckID: "+((d=c)!=null?d:"null"))}},onGroupedStreamAckReceived:function(a,b){if(m.$5.has(a)){var c=m.$5.get(a);c==null?void 0:c.__ackReceivedHook(b)}else{m.$12.receivedFrameForInactiveStream("ACK",a,"ackId: "+((c=b)!=null?c:"null"))}},onGroupedStreamEndOfDataReceived:function(a){if(m.$5.has(a)){var b=m.$5.get(a);b==null?void 0:b.__endOfDataHook()}else m.$12.receivedFrameForInactiveStream("EndOfData",a)},onGroupedStreamEstablishStreamReceived:function(a,b){if(m.$6.has(a)){var c=m.$6.get(a);m.$6["delete"](a);b=JSON.parse(m.$11.decode(b));(b.code===void 0||b.code!==200)&&(c==null?void 0:c.abortStream(d("DGWStream").StreamError.ABNORMAL_CLOSURE));c==null?void 0:c.handleEstablishFrameReceived()}else m.$12.receivedFrameForInactiveStream("EstablishStream",a,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var a=m.$2.encodePing();if(a==null)return;m.send(a)},onPongReceived:function(){i&&(m.$3=!1)}};this.$2=new(d("DGWUtils").DGWCodec)(j,h,g.dgwVersion);if(g.enableFirstStreamOnWsHandshake){if(k===void 0)throw c("err")("Missing grouped stream options");if(l===void 0)throw c("err")("Missing grouped stream callbacks");var n=this.$16.getNextStreamId();f=this.createEstablishStreamFrame(n,k);h=d("DGWUtils").DGWUtils.constructConnectUrl({appId:g.appId,appVersion:g.appVersion,authType:g.authType,deviceId:(j=g.deviceId)!=null?j:void 0,dgwVersion:g.dgwVersion,fbId:g.fbId,tier:g.tier,loggingId:(h=g.loggingId)!=null?h:void 0,headers:a.__prefixAppHeaders(g.headers),endpoint:g.connectEndpoint,serviceId:g.serviceId,regionHint:(j=g.regionHint)!=null?j:void 0,establishStreamFrame:f});this.$1=e(h);if(!h.includes(d("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;this.$15=this.waitForEstablishStream(n,l,k,new(d("DGWLoggingContext").DGWLoggingContext)(this.$13.dgwVersion,k.loggingId,this.$13.serviceId,this.$13.fbId,this.$13.loggingId,k.disableFalcoLogging),function(a){m.$5.set(n,a)},function(){m.$16.putBackStreamId(n)})}else this.$1=e(b)}var e=a.prototype;e.send=function(a){try{this.$1.send(a);return!0}catch(a){this.$12.transportError("Failed to send over transport","readyState: "+this.$1.readyState,a.toString());return!1}};e.close=function(){this.$1.close(d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE)};e.abort=function(a,b,c,d){this.$8=!0,this.$12.transportClosed(!1,d),this.$5.forEach(function(a){a.__transportCloseHook(b)}),this.$6.forEach(function(a){a.abortStream(b)}),this.$13.streamGroupCallbacks.onStreamGroupError(a),this.$5.clear(),this.$6.clear(),this.$1.close(c)};e.cleanup=function(){var a;(a=this.$9)==null?void 0:a.cancel();this.$1!=null&&(this.$1.onopen=function(a){},this.$1.onmessage=function(a){},this.$1.onerror=function(a){},this.$1.onclose=function(a){},this.$1.close())};a.getTransportWithInitialStream=function(c,e,f,g,h,i){var j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return b("regeneratorRuntime").awrap(d("DGWUtils").DGWCodec.initialize());case 2:j=new(d("DGWTransportEvents").DGWTransportEvents)(g);j.transportEstablishmentPending();k=function(){return a.$17("",f,j,h,g,c,e)};n.prev=5;n.next=8;return b("regeneratorRuntime").awrap(d("DGWExponentialBackoff").callWithExponentialBackoff(k,i));case 8:l=n.sent;m=l.$15!=null?l.$15:l.establishGroupedStream(e,c,new(d("DGWLoggingContext").DGWLoggingContext)(f.dgwVersion,c.loggingId,f.serviceId,f.fbId,f.loggingId,c.disableFalcoLogging));return n.abrupt("return",{transport:l,streamPromise:m});case 13:n.prev=13;n.t0=n["catch"](5);throw n.t0;case 16:case"end":return n.stop()}},null,this,[[5,13]])};a.getTransport_DEPRECATED=function(c,e,f,g,h){var i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("DGWUtils").DGWCodec.initialize());case 2:i=new(d("DGWTransportEvents").DGWTransportEvents)(f);i.transportEstablishmentPending();j=function(){return a.$17(c,e,i,g,f)};k.prev=5;k.next=8;return b("regeneratorRuntime").awrap(d("DGWExponentialBackoff").callWithExponentialBackoff(j,h));case 8:return k.abrupt("return",k.sent);case 11:k.prev=11;k.t0=k["catch"](5);throw k.t0;case 14:case"end":return k.stop()}},null,this,[[5,11]])};e.establishGroupedStream=function(a,d,e){var f=this,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:g=this.getStreamId();h=this.createEstablishStreamFrame(g,d);i=this.waitForEstablishStream(g,a,d,e,function(a){f.$5.set(g,a)},function(){f.$16.putBackStreamId(g)});if(this.send(h)){k.next=5;break}throw c("err")("Websocket connection closed before stream established");case 5:k.next=7;return b("regeneratorRuntime").awrap(i);case 7:j=k.sent;return k.abrupt("return",j);case 9:case"end":return k.stop()}},null,this)};a.__prefixAppHeaders=function(a){return Object.keys(a).reduce(function(b,c){b[""+d("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+c]=a[c];return b},{})};e.waitForEstablishStream=function(a,c,d,e,f,g){var i=this,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:this.$12.streamEstablishmentPending(a,d.loggingId);k=this.__createGroupedStream(a,c,d,e);m.prev=2;m.next=5;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,c){i.$6.set(a,new j(k,b,c,3e4,function(){i.streamEndCallback(a)}))}));case 5:l=m.sent;f(k);this.$12.streamEstablishmentSuccess(a,d.loggingId);return m.abrupt("return",l);case 11:m.prev=11;m.t0=m["catch"](2);g();this.$12.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,a,d.loggingId);throw m.t0;case 16:case"end":return m.stop()}},null,this,[[2,11]])};a.$17=function(c,e,f,g,h,j,k){var l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:l=new a(c,d("DGWWebSocketTransport").getWebSocketConnection,f,e,g,h,j,k);l.$1.onmessage=a.$18(l);l.$1.onopen=function(){f.transportEstablished(l.$1.readyState),i||(l.$3=!1),l.$7!=null&&(l.$9=new(d("DGWPinger").DGWPinger)(l.$7,function(){l.$19()},function(){l.abort(d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,d("DGWStream").StreamError.KEEPALIVE_TIMEOUT,d("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout")}))};l.$1.onerror=function(){l.$12.transportError("onerror","readyState: "+l.$1.readyState)};l.$1.onclose=a.$20(l);n.next=7;return b("regeneratorRuntime").awrap(a.getTransportPromise(l));case 7:m=n.sent;return n.abrupt("return",m);case 9:case"end":return n.stop()}},null,this)};a.getTransportPromise=function(a){var c;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(new(h||(h=b("Promise")))(function(b,c){var e=a.$1.onerror;if(i){var f=a.$1.onmessage,g=a.$1.onclose;a.$1.onerror=function(){window.clearTimeout(k),e(),c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onclose=function(a){window.clearTimeout(k),g(a),a.code===d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?c(d("DGWStream").StreamError.UNAUTHORIZED):c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};var h=!1;a.$1.onmessage=function(c){f(c),!h&&!a.$3&&(window.clearTimeout(k),b(a),h=!0)}}else{var j=a.$1.onopen;a.$1.onerror=function(){window.clearTimeout(k),e(),c(d("DGWStream").StreamError.ESTABLISHMENT_ERROR)};a.$1.onopen=function(){window.clearTimeout(k),j(),b(a)}}var k=window.setTimeout(function(){a.cleanup(),c(d("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},2e4)}));case 2:c=e.sent;return e.abrupt("return",c);case 4:case"end":return e.stop()}},null,this)};a.$18=function(a){return function(b){var c;(c=a.$9)==null?void 0:c.reset();if(!(b.data instanceof ArrayBuffer)){a.$12.transportError("Incorrect Data Protocol","Received "+typeof b.data+" instead of ArrayBuffer");return}a.$2.append(new Uint8Array(b.data));a.$2.processData()}};a.$20=function(a){return function(b){var c;(c=a.$9)==null?void 0:c.cancel();if(a.$8===!0||a.$4)return;if(a.$3===!0){a.$12.transportEstablishmentFailure(b.code);a.$5.clear();a.$14();return}a.$14();a.$3=!0;if(b.code!==d("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){a.$12.transportClosed(!1,"Websocket connection failure with code "+b.code);c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var e=d("DGWStream").StreamError.UNKNOWN_ERROR;switch(b.code){case d("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE;e=d("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case d("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case d("DGWConstants").WebsocketCloseCodes.GOING_AWAY:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY;e=d("DGWStream").StreamError.GOING_AWAY;break;case d("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED;e=d("DGWStream").StreamError.UNAUTHORIZED;break;case d("DGWConstants").WebsocketCloseCodes.REJECTED:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED;e=d("DGWStream").StreamError.REJECTED;break;case d("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST;e=d("DGWStream").StreamError.BAD_REQUEST;break;case d("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR;e=d("DGWStream").StreamError.DGW_SERVER_ERROR;c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:c=d("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;e=d("DGWStream").StreamError.UNKNOWN_ERROR;break}a.$13.streamGroupCallbacks.onStreamGroupError(c);a.$5.forEach(function(a){a.__transportCloseHook(e)});a.$6.forEach(function(a){a.abortStream(e)})}else a.$12.transportClosed(!0,""),a.$13.streamGroupCallbacks.onStreamGroupTransportClose(),a.$5.forEach(function(a){a.__transportCloseHook()}),a.$6.forEach(function(a){a.abortStream(d("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});a.$5.clear();a.$6.clear()}};e.$19=function(){var a=this.$2.encodePing();if(a==null)throw c("err")("Failed to encode Ping Frame");this.send(a)};e.isClosedLocally=function(){return this.$3||this.$8||this.$4};e.streamEndCallback=function(a){this.$5["delete"](a),this.$6["delete"](a),this.$16.putBackStreamId(a)};e.canCreateGroupedStream=function(){return this.$16.streamIdAvailable()};e.createEstablishStreamFrame=function(b,d){d=this.$2.encodeEstablishStream(b,new Uint8Array(this.$10.encode(JSON.stringify(a.__prefixAppHeaders(d.groupedStreamHeaders)))));if(d==null){this.$16.putBackStreamId(b);throw c("err")("Failed to encode EstablishStreamFrame")}return d};e.getStreamId=function(){try{return this.$16.getNextStreamId()}catch(a){this.$12.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size);throw a}};e.__createGroupedStream=function(a,b,c,e){var f=this;return new(d("GroupedStream").GroupedStream)(a,b,c,this,e,this.$2,function(){f.streamEndCallback(a)})};e.__getStreamIdGenerator=function(){return new(d("StreamIdGenerator").StreamIdGeneratorImpl)()};return a}();g.StreamGroupWebSocketTransport=a}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={maxRetries:c("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};a=function(){function a(a,b,c,e,f,g,h,i,j){this.$2=j;this.$1=j.getNewStreamGroupId();j=(j=h.overrideUrl)!=null?j:f;this.$5=null;this.$3={appId:a,appVersion:b,authType:c,deviceId:h.deviceId,dgwVersion:e,headers:h.streamGroupAppHeaders,tier:(f=h.serviceTier)!=null?f:d("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:j,fbId:g,loggingId:h.loggingId,serviceId:h.serviceId,streamGroupCallbacks:i,keepAliveMs:h.keepAliveMs,regionHint:h.regionHint,enableFirstStreamOnWsHandshake:!1};this.$4=h;this.streamGroupLoggingContext=new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(a=h.verboseLoggingEnabled)!=null?a:!1);this.$6=d("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(b=this.$3.deviceId)!=null?b:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:(c=this.$3.loggingId)!=null?c:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(e=this.$3.regionHint)!=null?e:void 0})}var c=a.prototype;c.initTransport=function(){var c=this,a,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:a={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){c.$2.removeStreamGroupAndTransport(c.$1)},a);f.prev=2;f.next=5;return b("regeneratorRuntime").awrap(this.$5);case 5:e=f.sent;this.$5=null;f.next=13;break;case 9:f.prev=9;f.t0=f["catch"](2);this.$5=null;throw f.t0;case 13:this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,e);return f.abrupt("return",e);case 15:case"end":return f.stop()}},null,this,[[2,9]])};c.establishStream=function(a,c){var e=this,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(this.$2.containsStreamGroup(this.$1)===!1)){i.next=23;break}this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream");if(this.$3.enableFirstStreamOnWsHandshake){i.next=18;break}this.$5=this.$5||d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},h);i.prev=4;i.next=7;return b("regeneratorRuntime").awrap(this.$5);case 7:f=i.sent;this.$5=null;i.next=15;break;case 11:i.prev=11;i.t0=i["catch"](4);this.$5=null;throw i.t0;case 15:this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,f);i.next=23;break;case 18:i.next=20;return b("regeneratorRuntime").awrap(d("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(a,c,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},h));case 20:g=i.sent;this.$2.setStreamGroupAndTransport(this.$1,g.transport);return i.abrupt("return",g.streamPromise);case 23:return i.abrupt("return",this.establishStreamWithTransport(a,c));case 24:case"end":return i.stop()}},null,this,[[4,11]])};c.establishStreamWithTransport=function(a,c){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=a.loggingId;this.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream",null,!0,f);h.next=4;return b("regeneratorRuntime").awrap(this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(c,a,new(d("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,f,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,a.disableFalcoLogging,(e=a.verboseLoggingEnabled)!=null?e:!1)));case 4:g=h.sent;return h.abrupt("return",g);case 6:case"end":return h.stop()}},null,this)};c.canCreateGroupedStream=function(){var a=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var b=this.$2.getStreamGroupTransport(this.$1);a=b.canCreateGroupedStream()}d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a?"can_create":"cannot_create");return a};c.close=function(){var a=this.$2.getStreamGroupTransport(this.$1);a.close()};return a}();g.StreamGroup=a}),98);
__d("StreamGroupRegistry",["Random","err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map(),this.$2=new Set()}var b=a.prototype;b.setStreamGroupAndTransport=function(a,b){this.$1.set(a,b)};b.containsStreamGroup=function(a){return this.$1.has(a)};b.removeStreamGroupAndTransport=function(a){this.$1["delete"](a)};b.getStreamGroupTransport=function(a){a=this.$1.get(a);if(a==null)throw c("err")("No stream group transport");return a};b.getNewStreamGroupId=function(){var a=d("Random").uint32();while(this.$2.has(a))a=d("Random").uint32();this.$2.add(a);return a};return a}();g.StreamGroupRegistry=a}),98);
__d("RawDGWClient",["CurrentUser","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.appId,c=a.appVersion,e=a.authType,f=a.dgwVersion,g=a.endpoint;a=a.fbId;this.$1=b;this.$2=c;this.$3=e;this.$4=f;this.$5=g;this.$6=a;this.$7=new(d("StreamGroupRegistry").StreamGroupRegistry)()}var b=a.prototype;b.createStreamGroup=function(a,b){c("justknobx")._("1023")&&this.handleUserChecks();return new(d("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,b,a,this.$7)};b.handleUserChecks=function(){if(!c("CurrentUser").isLoggedInNow()&&!c("isFastRefreshEnabledForCurrentDomain")()){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated");throw d("DGWStream").StreamError.UNAUTHENTICATED}};return a}();g.RawDGWClient=a}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("RawDGWClient").RawDGWClient)({appId:c("DGWWebConfig").appId,appVersion:c("DGWWebConfig").appVersion,authType:d("DGWAuth").fromStringToDGWAuth(c("DGWEnvUtil").getDGWAuthType()),dgwVersion:c("DGWEnvUtil").getDGWVersion(),endpoint:c("DGWEnvUtil").getDGWEndpoint(),fbId:c("DGWWebConfig").fbId});function a(){if(c("DGWEnvUtil").isDGWEnvCompatible())return h;else throw c("err")("unsupported_environment_retry_with_mqtt")}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EBFormatUtils",["I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a!=null)return(h||(h=d("I64"))).min(a,h.of_float(d("WATimeUtils").millisTime()));switch(b){case"before":return(h||(h=d("I64"))).of_float(d("WATimeUtils").millisTime());case"after":return(h||(h=d("I64"))).zero;default:b;return(h||(h=d("I64"))).max_int}}function b(a,b){switch(b){case"before":return[a,0];case"after":return[0,a];default:b;return[Math.ceil(a/2),Math.ceil(a/2)]}}g.adjustTs=a;g.adjustCount=b}),98);
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSAppendDataTraceAddon")(e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSBase64Encode.nop",["Base64Utils","LSResult","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){return d("LSSynchronousPromise").maybeMakeSynchronousPromise(c("LSResult")(e?d("Base64Utils").fromArrayBuffer(e):void 0))};g["default"]=a}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};g["default"]=a}),98);
__d("LSCreateDataTrace",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(153).add({traceId:a[0],initTimestampMs:c[0],traceType:a[4],shouldFlush:!1,contextOne:a[1],contextTwo:a[2],contextThree:a[3]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSDataTraceCreateDataTraceStoredProcedure";a.__tables__=["data_trace_meta"];e.exports=a}),null);
__d("LSCreateDataTraceID.nop",["LSRequestId","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d){return(h||(h=b("Promise"))).resolve(c("LSResult")(c("LSRequestId").generate()))};g["default"]=a}),98);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("LSCreateDerivedKeys.nop",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){var l=d("CryptoLogger").CryptoLogger("create_derived_keys");a=c("LSVec").toArray(k);if(a.length<1||a.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){l.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var m=a.map((i||(i=d("I64"))).to_int32),n=a.map(i.to_int32).reduce(function(a,b){return a+b},0)*8;return d("XPlatReactCrypto").subtleImportKey("raw",j,"HKDF",!1,["deriveBits"]).then(function(a){var b;return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:f,name:"HKDF",salt:(b=g)!=null?b:new Uint8Array(10).buffer},a,n)}).then(function(a){a=new Uint8Array(a);var b=[],e=0;for(var f=0,g=m.length;f<g;++f){var h=e+m[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))})["catch"](function(a){l.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})};g["default"]=a}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a)}function i(a){var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function e(a){return h(a).buffer}function f(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("ls_web_init").mustfixThrow("Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=e;g.modAddBytes=f}),98);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743851");b=d("FalcoLoggerInternal").create("ls_data_trace",a);e=b;g["default"]=e}),98);
__d("LSDataTraceFlush",["ArmadilloDataTraceType","I64","LSDataTraceType","LSIntEnum","LsDataTraceFalcoEvent","ODS","Promise","ReQL","asyncToGeneratorRuntime","clearTimeout","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("I64"))).of_string("120000"),m=i.of_string("600000"),n=new Set(["encrypted_backups_upload","encrypted_backups_media_backup"]);function o(a,b,c){var e=a.length;if(e===0)return[(i||(i=d("I64"))).neg_one,i.neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!=null});e=e==null?void 0:e.errorMessage;a=a[a.length-1|0];var f=(i||(i=d("I64"))).of_float(Date.now()),g=a.timestampMs,h=i.compare(i.sub(f,c),l)>=0;return!b&&h?[(i||(i=d("I64"))).sub(f,c),a.checkPointId,g,e,"trace expired"]:[i.sub(g,c),a.checkPointId,g,e,e]}function p(a){return a.reduce(function(a,b,c){var e,f=(i||(i=d("I64"))).to_string(b.checkPointId),g=b.timestampMs;e=i.to_string((e=b.syncChannel)!=null?e:(i||(i=d("I64"))).neg_one);b=b.tags;b=b!=null?","+b:"";if(c===0)a.pointsList="".concat("(",f,",",e,b,")");else{c=String((i||(i=d("I64"))).to_int32(i.sub(g,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",c,"-(",f,",",e,b,")")}a.lastCheckPointTimestamp=g;return a},{lastCheckPointTimestamp:(i||(i=d("I64"))).zero,pointsList:""}).pointsList}var q=i.of_string("2");function r(a){var b=a.traceType;b=(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK))?"send":(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceType").armadilloMessageSend)?"armadillo send":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD))?"encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_RESTORE))?"encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_BACKUP))?"encrypted_backups_media_backup":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_LOGIN))?"sap_vesta_login":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").SAP_VESTA_REGISTRATION))?"sap_vesta_registration":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_MEDIA_RESTORE))?"encrypted_backups_media_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_INIT))?"shadow_encrypted_backups_init":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE))?"shadow_encrypted_backups_add_device":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_UPLOAD))?"shadow_encrypted_backups_upload":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_RESTORE))?"shadow_encrypted_backups_restore":(i||(i=d("I64"))).equal(b,(k||(k=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP))?"shadow_encrypted_backups_delete_backup":a.contextTwo;return b}function s(a,b){var e=b.traceId,f=b.shouldFlush,g=r(b),h=b.traceType,j=(i||(i=d("I64"))).equal(h,d("ArmadilloDataTraceType").armadilloMessageSend)?"tam_message_send":b.contextOne,k=(i||(i=d("I64"))).equal(b.traceType,q)?void 0:b.predefinedId,l=b.initTimestampMs;return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_addon.index("traceIdAddonId")).getKeyRange(e)).then(function(a){var b=o(a,f,l),h=b[0],m=b[1],n=b[3],q=b[4],r=a.length,s=p(a);c("LsDataTraceFalcoEvent").log(function(){var a;return{check_point_count:(i||(i=d("I64"))).to_string(i.of_int32(r)),check_point_list:s,client_event_ts:i.to_string(i.of_float(Date.now())),cold_start_time:void 0,data_trace_id:e,database_id:j,delivered_messages:void 0,error_message:q,first_error_message:n,has_backgrounded:!1,last_check_point:i.to_string(m),latency:i.to_string(h),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:k,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:i.to_string(l),trace_flow:(a=g)!=null?a:""}})}).then(function(){return a.data_trace_meta["delete"](e)})}function a(a,c){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(c)).then(function(c){if(c!=null)return s(a,c);else return(h||(h=b("Promise"))).resolve()})}var t={contents:void 0};function u(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta.index("shouldFlushInitTimestampMsTraceId")).getKeyRange(!1).bounds({lt:d("ReQL").key((i||(i=d("I64"))).sub(i.of_float(Date.now()),l))})).then(function(a){if(c("gkx")("23914")){var b=(i||(i=d("I64"))).of_float(Date.now());return a.filter(function(a){var c=r(a);if(c!=null&&n.has(c)){c=(i||(i=d("I64"))).compare(i.sub(b,a.initTimestampMs),m)>=0;return c}return!0})}return a})}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield u(a.tables));if(c.length===0)return;return a.runInTransaction(function(a){return u(a).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return s(a,b)}))})},"readwrite",void 0,void 0,f.id+":312")});return w.apply(this,arguments)}function x(){var a=t.contents;if(a!=null){c("clearTimeout")(a);return}}function y(a){c("promiseDone")(v(a),function(){x();var b=c("setTimeout")(function(){y(a)},6e4);t.contents=b},function(){x(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mw_trace","error")});return x}e=a;a=y;e={flush:e,flushExpiredDataTraces:a};g["default"]=e}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(a,b,c,d,e,f){a=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});f["default"]=a}),66);
__d("LSEncryptedBackupsClientRestoreState",[],(function(a,b,c,d,e,f){a=Object.freeze({RESTORE_IN_PROGRESS:1,RESTORE_COMPLETE:2});f["default"]=a}),66);
__d("updateAndFlushLSDataTrace",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("unrecoverableViolation")("Data trace is missing "+e,"maw_db")}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);
__d("LSFlushDataTrace.nop",["MetaConfig","Promise","ReQL","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(f)).then(function(d){if(d!=null)return c("updateAndFlushLSDataTrace")(a,f);else return(h||(h=b("Promise"))).resolve()})};g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))};g["default"]=a}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","LSSynchronousPromise","Promise","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=new(d("XPlatReactTextEncoder").TextEncoder)();try{e=a.encode(f).buffer;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}catch(b){e=d("CryptoLogger").CryptoLogger("get_blob_from_string");e.catching(b).mustfix(b.message?b.message:"Error in get blob from string.");e=a.encode(f).buffer;return d("LSSynchronousPromise").maybeMakeSynchronousPromise(c("LSResult")(e))}};g["default"]=a}),98);
__d("LSHmac_v2.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g){return d("XPlatReactCrypto").subtleImportKey("raw",f,{hash:"SHA-256",name:"HMAC"},!1,["sign"]).then(function(a){return d("XPlatReactCrypto").subtleSign("HMAC",a,g)}).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a))})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed");throw a})};g["default"]=a}),98);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}a.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}a.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],void 0,void 0,c.i64.cast([0,0]),a[3],a[4],void 0,a[5],a[7]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};g["default"]=a}),98);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(173).fetch(),function(b){return c.i64.to_string(b.jid)===a[0]}).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,100])),d[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[13].set("error_message",""),e=[void 0,d[13]],d[2]=e[0],d[3]=e[1],e):(b=a.item,e=[b.clientThreadPk,void 0],d[2]=e[0],d[3]=e[1],e)})},function(a){return c.i64.neq(d[2],void 0)?(a=[d[2],d[3]],d[5]=a[0],d[6]=a[1],a):(d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,7])),d[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[13].set("error_message",""),c.i64.neq(void 0,void 0)?(a=[void 0,d[13]],d[14]=a[0],d[15]=a[1],a):(d[16]=new c.Map(),d[16].set("error_code",c.i64.cast([0,100])),d[16].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),d[16].set("error_message",""),a=[void 0,d[16]],d[14]=a[0],d[15]=a[1],a),a=[d[14],d[15]],d[5]=a[0],d[6]=a[1],a),d[7]=c.i64.of_float(Date.now()),d[8]=c.i64.random(),d[10]="Finishing execution. Execution time: ",d[11]=c.i64.to_string(c.i64.sub(d[7],d[0])),d[12]=" ms",d[9]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][loadThreadPkFromThreadId] ",d[9],d[10],d[9],d[11],d[9],d[12]].join("")),c.i64.eq(c.i64.mod_(d[8],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[13]=",",d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[d[10],d[13],d[11],d[13],d[12]].join(""),d[14],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[5],d[6]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure";a.__tables__=["mi_act_mapping_table"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSFlushDataTrace.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLoadThreadPkFromThreadId","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] Beginning execution."),d[6]=c.i64.gt(a[1],c.i64.cast([0,0]))&&c.i64.gt(a[5],c.i64.cast([0,0])),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return d[6]?(d[12]=new c.Map(),d[12].set("error_code",c.i64.cast([0,1])),d[12].set("error_message",""),d[12].set("stored_procedure","issueMessageRangeQueryTask"),d[13]=new c.Map(),d[13].set("act_thread_id",a[0]),d[14]=new c.Map(),d[14].set("restore_context",d[13]),d[14].set("failure",d[12]),d[15]=d[14].get("restore_context"),d[14],d[16]=d[15].get("act_thread_id"),d[15],d[17]=c.toJSON(d[14]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),["encrypted_backups_restore",":",d[16]].join(""),c.i64.cast([0,50031]),d[17],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[18]=a[0],a})):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?d[12]=void 0:(f=e.item,c.sequence([function(a){return d[28]=f.deviceId,d[27]=f.backupTenancy,d[26]=f.encryptionVersion,d[21]=void 0,c.i64.neq(d[21],void 0)?c.resolve(d[22]=d[21]):c.sequence([function(a){return d[29]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[30]=a[0],a})},function(a){return d[30]?d[39]=(d[29].push(c.i64.cast([0,0])),d[29]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[31]=a[0],a})},function(a){return d[31]?d[39]=(d[29].push(c.i64.cast([0,2])),d[29]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[32]?d[39]=(d[29].push(c.i64.cast([0,3])),d[29]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[33]=a[0],a})},function(a){return d[33]?d[39]=(d[29].push(c.i64.cast([0,4])),d[29]):0,d[34]=c.createArray(),d[35]=c.i64.of_int32(d[29].length),c.i64.gt(d[35],c.i64.cast([0,0]))?c.loopAsync(d[35],function(a){return d[39]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[29],d[39]).then(function(a){return a=a,d[40]=a[0],d[41]=a[1],a})},function(a){return d[42]=(d[34].push(d[40]),d[34])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[39]=c.createArray(),d[40]=c.i64.of_int32(d[34].length),c.i64.gt(d[40],c.i64.cast([0,0]))?c.loopAsync(d[40],function(a){return d[42]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[34],d[42]).then(function(a){return a=a,d[43]=a[0],d[44]=a[1],a})},function(a){return d[45]=(d[39].push(c.i64.to_string(d[43])),d[39])}])}):c.resolve()},function(a){return d[41]=d[39].join(","),d[36]=d[41]}])},function(a){return d[34].some(function(a){return c.i64.eq(d[26],a)})?d[37]=d[26]:d[37]=void 0,c.i64.neq(d[37],void 0)?d[38]=d[37]:d[38]=void 0,d[22]=d[38]}])},function(a){return c.i64.neq(d[22],void 0)?d[23]=d[22]:d[23]=c.i64.cast([0,0]),c.i64.neq(d[27],void 0)?d[24]=d[27]:d[24]=c.i64.cast([0,1]),c.i64.neq(d[28],void 0)?d[25]=d[28]:d[25]=void 0,d[12]=d[25]}]))})},function(e){return d[14]=new c.Map(),d[14].set("error_code",c.i64.cast([0,1])),d[14].set("error_message",void 0==null?"":void 0),d[14].set("stored_procedure","issueMessageRangeQueryTask"),d[15]=new c.Map(),d[15].set("act_thread_id",a[0]),d[15].set("source",a[6]),d[15].set("restore_operation_type",c.i64.cast([0,2])),d[15].set("request_id",a[4]),d[15].set("device_id",d[12]),d[16]=new c.Map(),d[16].set("restore_context",d[15]),d[16].set("failure",d[14]),d[17]=d[16].get("queue_name"),d[16],d[17]!==void 0?d[18]=d[17]:(d[21]=d[16].get("restore_context"),d[16],d[22]=d[21].get("act_thread_id"),d[21],d[18]=["encrypted_backups_restore",":",d[22]].join("")),d[19]=c.toJSON(d[16]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[18],c.i64.cast([0,50030]),d[19],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})}])},function(e){return d[11]="backup not found",d[11]!==void 0?c.sequence([function(e){return d[13]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[11]].join(""),function(a){c.logger(a).mustfix(a)}(d[13]),d[12]=c.createArray(),a[4]!==void 0?d[14]=(d[12].push(a[4]),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[11],d[12],c.i64.cast([0,3]))},function(e){return c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),d[13],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]?d[17]=!0:d[17]=!1,d[17]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),void 0!==void 0?d[19]=(d[18].push(void 0),d[18]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(e){return a[4]!==void 0?c.sequence([function(d){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return d[14]?d[15]=!0:d[15]=!1,d[15]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),void 0!==void 0?d[15]=(d[14].push(void 0),d[14]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[6]?d[10]=c.i64.cast([0,5]):d[10]=c.i64.cast([0,2]),d[1]=!1}]):(f=e.item,c.sequence([function(a){return d[19]=f.mailboxRootKeyBlob,d[18]=f.ocmfClientStateBlob,d[17]=f.deviceId,d[16]=f.backupTenancy,d[15]=f.encryptionVersion,d[10]=void 0,c.i64.neq(d[10],void 0)?c.resolve(d[11]=d[10]):c.sequence([function(a){return d[20]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[30]=(d[20].push(c.i64.cast([0,0])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[30]=(d[20].push(c.i64.cast([0,2])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[30]=(d[20].push(c.i64.cast([0,3])),d[20]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[30]=(d[20].push(c.i64.cast([0,4])),d[20]):0,d[25]=c.createArray(),d[26]=c.i64.of_int32(d[20].length),c.i64.gt(d[26],c.i64.cast([0,0]))?c.loopAsync(d[26],function(a){return d[30]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],d[30]).then(function(a){return a=a,d[31]=a[0],d[32]=a[1],a})},function(a){return d[33]=(d[25].push(d[31]),d[25])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[30]=c.createArray(),d[31]=c.i64.of_int32(d[25].length),c.i64.gt(d[31],c.i64.cast([0,0]))?c.loopAsync(d[31],function(a){return d[33]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[25],d[33]).then(function(a){return a=a,d[34]=a[0],d[35]=a[1],a})},function(a){return d[36]=(d[30].push(c.i64.to_string(d[34])),d[30])}])}):c.resolve()},function(a){return d[32]=d[30].join(","),d[27]=d[32]}])},function(a){return d[25].some(function(a){return c.i64.eq(d[15],a)})?d[28]=d[15]:d[28]=void 0,c.i64.neq(d[28],void 0)?d[29]=d[28]:d[29]=void 0,d[11]=d[29]}])},function(e){return c.i64.neq(d[11],void 0)?d[12]=d[11]:d[12]=c.i64.cast([0,0]),c.i64.neq(d[16],void 0)?d[13]=d[16]:d[13]=c.i64.cast([0,1]),c.i64.neq(d[17],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSLoadThreadPkFromThreadId"),a[0]).then(function(a){return a=a,d[20]=a[0],d[21]=a[1],a})},function(e){return c.i64.neq(d[20],void 0)?d[6]?c.sequence([function(e){return c.i64.eq(d[13],c.i64.cast([0,3]))?d[22]=c.i64.cast([0,4]):d[22]=c.i64.cast([0,0]),d[23]=new c.Map(),d[23].set("act_thread_id",a[0]),d[23].set("tam_thread_subtype",d[22]),d[23].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[18]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[19]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return d[26]=new c.Map(),d[26].set("ocmf_client_state_blob",d[24]==null?"":d[24]),d[26].set("mailbox_root_key",d[25]==null?"":d[25]),d[27]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[39]=(d[27].push(a.epochId),d[27])})},function(a){return d[37]="Queried locally available epochs. Count: ",d[28]=c.i64.of_int32(d[27].length),d[38]=c.i64.to_string(d[28]),d[29]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[29],d[37],d[29],d[38]].join("")),c.resolve()},function(e){return d[30]=new c.Map(),d[30].set("device_id",d[17]),d[30].set("raw_tokens",d[26]),d[30].set("locally_available_epochs",d[27]),d[31]=new c.Map(),d[31].set("reference_timestamp",a[2]),d[31].set("server_thread_key",void 0),d[31].set("device_context",d[30]),d[31].set("source",a[6]),d[32]=new c.Map(),d[32].set("restore_context",d[23]),d[32].set("success",d[31]),d[33]=d[32].get("restore_context"),d[32],d[34]=d[33].get("act_thread_id"),d[33],d[35]=c.toJSON(d[32]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),["encrypted_backups_restore",":",d[34]].join(""),c.i64.cast([0,50031]),d[35],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[36]=a[0],a})}]):c.i64.gt(a[1],c.i64.cast([0,0]))?c.sequence([function(e){return c.i64.eq(d[13],c.i64.cast([0,3]))?d[22]=c.i64.cast([0,4]):d[22]=c.i64.cast([0,0]),a[7]===!0?d[23]=!0:d[23]=!1,d[24]=new c.Map(),d[24].set("act_thread_id",a[0]),d[24].set("request_id",a[4]),d[24].set("tam_thread_subtype",d[22]),d[24].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[18]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[19]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[27]=new c.Map(),d[27].set("ocmf_client_state_blob",d[25]==null?"":d[25]),d[27].set("mailbox_root_key",d[26]==null?"":d[26]),d[28]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[40]=(d[28].push(a.epochId),d[28])})},function(a){return d[38]="Queried locally available epochs. Count: ",d[29]=c.i64.of_int32(d[28].length),d[39]=c.i64.to_string(d[29]),d[30]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[30],d[38],d[30],d[39]].join("")),c.resolve()},function(e){return d[31]=new c.Map(),d[31].set("device_id",d[17]),d[31].set("raw_tokens",d[27]),d[31].set("locally_available_epochs",d[28]),d[32]=new c.Map(),d[32].set("reference_timestamp",a[2]),d[32].set("direction",c.i64.cast([0,1])),d[32].set("server_thread_key",void 0),d[32].set("device_context",d[31]),d[32].set("source",a[6]),d[32].set("include_offset",d[23]),d[33]=new c.Map(),d[33].set("restore_context",d[24]),d[33].set("success",d[32]),d[33].set("queue_name",void 0),d[34]=d[33].get("queue_name"),d[33],d[34]!==void 0?d[35]=d[34]:(d[40]=d[33].get("restore_context"),d[33],d[41]=d[40].get("act_thread_id"),d[40],d[35]=["encrypted_backups_restore",":",d[41]].join("")),d[36]=c.toJSON(d[33]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[35],c.i64.cast([0,50030]),d[36],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[37]=a[0],a})}]):c.sequence([function(e){return c.i64.eq(d[13],c.i64.cast([0,3]))?d[22]=c.i64.cast([0,4]):d[22]=c.i64.cast([0,0]),a[7]===!0?d[23]=!0:d[23]=!1,d[24]=new c.Map(),d[24].set("act_thread_id",a[0]),d[24].set("request_id",a[4]),d[24].set("tam_thread_subtype",d[22]),d[24].set("source",a[6]),c.nativeOperation(b("LSBase64Encode.nop"),d[18]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[19]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[27]=new c.Map(),d[27].set("ocmf_client_state_blob",d[25]==null?"":d[25]),d[27].set("mailbox_root_key",d[26]==null?"":d[26]),d[28]=c.createArray(),c.forEach(c.filter(c.db.table(169).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}),function(a){a=a.item;return d[40]=(d[28].push(a.epochId),d[28])})},function(a){return d[38]="Queried locally available epochs. Count: ",d[29]=c.i64.of_int32(d[28].length),d[39]=c.i64.to_string(d[29]),d[30]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBEpochClientUtils] ",d[30],d[38],d[30],d[39]].join("")),c.resolve()},function(e){return d[31]=new c.Map(),d[31].set("device_id",d[17]),d[31].set("raw_tokens",d[27]),d[31].set("locally_available_epochs",d[28]),d[32]=new c.Map(),d[32].set("reference_timestamp",a[2]),d[32].set("direction",c.i64.cast([0,2])),d[32].set("server_thread_key",void 0),d[32].set("device_context",d[31]),d[32].set("source",a[6]),d[32].set("include_offset",d[23]),d[33]=new c.Map(),d[33].set("restore_context",d[24]),d[33].set("success",d[32]),d[33].set("queue_name",void 0),d[34]=d[33].get("queue_name"),d[33],d[34]!==void 0?d[35]=d[34]:(d[40]=d[33].get("restore_context"),d[33],d[41]=d[40].get("act_thread_id"),d[40],d[35]=["encrypted_backups_restore",":",d[41]].join("")),d[36]=c.toJSON(d[33]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[35],c.i64.cast([0,50030]),d[36],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[37]=a[0],a})}]):c.sequence([function(e){return d[6]?(d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,100])),d[24].set("error_message",""),d[24].set("stored_procedure","issueMessageRangeQueryTask"),d[25]=new c.Map(),d[25].set("act_thread_id",a[0]),d[26]=new c.Map(),d[26].set("restore_context",d[25]),d[26].set("failure",d[24]),d[27]=d[26].get("restore_context"),d[26],d[28]=d[27].get("act_thread_id"),d[27],d[29]=c.toJSON(d[26]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),["encrypted_backups_restore",":",d[28]].join(""),c.i64.cast([0,50031]),d[29],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[30]=a[0],a})):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?d[24]=void 0:(f=e.item,c.sequence([function(a){return d[40]=f.deviceId,d[39]=f.backupTenancy,d[38]=f.encryptionVersion,d[33]=void 0,c.i64.neq(d[33],void 0)?c.resolve(d[34]=d[33]):c.sequence([function(a){return d[41]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[51]=(d[41].push(c.i64.cast([0,0])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[51]=(d[41].push(c.i64.cast([0,2])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[44]?d[51]=(d[41].push(c.i64.cast([0,3])),d[41]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[45]=a[0],a})},function(a){return d[45]?d[51]=(d[41].push(c.i64.cast([0,4])),d[41]):0,d[46]=c.createArray(),d[47]=c.i64.of_int32(d[41].length),c.i64.gt(d[47],c.i64.cast([0,0]))?c.loopAsync(d[47],function(a){return d[51]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[41],d[51]).then(function(a){return a=a,d[52]=a[0],d[53]=a[1],a})},function(a){return d[54]=(d[46].push(d[52]),d[46])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[51]=c.createArray(),d[52]=c.i64.of_int32(d[46].length),c.i64.gt(d[52],c.i64.cast([0,0]))?c.loopAsync(d[52],function(a){return d[54]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[46],d[54]).then(function(a){return a=a,d[55]=a[0],d[56]=a[1],a})},function(a){return d[57]=(d[51].push(c.i64.to_string(d[55])),d[51])}])}):c.resolve()},function(a){return d[53]=d[51].join(","),d[48]=d[53]}])},function(a){return d[46].some(function(a){return c.i64.eq(d[38],a)})?d[49]=d[38]:d[49]=void 0,c.i64.neq(d[49],void 0)?d[50]=d[49]:d[50]=void 0,d[34]=d[50]}])},function(a){return c.i64.neq(d[34],void 0)?d[35]=d[34]:d[35]=c.i64.cast([0,0]),c.i64.neq(d[39],void 0)?d[36]=d[39]:d[36]=c.i64.cast([0,1]),c.i64.neq(d[40],void 0)?d[37]=d[40]:d[37]=void 0,d[24]=d[37]}]))})},function(e){return d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,100])),d[26].set("error_message",void 0==null?"":void 0),d[26].set("stored_procedure","issueMessageRangeQueryTask"),d[27]=new c.Map(),d[27].set("act_thread_id",a[0]),d[27].set("source",a[6]),d[27].set("restore_operation_type",c.i64.cast([0,2])),d[27].set("request_id",a[4]),d[27].set("device_id",d[24]),d[28]=new c.Map(),d[28].set("restore_context",d[27]),d[28].set("failure",d[26]),d[29]=d[28].get("queue_name"),d[28],d[29]!==void 0?d[30]=d[29]:(d[33]=d[28].get("restore_context"),d[28],d[34]=d[33].get("act_thread_id"),d[33],d[30]=["encrypted_backups_restore",":",d[34]].join("")),d[31]=c.toJSON(d[28]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[30],c.i64.cast([0,50030]),d[31],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[32]=a[0],a})}])},function(e){return d[23]="threak pk not found for jid",d[23]!==void 0?c.sequence([function(e){return d[25]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[23]].join(""),function(a){c.logger(a).mustfix(a)}(d[25]),d[24]=c.createArray(),a[4]!==void 0?d[26]=(d[24].push(a[4]),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[23],d[24],c.i64.cast([0,3]))},function(e){return c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),d[25],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[28]=a[0],a})},function(a){return d[28]?d[29]=!0:d[29]=!1,d[29]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[30],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!0:d[27]=!1,d[27]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[28],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(e){return a[4]!==void 0?c.sequence([function(d){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!0:d[27]=!1,d[27]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[28],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!0:d[25]=!1,d[25]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[26],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[6]?d[22]=c.i64.cast([0,5]):d[22]=c.i64.cast([0,2])}])},function(a){return d[14]=!0}]):c.sequence([function(e){return d[6]?(d[22]=new c.Map(),d[22].set("error_code",c.i64.cast([0,1])),d[22].set("error_message",""),d[22].set("stored_procedure","issueMessageRangeQueryTask"),d[23]=new c.Map(),d[23].set("act_thread_id",a[0]),d[24]=new c.Map(),d[24].set("restore_context",d[23]),d[24].set("failure",d[22]),d[25]=d[24].get("restore_context"),d[24],d[26]=d[25].get("act_thread_id"),d[25],d[27]=c.toJSON(d[24]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),["encrypted_backups_restore",":",d[26]].join(""),c.i64.cast([0,50031]),d[27],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[28]=a[0],a})):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var a=e.done;e=e.value;return a?d[22]=void 0:(f=e.item,c.sequence([function(a){return d[38]=f.deviceId,d[37]=f.backupTenancy,d[36]=f.encryptionVersion,d[31]=void 0,c.i64.neq(d[31],void 0)?c.resolve(d[32]=d[31]):c.sequence([function(a){return d[39]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[40]?d[49]=(d[39].push(c.i64.cast([0,0])),d[39]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[41]?d[49]=(d[39].push(c.i64.cast([0,2])),d[39]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[42]=a[0],a})},function(a){return d[42]?d[49]=(d[39].push(c.i64.cast([0,3])),d[39]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[43]=a[0],a})},function(a){return d[43]?d[49]=(d[39].push(c.i64.cast([0,4])),d[39]):0,d[44]=c.createArray(),d[45]=c.i64.of_int32(d[39].length),c.i64.gt(d[45],c.i64.cast([0,0]))?c.loopAsync(d[45],function(a){return d[49]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[39],d[49]).then(function(a){return a=a,d[50]=a[0],d[51]=a[1],a})},function(a){return d[52]=(d[44].push(d[50]),d[44])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[49]=c.createArray(),d[50]=c.i64.of_int32(d[44].length),c.i64.gt(d[50],c.i64.cast([0,0]))?c.loopAsync(d[50],function(a){return d[52]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[44],d[52]).then(function(a){return a=a,d[53]=a[0],d[54]=a[1],a})},function(a){return d[55]=(d[49].push(c.i64.to_string(d[53])),d[49])}])}):c.resolve()},function(a){return d[51]=d[49].join(","),d[46]=d[51]}])},function(a){return d[44].some(function(a){return c.i64.eq(d[36],a)})?d[47]=d[36]:d[47]=void 0,c.i64.neq(d[47],void 0)?d[48]=d[47]:d[48]=void 0,d[32]=d[48]}])},function(a){return c.i64.neq(d[32],void 0)?d[33]=d[32]:d[33]=c.i64.cast([0,0]),c.i64.neq(d[37],void 0)?d[34]=d[37]:d[34]=c.i64.cast([0,1]),c.i64.neq(d[38],void 0)?d[35]=d[38]:d[35]=void 0,d[22]=d[35]}]))})},function(e){return d[24]=new c.Map(),d[24].set("error_code",c.i64.cast([0,1])),d[24].set("error_message",void 0==null?"":void 0),d[24].set("stored_procedure","issueMessageRangeQueryTask"),d[25]=new c.Map(),d[25].set("act_thread_id",a[0]),d[25].set("source",a[6]),d[25].set("restore_operation_type",c.i64.cast([0,2])),d[25].set("request_id",a[4]),d[25].set("device_id",d[22]),d[26]=new c.Map(),d[26].set("restore_context",d[25]),d[26].set("failure",d[24]),d[27]=d[26].get("queue_name"),d[26],d[27]!==void 0?d[28]=d[27]:(d[31]=d[26].get("restore_context"),d[26],d[32]=d[31].get("act_thread_id"),d[31],d[28]=["encrypted_backups_restore",":",d[32]].join("")),d[29]=c.toJSON(d[26]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[28],c.i64.cast([0,50030]),d[29],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[30]=a[0],a})}])},function(e){return d[21]="backup not found",d[21]!==void 0?c.sequence([function(e){return d[23]=["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",d[21]].join(""),function(a){c.logger(a).mustfix(a)}(d[23]),d[22]=c.createArray(),a[4]!==void 0?d[24]=(d[22].push(a[4]),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",d[21],d[22],c.i64.cast([0,3]))},function(e){return c.sequence([function(e){return a[4]!==void 0?c.sequence([function(e){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),d[23],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[26]?d[27]=!0:d[27]=!1,d[27]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[28]=c.createArray(),void 0!==void 0?d[29]=(d[28].push(void 0),d[28]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[28],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!0:d[25]=!1,d[25]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[26],c.i64.cast([0,3]))):c.resolve()}])}]):c.sequence([function(e){return a[4]!==void 0?c.sequence([function(d){return a[4]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[4],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[24]=a[0],a})},function(a){return d[24]?d[25]=!0:d[25]=!1,d[25]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[26],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[4]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[4]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[23]=!0:d[23]=!1,d[23]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[24]=c.createArray(),void 0!==void 0?d[25]=(d[24].push(void 0),d[24]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[24],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[6]?d[20]=c.i64.cast([0,5]):d[20]=c.i64.cast([0,2]),d[14]=!1}])},function(a){return d[1]=d[14]}]))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[9]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure] ",d[5],d[7],d[5],d[8],d[5],d[9]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueMessageRangeQueryTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSIssueMessageRangeQueryTaskStoredProcedure",["LSIssueMessageRangeQueryTask","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSIssueMessageRangeQueryTask")(e.threadId,e.numMessages,e.startSortKey,e.isPointQuery,e.traceId,e.newerNumMessages,e.source,e.includeOffset,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSLogWebQpl.nop",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LogWebQplNOP").__setRef("LSLogWebQpl.nop");a=function(a,b,c,d,e,f,g,i){return h.load().then(function(a){return a.call(c,d,e,f,g,i)})};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("LSOcmfClientMap.nop");a=function(a,e,f,g){return(h||(h=b("Promise"))).all([d("XPlatReactCrypto").subtleDigest("SHA-512",g),i.load()]).then(function(a){var b=a[0];a=a[1];b=a.fromHash(new Uint8Array(b));a=a.scalarMult(new Uint8Array(f),b);return c("LSResult")(a.buffer)})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function i(a){var b=a.length;return b%2!==0?"0"+a:a}function j(a){a=BigInt(a);var b=i(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function k(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function l(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function m(a,b,c){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){var e=new ArrayBuffer(0);return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:e},a,c*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function n(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function o(a,e,f,g){var i=f.byteLength;if(i!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(l(i));var j=g.byteLength,o=function(a,b){var c=new Uint8Array(1+j),d=new Uint8Array(j-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(j>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");return(h||(h=b("Promise"))).all(Array.from(g).map(function(b,c){c=o(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return m(b,c,a).then(function(a){return n(a,e)})})).then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),k(a)._0])})}function e(a,b,c,d){d=j(d);return o(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=j;g.buildKeyLengthErrorMsg=l;g.encryptBigEndianBytes=o;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.nop",["CryptoLogger","I64","LSResult","OrderPreservingEncryption","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j){var k=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((i||(i=d("I64"))).to_int32(j),1,f,new Uint8Array(g)).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a.buffer))})["catch"](function(a){d("CryptoLogger").captureError(k,a).mustfix("OpeEncrypt_impl failed");throw a})};g["default"]=a}),98);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};g["default"]=a}),98);
__d("LogWebQplNOP",["I64","LSIntEnum","Promise","QPLUserFlow","WAHashStringToNumber","WALogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["LSLogWebQpl error: ",""]);k=function(){return a};return a}function l(a){a=a==null?null:(j||(j=d("I64"))).to_int32(a);switch(a){case 521476165:return c("qpl")._(521476165,"2432");case 521481602:return c("qpl")._(521481602,"829");default:return null}}function a(a,e,f,g,m,n){return new(h||(h=b("Promise")))(function(b,h){try{h=m?(i||(i=d("LSIntEnum"))).unwrapIntEnum(m):null;var o=l(e);if(o!=null&&f!=null){h={"int":{num_messages:(j||(j=d("I64"))).to_int32(g)},string:{message_count:String(g),taskSource:(h=h==null?void 0:h.toString())!=null?h:"unknown"}};n===!0?c("QPLUserFlow").endSuccess(o,{annotations:h,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}):n===!1?c("QPLUserFlow").endFailure(o,f,{annotations:h,instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}):(c("QPLUserFlow").addAnnotations(o,h,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}),c("QPLUserFlow").addPoint(o,f,{instanceKey:d("WAHashStringToNumber").hashStringToNumber(a)}))}b()}catch(a){d("WALogger").ERROR(k(),a),b()}})}g.call=a}),98);
__d("MAWEncryptedBackupsUpdateGlobalRestoreStatus",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Thread with thread id "," is not currently being tracked, but restore seems to be in progress"]);h=function(){return a};return a}var i=new Set(),j=new Set();function k(a){if(a==="restore")return i;else return j}function a(a,b){b=k(b);b.add(a)}function b(a,b){b=k(b);b.has(a)?b["delete"](a):d("WALogger").WARN(h(),a)}function c(a){a=k(a);return a.size}g.addThreadIdToStatusArray=a;g.removeThreadIdFromStatusArray=b;g.getCurrentGlobalRestoreStatusArrayLength=c}),98);
__d("MAWBridgeUpdateClientRestoreStatus",["I64","LSEncryptedBackupsClientRestoreState","LSIntEnum","MAWEncryptedBackupsUpdateGlobalRestoreStatus","MAWJobDefinitions","MAWMIC","MAWUpdateClientRestoreStatusOperationType","Promise","ReQL","asyncToGeneratorRuntime","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).filter(function(a){return a.threadId===e})).then(function(d){if(d!=null)return a.encrypted_backups_client_restore_status["delete"](d.threadId).then(c("emptyFunction"));else return(j||(j=b("Promise"))).resolve()})}function l(a,e,f,g){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status).filter(function(a){return a.threadId===e})).then(function(k){if(k!=null)return a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_COMPLETE),serverThreadKey:f,threadId:e}).then(function(){if(g!=null)if(!g){d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").removeThreadIdFromStatusArray(d("MAWJobDefinitions").toThreadJidPrimaryId(e),"restore");var a=d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").getCurrentGlobalRestoreStatusArrayLength("restore");a===0&&d("MAWMIC").markEvent("eb_restore_end")}else{d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").removeThreadIdFromStatusArray(d("MAWJobDefinitions").toThreadJidPrimaryId(e),"ebprefetch");a=d("MAWEncryptedBackupsUpdateGlobalRestoreStatus").getCurrentGlobalRestoreStatusArrayLength("ebprefetch");a===0&&d("MAWMIC").markEvent("eb_prefetch_end")}});else return(j||(j=b("Promise"))).resolve()})}function a(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.encrypted_backups_client_restore_status)).then(function(c){return c.reduce(function(b,c){return b.then(function(){return k(a,c.threadId)})},(j||(j=b("Promise"))).resolve())})}function m(a,c){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table)).then(function(a){a=a.find(function(a){return(h||(h=d("I64"))).to_string(a.jid)===c});return a==null?(j||(j=b("Promise"))).resolve(void 0):(j||(j=b("Promise"))).resolve((h||(h=d("I64"))).to_string(a.serverThreadKey))})}function e(a,e){var f=e.threadId;return m(a,f).then(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=e.action;yield g===d("MAWUpdateClientRestoreStatusOperationType").upsertClientRestoreStatus?a.encrypted_backups_client_restore_status.put({lastUpdated:(h||(h=d("I64"))).of_float(Date.now()),restoreStatus:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsClientRestoreState").RESTORE_IN_PROGRESS),serverThreadKey:b,threadId:f}):l(a,e.threadId,b,e.ebPrefetch)});return function(a){return g.apply(this,arguments)}}())}g.truncateClientRestoreStatusTable=a;g.findServerThreadKey=m;g.call=e}),98);
__d("MAWEBFrontendQPLLogger",["EBEnableUnifiedAttachment","EBUnifyLegacyMediaUpload","ExecutionEnvironment","MAWBridgeFireAndForget","MAWEBUploadTrackingUtils","QPLUserFlow","WAHashStringToNumber","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("point",a,b,e):d("MAWBridgeFireAndForget").fireAndForget("backend","addEbUploadTrackingWorkerQPL",{annotations:e,pointName:b,qplInstanceKey:a,qplType:"point"})}function b(a,b){(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("success",a,"upload_tracking_completed",b):d("MAWBridgeFireAndForget").fireAndForget("backend","addEbUploadTrackingWorkerQPL",{annotations:b,pointName:"upload_tracking_completed",qplInstanceKey:a,qplType:"success"})}function e(a,b,e){(h||(h=c("ExecutionEnvironment"))).isInWorker?d("MAWEBUploadTrackingUtils").handleBridgeEbUploadTrackingQPL("fail",a,b,e):d("MAWBridgeFireAndForget").fireAndForget("backend","addEbUploadTrackingWorkerQPL",{annotations:e,pointName:b,qplInstanceKey:a,qplType:"fail"})}function f(a){var b=a.deliveryObjectId,e=a.flow,f=a.mediaType,g=a.messageId,h=a.threadId;a=a.traceId;if(!j(e))return;var i=d("WAHashStringToNumber").hashStringToNumber(a);b={bool:{is_legacy_hardening:d("EBUnifyLegacyMediaUpload").getEnableUnifyLegacyMediaUpload(),is_unified_attachment:d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()},string:{deliveryObjectId:b,flow:e,mediaType:f,messageId:g,threadId:h,traceId:a}};c("QPLUserFlow").start(c("qpl")._(521480391,"1167"),{annotations:b,instanceKey:i})}function i(a,b,e,f){if(a==null)return;if(!j(e))return;e=d("WAHashStringToNumber").hashStringToNumber(a);if(b){c("QPLUserFlow").endSuccess(c("qpl")._(521480391,"1167"),{instanceKey:e});return}c("QPLUserFlow").endFailure(c("qpl")._(521480391,"1167"),"upload_attachment_backup_failed",{annotations:{string:{error:(a=f)!=null?a:"upload_attachment_backup_failed"}},instanceKey:e})}function j(a){return a==="unified"&&d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()||a==="old"&&!d("EBEnableUnifiedAttachment").getEbEnableUnifiedAttachment()}g.addPointEBUploadTracking=a;g.endEBUploadTracking=b;g.failEBUploadTracking=e;g.startFlowUploadAttachmentBackup=f;g.endFlowUploadAttachmentBackup=i}),98);
__d("MAWEncryptedBackupUtils",["EBAPI","FBLogger","I64","LSAuthorityLevel","LSDataTraceCheckPoint","LSDict","LSIntEnum","LSShape","LSVec","MAWEBFrontendQPLLogger","MAWTraceUtils","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,e,f){d("MAWTraceUtils").recordCheckpointForTrace(a,b,c,e,f)}function a(a,b,e){j(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_GET_BACKUP_TENANCY),[],!1);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.secure_encrypted_backups_client_state)).then(function(a){return k(a,e)})}function k(a,b){var e;if(a==null){b!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(b,"get_backup_tenancy_null_client_state_row");return}e=(e=a.backupTenancy)!=null?e:(i||(i=d("I64"))).one;a=a.authorityLevel;if(b!=null){d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(b,"get_backup_tenancy",{"int":{authorityLevel:(i||(i=d("I64"))).to_int32((b=a)!=null?b:(i||(i=d("I64"))).zero),backupTenancy:i.to_int32((b=e)!=null?b:(i||(i=d("I64"))).zero)}})}if(e!=null&&(i||(i=d("I64"))).equal((h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a))return e}function e(a,b){var d=new Set(),e=a.length;for(a of a.entries()){var f=a[0],g=a[1];d.has(g)&&c("FBLogger")("labyrinth_web").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",b,f,e);d.add(g)}}function f(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){try{b=(yield c("EBAPI").messageMetadataQuery({direction:"before",numberOfMessages:b,referenceTimestamp:d,threadId:a}));if(b.success===!0){d=b.value.messages;return d.reduceRight(function(a,b){var c=b.offlineThreadingId;b=b.sortOrderMs;return c!=null&&b!=null?[].concat(a,[{externalId:c,msgType:"unknown-deanon",sortOrderMs:Number(b)}]):a},[])}}catch(a){c("FBLogger")("messenger_web_missing_messages").catching(a).mustfix("Deanon GraphQL fails with error")}});return l.apply(this,arguments)}function m(a){a=a.map(function(a){var b=a.toplevelProtobuf;b=d("LSShape").ofRecord({decrypted_protobuf:b.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(b.protobufTimestampMS)});var e=new(c("LSDict"))();a.supplementalProtobufs.forEach(function(a,b){e.set(b,d("LSShape").ofRecord({decrypted_protobuf:a.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(a.protobufTimestampMS)}))});return d("LSShape").ofRecord({otid:a.otid,supplemental_protobufs:e,toplevel_protobuf:b})});return c("LSVec").ofArray(a)}function n(a){a=c("LSVec").toArray(a);a=a.map(function(a){return d("LSShape").toRecord(a)});return a.map(function(a){var b=d("LSShape").toRecord(a.toplevel_protobuf);b={decryptedProtobuf:b.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(b.protobuf_timestamp_ms)};var c=new Map(),e=a.supplemental_protobufs;e.forEach(function(a,b){a=d("LSShape").toRecord(a);c.set(b,{decryptedProtobuf:a.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(a.protobuf_timestamp_ms)})});return{otid:a.otid,supplementalProtobufs:c,toplevelProtobuf:b}})}g.getBackupTenancy=a;g.getBackupTenancyFromClientStateRow=k;g.logIfDuplicateMessagesFoundInRestore=e;g.getMessageMetadataFromDeanonAPI=f;g.convertJSTypesToLSTypesForRestoreJob=m;g.convertLSTypesToJSTypesForRestoreJob=n}),98);
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("labyrinth_web").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("MAWRestoreMessagesFromEncryptedBackupsDeferred",["ExecutionEnvironment","LSDatabaseSingleton","LSVec","MAWEncryptedBackupUtils","Promise","WAJobOrchestratorTypes","asyncToGeneratorRuntime","cr:10036","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MAWRestoreMessagesFromEncryptedBackupsNOP").__setRef("MAWRestoreMessagesFromEncryptedBackupsDeferred");function a(a,e,f,g,l,m,n,o,p,q,r,s){s===void 0&&(s=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return k.load().then(function(){var k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(k){var t=q!=null?Number(q):void 0;t=c("gkx")("201")?d("MAWEncryptedBackupUtils").getMessageMetadataFromDeanonAPI(e,f.length,t):(j||(j=b("Promise"))).resolve();var u,v;(i||(i=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null?(yield b("cr:10036").init(),u=(yield b("cr:10036").getLSStorage())):(u=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton),v=(yield t));return u.runInTransaction(function(b){return k.call(b,a,e,f,g,l,m,n,o,p,q,r,v,s)},"readwrite").then(function(){return[c("LSVec").ofArray([]),c("LSVec").ofArray([]),!1]})["catch"](function(){return[c("LSVec").ofArray([]),c("LSVec").ofArray([]),!1]})});return function(a){return k.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWRestoreProtobufsFromEncryptedBackupsDeferred",["ExecutionEnvironment","I64","LSDatabaseSingleton","WAJobOrchestratorTypes","asyncToGeneratorRuntime","cr:10036","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MAWRestoreProtobufsFromEncryptedBackupsNOP").__setRef("MAWRestoreProtobufsFromEncryptedBackupsDeferred");function a(a,e,f,g,l,m,n,o,p,q,r,s,t,u){u===void 0&&(u=d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION);return k.load().then(function(){var k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(k){var v;(j||(j=c("ExecutionEnvironment"))).isInWorker&&b("cr:10036")!=null?(yield b("cr:10036").init(),v=(yield b("cr:10036").getLSStorage())):v=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return v.runInTransaction(function(b){return k.call(b,a,e,f,g,l!=null?(i||(i=d("I64"))).to_float(l):0,m,n!=null?(i||(i=d("I64"))).to_float(n):(i||(i=d("I64"))).to_float((i||(i=d("I64"))).max_int),o,p,q,r,s,t,u)},"readwrite")});return function(a){return k.apply(this,arguments)}}())}g.call=a}),98);
__d("MAWTimedJob",["FBLogger","MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWTimedBridge","MAWUIJob","MAWWaitForBackendSetup","MAWWebWorkerSingleton","MAWWorkerEvent","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";a={fireAndForget:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_TIMEOUT_MS);var e=!1;return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){e=!0;return d("MAWUIJob").UIJobStarters.fireAndForget(a)}),b,function(){return d("MAWWebWorkerSingleton").doesWorkerExist().then(function(b){throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to ack execution of job %s in time. Backend setup: %s, workerExists: %s",a.type,e,b)})},a.type)},waitUntilCompleted:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_TIMEOUT_MS);var e=!1,f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(a.type);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){d("MAWWorkerEvent").logStart("waitUntilCompleted",a.type,f);e=!0;return d("MAWUIJob").UIJobStarters.waitUntilCompleted(a,{onAck:function(b){d("MAWWorkerEvent").logAck(f,a.type,b)},onSend:function(a){var b=a.queueMsgs;a=a.queueSize;d("MAWWorkerEvent").logPoint(f,"send");d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:a},string_array:{bridgeMsgs:b}})}},{bridgeQPLInstanceKey:f}).then(function(a){d("MAWWorkerEvent").logSuccess(f);return a},function(a){a=c("getErrorSafe")(a);d("MAWWorkerEvent").logFailure(f,a.message);throw a})}),b,function(){return d("MAWWebWorkerSingleton").doesWorkerExist().then(function(b){d("MAWWorkerEvent").logTimeout(f);throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to complete execution of job %s in time. Backend setup: %s, workerExists: %s",a.type,e,b)})},a.type)},waitUntilPersisted:function(a,b){b===void 0&&(b=d("MAWTimedBridge").DEFAULT_TIMEOUT_MS);var e=!1,f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(a.type);return d("MAWMaybeWithTimeout").maybeWithTimeout(d("MAWWaitForBackendSetup").waitForBackendSetup(a.type).then(function(){e=!0;d("MAWWorkerEvent").logStart("waitUntilPersisted",a.type,f);return d("MAWUIJob").UIJobStarters.waitUntilPersisted(a,{onAck:function(b){d("MAWWorkerEvent").logAck(f,a.type,b)},onSend:function(a){var b=a.queueMsgs;a=a.queueSize;d("MAWWorkerEvent").logPoint(f,"send");d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:a},string_array:{bridgeMsgs:b}})}},{bridgeQPLInstanceKey:f}).then(function(a){d("MAWWorkerEvent").logSuccess(f);return a},function(a){a=c("getErrorSafe")(a);d("MAWWorkerEvent").logFailure(f,a.message);throw a})}),b,function(){return d("MAWWebWorkerSingleton").doesWorkerExist().then(function(b){d("MAWWorkerEvent").logTimeout(f);throw c("FBLogger")("maw_core_lla").mustfixThrow("Failed to persist execution of job %s in time. Backend setup: %s, workerExists: %s",a.type,e,b)})},a.type)}};g.TimedUIJobStarters=a}),98);
__d("MWChatEncryptedBackupsQPLEvents",["qpl"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("qpl"))._(521476140,"378");d=a._(521472542,"295");e=a._(521482085,"409");f=a._(521485406,"272");c=a._(521482763,"296");var h=a._(521484295,"1460"),i=a._(521482969,"1519"),j=a._(521479124,"1939"),k=a._(521474385,"263"),l=a._(521476098,"504"),m=a._(521482858,"1290"),n=a._(521473194,"1331");a=a._(521471024,"2275");g.pinCodeChangeQplEvent=b;g.optOutQplEvent=d;g.backupSetupQplEvent=e;g.mobileOnboardingQplEvent=f;g.restoreQplEvent=c;g.restoreDeviceAuthQplEvent=h;g.messageRestoreQplEvent=i;g.restoreWithAutoRestoreConsentQplEvent=j;g.hsmFleetMigrationQplEvent=k;g.virtualDeviceRevocationQplEvent=l;g.onboardingAuthQplEvent=m;g.processBackupIdsQPLEvent=n;g.fetchBackupIdsQPLEvent=a}),98);
__d("MWEncryptedBackUpEBNotEnabledError",[],(function(a,b,c,d,e,f){"use strict";a="EB not enabled";f.EB_NOT_ENABLED=a}),66);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
/**
 * License: https://www.facebook.com/legal/license/ZMc_bSwzLKC/
 */
__d("ristretto255-0.1.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f,g){var h=c("tweetnacl-1.0.3")();Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(a,b){return new Uint8Array(Array.prototype.slice.call(this,a,b))}});c={};var i=h.lowlevel,j=i.gf([1]);function k(){return[i.gf(),i.gf(),i.gf(),i.gf()]}var l=new Uint8Array([226,242,174,10,106,188,78,113,168,132,169,97,197,0,81,95,88,227,11,106,165,130,221,141,182,166,89,69,224,141,45,118]),m=new Float64Array([235,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function n(a,b,c){var d=new Float64Array(64);for(var e=0;e<32;e++)for(var f=0;f<32;f++)d[e+f]+=b[e]*c[f];i.modL(a,d)}function o(a,b){n(a,b,b)}function p(a,b){for(var c=0;c<32;c++)a[c]=b[c];for(c=251;c>=0;c--)o(a,a),(m[c>>3]>>(c&7)&1)!==0&&n(a,a,b)}var q=i.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),r=i.gf([11803,18811,63136,32407,21693,7032,36364,44957,53757,12789,64713,3900,18604,11139,12735,14185]),s=i.gf([16618,32861,64938,39368,29374,23105,5655,40239,55360,65025,31633,5826,64674,53167,35077,30828]),t=i.gf([49526,37983,2497,57980,13583,52574,41272,11393,57316,48752,43997,39316,57559,45747,29352,656]),u=i.gf([19744,17645,23210,12717,6553,45086,18988,53918,20203,21147,54063,19676,8769,63084,45946,22888]);function v(a){var b=new Uint8Array(32);i.pack25519(b,a);a=1;for(var c=0;c<32;c++)a&=b[c]===0;return a}function w(a,b,c){var d;c=-c;for(var e=0;e<16;e++)d=a[e]^b[e],d&=c,a[e]^=d}function x(a){var b=new Uint8Array(32);i.pack25519(b,a);return b[0]&1}function y(a,b){i.Z(a,i.gf(),b)}function z(a,b,c){var d=i.gf();y(d,b);i.set25519(a,b);w(a,d,c)}function A(a,b){z(a,b,x(b))}function B(a,b,c){var d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),j=i.gf();i.S(d,c);i.M(d,d,c);i.S(a,d);i.M(a,a,c);i.M(a,a,b);i.pow2523(a,a);i.M(a,a,d);i.M(a,a,b);i.S(e,a);i.M(e,e,c);i.Z(f,e,b);i.A(g,e,b);i.M(h,b,q);i.A(h,e,h);d=v(f);c=v(g);b=v(h);i.M(j,a,q);w(a,j,c|b);A(a,a);return d|c}function C(a){var b=i.gf(),c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),r=i.gf(),t=i.gf(),u=i.gf(),v=i.gf(),y=0,C=new Uint8Array(32);i.A(m,a[2],a[1]);i.Z(v,a[2],a[1]);i.M(m,m,v);i.M(n,a[0],a[1]);i.S(o,n);i.M(o,m,o);B(f,j,o);i.M(b,f,m);i.M(c,f,n);i.M(u,b,c);i.M(u,u,a[3]);i.M(g,a[0],q);i.M(h,a[1],q);i.M(e,b,s);i.M(l,a[3],u);y=x(l);p=i.gf(a[0]);r=i.gf(a[1]);d=i.gf(c);w(p,h,y);w(r,g,y);w(d,e,y);i.M(t,p,u);z(r,r,x(t));i.Z(k,a[2],r);i.M(k,d,k);A(k,k);i.pack25519(C,k);return C}function D(a){var b=a[31]&127^127;for(var c=30;c>0;c--)b|=a[c]^255;b=(b|0>>>0)-1>>8;c=237-1-(a[0]|0>>>0)>>8;return 1-((b&c|a[0])&1|(a[31]&255)>>7)}function E(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf();if(D(b)===0)return-1;i.unpack25519(e,b);i.S(f,e);i.set25519(g,j);i.Z(g,g,f);i.S(k,g);i.set25519(h,j);i.A(h,h,f);i.S(l,h);i.M(m,i.D,k);y(m,m);i.Z(m,m,l);i.M(n,m,l);i.set25519(d,j);b=B(c,d,n);i.M(a[0],c,h);i.M(a[1],c,a[0]);i.M(a[1],a[1],m);i.M(a[0],a[0],e);i.A(a[0],a[0],a[0]);A(a[0],a[0]);i.M(a[1],g,a[1]);i.set25519(a[2],j);i.M(a[3],a[0],a[1]);return-(1-b|x(a[3])|v(a[1]))}function F(a,b){var c=i.gf(),d=i.gf(),e=i.gf(),f=i.gf(),g=i.gf(),h=i.gf(),k=i.gf(),l=i.gf(),m=i.gf(),n=i.gf(),o=i.gf(),p=i.gf(),s=i.gf(),v=i.gf();i.set25519(e,j);i.S(f,b);i.M(f,q,f);i.A(m,f,e);i.M(m,m,t);i.set25519(c,j);y(c,c);i.A(g,f,i.D);i.M(n,f,i.D);i.Z(n,c,n);i.M(n,n,g);g=1-B(h,m,n);i.M(k,h,b);A(k,k);y(k,k);w(h,k,g);w(c,f,g);i.Z(d,f,e);i.M(d,d,c);i.M(d,d,u);i.Z(d,d,n);i.A(o,h,h);i.M(o,o,n);i.M(p,d,r);i.S(l,h);i.Z(s,e,l);i.A(v,e,l);i.M(a[0],o,v);i.M(a[1],s,p);i.M(a[2],p,v);i.M(a[3],o,s)}function G(a){var b=i.gf(),c=i.gf(),d=k(),e=k();i.unpack25519(b,a.slice(0,32));i.unpack25519(c,a.slice(32,64));F(d,b);F(e,c);i.add(d,e);return d}function a(a){var b=k();i.scalarbase(b,a);return C(b)}function b(a,b){var c=k(),d=k();if(E(c,b)!==0)throw new Error("Invalid argument");i.scalarmult(d,c,a);return C(d)}function d(a){var b=k();return E(b,a)===-1?!1:!0}function H(a,b){var c=k(),d=k();if(E(c,a)===-1)throw new Error("Invalid argument");if(E(d,b)===-1)throw new Error("Invalid argument");return[c,d]}function e(a,b){a=H(a,b);b=a[0];a=a[1];i.add(b,a);return C(b)}function I(a,b){var c=i.gf();y(c,b[3]);var d=i.gf();y(d,b[0]);d=[d,b[1],b[2],c];i.add(a,d)}function g(a,b){a=H(a,b);b=a[0];a=a[1];I(b,a);return C(b)}function J(){var a=h.randomBytes(64);return G(a)}function K(a){return C(G(a))}function L(){return C(J())}function M(){var a;new Uint8Array(32);var b=0;do{a=h.randomBytes(32);a[31]&=31;var c=32,d=1;do c--,b|=a[c]-i.L[c]>>8&d,d&=(a[c]^i.L[c])-1>>8;while(c!==0)}while(b===0);return a}function N(a){var b=new Uint8Array(32);p(b,a);return b}function O(a){var b=new Float64Array(64);for(var c=0;c<32;c++)b[c]=-a[c];c=new Uint8Array(32);i.modL(c,b);return c}function P(a,b){var c=new Float64Array(64);for(var d=0;d<32;d++)c[d]=a[d]+b[d];d=new Uint8Array(32);i.modL(d,c);return d}function Q(a,b){return P(a,O(b))}function R(a,b){var c=new Uint8Array(32);n(c,a,b);return c}c.scalarMultBase=a;c.scalarMult=b;c.isValid=d;c.add=e;c.sub=g;c.fromHash=K;c.getRandom=L;c.basePoint=l;c.scalar={};c.scalar.getRandom=M;c.scalar.invert=N;c.scalar.negate=O;c.scalar.add=P;c.scalar.sub=Q;c.scalar.mul=R;c.unsafe={};c.unsafe.point={};c.unsafe.point.toBytes=C;c.unsafe.point.fromBytes=E;c.unsafe.point.fromHash=G;c.unsafe.point.sub=I;c.unsafe.point.add=i.add;c.unsafe.point.scalarMultBase=i.scalarbase;c.unsafe.point.scalarMult=i.scalarmult;c.unsafe.point.getRandom=J;c.unsafe.point.alloc=k;c.unsafe.constants={};c.unsafe.constants.LSub2=m;c.unsafe.constants.sqrtm1=q;c.unsafe.constants.sqrtadm1=r;c.unsafe.constants.invsqrtamd=s;c.unsafe.constants.onemsqd=t;c.unsafe.constants.sqdmone=u;f.exports=c}),34);
__d("ristretto255",["ristretto255-0.1.1"],(function(a,b,c,d,e,f){e.exports=b("ristretto255-0.1.1")}),null);/*FB_PKG_DELIM*/
__d("ACTSanitizerApiTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Valid:0,UrlFailure:1,MessageTextFailure:2,CtaFailure:3});f.ACTSanitizerValidationResult=a}),66);
__d("EBEnableUnifiedAttachment",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEbEnableUnifiedAttachment=a;f.getEbEnableUnifiedAttachment=b}),66);
__d("MAWChatJid",["FBLogger","I64","Promise","ReQL","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){a=d("WAJids").threadIdForChatJid(a);return(i||(i=d("I64"))).of_string(a)}function k(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(j(e))).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid chatJid: "+e);return(h||(h=b("Promise"))).reject(a)}}function a(a,b,d){return k(a,b).then(function(a){if(a!=null)return a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",d)})}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield k(a,b));return b==null?void 0:d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b))});return l.apply(this,arguments)}function f(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(e)).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid integer jid: "+(i||(i=d("I64"))).to_string(e));return(h||(h=b("Promise"))).reject(a)}}g.toIntegerJid=j;g.toThreadKeyMaybe=k;g.toThreadKey=a;g.toThreadMaybe=e;g.toThreadKeyMaybeForChatJidInteger=f}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(a,b,c,d,e,f){"use strict";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting"]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function a(a){m.DEV(l());if(!n(a)){m.DEV(k());return[]}var b=[],c=2,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j(),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(i());return[]}switch(e){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":f===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&(e="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(f===d("WAProgressiveJpegMarkers").MARKER_PREFIX)e="READ_MARKER_SECOND_BYTE";else if(f===d("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(f===d("WAProgressiveJpegMarkers").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(h());return[]}else o(f)?(s=!0,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(t&&u(),f===d("WAProgressiveJpegMarkers").MARKERS.SOS&&(t=!0),q(f)?e="READ_SIZE_FIRST_BYTE":e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA");break;case"READ_SIZE_FIRST_BYTE":e="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":c+=g*256;c+=f;c-=2;e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)return!1;return a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOF2&&a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOI?!1:!0}function o(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF2||a===d("WAProgressiveJpegMarkers").MARKERS.SOF6||a===d("WAProgressiveJpegMarkers").MARKERS.SOF10||a===d("WAProgressiveJpegMarkers").MARKERS.SOF14}function p(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF0||a===d("WAProgressiveJpegMarkers").MARKERS.SOF1||a===d("WAProgressiveJpegMarkers").MARKERS.SOF3||a===d("WAProgressiveJpegMarkers").MARKERS.SOF5||a===d("WAProgressiveJpegMarkers").MARKERS.SOF7||a===d("WAProgressiveJpegMarkers").MARKERS.JPG||a===d("WAProgressiveJpegMarkers").MARKERS.SOF9||a===d("WAProgressiveJpegMarkers").MARKERS.SOF11||a===d("WAProgressiveJpegMarkers").MARKERS.SOF13||a===d("WAProgressiveJpegMarkers").MARKERS.SOF15}function q(a){if(a===d("WAProgressiveJpegMarkers").MARKERS.TEM)return!1;return a>=d("WAProgressiveJpegMarkers").MARKERS.RST0&&a<=d("WAProgressiveJpegMarkers").MARKERS.RST7?!1:a!==d("WAProgressiveJpegMarkers").MARKERS.EOI&&a!==d("WAProgressiveJpegMarkers").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(var d=0;d<a.length;d++){var e=a[d];b.push(e-c);c=e}return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";d=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo","preview","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video","sticker-pack","thumbnail-sticker-pack","music-artwork"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":case"sticker-pack":case"thumbnail-sticker-pack":case"music-artwork":return a;default:return null}}function b(a){switch(a){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":case"ReceiverFetch":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":return null;default:return c("WAAssertUnreachable")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);
__d("WABinary",["WAHex","err"],(function(a,b,c,d,e,f,g){"use strict";var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c("err")("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw c("err")(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c("err")("ParseError: varint exceeds 64 bits");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c("err")(typeof a==="string"?'TyperError WriteError: string "'+a+'" is not a valid '+e:"TypeError WriteError: "+String(a)+" is not a valid "+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c("err")("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];var p=o[1],q=o[0];g.push(q);j.push(p);if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){q=o[2];if(typeof q.cast==="function")f[m]=q;else{var r=!0,s=0;for(var t in q)r&&t!==s++&&(r=!1);t=void 0;if(r){t=[];for(r=0;r<s;r++)t.push(!0)}else{t={};for(r in q)t[q[r]]=!0}f[m]=t}}else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP){if(o.length!==3)throw new Error("Map field "+n+" should have exactly three elements in its internalSpec");f[m]=o[2]}else f[m]=null}var u={};s=function(a){l[a].forEach(function(b){u[b]||(u[b]=[]),u[b].push(a)})};for(r in l)s(r);q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];t=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];p=new h(e,g,j,k,f,l,u,q,t);a.internalCompiledSpec=p;return p}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else if(a===d("WAProtoConst").TYPES.MAP)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q],u=(o&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP;if(r===void 0&&!u)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(u&&p!=null){o=g[b];q=o[0];u=o[1];o=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u;var v=t[q],w=t[o];if(v===void 0||w===void 0)throw new Error("Can not find the validator for Map with key type "+q+", value type "+o);for(var o=p,x=Array.isArray(o),y=0,o=x?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=o.length)break;z=o[y++]}else{y=o.next();if(y.done)break;z=y.value}z=z;var A=z[0];z=z[1];m=v(A,q);if(m){m.path.push(n+"'s key ["+A+"]");return{v:m}}m=w(z,u);if(m){m.path.push(n+"["+A+"]'s value");return{v:m}}}}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);z=j[n];z&&z.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof '"+b+"' has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field "+n+" is reserved"})}};for(var n=0;n<c.length&&!m;n++){var o=b(n);if(typeof o==="object")return o.v}return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d("WAProtoCompile").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers["extends"]({},f)||{};s.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(f=0;f<g.length;f++)l[f]&d("WAProtoConst").FLAGS.REPEATED?s[g[f]]=[]:l[f]===(d("WAProtoConst").TYPES.MAP&d("WAProtoConst").TYPE_MASK)&&(s[g[f]]=new Map());var t=0;c=k.length>0;a=k[0];while(b.size()){f=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var u=f&7,v=f>>>3;if(c&&v!==a){f=t;do++t===k.length&&(t=0),a=k[t];while(v!==a&&t!==f)}if(c&&v===a)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d("WAProtoConst").TYPE_MASK,k=m[t];if(c&d("WAProtoConst").FLAGS.PACKED){var w=b.readVarInt(d("WABinary").parseUint64OrThrow);w=b.readBinary(w);while(w.size()){var x=i(a,f,w);(f!==d("WAProtoConst").TYPES.ENUM||k[x]||(k.cast==null?void 0:k.cast(x))!==void 0)&&s[a].push(x)}}else if(f===d("WAProtoConst").TYPES.MESSAGE){x=b.readVarInt(d("WABinary").parseUint64OrThrow);w=b.readBinary(x);if(c&d("WAProtoConst").FLAGS.REPEATED)s[a].push(n(k,w,void 0,e));else{x=s[a];s[a]=n(k,w,x,e)}}else if(f===d("WAProtoConst").TYPES.MAP){w=b.readVarInt(d("WABinary").parseUint64OrThrow);x=b.readBinary(w);var y,z;for(w=0;w<m[t].length;w++){var A=j(x,0,4294967296,"map field and enc type",d("WABinary").parseInt64OrThrow),B=A&7;A=A>>>3;var C=void 0;switch(B){case d("WAProtoConst").ENC.VARINT:C=x.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:C=x.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:B=k[w];if(B===d("WAProtoConst").TYPES.BYTES||B===d("WAProtoConst").TYPES.STRING)C=i(a,B,x);else{var D=x.readVarInt(d("WABinary").parseUint64OrThrow);D=x.readBinary(D);C=n(B,D,void 0,e)}break;case d("WAProtoConst").ENC.BIT32:C=x.readBinary(4);break}A===1?y=C:z=C}s[a].set(y,z)}else{B=i(a,f,b);(f!==d("WAProtoConst").TYPES.ENUM||k[B]||(k.cast==null?void 0:k.cast(B))!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?s[a].push(B):s[a]=B)}D=p[a];D&&typeof s[a]!=="undefined"&&D.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else{s.$$unknownFieldCount++;if(e){s.$$unsafeUnknownFields||(s.$$unsafeUnknownFields={});f=void 0;switch(u){case d("WAProtoConst").ENC.VARINT:f=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:f=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:f=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:f=b.readBinary(4);break}s.$$unsafeUnknownFields[v]=f}else u===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):u===d("WAProtoConst").ENC.BIT64?b.advance(8):u===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):u===d("WAProtoConst").ENC.BIT32&&b.advance(4)}}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithUnknowns=b;g.getUnknownFields=e}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else if(p===d("WAProtoConst").TYPES.MAP)for(var o=l,r=Array.isArray(o),s=0,o=r?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=o.length)break;t=o[s++]}else{s=o.next();if(s.done)break;t=s.value}t=t;var u=t[0];t=t[1];a.writeVarInt(k);var v=q[0],w=q[1],x=typeof w==="object"?d("WAProtoConst").TYPES.MESSAGE:w,y=m[v],z=m[x];if(y==null||z==null)throw new Error("Invalid encoder for map key/value");var A=new(d("WABinary").Binary)(),B=1*8|d("WAProtoUtils").typeToEncType(v);A.writeVarInt(B);y(A,u,v);B=2*8|d("WAProtoUtils").typeToEncType(x);A.writeVarInt(B);z(A,t,w);a.writeVarInt(A.size());a.writeBinary(A)}else{a.writeVarInt(k);y=m[p];y(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WAMediaUtils",["WACryptoDependencies","WAGlobals","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAResultOrError","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a.buffer}function i(a){return a}function a(){return h()}function j(a){return a}function k(a){return a}function b(a){return a}var l="0_0_0_.enc";function e(a){if(a==null)return d("WAResultOrError").makeError("direct-path-undefined");if(a==="")return d("WAResultOrError").makeError("direct-path-empty");return a.includes(l)?d("WAResultOrError").makeError("direct-path-corrupted"):d("WAResultOrError").makeResult(a)}function f(a){return a}function m(a){return a}function n(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,l=a.serverMediaType,m=a.downloadableThumbnail,n=a.filename,o=a.progressiveJpegDetails;a=a.size;return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f,mediaKeyTimestamp:g==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(g)),sidecar:h&&k(h),objectId:i,fbid:j,downloadableThumbnail:m&&u(m),serverMediaType:l,filename:n,progressiveJpegDetails:o&&v(o),size:a==null?void 0:d("WALongInt").numberOrThrowIfTooLarge(a)}}function o(a){var b=a.fileSha256,c=a.fileEncSha256,e=a.mediaKey,f=a.directPath,g=a.mediaKeyTimestamp,h=a.serverMediaType,i=a.objectId,j=a.fbid,k=a.downloadableThumbnail,l=a.filename,m=a.progressiveJpegDetails;a=a.size;b=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:b,fileEncSha256:c,mediaKey:e,directPath:f,mediaKeyTimestamp:g,serverMediaType:h,objectId:i,fbid:j,downloadableThumbnail:k,filename:l,progressiveJpegDetails:m,size:a});return b.readByteArray()}function p(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function q(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{directPath:b})).readByteArray()}function r(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{downloadableThumbnail:babelHelpers["extends"]({},a.downloadableThumbnail,{directPath:b})})).readByteArray()}function s(a,b){a=babelHelpers["extends"]({},a,{fbid:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function t(a,b){a=babelHelpers["extends"]({},a,{objectId:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function u(a){if(a==null)return null;a.$$unknownFieldCount;var b=a.directPath,c=a.objectId,e=babelHelpers.objectWithoutPropertiesLoose(a,["$$unknownFieldCount","directPath","objectId"]);return babelHelpers["extends"]({},e,{directPath:b,objectId:c,mediaKey:a.mediaKey&&i(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function v(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})}}function w(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails,k=a.size,l=a.lastDownloadAttemptTimestamp,m=a.sidecar,n=a.directPath,o=a.objectId;a=babelHelpers.objectWithoutPropertiesLoose(a,["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"]);var p=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(p={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})});return babelHelpers["extends"]({},a,{objectId:o,directPath:n,sidecar:m,serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&i(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&j(f),progressiveJpegDetails:p,downloadableThumbnail:g&&u(g),size:d("WALongInt").maybeNumberOrThrowIfTooLarge(k),lastDownloadAttemptTimestamp:l==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(l))})}function x(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;case"preview":b="image/jpeg";break;case"document":b=d("WAGlobals").getConfig().isOctetStreamAttachmentMimeTypeEnabled()===!0?"application/octet-stream":"application/pdf";break;case"xma-image":b="image/jpeg";break;default:throw c("err")("Unsupported server media type: "+a)}return b}var y=function(){return"TransformStream"in self};g.createMediaKey=h;g.castToMediaKey=i;g.createUploadToken=a;g.castToUploadToken=j;g.castToStreamingSidecar=k;g.unsafeCastToDirectPath=b;g.validateDirectPath=e;g.stringToDeliveryObjectId=f;g.stringToBackupEntFbid=m;g.mediaEntryDataToRawData=n;g.rawDataToMediaEntry=o;g.encodeMediaEntryForUpload=p;g.encodeMediaEntryWithUpdatedPath=q;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=r;g.encodeMediaEntryWithUpdatedFbid=s;g.encodeMediaEntryWithUpdatedObjectId=t;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=u;g.decodeMediaEntryData=w;g.getMimeTypeFromServerMediaType=x;g.isTransformStreamSupported=y}),98);
__d("MAWDbMedia",["I64","WAMediaUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Image",j="Video",k="Ptt",l="Gif",m="Sticker",n="DocumentFile",o={DOCUMENT_FILE:n,GIF:l,IMAGE:i,PTT:k,STICKER:m,VIDEO:j};function a(a){return a}function b(a){return a}function c(a){return(h||(h=d("I64"))).of_float(a)}function e(a){return(h||(h=d("I64"))).to_float(a)}function f(a,b){a=a.mediaEntries.get(b);if(a==null)return d("WAResultOrError").makeError("missing-media-entry");b=d("WAMediaUtils").decodeMediaEntryData(a);a=b.serverMediaType;return a==null?d("WAResultOrError").makeError("missing-server-media-type"):d("WAResultOrError").makeResult(a)}g.IMAGE=i;g.VIDEO=j;g.PTT=k;g.GIF=l;g.STICKER=m;g.DOCUMENT_FILE=n;g.MEDIA_TYPE=o;g.convertNumberToMediaId=a;g.convertToMediaId64=b;g.convertMediaIdToMediaId64=c;g.convertMediaId64ToMediaId=e;g.getServerMediaType=f}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp"&&b!==!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};c=(c=c)!=null?c:a.split("/")[0];switch(c){case"image":if(b===!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"};else return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WAHex","WALRUMap","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new(h||(h=b("Promise")))(function(b,c){a.onsuccess=b,a.onerror=c})}function j(a){return i(a).then(function(a){return a.target.result})}function k(a,c,e){return new(h||(h=b("Promise")))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var l=new(d("WALRUMap").LRUMap)({max:100});function a(a,c){var e,f=c.args,g=c.scheduleConfig,i=c.type,l=c.uniqKey;c=c.version;c=c===void 0?1:c;e=JSON.stringify([i,(e=l)!=null?e:d("WAHex").randomHex(32)]);var n={backedOffCount:0,current:f,original:f,scheduleConfig:g,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:i,uniqKey:e,version:c,waitUntil:null},o=function(){var b,c=a().add(n),d=j(c);if(n.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(l!=null)return k(a,"uniqKey",e).then(function(c){if(c.length===0)return o();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return(h||(h=b("Promise"))).all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:o()})});else return o()}function m(a,b){return j(a()["delete"](b))}function e(a,b){return j(a().get(b))}function f(a,b){return j(a().put(b))}function n(a){return j(a().getAll())}function o(a){try{return i(a().clear()).then(c("emptyFunction"))}catch(a){if(a.name==="NotFoundError")return(h||(h=b("Promise"))).resolve();throw a}}g.recentFinishedJobsCache=l;g.maybeCreateJob=a;g.deletePersistedJob=m;g.readPersistedJob=e;g.updatePersistedJob=f;g.readAllPersistedJobs=n;g.clearJobs=o}),98);
__d("WAMsgType",[],(function(a,b,c,d,e,f){"use strict";a="Text";b="Futureproof";c="Ciphertext";d="Unavailable";e="Image";var g="Video",h="Ptt",i="Admin",j="Revoked",k="Gif",l="Sticker",m="DocumentFile",n="ExpiredEphemeral",o="EphemeralSettingAdmin",p="EphemeralSyncResponse",q="DeleteForMe",r="EphemeralSettingChangeFromCurrentDevice",s="AlertICDC",t="GroupInvite",u="NoteReply",v="Reaction",w="SenderKeyDistribution",x="EditAction",y="ReceiverFetch",z="Raven",A="GroupPollCreate",B="GroupPollUpdate",C={ADMIN:i,CIPHERTEXT:c,DELETE_FOR_ME:q,DOCUMENT_FILE:m,EDIT_ACTION:x,EPHEMERAL_SETTING_ADMIN:o,EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:r,EPHEMERAL_SYNC_RESPONSE:p,EXPIRED_EPHEMERAL:n,FUTUREPROOF:b,GIF:k,GROUP_INVITE:t,ICDC_ALERT:s,IMAGE:e,PTT:h,REACTION:v,REVOKED:j,SK_DISTRIBUTION:w,STICKER:l,TEXT:a,UNAVAILABLE:d,VIDEO:g,RECEIVER_FETCH:y,RAVEN:z,GROUP_POLL_CREATE:A,GROUP_POLL_UPDATE:B};f.TEXT=a;f.FUTUREPROOF=b;f.CIPHERTEXT=c;f.UNAVAILABLE=d;f.IMAGE=e;f.VIDEO=g;f.PTT=h;f.ADMIN=i;f.REVOKED=j;f.GIF=k;f.STICKER=l;f.DOCUMENT_FILE=m;f.EXPIRED_EPHEMERAL=n;f.EPHEMERAL_SETTING_ADMIN=o;f.EPHEMERAL_SYNC_RESPONSE=p;f.DELETE_FOR_ME=q;f.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE=r;f.ICDC_ALERT=s;f.GROUP_INVITE=t;f.NOTE_REPLY=u;f.REACTION=v;f.SK_DISTRIBUTION=w;f.EDIT_ACTION=x;f.RECEIVER_FETCH=y;f.RAVEN=z;f.GROUP_POLL_CREATE=A;f.GROUP_POLL_UPDATE=B;f.MSG_TYPE=C}),66);
__d("MAWMsgType",["WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return j.has(a)};b=function(a){return k.has(a)||j.has(a)};c="EphemeralScreenshotAction";e="Raven";f="RavenAction";var h="XMA",i="BumpExistingMessage";d=babelHelpers["extends"]({},d("WAMsgType").MSG_TYPE,{BUMP_EXISTING_MESSAGE:i,EPHEMERAL_SCREENSHOT_ACTION:c,RAVEN:e,RAVEN_ACTION:f,XMA:h});var j=new Set([d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.XMA,d.RAVEN,d.DOCUMENT_FILE,d.RECEIVER_FETCH]),k=new Set([d.TEXT,d.REVOKED,d.XMA,d.BUMP_EXISTING_MESSAGE]),l=new Set([d.TEXT,d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.DOCUMENT_FILE,d.UNAVAILABLE,d.EXPIRED_EPHEMERAL,d.REVOKED,d.XMA,d.RAVEN,d.RECEIVER_FETCH]);i=function(a){return l.has(a)};g.isMAWSupportedMediaType=a;g.isEBSupportedMsgType=b;g.EPHEMERAL_SCREENSHOT_ACTION=c;g.MSG_TYPE=d;g.mawSupportedMediaTypes=j;g.isQuotedMsgType=i}),98);
__d("MAWThreadUtils",["LSIntEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return a.threads.where("jid").equals(b).modify(c)}function b(a){a=d("WAJids").switchOnMsgrChatJidType(a,{group:function(){return(h||(h=d("LSIntEnum"))).ofNumber(16)},user:function(){return(h||(h=d("LSIntEnum"))).ofNumber(15)}});return a}g.updateThreadWithJid=a;g.getLSThreadTypeFromJid=b}),98);
__d("WACommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={EVERYONE:1,SILENT:2,AI:3,AI_IMAGINE:4};b={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};c={};e={};f={};var h={};c.internalSpec={remoteJid:[1,(d=d("WAProtoConst")).TYPES.STRING],fromMe:[2,d.TYPES.BOOL],id:[3,d.TYPES.STRING],participant:[4,d.TYPES.STRING]};e.internalSpec={commandType:[1,d.TYPES.ENUM,a],offset:[2,d.TYPES.UINT32],length:[3,d.TYPES.UINT32],validationToken:[4,d.TYPES.STRING]};f.internalSpec={text:[1,d.TYPES.STRING],mentionedJid:[2,d.FLAGS.REPEATED|d.TYPES.STRING],commands:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e]};h.internalSpec={payload:[1,d.TYPES.BYTES],version:[2,d.TYPES.INT32]};g.COMMAND_COMMAND_TYPE=a;g.FUTURE_PROOF_BEHAVIOR=b;g.MessageKeySpec=c;g.CommandSpec=e;g.MessageTextSpec=f;g.SubProtocolSpec=h}),98);
__d("WAArmadilloXMA.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9};b={OPEN_NATIVE:11};c={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15,GRID:16};e={UNSUPPORTED:-1,IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,FB_POST_MENTION:1011,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,MSG_SHARED_ALBUM_REPLY:2016,MSG_SHARED_ALBUM:2017,MSG_OCCAMADILLO_XMA:2018,MSG_GEN_AI_SUBSCRIPTION:2021,MSG_GEN_AI_REMINDER:2022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:2023,MSG_NOTE_REPLY:2024,MSG_NOTE_MENTION:2025,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,RTC_ONGOING_AUDIO_CALL:3008,RTC_ONGOING_VIDEO_CALL:3009,DATACLASS_SENDER_COPY:4e3};f={};var i={};f.internalSpec={associatedMessage:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],targetType:[2,h.TYPES.ENUM,e],targetUsername:[3,h.TYPES.STRING],targetId:[4,h.TYPES.STRING],targetExpiringAtSec:[5,h.TYPES.INT64],xmaLayoutType:[6,h.TYPES.ENUM,c],ctas:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i],previews:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.SubProtocolSpec],titleText:[9,h.TYPES.STRING],subtitleText:[10,h.TYPES.STRING],maxTitleNumOfLines:[11,h.TYPES.UINT32],maxSubtitleNumOfLines:[12,h.TYPES.UINT32],favicon:[13,h.TYPES.MESSAGE,d.SubProtocolSpec],headerImage:[14,h.TYPES.MESSAGE,d.SubProtocolSpec],headerTitle:[15,h.TYPES.STRING],overlayIconGlyph:[16,h.TYPES.ENUM,a],overlayTitle:[17,h.TYPES.STRING],overlayDescription:[18,h.TYPES.STRING],sentWithMessageId:[19,h.TYPES.STRING],messageText:[20,h.TYPES.STRING],headerSubtitle:[21,h.TYPES.STRING],xmaDataclass:[22,h.TYPES.STRING],contentRef:[23,h.TYPES.STRING],mentionedJid:[24,h.FLAGS.REPEATED|h.TYPES.STRING],commands:[25,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.CommandSpec]};i.internalSpec={buttonType:[1,h.TYPES.ENUM,b],title:[2,h.TYPES.STRING],actionUrl:[3,h.TYPES.STRING],nativeUrl:[4,h.TYPES.STRING],ctaType:[5,h.TYPES.STRING],actionContentBlob:[6,h.TYPES.STRING]};g.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=a;g.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=b;g.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=c;g.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=e;g.ExtendedContentMessageSpec=f;g.ExtendedContentMessage$CTASpec=i}),98);
__d("MAWXMAUtils",["I64","LSIntEnum","LSXmaContentType","MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"]);j=function(){return a};return a}function a(a){return!a||a.type!==d("MAWMsgType").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return c("gkx")("8746");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("gkx")("6952");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("gkx")("4902");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return!1;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return!0;default:d("WALogger").ERROR(j(),a);return!1}}function e(a){return a!=null&&((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_SHARE))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_PRODUCER_STORY_REPLY)))}function f(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function k(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function l(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH}function m(a){return a==null?!1:a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function n(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function o(a,b){return a!=null&&a||b!=null&&b<d("WATimeUtils").unixTime()}function p(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function q(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function r(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,faviconMediaId:void 0,headerMediaId:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function s(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return c("gkx")("5481");default:return!1}}function t(a){return c("gkx")("5481")&&a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY}function u(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function v(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION?c("gkx")("8746"):!1}function w(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return!0;default:return!1}}function x(a){return v(a)||w(a)}function y(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function z(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function A(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY&&c("gkx")("3587")}function B(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare=b;g.isXMAFBStory=e;g.isXMAStoryShare=f;g.isXMAExternalLinkShare=k;g.isReceiverFetchXMA=l;g.isIGXMAStoryShare=m;g.isXMAPostPrivateReply=n;g.isXMAExpired=o;g.removeCTAsForStoryMentionXMA=p;g.buildUnstoredTombstonedXMA=q;g.buildTombstonedDbXMA=r;g.isXMAStoryReply=s;g.isXMAStoryProducerReply=t;g.isXMAStoryReaction=u;g.isFBXMAStoryMention=v;g.isIGXMAStoryMention=w;g.isXMAStoryMention=x;g.isIGXMAPostShare=y;g.isXMAStoryHighlightShare=z;g.isXMAMsgHighlightsTabFriendUpdatesReply=A;g.isRtcXMA=B}),98);/*FB_PKG_DELIM*/
__d("CometNotificationsBadgeCountFragment_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"environment"}],kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountFragment_viewer",selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("CometNotificationsBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"environment"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometNotificationsBadgeCountFragment_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometNotificationsBadgeCountQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"environment",variableName:"environment"}],kind:"ScalarField",name:"notifications_unseen_count",storageKey:null}],storageKey:null}]},params:{id:"6243845039071039",metadata:{},name:"CometNotificationsBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometNotificationsBadgeCount.react",["fbt","CometNotificationsBadgeCountFragment_viewer.graphql","CometNotificationsBadgeCountQuery.graphql","CometPlaceholder.react","CometRelay","FDSNumberedBadge.react","hero-tracing","react","react-compiler-runtime","setupNotificationsLiveQuery","unrecoverableViolation","updateWidgetServiceWorker","useMaybeZeroNotificationsBadgeCount"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect;function a(a){var e=d("react-compiler-runtime").c(14),f=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("CometNotificationsBadgeCountQuery.graphql"),{environment:"MAIN_SURFACE"});f=f.viewer;if(f==null)throw c("unrecoverableViolation")("The viewer recieving these notifications cannot be null","comet_feed");f=d("CometRelay").useFragment(j!==void 0?j:j=b("CometNotificationsBadgeCountFragment_viewer.graphql"),f);var g=c("useMaybeZeroNotificationsBadgeCount")(f==null?void 0:f.notifications_unseen_count);f=a.isBadgeHidden;var k=a.overflow,n=a.setBadgeCount,o=d("CometRelay").useRelayEnvironment(),p;e[0]!==o?(a=function(){var a=c("setupNotificationsLiveQuery")(o);return function(){return a.dispose()}},p=[o],e[0]=o,e[1]=a,e[2]=p):(a=e[1],p=e[2]);m(a,p);e[3]!==g||e[4]!==n?(a=function(){n&&n(g),c("updateWidgetServiceWorker")()},p=[g,n],e[3]=g,e[4]=n,e[5]=a,e[6]=p):(a=e[5],p=e[6]);m(a,p);e[7]===Symbol["for"]("react.memo_cache_sentinel")?(a=l.jsx("span",{}),e[7]=a):a=e[7];e[8]!==g||e[9]!==f||e[10]!==k?(p=f!==!0&&g>0?l.jsx(d("hero-tracing").HeroPagelet,{name:"NotificationsBadge",children:function(a,b){return l.jsxs(l.Fragment,{children:[l.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._("__JHASH__dtNCkhbask___JHASH__"),overflow:k,ref:a,testid:void 0,value:g}),l.jsx(b,{})]})}}):null,e[8]=g,e[9]=f,e[10]=k,e[11]=p):p=e[11];e[12]!==p?(f=l.jsx(c("CometPlaceholder.react"),{fallback:a,children:p}),e[12]=p,e[13]=f):f=e[13];return f}g["default"]=a}),226);
__d("CometTopNavTabBadge.react",["ARIA_LABEL_PLACEHOLDER_FIXME","FDSNumberedBadge.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var b=d("react-compiler-runtime").c(18),e,f,g,h,k,l,m;b[0]!==a?(l=a.testid,m=a.value,f=a.isBadgeHidden,g=a.isTab,h=a.overflow,k=a.setBadgeCount,e=babelHelpers.objectWithoutPropertiesLoose(a,["testid","value","isBadgeHidden","isTab","overflow","setBadgeCount"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7]);var n;b[8]!==k||b[9]!==m?(a=function(){k&&k(m)},n=[m,k],b[8]=k,b[9]=m,b[10]=a,b[11]=n):(a=b[10],n=b[11]);j(a,n);if(f===!0||m===0)return null;a=g===!0?"red":void 0;b[12]!==e||b[13]!==a||b[14]!==h||b[15]!==l||b[16]!==m?(n=i.jsx(c("FDSNumberedBadge.react"),babelHelpers["extends"]({},e,{accessibilityText:c("ARIA_LABEL_PLACEHOLDER_FIXME"),color:a,overflow:h,testid:void 0,value:m})),b[12]=e,b[13]=a,b[14]=h,b[15]=l,b[16]=m,b[17]=n):n=b[17];return n}g["default"]=a}),98);
__d("LSPlatformClientDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("LSPlatformClient").__setRef("LSPlatformClientDeferred");b=a;g["default"]=b}),98);
__d("LSPlatformClientSingleton",[],(function(a,b,c,d,e,f){"use strict";var g={contents:void 0};function a(a){g.contents=a}f.saveInstance=a}),66);
__d("maybeSetupMAWMainThreadLogger",["MessengerLogHistory","cr:6999","cr:7350","isArmadillo","isRegisterArmadilloOnIgEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("client_init"),i=(a=b("cr:6999"))!=null?a:b("cr:7350");e=function(){i!=null&&(c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")())&&(h.debug("Starting MAW main thread logger setup..."),i.setupMainWaLogger(),h.debug("Starting MAW main thread logger setup success"))};g.maybeSetupMAWMainThreadLogger=e}),98);
__d("LSPlatformClientInstances",["FBLogger","LSPlatformArmadilloUtils","LSPlatformClientSingleton","LSPlatformLsInitLog","LSSuspense","MAWMIC","MAWMICSafe","MessengerLogHistory","PromiseAnnotate","asyncToGeneratorRuntime","cr:3015","getErrorSafe","maybeSetupMAWMainThreadLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init"),k=(i||(i=c("LSSuspense"))).makeCollection(),l=!1;function a(a,e,f){d("MAWMIC").startMAWMICFlow();l||(j.debug("[Occamadillo] Beginning hardcoded init sync"),l=!0,d("maybeSetupMAWMainThreadLogger").maybeSetupMAWMainThreadLogger());d("LSPlatformArmadilloUtils").reportInitStart();return(i||(i=c("LSSuspense"))).getFromCollection(k,a,function(){return(h||(h=d("PromiseAnnotate"))).setDisplayName(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addAnnotations({bool:{fromReact:f==null?void 0:f.fromReact}});j.debug("Messenger loading UI suspending");try{var g=b("cr:3015")!=null?yield b("cr:3015").maybeEvaluateInitSyncEagerly(a):!1;j.debug("Initializing LSPlatformClient...");g=(yield e(a,{didEvaluateInitSyncEagerly:g}));yield g.start();j.debug("Initializing LSPlatformClient success");d("LSPlatformClientSingleton").saveInstance(g);d("LSPlatformArmadilloUtils").reportInitEnd();return g}catch(a){g=c("getErrorSafe")(a);j.debug("Initializing LSPlatformClient failed");d("LSPlatformLsInitLog").fail("client_setup_failure",g);d("MAWMICSafe").fail("client_setup_failure",g);c("FBLogger")("ls_web_init").catching(g).warn("LSPlatformClient initialization failure");throw g}finally{j.debug("Messenger loading UI unsuspending")}})(),"InitLSPlatformClient")})}e={getOrInit:a};g["default"]=e}),98);
__d("LSPlatformClientProviderAddons.react",["CometPlaceholder.react","cr:6495","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProviderAddons",children:b("cr:6495")!=null&&i.jsx(b("cr:6495"),{})}),a[0]=e):e=a[0];return e}g["default"]=a}),98);
__d("LSPlatformClientProviderUtils",["gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("1391")||c("qex")._("527")===!0}g.shouldInitialiseClientConcurrently=a}),98);
__d("MAWCondSetup.react",["cr:3921","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");f=c("gkx")("20836")?a.Fragment:(e=b("cr:3921"))!=null?e:a.Fragment;d=f;g["default"]=d}),98);
__d("MAWCondWrapper.react",["MAWCondSetup.react","MAWSetupWrapperOnce.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MAWCondSetup.react"),{}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("MAWSetupWrapperOnce.react"),{setupComponent:e,children:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("LSPlatformClientProvider.react",["CometPlaceholder.react","LSDatabaseAfterInitSyncSingleton","LSPlatformClientInstances","LSPlatformClientProviderAddons.react","LSPlatformClientProviderUtils","LSPlatformErrorsCatcher.react","LSSuspense","MAWCondWrapper.react","ReStoreProvider.react","qex","react","react-compiler-runtime","suspendOrThrowIfUsedInSSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a,b){var e=d("react-compiler-runtime").c(3);if(e[0]!==a||e[1]!==b){var f=(h||(h=c("LSSuspense"))).getOrSuspend(a);f=c("LSPlatformClientInstances").getOrInit(f,b,{fromReact:!0});e[0]=a;e[1]=b;e[2]=f}else f=e[2];return f}function a(a){var b=d("react-compiler-runtime").c(3),c=a.children,e=a.config;a=a.loadLSPlatformClient;e=m(e,a);b[0]!==c||b[1]!==e.db?(a=l.jsx((j||(j=d("ReStoreProvider.react"))).ReStoreProvider,{db:e.db,children:c}),b[0]=c,b[1]=e.db,b[2]=a):a=b[2];return a}var n=(h||(h=c("LSSuspense"))).makeWithPromise(d("LSDatabaseAfterInitSyncSingleton").LSDatabaseAfterInitSyncSingleton);function o(){(h||(h=c("LSSuspense"))).getOrSuspend(n)}function p(){o();return null}function q(a){var b=a.config;a=a.loadLSPlatformClient;m(b,a);return null}function b(a){var b=d("react-compiler-runtime").c(6),e=a.children,f=a.config;a=a.loadLSPlatformClient;(i||(i=c("suspendOrThrowIfUsedInSSR")))("Messenger is not enabled for SSR");var g;b[0]!==f||b[1]!==a?(g=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"LSPlatformClientProvider.ClientLoad",children:l.jsx(q,{config:f,loadLSPlatformClient:a})}),b[0]=f,b[1]=a,b[2]=g):g=b[2];b[3]!==e||b[4]!==g?(f=l.jsxs(l.Fragment,{children:[g,e]}),b[3]=e,b[4]=g,b[5]=f):f=b[5];return f}var r=d("LSPlatformClientProviderUtils").shouldInitialiseClientConcurrently()?b:a;function e(a){var b=d("react-compiler-runtime").c(16),e=a.children,f=a.config,g=a.errorFallback,h=a.loadLSPlatformClient;a=a.placeholder;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i=c("qex")._("1755"),b[0]=i):i=b[0];i=i;var j;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=l.jsx(c("LSPlatformClientProviderAddons.react"),{}),b[1]=j):j=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i=i===!0?l.jsx(p,{}):null,b[2]=i):i=b[2];b[3]!==e||b[4]!==a?(i=l.jsxs(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.UISuspense",children:[i,e]}),b[3]=e,b[4]=a,b[5]=i):i=b[5];b[6]!==f||b[7]!==h||b[8]!==i?(e=l.jsxs(r,{config:f,loadLSPlatformClient:h,children:[j,i]}),b[6]=f,b[7]=h,b[8]=i,b[9]=e):e=b[9];b[10]!==a||b[11]!==e?(j=l.jsx(c("MAWCondWrapper.react"),{children:l.jsx(c("CometPlaceholder.react"),{fallback:a,name:"LSPlatformClientProvider.ClientProvider",children:e})}),b[10]=a,b[11]=e,b[12]=j):j=b[12];b[13]!==g||b[14]!==j?(f=l.jsx(c("LSPlatformErrorsCatcher.react"),{fallback:g,children:j}),b[13]=g,b[14]=j,b[15]=f):f=b[15];return f}g["default"]=e}),98);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.react",["LSPlatformClientDeferred","LSPlatformClientProvider.react","asyncToGeneratorRuntime","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=(yield c("LSPlatformClientDeferred").load());return d.make(a,b)});return k.apply(this,arguments)}function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.config,g=a.errorFallback;a=a.placeholder;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=i.jsx(c("LSPlatformClientProvider.react"),{config:f,errorFallback:g,loadLSPlatformClient:j,placeholder:a,children:e}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("LSRequestType",[],(function(a,b,c,d,e,f){a=Object.freeze({INIT_SYNC:1,RESUME_SYNC:2,TASK_BATCH:3,FIRE_FORGET:4,RESUME_SYNC_BATCH:5});f["default"]=a}),66);
__d("LSPlatformDGWTransport",["DGWClient","DGWExponentialBackoff","DGWLoggingContext","DGWStreamGroupCallbacks","FBLogger","LSIntEnum","LSLogHistory","LSPlatformDGWHostnameOverride","LSPlatformRealtimeTransport","MWPBumpEntityKey","MessengerWebRegion","Promise","Random","asyncToGeneratorRuntime","err","gkx","promiseDone","setTimeout","unrecoverableViolation","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("gkx")("3218"),k=c("gkx")("2659"),l=c("gkx")("6455"),m=0,n=!1,o=new Map(),p={connectionStatusChangeHandler:null,current:null,publishBuffer:new Map(),reconnectHandler:null,status:"Disconnected",subscribers:new Map()},q=null,r=!1;function s(a){a=1*Math.pow(2,a);a=Math.max(a,1);a=Math.min(a,64);return Math.ceil(a*(1e3+d("Random").random()*200))}function t(a){var b;if(r){var e;(e=p.current)==null?void 0:e.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"SkipReconnectAttempt","deviceId:"+a);return}r=!0;e=s(m++);var f="deviceId:"+a+", reconnectMs:"+e+", attempt:"+m;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ScheduleReconnect",f);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"scheduleReconnect");c("setTimeout")(function(){u(a),r=!1},e)}function u(a){var b={deviceId:a,keepAliveMs:15e3,loggingId:c("uuidv4")(),serviceId:"lightspeed",streamGroupAppHeaders:{},verboseLoggingEnabled:j};d("MessengerWebRegion").regionNullable!=null&&(b.regionHint=d("MessengerWebRegion").regionNullable);var e={onStreamGroupError:function(b){var c;p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected","Stream Group Error");p.status="Disconnected";(c=p.current)==null?void 0:c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupError",d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,d("DGWStreamGroupCallbacks").DGWStreamGroupError.getName(b));d("DGWStreamGroupCallbacks").isRetryableError(b)?(d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isRetryableError"),t(a)):d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupError.isNotRetryableError")},onStreamGroupMustDrain:function(b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamGroupMustDrain."+b);(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupMustDrain","deviceId:"+a);t(a)},onStreamGroupTransportClose:function(){var b;p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected","Stream Group Close");p.status="Disconnected";(b=p.current)==null?void 0:b.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"onStreamGroupTransportClose","","deviceId:"+a)}};p.status="Connecting";e=c("DGWClient")().createStreamGroup(e,b);e.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"CreatingStreamGroupTransport","deviceId:"+a);c("promiseDone")(e.initTransport(),function(b){d("LSLogHistory").log("StreamGroupTransport Connected","debug");p.status="Connected";p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Connected");n&&(p.reconnectHandler&&p.reconnectHandler());n=!0;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnOpen","deviceId:"+a);(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"BufferFlushed",String(p.publishBuffer.size));m=0;p.publishBuffer.forEach(function(a,b,c){a.resolve(),p.publishBuffer["delete"](b)})},function(b){var c;d("LSLogHistory").log("StreamGroupTransport onError","debug");p.status="Disconnected";p.publishBuffer.clear();p.connectionStatusChangeHandler&&p.connectionStatusChangeHandler("Disconnected",b);(c=p.current)==null?void 0:c.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamGroupTransportOnError",String(b),"deviceId:"+a);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"WebSocketOnError");t(a)});p.current=e;return p.current}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=p.current;if(b==null)throw c("unrecoverableViolation")("LS Stream Group not initialized","ls_web_init");var e=new TextDecoder(),f={LSRequestType:"SYNC",method:"LightSpeed","xrs-stream-handler":"LSDGWStreamHandler"};d("LSPlatformDGWHostnameOverride").useHostNameOverride&&d("LSPlatformDGWHostnameOverride").hostNameOverride!=null&&(f["javascript-sandbox"]=d("LSPlatformDGWHostnameOverride").hostNameOverride);try{b=(yield b.establishStream({groupedStreamHeaders:f,loggingId:c("uuidv4")(),verboseLoggingEnabled:j},{onClose:function(){d("LSLogHistory").log("Stream closed","debug")},onDataReceived:function(a){var b=e.decode(a);p.subscribers.forEach(function(a){a(b)})},onError:function(a){d("LSLogHistory").log("Stream onError. Disconnected","debug")},onServerHasFinishedSendingData:function(a){d("LSLogHistory").log("Stream finished sending data","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onServerHasFinishedSendingData"),a.close()},onStreamMustDrain:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed","LSPlatformDGWTransport.onStreamMustDrain"),d("LSLogHistory").log("Stream must drain","debug"),a.loggingContext().logEvent(d("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"onStreamMustDrain"),a.close()}}));d("LSLogHistory").log("Stream Connected","debug");return b}catch(b){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamFailure."+a);d("LSLogHistory").log("Error Establishing Stream. Disconnected","debug");throw b}});return w.apply(this,arguments)}var x="Disconnected";e=function(){return x};function a(a,b){if(l){q||(q=y(a,b));return q}else{var c=o.get(b);c||(c=y(a,b),o.set(b,c));return c}}function y(a,e){var f=new TextEncoder();u(e);return{cleanup:function(){var a;(a=p.current)==null?void 0:a.close();p.reconnectHandler=null;p.connectionStatusChangeHandler=null;p.publishBuffer.clear();p.subscribers.clear()},logEvent:function(a){var b;(b=p.current)==null?void 0:b.streamGroupLoggingContext.logEvent(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,a)},onConnectionStatusChange:function(a){p.connectionStatusChangeHandler=a;return function(){p.connectionStatusChangeHandler=null}},onReconnect:function(a){p.reconnectHandler=a;return function(){p.reconnectHandler=null}},publish:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(i||(i=d("LSIntEnum"))).toNumber(e);try{d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStream."+(i||(i=d("LSIntEnum"))).toNumber(e));p.status!=="Connected"&&(yield z().then(function(){})["catch"](function(){var a;d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"ConnectionTimeout."+g);(a=p.current)==null?void 0:a.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","ConnectionTimeout",String(g));return new(h||(h=b("Promise")))(function(a,b){return b({RE_EXN_ID:d("LSPlatformRealtimeTransport").NotConnected})})}));var j=function(){return v(g)};j=k?yield d("DGWExponentialBackoff").callWithExponentialBackoff(j):yield v(g);try{4===(i||(i=d("LSIntEnum"))).unwrapIntEnum(e)?j.sendAndForget(f.encode(a)):yield j.send(f.encode(a))}catch(a){d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"sendFailure."+g);throw a}}catch(a){a.message==="Max number of stream IDs reached"&&d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"StreamIdLimitExceeded."+g);d("DGWLoggingContext").DGWLoggingContext.bumpODSKey(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"initStreamError."+g);(e=p.current)==null?void 0:e.streamGroupLoggingContext.logError(d("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Publish","Failed to publish payload",g.toString());c("FBLogger")("messenger_web_product").catching(typeof a==="string"?c("err")(a):a).warn("Failed to create DGW stream and send payload %s",String(a));return new(h||(h=b("Promise")))(function(b,c){return c(a)})}});function e(b,c){return a.apply(this,arguments)}return e}(),subscribe:function(a){p.subscribers.set(a,a);return function(){p.subscribers["delete"](a)}}}}function z(){var a={reject:function(){},resolve:function(){}},c=d("Random").uint32(),e=new(h||(h=b("Promise")))(function(b,c){a.resolve=b,a.reject=c});p.publishBuffer.set(c,a);return e}g.getStatusForDebugging=e;g.LSPlatformDGWTransport=a}),98);
__d("LSPlatformGraphQLLightspeedRequestQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"deviceId"},{defaultValue:null,kind:"LocalArgument",name:"requestId"},{defaultValue:null,kind:"LocalArgument",name:"requestPayload"},{defaultValue:null,kind:"LocalArgument",name:"requestType"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"device_id",variableName:"deviceId"},{kind:"Variable",name:"request_id",variableName:"requestId"},{kind:"Variable",name:"request_payload",variableName:"requestPayload"},{kind:"Variable",name:"request_type",variableName:"requestType"}],concreteType:"LightspeedWebResponse",kind:"LinkedField",name:"lightspeed_web_request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"payload",storageKey:null},{alias:null,args:null,concreteType:"LightspeedWebRequestDependency",kind:"LinkedField",name:"dependencies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"experiments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"target",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LSPlatformGraphQLLightspeedRequestQuery",selections:b},params:{id:"9944623912245126",metadata:{},name:"LSPlatformGraphQLLightspeedRequestQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("LSPlatformGraphQLLightspeedRequestQuery",["LSPlatformGraphQLLightspeedRequestQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("LSPlatformGraphQLLightspeedRequestQuery.graphql");g.query=a}),98);
__d("LSPlatformGraphQLLightspeedRequest",["CometRelay","LSPlatformGraphQLLightspeedRequestQuery","XPlatRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){return d("CometRelay").fetchQuery(d("XPlatRelayEnvironment").getRelayEnvironment(),d("LSPlatformGraphQLLightspeedRequestQuery").query,{deviceId:a,requestId:b,requestPayload:c,requestType:e}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:a.lightspeed_web_request;if(a!=null)return babelHelpers["extends"]({dependencies:void 0},a)})}g["default"]=a}),98);
__d("LSPlatformLogTooManyPendingTasksForS337085.react",["FBLogger","MWPBumpEntityKey","ReQL","clearTimeout","gkx","justknobx","promiseDone","react","react-compiler-runtime","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef,l=c("justknobx")._("1134"),m=c("justknobx")._("1135"),n=c("gkx")("24156");function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=k(null),f=k(!1),g;a[0]!==b.tables.pending_tasks?(g=function(){var a=b.tables.pending_tasks.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.tables.pending_tasks).take(l)),function(a){var b=a.length;if(b===l){if(e.current!=null)return;e.current=c("setTimeout")(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_tasks","tasks_table_above_threshold"),f.current=!0,n&&c("FBLogger")("lsplatform_tasks","tasks_table_above_threshold").warn("pending tasks table is above threshold. It has %s tasks after %s ms",b,m)},m)}else c("clearTimeout")(e.current),f.current&&n&&c("FBLogger")("lsplatform_tasks","tasks_table_cleared").warn("pending tasks table is now cleared"),f.current=!1})});return function(){a()}},a[0]=b.tables.pending_tasks,a[1]=g):g=a[1];var i;a[2]!==b?(i=[b],a[2]=b,a[3]=i):i=a[3];j(g,i);return null}g["default"]=a}),98);
__d("LSPlatformMessengerConfig",["CurrentMessengerUser","LSDatabaseSingleton","LSDatascriptEvaluatorMaybeDeferred","LSDedicatedMqttChannel","LSPlatformDGWTransport","LSPlatformGraphQLLightspeedRequest","LSPlatformMessengerSyncParams","LSPlatformMqttRealtimeTransport","LSSuspense","LSVersion","ServerAppID","cr:3239","cr:8688","getMWLSRegion","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;h=(h=b("cr:3239"))!=null?h:c("LSPlatformGraphQLLightspeedRequest");function a(){return(j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton}function e(a,b){return 3===a?d("LSPlatformDGWTransport").LSPlatformDGWTransport(c("LSVersion"),b):c("LSPlatformMqttRealtimeTransport")(c("LSVersion"),b,{getInstance:d("LSDedicatedMqttChannel").getInstance(d("CurrentMessengerUser").isLoggedInNow),shutdownAndClear:d("LSDedicatedMqttChannel").shutdownAndClear})}function f(){return c("LSDatascriptEvaluatorMaybeDeferred")()}b={appId:c("ServerAppID").app_id,eagerEvaluatorForInitSync:b("cr:8688"),executeGraphQLLightSpeedRequest:c("gkx")("3889")?h:c("LSPlatformGraphQLLightspeedRequest"),getDb:a,getEval:f,platformName:"Messenger",realtimeUnderylingTransport:e,region:c("getMWLSRegion")(),schemaVersion:c("LSVersion"),sendHardcodedInitSync:!0,syncParams:c("LSPlatformMessengerSyncParams")};h=(i||(i=c("LSSuspense"))).makeWithValue(b);g.config=b;g.configEagerlyLoaded=h}),98);
__d("MWChatBadgeCountQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"ViewerMessageThreadsConnection",kind:"LinkedField",name:"message_threads",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"}],kind:"ScalarField",name:"unseen_count",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_loading_client_threads",storageKey:null}]}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatBadgeCountQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatBadgeCountQuery",selections:b},params:{id:"5218522061549416",metadata:{},name:"MWChatBadgeCountQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatBadgeCountQuery",["MWChatBadgeCountQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MWChatBadgeCountQuery.graphql");g["default"]=a}),98);
__d("MWChatBadgeCount.react",["fbt","CometPlaceholder.react","CometRelay","CometVisualCompletionAttributes","FDSNumberedBadge.react","MWChatBadgeCountQuery","MWChatBadgeCountUpdates.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef;function m(a){var b=d("react-compiler-runtime").c(9),e=a.overflow,f=a.setBadgeCount;a=d("CometRelay").useLazyLoadQuery(c("MWChatBadgeCountQuery"),{suppress_xac_groups:!1},{fetchPolicy:"store-or-network"});a=(a=a.viewer)==null?void 0:a.message_threads;var g=a!=null&&a.unseen_count!=null&&a.unseen_count>0?Math.min(d("MWChatBadgeCountUpdates.react").minSyncedThreads,a.unseen_count):0,i=l(null),m;b[0]!==g||b[1]!==f?(a=function(){f&&i.current!==g&&(i.current=g,f(g))},m=[g,f],b[0]=g,b[1]=f,b[2]=a,b[3]=m):(a=b[2],m=b[3]);k(a,m);b[4]!==g||b[5]!==e?(a=g>0?j.jsx(c("FDSNumberedBadge.react"),{accessibilityText:h._("__JHASH__XxoiYlTWwN7__JHASH__",[h._param("count",g)]),overflow:e,testid:void 0,value:g}):null,b[4]=g,b[5]=e,b[6]=a):a=b[6];b[7]!==a?(m=j.jsx(j.Fragment,{children:a}),b[7]=a,b[8]=m):m=b[8];return m}function a(a){var b=d("react-compiler-runtime").c(4),e=a.overflow;a=a.setBadgeCount;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx("span",{}),b[0]=f):f=b[0];b[1]!==e||b[2]!==a?(f=j.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE_DYNAMIC,{children:j.jsx(c("CometPlaceholder.react"),{fallback:f,name:"MWChatBadgeCount",children:j.jsx(m,{overflow:e,setBadgeCount:a})})})),b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}g["default"]=a}),226);
__d("MWChatBadgeUpdaterImpl.react",["CometErrorBoundary.react","ExecutionEnvironment","FBLogger","cr:4562","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=c("FBLogger")("messenger_web_entrypoints");a!=null&&(b=b.catching(a));b.debug("Error loading MWChatBadgeCountUpdater")}function a(){var a=d("react-compiler-runtime").c(1),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=(h||(h=c("ExecutionEnvironment"))).canUseDOM?j.jsx(c("CometErrorBoundary.react"),{onError:k,children:b("cr:4562")&&j.jsx(b("cr:4562"),{})}):null,a[0]=e):e=a[0];return e}g["default"]=a}),98);
__d("MWChatHeadError.react",["fbt","ix","CometHeroFailTrigger.react","CometHeroInteractionWithDiv.react","MWChatInteraction","MWXIcon.react","MWXPressable.react","MWXTooltip.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={compose:{alignItems:"x6s0dn4",backgroundColor:"xcrg951",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1useyqa",$$css:!0},dropShadow:{boxShadow:"x1qeybcx",":hover_boxShadow":"x19xcq9t",$$css:!0}},m=h._("__JHASH__1kKkUA_eanI__JHASH__");function a(a){var b=d("react-compiler-runtime").c(7),e=a.contextRef;a=a.onPress;var f,g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=d("MWChatInteraction").get(d("MWChatInteraction").MW_CHATHEADS_LOAD),g=k.jsx(c("CometHeroFailTrigger.react"),{description:"Error while loading chatheads",fail:!0}),b[0]=f,b[1]=g):(f=b[0],g=b[1]);var h=a==null,j;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(j=k.jsx(c("MWXIcon.react"),{icon:d("fbicon")._(i("502063"),24)}),b[2]=j):j=b[2];b[3]!==e||b[4]!==a||b[5]!==h?(f=k.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Comet initial load to chatheads VC",interactionUUID:f,children:[g,k.jsx(c("MWXTooltip.react"),{align:"end",position:"above",tooltip:m,children:k.jsx(c("MWXPressable.react"),{"aria-label":m,disabled:h,display:"inline",onPress:a,ref:e,xstyle:n,children:j})})]}),b[3]=e,b[4]=a,b[5]=h,b[6]=f):f=b[6];return f}function n(a){return[l.compose,l.dropShadow]}g["default"]=a}),226);
__d("MWChatDisabled.react",["MWChatHeadError.react","react","react-compiler-runtime","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(4),e=a.contextRef;a=a.onPress;var f=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),g;b[0]!==e||b[1]!==a||b[2]!==f?(g=f?i.jsx("div",{className:"x1ey2m1c xds687c xixxii4",children:i.jsx("div",{className:"x191j7n5 x92rtbv x10l6tqk",children:i.jsx(c("MWChatHeadError.react"),{contextRef:e,onPress:a})})}):null,b[0]=e,b[1]=a,b[2]=f,b[3]=g):g=b[3];return g}g["default"]=a}),98);
__d("MWV2Chat.react",["CometErrorBoundary.react","FBLogger","JSResourceForInteraction","LSDatabaseAfterInitSyncSingleton","LSDatabaseSingleton","LSPlatformClientProviderWithDeferredLoadingStrategy.react","LSPlatformMessengerConfig","MWChatDisabled.react","MWChatInteraction","MWXLazyPopoverTrigger.react","cr:11569","gkx","react","react-compiler-runtime","shouldHideChatOnAppsSubdomain"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.useLayoutEffect;function m(a){var b=c("FBLogger")("messenger_browser_clients");a!=null&&(b=b.catching(a));b.warn("Error loading MWV2Chat")}var n=c("JSResourceForInteraction")("MWChatErrorStatePopover.react").__setRef("MWV2Chat.react"),o=function(a){return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{error:a},popoverResource:n,position:"above",visibleOnLoad:!0,children:function(a,b){return j.jsx(c("MWChatDisabled.react"),{contextRef:a,onPress:b})}})},p=!c("gkx")("22788")||!c("gkx")("22789")||c("shouldHideChatOnAppsSubdomain")();function a(){var a=d("react-compiler-runtime").c(3),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[0]=e):e=a[0];l(r,e);a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=[],a[1]=e):e=a[1];k(q,e);a[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("CometErrorBoundary.react"),{fallback:o,onError:m,children:p?j.jsx(c("MWChatDisabled.react"),{}):b("cr:11569")&&j.jsx(c("LSPlatformClientProviderWithDeferredLoadingStrategy.react"),{config:d("LSPlatformMessengerConfig").configEagerlyLoaded,errorFallback:o,children:j.jsx(b("cr:11569"),{})})}),a[2]=e):e=a[2];return e}function q(){(p||b("cr:11569")==null)&&d("LSDatabaseAfterInitSyncSingleton").resolveInitSync((i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton)}function r(){d("MWChatInteraction").addAutoChatTabMarkerPoint("mwv2_chat_rendered")}g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","SearchCometTypeaheadEventEmitterContext","cr:2012305","react","react-compiler-runtime","useMergeRefs","useRefEffect","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.useRef;f=i.forwardRef(a);function a(a,e){var f=d("react-compiler-runtime").c(13),g,h;f[0]!==a?(g=a.onChange,h=babelHelpers.objectWithoutPropertiesLoose(a,["onChange"]),f[0]=a,f[1]=g,f[2]=h):(g=f[1],h=f[2]);a=(a=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?a:{};var l=a.subscribeToGlobalTypeaheadFocus,m;f[3]!==g||f[4]!==l?(a=function(a){return l==null?void 0:l(function(){if(a==null)return;a.value="";a.focus();g("")})},m=[g,l],f[3]=g,f[4]=l,f[5]=a,f[6]=m):(a=f[5],m=f[6]);a=c("useRefEffect")(a,m);var n=k(null),o=k(!1),p;f[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=function(){var a=n.current;if(b("cr:2012305")!=null&&a!=null&&o.current===!1){b("cr:2012305").trackTypingPerf(a,"top_tab_serp_typeahead");o.current=!0;return function(){b("cr:2012305").unregisterTypingPerf(a),o.current=!1}}},p=[],f[7]=m,f[8]=p):(m=f[7],p=f[8]);j(m,p);m=c("useMergeRefs")(a,n);p=c("useMergeRefs")(m,e);f[9]!==p||f[10]!==g||f[11]!==h?(a=i.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},h,{onChange:g,ref:p})),f[9]=p,f[10]=g,f[11]=h,f[12]=a):a=f[12];return a}e=f;g["default"]=e}),98);
__d("useCometInternalTypeaheadHeroTracing",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){var c=a?a.getInteractionUUID():null,d=a?a.getVCTrackerRef():null,e=c!=null&&a!=null&&!a.isResolved();return i(function(){var f=function(c,d){a&&d!=null&&a.setEventStartTime(d.timeStamp),b(c,d)};return{interactionUUID:c,onTracedChange:f,shouldHoldHeroTracing:e,vcTrackerRef:d}},[c,b,e,a,d])}g["default"]=a}),98);
__d("SearchCometGlobalTypeaheadLayoutContextualStrategy.react",["CometHeroHoldTrigger.react","CometHeroInteractionWithDiv.react","CometTypeaheadInternalLayoutInlineStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadHeroTracing","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useSearchCometGlobalTypeaheadStyles"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(74),e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;b[0]!==a?(y=a.extraLayoutProps,f=a.helperText,g=a.label,h=a.onAbandonTypeahead_DO_NOT_USE,j=a.onBlur,k=a.onChange,l=a.onClick,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onHighlightEntry,r=a.onOutsideClick,s=a.onPressEntry,u=a.onShiftTab,v=a.onTab,w=a.onUpArrow,z=a.traceProvider,q=a.onLeftArrow,t=a.onRightArrow,A=a.viewRole,e=a.inputRef,B=a.xstyles,x=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","traceProvider","onLeftArrow","onRightArrow","viewRole","inputRef","xstyles"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=k,b[7]=l,b[8]=m,b[9]=n,b[10]=o,b[11]=p,b[12]=q,b[13]=r,b[14]=s,b[15]=t,b[16]=u,b[17]=v,b[18]=w,b[19]=x,b[20]=y,b[21]=z,b[22]=A,b[23]=B):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],k=b[6],l=b[7],m=b[8],n=b[9],o=b[10],p=b[11],q=b[12],r=b[13],s=b[14],t=b[15],u=b[16],v=b[17],w=b[18],x=b[19],y=b[20],z=b[21],A=b[22],B=b[23]);b[24]!==y?(a=y===void 0?{}:y,b[24]=y,b[25]=a):a=b[25];y=a;a=y.afterViewContent;y=y.beforeViewContent;var C=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();C=C.isOpened;var D=c("useCometInternalTypeaheadState")(),E=D.activeEntries,F=D.highlightedEntry;D=D.secondaryActionHighlighted;var G=c("useCometInternalTypeaheadFetch")();G=G.isLoading;e=c("useCometTypeaheadInputRefs")(e);var H=e.composedRef;e=e.inputRef;var I=c("useSearchCometGlobalTypeaheadStyles")();B=(B=B)!=null?B:I;I=c("useCometInternalTypeaheadHeroTracing")(z,k);z=I.interactionUUID;k=I.onTracedChange;var J=I.shouldHoldHeroTracing;I=I.vcTrackerRef;var K;b[26]!==h||b[27]!==j||b[28]!==l||b[29]!==m||b[30]!==n||b[31]!==o||b[32]!==p||b[33]!==q||b[34]!==r||b[35]!==s||b[36]!==t||b[37]!==u||b[38]!==v||b[39]!==k||b[40]!==w?(K={onAbandonTypeahead_DO_NOT_USE:h,onBlur:j,onChange:k,onClick:l,onDownArrow:m,onEnter:n,onEscape:o,onHighlightEntry:p,onLeftArrow:q,onOutsideClick:r,onPressEntry:s,onRightArrow:t,onShiftTab:u,onTab:v,onUpArrow:w},b[26]=h,b[27]=j,b[28]=l,b[29]=m,b[30]=n,b[31]=o,b[32]=p,b[33]=q,b[34]=r,b[35]=s,b[36]=t,b[37]=u,b[38]=v,b[39]=k,b[40]=w,b[41]=K):K=b[41];b[42]!==e||b[43]!==K?(h={handlers:K,inputRef:e},b[42]=e,b[43]=K,b[44]=h):h=b[44];j=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(h);b[45]!==E||b[46]!==f||b[47]!==F||b[48]!==C||b[49]!==g||b[50]!==D||b[51]!==A?(l={activeEntries:E,helperText:f,highlightedEntry:F,inputLabel:g,isOpened:C,secondaryActionHighlighted:D,viewRole:A},b[45]=E,b[46]=f,b[47]=F,b[48]=C,b[49]=g,b[50]=D,b[51]=A,b[52]=l):l=b[52];m=c("useCometTypeaheadLayoutContextualStrategyARIAProps")(l);b[53]!==J?(n=i.jsx(c("CometHeroHoldTrigger.react"),{description:"SearchInternalTypeahead",hold:J}),b[53]=J,b[54]=n):n=b[54];b[55]!==a||b[56]!==m||b[57]!==y||b[58]!==G||b[59]!==C?(o={afterViewContent:a,ariaProps:m,beforeViewContent:y,helperTextComponent:null,isLoading:G,isOpened:C},b[55]=a,b[56]=m,b[57]=y,b[58]=G,b[59]=C,b[60]=o):o=b[60];b[61]!==H||b[62]!==j||b[63]!==g||b[64]!==x||b[65]!==o||b[66]!==A||b[67]!==B?(p=i.jsx(c("CometTypeaheadInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},x,j,{extraLayoutProps:o,inputRef:H,label:g,viewRole:A,xstyles:B})),b[61]=H,b[62]=j,b[63]=g,b[64]=x,b[65]=o,b[66]=A,b[67]=B,b[68]=p):p=b[68];b[69]!==z||b[70]!==n||b[71]!==p||b[72]!==I?(q=i.jsxs(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"Search_Typeahead",interactionUUID:z,ref:I,children:[n,p]}),b[69]=z,b[70]=n,b[71]=p,b[72]=I,b[73]=q):q=b[73];return q}g["default"]=a}),98);
__d("SearchCometInterestsDeepDiveExperiments",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("24247")}g.hasTypeaheadRedirection=a}),98);
__d("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry",["Base64","ConstUriUtils","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","XCometSearchResultsControllerRouteBuilder","react-compiler-runtime","searchCometTypeaheadGetHighConfidenceResult","searchCometTypeaheadGetStsDisambiguation","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsEntryPointSurface","useSearchCometResultsURLBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("react-compiler-runtime").c(5),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},a[0]=b):b=a[0];var e=c("useSearchCometResultsURLBuilder")(b),f=c("useSearchCometHashtagRouteUrlBuilder")(),g=c("useSearchCometResultsEntryPointSurface")();a[1]!==f||a[2]!==g||a[3]!==e?(b=function(a){var b=a.entry,h=a.queryString;a=a.typeaheadSessionID;var i=b.label.toLowerCase(),j=b.metaData;j=j==null?void 0:j.markers;var k=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(i);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&k!=null&&!j.has("see_all"))return f({entryPointAction:"SEARCH_BOX",exploreEntryPoint:h===""?3:4,hashtag:k,typeaheadSessionID:a});else{h=b.rawData;k=(k=c("searchCometTypeaheadGetStsDisambiguation")(b))!=null?k:void 0;if(b.subtype==="keyword"&&j.has("disambiguation")){h=(j=(j=h.structuredInfo)==null?void 0:(h=j.disambiguation_result)==null?void 0:h.disambiguation_info_list[0])!=null?j:{};j=h.link_url;if(j!=null){h=d("ConstUriUtils").getUri(j);if(h!=null){j=new Map();g!=null&&j.set("__eps__",g);k!==void 0&&j.set("__stsd__",c("Base64").encode(JSON.stringify(k)));var l=new Map();for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;var p=o[0];o=o[1];l.set(p,o)}p=h.addQueryParams(l);if(p!=null)return p.toString()}}}return e({entryPointAction:"SEARCH_BOX",highConfidenceResult:c("searchCometTypeaheadGetHighConfidenceResult")(b),query:i,stsDisambiguation:k,typeaheadSessionID:a})}},a[1]=f,a[2]=g,a[3]=e,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps",["react","react-compiler-runtime","useCometRouterDispatcher","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(10),e=a.entry;a=a.queryString;var f=c("useCometRouterDispatcher")(),g=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")(),h;b[0]!==g||b[1]!==e||b[2]!==a?(h=g({entry:e,queryString:a}),b[0]=g,b[1]=e,b[2]=a,b[3]=h):h=b[3];g=h;var j=g;b[4]!==f||b[5]!==j?(e=function(){f!=null&&f.preloadRouteCode(j)},a=[f,j],b[4]=f,b[5]=j,b[6]=e,b[7]=a):(e=b[6],a=b[7]);i(e,a);b[8]!==j?(h={preloadCodeOnMount:!0,preventLocalNavigation:!0,url:j},b[8]=j,b[9]=h):h=b[9];g=h;return g}g["default"]=a}),98);
__d("useSearchCometGlobalTypeaheadViewStrategy",["fbt","CometSearchTypeaheadBaseViewRecentEmptyState.react","react","searchCometTypeaheadSTSMappings","useSearchCometGlobalTypeaheadKeywordViewItemLinkProps","useSearchCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo,l={view:{backgroundColor:"x1jx94hy",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"x1iofjn4",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){a=a.onHeaderActionPress;var b=k(function(){return[l.view]},[]),d=k(function(){return j.jsx(c("CometSearchTypeaheadBaseViewRecentEmptyState.react"),{})},[]);return c("useSearchCometTypeaheadViewListStrategy")({additionalEntryMappings:c("searchCometTypeaheadSTSMappings"),emptyStateContent:d,getLinkProps:c("useSearchCometGlobalTypeaheadKeywordViewItemLinkProps"),isScrollable:!0,onHeaderActionPress:a,seeAllLabelBuilder:m,xstyle:b})}function m(a){return h._("__JHASH__LChIaXBIwAT__JHASH__",[h._implicitParam("=m1",j.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a)])}))])}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6484597208256495"}),null);
__d("useSearchCometTypeaheadBootstrapValidationQuery.graphql",["useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"params",variableName:"input"}],concreteType:"SearchClientCachePolicyCheckResult",kind:"LinkedField",name:"search_client_cache_policy_check",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchClientCachePolicyDecision",kind:"LinkedField",name:"policy_decision",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cache_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ids_to_remove",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"force_cache_refresh",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useSearchCometTypeaheadBootstrapValidationQuery",selections:c},params:{id:b("useSearchCometTypeaheadBootstrapValidationQuery_facebookRelayOperation"),metadata:{},name:"useSearchCometTypeaheadBootstrapValidationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useSearchCometTypeaheadBootstrapValidation",["CometRelay","CometRelayErrorHandling","filterNulls","react","react-compiler-runtime","recoverableViolation","useSearchCometTypeaheadBootstrapValidationQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;function a(a){var e=d("react-compiler-runtime").c(3),f=a.bootstrapDatasource,g=d("CometRelay").useRelayEnvironment();e[0]!==f||e[1]!==g?(a={validate:function(a){a=c("filterNulls")(a.map(k));d("CometRelay").fetchQuery(g,h!==void 0?h:h=b("useSearchCometTypeaheadBootstrapValidationQuery.graphql"),{input:{cache_types:["KEYWORD_BOOTSTRAP"],shown_suggestions:a}}).subscribe({error:j,next:function(a){a=a.search_client_cache_policy_check;for(var a=(a=a==null?void 0:a.policy_decision)!=null?a:[],b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d.cache_type,g=d.force_cache_refresh;d=d.ids_to_remove;if(e==="KEYWORD_BOOTSTRAP"){for(var e=d,d=Array.isArray(e),h=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(d){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;f.removeEntriesByEntID(i)}g===!0&&(f.clear(),f.bootstrap())}}}})}},e[0]=f,e[1]=g,e[2]=a):a=e[2];e=a;return e}function j(a){d("CometRelayErrorHandling").markErrorAsHandled(a)}function k(a){if(a.subtype!=="bootstrap")return null;a=(a=a.rawData.structuredInfo)!=null?a:{};a=a.direct_nav_result;if(a==null)return null;var b=a.ent_id;a=a.title;if(b==null||a==null){c("recoverableViolation")("Unexpected missing ent_id or title on direct_nav_result","search");return null}return{id:b,keyword:a}}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(15),e,f,g,h,j;c[0]!==b?(e=b.inputRef,f=b.onChange,g=b.onPressEntry,j=b.shouldQueryStringUpdateFromSelectedEntryOnClick,h=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onChange","onPressEntry","shouldQueryStringUpdateFromSelectedEntryOnClick"]),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=j):(e=c[1],f=c[2],g=c[3],h=c[4],j=c[5]);b=j===void 0?!1:j;c[6]!==f||c[7]!==g?(j=function(b,c){var a=b.metaData,d=b.subtype;a=a.markers;d=d==="recent"&&a.has("entity")||a.has("direct_nav");f(d?"":b.label);g==null?void 0:g(b,c)},c[6]=f,c[7]=g,c[8]=j):j=c[8];j=j;var k;c[9]!==e||c[10]!==j||c[11]!==f||c[12]!==h||c[13]!==b?(k=i.jsx(a,babelHelpers["extends"]({},h,{inputRef:e,onChange:f,onPressEntry:j,shouldQueryStringUpdateFromSelectedEntryOnClick:b})),c[9]=e,c[10]=j,c[11]=f,c[12]=h,c[13]=b,c[14]=k):k=c[14];return k}return b}g["default"]=a}),98);
__d("withSearchCometGlobalTypeaheadFocusKeyboardShortcut",["cometGetKeyCommandConfig","react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometTypeaheadInputRefs","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function a(a){function b(b){var e=b.inputRef;b=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef"]);e=c("useCometTypeaheadInputRefs")(e);var f=e.composedRef,g=e.inputRef;e=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var h=e.dispatchIsOpened,l=j(function(){g.current!=null&&(g.current.focus(),h(!0))},[g,h]);e=k(function(){return[d("cometGetKeyCommandConfig").getCometKeyCommandConfig("global","search",l)]},[l]);c("useGlobalKeyCommands")(e);return i.jsx(a,babelHelpers["extends"]({},b,{inputRef:f}))}b.displayName=b.name+" [from "+f.id+"]";return b}g["default"]=a}),98);
__d("withSearchCometTypeaheadTraceEndReasonDecorator",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){function b(b){var c=d("react-compiler-runtime").c(13),e,f,g,h;c[0]!==b?(e=b.inputRef,f=b.onPressEntry,h=b.traceProvider,g=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onPressEntry","traceProvider"]),c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=h):(e=c[1],f=c[2],g=c[3],h=c[4]);c[5]!==f||c[6]!==h?(b=function(a,b){h&&h.setEndReason("successful_user_action"),f==null?void 0:f(a,b)},c[5]=f,c[6]=h,c[7]=b):b=c[7];b=b;var j;c[8]!==e||c[9]!==b||c[10]!==g||c[11]!==h?(j=i.jsx(a,babelHelpers["extends"]({},g,{inputRef:e,onPressEntry:b,traceProvider:h})),c[8]=e,c[9]=b,c[10]=g,c[11]=h,c[12]=j):j=c[12];return j}return b}g["default"]=a}),98);
__d("SearchCometGlobalTypeahead.react",["fbt","BaseTypeahead.react","CometErrorBoundary.react","CometTypeaheadErrorFallback.react","FBLogger","SearchCometGlobalTypeaheadInputStrategy.react","SearchCometGlobalTypeaheadLayoutContextualStrategy.react","SearchCometInterestsDeepDiveExperiments","SearchCometInterestsDeepDiveUtil","SearchCometTypeaheadLoggingContextProvider","XCometSearchResultsControllerRouteBuilder","emptyFunction","qex","react","react-compiler-runtime","react-forget-runtime","requireDeferred","searchCometGlobalTypeahead.config","unrecoverableViolation","useCometSearchTypeaheadTraceProvider","useCometTypeaheadNavigate","useCometTypeaheadStateQueryString","useSearchCometGlobalTypeaheadCompositeDataSource","useSearchCometGlobalTypeaheadNullStateDataSource","useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry","useSearchCometGlobalTypeaheadViewStrategy","useSearchCometHashtagRouteUrlBuilder","useSearchCometResultsURLBuilder","useSearchCometTypeaheadBootstrapValidation","useSearchCometTypeaheadLoggingProvider","useSearchCometTypeaheadRecentDataSourceContextDecorator","useStable","withSearchCometGlobalTypeaheadCleanStateOnEntrySelection","withSearchCometGlobalTypeaheadFocusKeyboardShortcut","withSearchCometTypeaheadBaseNavigationDecorator","withSearchCometTypeaheadSERPWarmCallDecorator","withSearchCometTypeaheadTraceEndReasonDecorator"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useContext;var k=b.useEffect;b.useMemo;var l=b.useRef,m=c("requireDeferred")("ODS").__setRef("SearchCometGlobalTypeahead.react"),n=(e=c("qex")._("7"))!=null?e:!1;function a(a){var b=d("react-compiler-runtime").c(73),e,f,g,i,t,u,v,w,x,y;b[0]!==a?(y=a.autoOpen,e=a.inputXStyle,g=a.onClose,i=a.onEscape,t=a.onFocus,u=a.onHeaderActionPress,v=a.onPressEntry,w=a.onSelectFreeformQuery,f=a.queryString,x=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","inputXStyle","onClose","onEscape","onFocus","onHeaderActionPress","onPressEntry","onSelectFreeformQuery","queryString"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=t,b[6]=u,b[7]=v,b[8]=w,b[9]=x,b[10]=y):(e=b[1],f=b[2],g=b[3],i=b[4],t=b[5],u=b[6],v=b[7],w=b[8],x=b[9],y=b[10]);a=y===void 0?!1:y;y=c("useCometTypeaheadStateQueryString")(f);var z=y[0];f=y[1];var A=c("useSearchCometGlobalTypeaheadURLBuilderForKeywordEntry")();b[11]===Symbol["for"]("react.memo_cache_sentinel")?(y={routeBuilder:c("XCometSearchResultsControllerRouteBuilder")},b[11]=y):y=b[11];var B=c("useSearchCometResultsURLBuilder")(y),C=c("useSearchCometHashtagRouteUrlBuilder")();b[12]===Symbol["for"]("react.memo_cache_sentinel")?(y={tapPoint:"tap_search_bar"},b[12]=y):y=b[12];var D=c("useCometTypeaheadNavigate")(y),E=l(!1);y=c("useSearchCometGlobalTypeaheadNullStateDataSource")();var F;b[13]!==y?(F={config:c("searchCometGlobalTypeahead.config"),recentDataSource:y},b[13]=y,b[14]=F):F=b[14];var G=c("useSearchCometGlobalTypeaheadCompositeDataSource")(F);b[15]!==G?(y=G.getBootstrapKeywordsDataSource(),b[15]=G,b[16]=y):y=b[16];F=y;if(F==null)throw c("unrecoverableViolation")("Bootstrap datasource is missing","search");b[17]!==F?(y={bootstrapDatasource:F},b[17]=F,b[18]=y):y=b[18];F=c("useSearchCometTypeaheadBootstrapValidation")(y);var H=F.validate;b[19]!==H?(y=function(a){a=a.shownEntries;H(a)},b[19]=H,b[20]=y):y=b[20];var I=y;F=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("SearchCometTypeaheadLoggingContextProvider").CometLoggingProviderContext,r);y=F.logger;var J=F.onSessionStart,K=F.setSessionEndCallback;F=F.traceProvider;var L;L=y;F=F;var M;b[21]!==I?(M={context:"search_global",onSessionEnd:I},b[21]=I,b[22]=M):M=b[22];M=c("useSearchCometTypeaheadLoggingProvider")(M);c("useCometSearchTypeaheadTraceProvider")(y||M);k(function(){K(I)},[K,I]);if(L==null){L=M;m.onReady(q);throw c("FBLogger")("search").mustfix("Typeahead used without logger in context")}if(F==null)throw c("FBLogger")("search").mustfix("Typeahead used without traceProvider in context");y=c("useSearchCometTypeaheadRecentDataSourceContextDecorator")(G,!1);b[23]===Symbol["for"]("react.memo_cache_sentinel")?(M={decorate:c("withSearchCometGlobalTypeaheadFocusKeyboardShortcut")},b[23]=M):M=b[23];b[24]!==y?(M=[y,M].filter(Boolean),b[24]=y,b[25]=M):M=b[25];y=M;M=y;var N;b[26]!==G?(y=function(){G.bootstrap()},N=[G],b[26]=G,b[27]=y,b[28]=N):(y=b[27],N=b[28]);k(y,N);b[29]!==t||b[30]!==J?(y=function(){E.current=!0,J(),t&&t()},b[29]=t,b[30]=J,b[31]=y):y=b[31];N=y;b[32]!==L||b[33]!==D||b[34]!==v||b[35]!==z||b[36]!==A?(y=function(a,b){var c;if(b===!0)return;b=a.metaData;b=b==null?void 0:b.markers;var d=b!=null&&b.has("entity");b=b!=null&&b.has("direct_nav");c=A({entry:a,queryString:z,typeaheadSessionID:(c=L)==null?void 0:c.getSessionID()});c=s(a,c,d,b);D(c);v==null?void 0:v(a)},b[32]=L,b[33]=D,b[34]=v,b[35]=z,b[36]=A,b[37]=y):y=b[37];L;y=y;var O;b[38]!==C||b[39]!==L||b[40]!==D||b[41]!==w||b[42]!==z||b[43]!==B?(O=function(a){var b=d("SearchCometInterestsDeepDiveUtil").getHashtagTag(a);if(d("SearchCometInterestsDeepDiveExperiments").hasTypeaheadRedirection()&&b!=null){b=C({entryPointAction:"SEARCH_BOX",exploreEntryPoint:z===""?3:4,hashtag:b,typeaheadSessionID:(b=L)==null?void 0:b.getSessionID()})}else{var c;b=B({entryPointAction:"SEARCH_BOX",query:a,typeaheadSessionID:(c=L)==null?void 0:c.getSessionID()})}D(b);w==null?void 0:w(a)},b[38]=C,b[39]=L,b[40]=D,b[41]=w,b[42]=z,b[43]=B,b[44]=O):O=b[44];L;O=O;var P;b[45]!==G||b[46]!==g?(P=function(){G.clearQueryCache(),g&&g()},b[45]=G,b[46]=g,b[47]=P):P=b[47];P=P;var Q=c("useStable")(p),R;b[48]===Symbol["for"]("react.memo_cache_sentinel")?(R=h._("__JHASH___9EIWdQL4U5__JHASH__"),b[48]=R):R=b[48];R=R;var S=z==="";S=S?"grid":"listbox";var T;b[49]===Symbol["for"]("react.memo_cache_sentinel")?(T={bypassCacheRenderLimitCheck:n},b[49]=T):T=b[49];var U=x.inputEndContent,V;b[50]!==e?(V={hideIconOnFocus:!0,size:"large",xstyle:e},b[50]=e,b[51]=V):V=b[51];e=x.inputStartContent;var W;b[52]===Symbol["for"]("react.memo_cache_sentinel")?(W=h._("__JHASH__oTSOcwn1bTU__JHASH__"),b[52]=W):W=b[52];var X=L,Y;b[53]!==u?(Y={onHeaderActionPress:u},b[53]=u,b[54]=Y):Y=b[54];u=c("useSearchCometGlobalTypeaheadViewStrategy")(Y);b[55]!==Q||b[56]!==a||b[57]!==G||b[58]!==P||b[59]!==N||b[60]!==y||b[61]!==O||b[62]!==i||b[63]!==x||b[64]!==z||b[65]!==f||b[66]!==M||b[67]!==V||b[68]!==X||b[69]!==u||b[70]!==F||b[71]!==S?(Y=j.jsx(c("CometErrorBoundary.react"),{fallback:o,children:j.jsx(Q,babelHelpers["extends"]({},x,{autoOpen:a,dataSource:G,dataSourceFetchConfigParams:T,decorators:M,inputEndContent:U,inputExtraProps:V,inputStartContent:e,inputStrategyRenderer:c("SearchCometGlobalTypeaheadInputStrategy.react"),label:W,layoutStrategyRenderer:c("SearchCometGlobalTypeaheadLayoutContextualStrategy.react"),loggingProvider:X,onChange:f,onClose:P,onEscape:i,onFocus:N,onPressEntry:y,onSelectFreeformQuery:O,placeholder:R,queryString:z,testid:void 0,traceProvider:F,viewRole:S,viewStrategyRenderer:u}))}),b[55]=Q,b[56]=a,b[57]=G,b[58]=P,b[59]=N,b[60]=y,b[61]=O,b[62]=i,b[63]=x,b[64]=z,b[65]=f,b[66]=M,b[67]=V,b[68]=X,b[69]=u,b[70]=F,b[71]=S,b[72]=Y):Y=b[72];return Y}function o(){return j.jsx(c("CometTypeaheadErrorFallback.react"),{})}o.displayName=o.name+" [from "+f.id+"]";function p(){var a;return((a=c("withSearchCometTypeaheadSERPWarmCallDecorator"))!=null?a:c("emptyFunction").thatReturnsArgument)(c("withSearchCometTypeaheadTraceEndReasonDecorator")(c("withSearchCometGlobalTypeaheadCleanStateOnEntrySelection")(c("withSearchCometTypeaheadBaseNavigationDecorator")(c("BaseTypeahead.react")))))}function q(a){a.bumpEntityKey(354,"typeahead.missing_logger_context","focused")}function r(a){return[a.logger,a.onSessionStart,a.setSessionEndCallback,a.traceProvider]}function s(a,b,c,d){var e=a.rawData,f;if(e!=null&&a.subtype==="recent"&&c){f=e==null?void 0:(c=e.profile)==null?void 0:c.url}if(e!=null&&(a.subtype==="keyword"||a.subtype==="bootstrap"||a.subtype==="recent")&&d){f=e==null?void 0:(c=e.structuredInfo)==null?void 0:(a=c.direct_nav_result)==null?void 0:a.link_url}return(d=f)!=null?d:b}g["default"]=a}),226);/*FB_PKG_DELIM*/
__d("BaseTypeaheadLayoutContextualStrategyStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(null);g["default"]=b}),98);
__d("useBaseTypeaheadLayoutContextualStrategyStateContext",["BaseTypeaheadLayoutContextualStrategyStateContext","FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(c("BaseTypeaheadLayoutContextualStrategyStateContext"));if(a==null)throw c("FBLogger")("typeahead_framework").mustfixThrow("Contextual Layout Strategy State is not found");return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadFetchHandler",["react","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect;function a(a){var b=a.loggingProvider,d=a.queryString,e=a.traceProvider;a=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var f=a.isOpened;a=c("useCometInternalTypeaheadState")();var g=a.activeEntries;a=c("useCometInternalTypeaheadFetch")();var h=a.fetch;a=i(function(){function a(a,c){var d=null;b!=null&&(d=b.addEvent({action:"keystroke",entries:g,queryString:a},"useCometInternalTypeaheadFetchHandler"));d=d!=null?{loggingEventTrace:d,perfTraceAPI:c,query:a}:{perfTraceAPI:c,query:a};h(d)}var c=d.trimLeft().replace(/\s+/g," ");if(!f)return;e?e.trace(function(b){return a(c,b)},c):a(c)},[g,h,f,b,d,e]);j(a,[f,d])}g["default"]=a}),98);
__d("BaseTypeaheadDataFetchTrigger.react",["react-compiler-runtime","useCometInternalTypeaheadFetchHandler"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(4),e=a.loggingProvider,f=a.queryString;a=a.traceProvider;var g;b[0]!==e||b[1]!==f||b[2]!==a?(g={loggingProvider:e,queryString:f,traceProvider:a},b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];c("useCometInternalTypeaheadFetchHandler")(g);return null}g["default"]=a}),98);
__d("cometTypeaheadMouseUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a!=null&&(a.ctrlKey||a.metaKey||a.shiftKey)}f.hasModifierKeyPressed=a}),66);
__d("useCometInternalTypeaheadOnAbandonLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(5),e=a.callback,f=a.loggingProvider,g=a.queryString;a=c("useCometInternalTypeaheadState")();var h=a.activeEntries;b[0]!==h||b[1]!==e||b[2]!==f||b[3]!==g?(a=function(){f!=null&&f.isSessionActive()&&(f.addEvent({action:"abandon",entries:h,queryString:g},"useCometInternalTypeaheadOnAbandonLoggingHandler"),f.endSession()),e&&e()},b[0]=h,b[1]=e,b[2]=f,b[3]=g,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadOnEnterLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(6),e=a.loggingProvider,f=a.onEnter,g=a.queryString;a=c("useCometInternalTypeaheadState")();var h=a.activeEntries,i=a.highlightedEntry;b[0]!==h||b[1]!==i||b[2]!==e||b[3]!==f||b[4]!==g?(a=function(){i!=null&&(e&&e.addEvent({action:"click",entries:h,entry:i,queryString:g},"useCometInternalTypeaheadOnEnterLoggingHandler:without_highlightedEntry")),i==null&&(e&&e.addEvent({action:"enter",entries:h,queryString:g},"useCometInternalTypeaheadOnEnterLoggingHandler:with_highlightedEntry")),e&&e.endSession(),f&&f()},b[0]=h,b[1]=i,b[2]=e,b[3]=f,b[4]=g,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadOnFocusLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(5),e=a.loggingProvider,f=a.onFocus,g=a.queryString;a=c("useCometInternalTypeaheadState")();var h=a.activeEntries;b[0]!==h||b[1]!==e||b[2]!==f||b[3]!==g?(a=function(){e!=null&&(e.startSession(),e.addEvent({action:"typeahead_appeared",entries:h,queryString:g},"useCometInternalTypeaheadOnFocusLoggingHandler")),f&&f()},b[0]=h,b[1]=e,b[2]=f,b[3]=g,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadOnPressEntryLoggingHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(5),e=a.loggingProvider,f=a.onPressEntry,g=a.queryString;a=c("useCometInternalTypeaheadState")();var h=a.activeEntries;b[0]!==h||b[1]!==e||b[2]!==f||b[3]!==g?(a=function(a,b){e!=null&&(e.addEvent({action:"click",entries:h,entry:a,queryString:g},"useCometInternalTypeaheadOnPressEntryLoggingHandler"),e.endSession()),f&&f(a,b)},b[0]=h,b[1]=e,b[2]=f,b[3]=g,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("useCometTypeaheadInputRefs",["mergeRefs","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useRef;function a(a){var b=j(null),d=i(function(){return c("mergeRefs")(b,a)},[b,a]);return{composedRef:d,inputRef:b}}g["default"]=a}),98);
__d("CometInternalTypeahead.react",["BaseTypeaheadDataFetchTrigger.react","cometTypeaheadMouseUtils","emptyFunction","react","react-compiler-runtime","useCometInternalTypeaheadOnAbandonLoggingHandler","useCometInternalTypeaheadOnEnterLoggingHandler","useCometInternalTypeaheadOnFocusLoggingHandler","useCometInternalTypeaheadOnPressEntryLoggingHandler","useCometInternalTypeaheadState","useCometTypeaheadInputRefs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(69),e,f,g,h,j,k,l,m,n,o,p,q;b[0]!==a?(f=a.inputRef,e=a.layoutStrategyRenderer,g=a.loggingProvider,h=a.onEnter,j=a.onFocus,k=a.onPressEntry,l=a.onSelectFreeformQuery,m=a.onShiftTab,n=a.onTab,p=a.queryString,q=a.traceProvider,o=babelHelpers.objectWithoutPropertiesLoose(a,["inputRef","layoutStrategyRenderer","loggingProvider","onEnter","onFocus","onPressEntry","onSelectFreeformQuery","onShiftTab","onTab","queryString","traceProvider"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=j,b[6]=k,b[7]=l,b[8]=m,b[9]=n,b[10]=o,b[11]=p,b[12]=q):(e=b[1],f=b[2],g=b[3],h=b[4],j=b[5],k=b[6],l=b[7],m=b[8],n=b[9],o=b[10],p=b[11],q=b[12]);a=c("useCometTypeaheadInputRefs")(f);f=a.composedRef;var r=a.inputRef;a=c("useCometInternalTypeaheadState")();var s=a.highlightedEntry,t=a.secondaryActionHighlighted;b[13]!==s||b[14]!==h||b[15]!==k||b[16]!==l||b[17]!==p||b[18]!==t?(a=function(){s!=null?k==null?void 0:k(s,t):l&&l(p),h&&h()},b[13]=s,b[14]=h,b[15]=k,b[16]=l,b[17]=p,b[18]=t,b[19]=a):a=b[19];a=a;var u;b[20]!==g||b[21]!==p||b[22]!==a?(u={loggingProvider:g,onEnter:a,queryString:p},b[20]=g,b[21]=p,b[22]=a,b[23]=u):u=b[23];a=c("useCometInternalTypeaheadOnEnterLoggingHandler")(u);b[24]!==g||b[25]!==j||b[26]!==p?(u={loggingProvider:g,onFocus:j,queryString:p},b[24]=g,b[25]=j,b[26]=p,b[27]=u):u=b[27];j=c("useCometInternalTypeaheadOnFocusLoggingHandler")(u);b[28]!==r||b[29]!==k?(u=function(a,b){if(d("cometTypeaheadMouseUtils").hasModifierKeyPressed(b)){r.current&&r.current.focus();return}k&&k(a)},b[28]=r,b[29]=k,b[30]=u):u=b[30];u=u;var v;b[31]!==g||b[32]!==p||b[33]!==u?(v={loggingProvider:g,onPressEntry:u,queryString:p},b[31]=g,b[32]=p,b[33]=u,b[34]=v):v=b[34];u=c("useCometInternalTypeaheadOnPressEntryLoggingHandler")(v);b[35]!==g||b[36]!==m||b[37]!==p?(v={callback:m,loggingProvider:g,queryString:p},b[35]=g,b[36]=m,b[37]=p,b[38]=v):v=b[38];m=c("useCometInternalTypeaheadOnAbandonLoggingHandler")(v);b[39]!==g||b[40]!==n||b[41]!==p?(v={callback:n,loggingProvider:g,queryString:p},b[39]=g,b[40]=n,b[41]=p,b[42]=v):v=b[42];n=c("useCometInternalTypeaheadOnAbandonLoggingHandler")(v);b[43]!==g||b[44]!==p?(v={callback:c("emptyFunction"),loggingProvider:g,queryString:p},b[43]=g,b[44]=p,b[45]=v):v=b[45];v=c("useCometInternalTypeaheadOnAbandonLoggingHandler")(v);var w;b[46]!==g||b[47]!==p?(w={callback:c("emptyFunction"),loggingProvider:g,queryString:p},b[46]=g,b[47]=p,b[48]=w):w=b[48];w=c("useCometInternalTypeaheadOnAbandonLoggingHandler")(w);var x;b[49]!==g||b[50]!==p||b[51]!==q?(x=i.jsx(c("BaseTypeaheadDataFetchTrigger.react"),{loggingProvider:g,queryString:p,traceProvider:q}),b[49]=g,b[50]=p,b[51]=q,b[52]=x):x=b[52];b[53]!==e||b[54]!==f||b[55]!==w||b[56]!==a||b[57]!==j||b[58]!==v||b[59]!==u||b[60]!==m||b[61]!==n||b[62]!==o||b[63]!==p||b[64]!==q?(g=i.jsx(e,babelHelpers["extends"]({},o,{inputRef:f,onAbandonTypeahead_DO_NOT_USE:w,onClick:c("emptyFunction"),onEnter:a,onFocus:j,onHighlightEntry:o.onHighlightEntry,onOutsideClick:v,onPressEntry:u,onShiftTab:m,onTab:n,queryString:p,traceProvider:q,xstyles:o.xstyles})),b[53]=e,b[54]=f,b[55]=w,b[56]=a,b[57]=j,b[58]=v,b[59]=u,b[60]=m,b[61]=n,b[62]=o,b[63]=p,b[64]=q,b[65]=g):g=b[65];b[66]!==x||b[67]!==g?(e=i.jsxs(i.Fragment,{children:[x,g]}),b[66]=x,b[67]=g,b[68]=e):e=b[68];return e}g["default"]=a}),98);
__d("CometInternalTypeaheadEmptyFetchContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("CometInternalTypeaheadEmptyFetchProvider",["CometInternalTypeaheadEmptyFetchContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useLayoutEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(6),e=a.children,f=a.isLoading;a=a.source;var g=k(!0),h=g[0],l=g[1],m;b[0]!==f?(g=function(){f&&l(!1)},m=[f],b[0]=f,b[1]=g,b[2]=m):(g=b[1],m=b[2]);j(g,m);g=["all","network"].includes(a);m=!(g&&h||f);b[3]!==e||b[4]!==m?(a=i.jsx(c("CometInternalTypeaheadEmptyFetchContext").Provider,{value:m,children:e}),b[3]=e,b[4]=m,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("CometInternalTypeaheadStateDispatcherContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("useCometInternalTypeaheadStateDispatcher",["CometInternalTypeaheadStateDispatcherContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometInternalTypeaheadStateDispatcherContext"))}g["default"]=a}),98);
__d("CometInternalTypeaheadFetchProvider",["CometInternalTypeaheadEmptyFetchProvider","CometInternalTypeaheadFetchContext","react","react-compiler-runtime","useBaseTypeaheadDataSourceFetch","useCometInternalTypeaheadStateDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(20),e=a.children,f=a.dataSource,g=a.dataSourceFetchConfigParams,h=a.onFetchEntries_DO_NOT_USE,j=a.traceProvider;a=c("useCometInternalTypeaheadStateDispatcher")();var k=a.dispatchActiveEntries;b[0]!==k||b[1]!==h||b[2]!==j?(a=function(b,a){var c;b=b.entries;var d=a.isTraceComplete;a=a.source;k((c=b)!=null?c:[]);h&&h(b);j&&!j.isResolved()&&(d&&(a==="cache"&&b.length>=j.getEntriesCountForVisualComplete()?j.setEndReason("max_suggestions_reached"):a==="network"?j.setEndReason("all_queries_completed"):a==="network-no-results"&&j.setEndReason("all_queries_completed_no_network_results"),j.resolve()))},b[0]=k,b[1]=h,b[2]=j,b[3]=a):a=b[3];a=a;var l;b[4]!==f||b[5]!==g||b[6]!==a?(l={dataSource:f,dataSourceFetchConfigParams:g,onResolvePayload:a},b[4]=f,b[5]=g,b[6]=a,b[7]=l):l=b[7];f=c("useBaseTypeaheadDataSourceFetch")(l);g=f[0];a=f[1];l=f[2];f=g.isLoading;g=g.source;var m;b[8]!==a||b[9]!==f||b[10]!==l||b[11]!==g?(m={fetch:a,isLoading:f,refetch:l,source:g},b[8]=a,b[9]=f,b[10]=l,b[11]=g,b[12]=m):m=b[12];a=m;l=a;b[13]!==e||b[14]!==f||b[15]!==g?(m=i.jsx(c("CometInternalTypeaheadEmptyFetchProvider"),{isLoading:f,source:g,children:e}),b[13]=e,b[14]=f,b[15]=g,b[16]=m):m=b[16];b[17]!==m||b[18]!==l?(a=i.jsx(c("CometInternalTypeaheadFetchContext").Provider,{value:l,children:m}),b[17]=m,b[18]=l,b[19]=a):a=b[19];return a}g["default"]=a}),98);
__d("BaseTypeaheadLayoutContextualStrategyStateContextProvider.react",["BaseTypeaheadLayoutContextualStrategyStateContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.autoOpen,g=a.onClose,h=a.onOpen;a=j(f);var k=a[0],l=a[1];b[0]!==k||b[1]!==g||b[2]!==h?(f=function(a){if(a===k)return;l(a);a?h():g()},b[0]=k,b[1]=g,b[2]=h,b[3]=f):f=b[3];a=f;b[4]!==a||b[5]!==k?(f={dispatchIsOpened:a,isOpened:k},b[4]=a,b[5]=k,b[6]=f):f=b[6];a=f;f=a;b[7]!==e||b[8]!==f?(a=i.jsx(c("BaseTypeaheadLayoutContextualStrategyStateContext").Provider,{value:f,children:e}),b[7]=e,b[8]=f,b[9]=a):a=b[9];return a}g["default"]=a}),98);
__d("CometInternalTypeaheadStateProvider",["BaseTypeaheadLayoutContextualStrategyStateContextProvider.react","CometInternalTypeaheadStateContext","CometInternalTypeaheadStateDispatcherContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect;b.useMemo;var k=b.useRef,l=b.useState,m=[];function a(a){var b=d("react-compiler-runtime").c(19),e=a.autoOpen,f=a.children,g=a.emptyEntries_DO_NOT_USE,h=a.onClose;a=a.onOpen;var n=g===void 0?m:g;g=l(null);var o=g[0],p=g[1];g=l(null);var q=g[0],r=g[1];g=l(null);var s=g[0],t=g[1];g=l(n);var u=g[0],v=g[1],w=k(n),x;b[0]!==n?(g=function(){if(w.current===n)return;w.current=n;v(function(a){return a.length?a:n})},x=[v,w,n],b[0]=n,b[1]=g,b[2]=x):(g=b[1],x=b[2]);j(g,x);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){v(function(b){b=Array.isArray(a)?a:a(b);return b.length>0?b:w.current})},b[3]=g):g=b[3];x=g;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){var b=a.entry,c=a.secondaryActionHighlighted;a=a.source;p(b);t(a);r(c)},b[4]=g):g=b[4];g=g;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(x={dispatchActiveEntries:x,dispatchHighlightedEntry:g},b[5]=x):x=b[5];g=x;x=g;b[6]!==u||b[7]!==o||b[8]!==s||b[9]!==q?(g={activeEntries:u,highlightedEntry:o,highlightedEntrySource:s,secondaryActionHighlighted:q},b[6]=u,b[7]=o,b[8]=s,b[9]=q,b[10]=g):g=b[10];u=g;o=u;b[11]!==e||b[12]!==f||b[13]!==h||b[14]!==a?(s=i.jsx(c("BaseTypeaheadLayoutContextualStrategyStateContextProvider.react"),{autoOpen:e,onClose:h,onOpen:a,children:f}),b[11]=e,b[12]=f,b[13]=h,b[14]=a,b[15]=s):s=b[15];b[16]!==o||b[17]!==s?(q=i.jsx(c("CometInternalTypeaheadStateDispatcherContext").Provider,{value:x,children:i.jsx(c("CometInternalTypeaheadStateContext").Provider,{value:o,children:s})}),b[16]=o,b[17]=s,b[18]=q):q=b[18];return q}g["default"]=a}),98);
__d("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){var e=b.shouldQueryStringFollowHighlightedEntry;b=i.forwardRef(f);function f(b,f){var g=d("react-compiler-runtime").c(7),h,j;g[0]!==b?(h=b.queryString,j=babelHelpers.objectWithoutPropertiesLoose(b,["queryString"]),g[0]=b,g[1]=h,g[2]=j):(h=g[1],j=g[2]);b=c("useCometInternalTypeaheadState")();var k=b.highlightedEntry;b=b.highlightedEntrySource;b=e&&b==="keyboard"&&k!=null?k.label:h;g[3]!==f||g[4]!==b||g[5]!==j?(k=i.jsx(a,babelHelpers["extends"]({},j,{queryString:b,ref:f})),g[3]=f,g[4]=b,g[5]=j,g[6]=k):k=g[6];return k}return b}g["default"]=a}),98);
__d("BaseTypeahead.react",["CometHeroInteractionContextPassthrough.react","CometInternalTypeahead.react","CometInternalTypeaheadFetchProvider","CometInternalTypeaheadStateProvider","emptyFunction","react","react-compiler-runtime","withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useId;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(76),e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;b[0]!==a?(r=a.autoOpen,A=a.autoFocus,e=a.inputStrategyRenderer,g=a.dataSource,h=a.dataSourceFetchConfigParams,B=a.decorators,k=a.emptyEntries_DO_NOT_USE,n=a.id,C=a.isDisabled,D=a.label,m=a.loggingContext,E=a.onBackspace,F=a.onBlur,o=a.onChange,G=a.onClose,H=a.onEnter,s=a.onEscape,p=a.onFetchEntries_DO_NOT_USE,t=a.onFocus,u=a.onOpen,q=a.onPressEntry,v=a.placeholder,w=a.shouldQueryStringFollowHighlightedEntry,x=a.shouldQueryStringUpdateFromSelectedEntryOnClick,y=a.testid,I=a.traceProvider,z=a.viewRole,f=a.viewStrategyRenderer,l=a.inputRef,J=babelHelpers.objectWithoutPropertiesLoose(a,["autoOpen","autoFocus","inputStrategyRenderer","dataSource","dataSourceFetchConfigParams","decorators","emptyEntries_DO_NOT_USE","id","isDisabled","label","loggingContext","onBackspace","onBlur","onChange","onClose","onEnter","onEscape","onFetchEntries_DO_NOT_USE","onFocus","onOpen","onPressEntry","placeholder","shouldQueryStringFollowHighlightedEntry","shouldQueryStringUpdateFromSelectedEntryOnClick","testid","traceProvider","viewRole","viewStrategyRenderer","inputRef"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B,b[23]=C,b[24]=D,b[25]=E,b[26]=F,b[27]=G,b[28]=H,b[29]=I,b[30]=J):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22],C=b[23],D=b[24],E=b[25],F=b[26],G=b[27],H=b[28],I=b[29],J=b[30]);a=r===void 0?!1:r;r=A===void 0?!1:A;b[31]!==B?(A=B===void 0?[]:B,b[31]=B,b[32]=A):A=b[32];B=A;A=C===void 0?!1:C;C=D===void 0?"":D;D=E===void 0?c("emptyFunction"):E;E=F===void 0?c("emptyFunction"):F;F=G===void 0?c("emptyFunction"):G;G=H===void 0?c("emptyFunction"):H;H=s===void 0?c("emptyFunction"):s;s=t===void 0?c("emptyFunction"):t;t=u===void 0?c("emptyFunction"):u;u=v===void 0?"":v;v=w===void 0?!0:w;var K=x===void 0?!0:x;w=y===void 0?"":y;x=z===void 0?"listbox":z;y=j();var L;b[33]!==B?(L=c("CometInternalTypeahead.react"),B.forEach(function(a){var b=a.decorate;a=a.params;L=b(L,a)}),b[33]=B,b[34]=L):L=b[34];z=L;B=z;b[35]!==o||b[36]!==q||b[37]!==K?(z=function(a,b){K&&o(a.label),q==null?void 0:q(a,b)},b[35]=o,b[36]=q,b[37]=K,b[38]=z):z=b[38];z=z;var M;b[39]!==e||b[40]!==v?(M=c("withCometTypeaheadInputStrategyShouldQueryStringFollowHighlightedEntry")(e,{shouldQueryStringFollowHighlightedEntry:v}),b[39]=e,b[40]=v,b[41]=M):M=b[41];e=M;v=e;M=C||u;C=(e=n)!=null?e:y;if(b[42]!==v||b[43]!==B||b[44]!==f||b[45]!==r||b[46]!==l||b[47]!==D||b[48]!==E||b[49]!==G||b[50]!==H||b[51]!==s||b[52]!==z||b[53]!==A||b[54]!==o||b[55]!==u||b[56]!==M||b[57]!==C||b[58]!==w||b[59]!==I||b[60]!==J||b[61]!==x){e=i.jsx(B,babelHelpers["extends"]({},J,{autoFocus:r,id:C,inputRef:l,inputStrategyRenderer:v,isDisabled:A,label:M,onBackspace:D,onBlur:E,onChange:o,onDownArrow:n=c("emptyFunction"),onEnter:G,onEscape:H,onFocus:s,onHighlightEntry:n,onPressEntry:z,onShiftTab:n,onTab:n,onUpArrow:n,placeholder:u,testid:void 0,traceProvider:I,viewRole:x,viewStrategyRenderer:f}));b[42]=v;b[43]=B;b[44]=f;b[45]=r;b[46]=l;b[47]=D;b[48]=E;b[49]=G;b[50]=H;b[51]=s;b[52]=z;b[53]=A;b[54]=o;b[55]=u;b[56]=M;b[57]=C;b[58]=w;b[59]=I;b[60]=J;b[61]=x;b[62]=e}else e=b[62];b[63]!==g||b[64]!==h||b[65]!==m||b[66]!==p||b[67]!==e||b[68]!==I?(y=i.jsx(c("CometInternalTypeaheadFetchProvider"),{dataSource:g,dataSourceFetchConfigParams:h,loggingContext:m,onFetchEntries_DO_NOT_USE:p,traceProvider:I,children:e}),b[63]=g,b[64]=h,b[65]=m,b[66]=p,b[67]=e,b[68]=I,b[69]=y):y=b[69];b[70]!==a||b[71]!==k||b[72]!==F||b[73]!==t||b[74]!==y?(n=i.jsx(c("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:i.jsx(c("CometInternalTypeaheadStateProvider"),{autoOpen:a,emptyEntries_DO_NOT_USE:k,onClose:F,onOpen:t,children:y})}),b[70]=a,b[71]=k,b[72]=F,b[73]=t,b[74]=y,b[75]=n):n=b[75];return n}g["default"]=a}),98);
__d("CometTypeaheadHelperText.react",["FDSTextPairing.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.text;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x1xmf6yo",b[0]=e):e=b[0];b[1]!==a?(e=i.jsx("div",{className:e,children:i.jsx(c("FDSTextPairing.react"),{level:4,meta:a,metaColor:"secondary"})}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("cometTypeaheadInputWebkitStyles",[],(function(a,b,c,d,e,f,g){"use strict";a={"default":{appearance:"xtilpmw","::-webkit-search-cancel-button_appearance":"x1ad04t7","::-webkit-search-decoration_appearance":"x1glnyev","::-webkit-search-results-button_appearance":"x1ix68h3","::-webkit-search-results-decoration_appearance":"x19gujb8",$$css:!0}};b=a;g["default"]=b}),98);
__d("useCometTypeaheadInputStrategyOnChangeHandler",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(2),c=a.onChange;b[0]!==c?(a=function(a){var b=a.target.value;c&&c(b,a)},b[0]=c,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("CometTypeaheadInputRoundedStrategy.react",["ADD_PLACEHOLDER_OR_LABEL_FIXME","CometRoundedTextInput.react","FDSIcon.react","MagnifyingGlassFilled16IconSvg.react","UNTRANSLATED_STRING_FIXME","cometTypeaheadInputWebkitStyles","react","useCometTextDirection","useCometTypeaheadInputStrategyOnChangeHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=i.forwardRef(a);function a(a,b){var d=a.ariaProps;a.description;a.errorMessage;a.id;var e=a.inputEndContent,f=a.inputStartContent,g=a.inputExtraProps;g=g===void 0?{}:g;var h=g.hideIconOnFocus;h=h===void 0?!1:h;var j=g.hideIconAnimation;j=j===void 0?!1:j;var k=g.icon;k=k===void 0?i.jsx(c("FDSIcon.react"),{color:"secondary",icon:c("MagnifyingGlassFilled16IconSvg.react"),size:16}):k;var l=g.size;g=g.xstyle;g=g===void 0?null:g;var m=a.isDisabled,n=a.onChange,o=a.label;o=o===void 0?"":o;var p=a.queryString,q=a.testid;q=a.autoFocus;var r=a.placeholder;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","description","errorMessage","id","inputEndContent","inputStartContent","inputExtraProps","isDisabled","onChange","label","queryString","testid","autoFocus","placeholder"]);var s=c("useCometTextDirection")(p);n=c("useCometTypeaheadInputStrategyOnChangeHandler")({onChange:n});return i.jsxs("div",{className:"x6s0dn4 x78zum5 xh8yej3",children:[f,i.jsx(c("CometRoundedTextInput.react"),babelHelpers["extends"]({},d,a,{"aria-label":c("UNTRANSLATED_STRING_FIXME")(o.toString()),autoComplete:"off",autoFocus_PLEASE_USE_FOCUS_REGION_INSTEAD:q,"data-testid":void 0,dir:s,disabled:m,hideIconAnimation:j,hideIconOnFocus:h,icon:k,onChange:n,placeholder:(f=r)!=null?f:c("ADD_PLACEHOLDER_OR_LABEL_FIXME"),ref:b,size:l,spellCheck:!1,suppressHydrationWarning:!0,type:"search",value:p,xstyle:[g,c("cometTypeaheadInputWebkitStyles")["default"]]})),e]})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("useCometTypeaheadInputStrategyOnBlurHandler",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(2),c=a.onBlur;b[0]!==c?(a=function(){c&&c()},b[0]=c,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("useCometTypeaheadInputStrategyOnFocusHandler",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.inputRef,c=a.onFocus;return i(function(){b.current!=null&&b.current.select(),c&&c()},[b,c])}g["default"]=a}),98);
__d("useCometTypeaheadInputHandlers",["react-compiler-runtime","useCometTypeaheadInputStrategyOnBlurHandler","useCometTypeaheadInputStrategyOnFocusHandler"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(14),e,f,g,h;b[0]!==a?(e=a.inputRef,f=a.onBlur,g=a.onFocus,h=babelHelpers.objectWithoutPropertiesLoose(a,["inputRef","onBlur","onFocus"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);b[5]!==e||b[6]!==g?(a={inputRef:e,onFocus:g},b[5]=e,b[6]=g,b[7]=a):a=b[7];e=c("useCometTypeaheadInputStrategyOnFocusHandler")(a);b[8]!==f?(g={onBlur:f},b[8]=f,b[9]=g):g=b[9];a=c("useCometTypeaheadInputStrategyOnBlurHandler")(g);b[10]!==a||b[11]!==e||b[12]!==h?(f=babelHelpers["extends"]({},h,{onBlur:a,onFocus:e}),b[10]=a,b[11]=e,b[12]=h,b[13]=f):f=b[13];return f}g["default"]=a}),98);
__d("useCometTypeaheadInputRefsWebOnly",["react-compiler-runtime","useCometTypeaheadInputRefs","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=a!=null?d("xplatToDOMRef").xplatToInputRef(a):null,b[0]=a,b[1]=e):e=b[1];return c("useCometTypeaheadInputRefs")(e)}g["default"]=a}),98);
__d("CometTypeaheadInputStrategyEventListener.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","react","react-compiler-runtime","useCometTypeaheadInputHandlers","useCometTypeaheadInputRefsWebOnly"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useMemo;var k={root:{width:"xh8yej3",$$css:!0}};b=j.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(66),f,g,i,l,m,n,o,p,q,r,s,t,u;e[0]!==a?(f=a.children,i=a.isInline,u=a.omitEscape,l=a.onBackspace,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onLeftArrow,q=a.onRightArrow,r=a.onShiftTab,s=a.onTab,t=a.onUpArrow,g=babelHelpers.objectWithoutPropertiesLoose(a,["children","isInline","omitEscape","onBackspace","onDownArrow","onEnter","onEscape","onLeftArrow","onRightArrow","onShiftTab","onTab","onUpArrow"]),e[0]=a,e[1]=f,e[2]=g,e[3]=i,e[4]=l,e[5]=m,e[6]=n,e[7]=o,e[8]=p,e[9]=q,e[10]=r,e[11]=s,e[12]=t,e[13]=u):(f=e[1],g=e[2],i=e[3],l=e[4],m=e[5],n=e[6],o=e[7],p=e[8],q=e[9],r=e[10],s=e[11],t=e[12],u=e[13]);a=u===void 0?!1:u;var v;e[14]===Symbol["for"]("react.memo_cache_sentinel")?(u={key:c("CometKeys").DELETE},v=h._("__JHASH__2XTxAX3qgrF__JHASH__"),e[14]=u,e[15]=v):(u=e[14],v=e[15]);e[16]!==l?(u={command:u,description:v,handler:function(){return l&&l()},isHiddenCommand:!0,shouldPreventDefault:!1,triggerFromInputs:!0},e[16]=l,e[17]=u):u=e[17];var w;e[18]===Symbol["for"]("react.memo_cache_sentinel")?(v={key:c("CometKeys").DOWN},w=h._("__JHASH__CqK0EeqSMhz__JHASH__"),e[18]=v,e[19]=w):(v=e[18],w=e[19]);e[20]!==m?(v={command:v,description:w,handler:function(){return m&&m()},triggerFromInputs:!0},e[20]=m,e[21]=v):v=e[21];var x;e[22]===Symbol["for"]("react.memo_cache_sentinel")?(w={key:c("CometKeys").UP},x=h._("__JHASH__iUKjo5X2a54__JHASH__"),e[22]=x,e[23]=w):(x=e[22],w=e[23]);e[24]!==t?(w={command:w,description:x,handler:function(){return t&&t()},triggerFromInputs:!0},e[24]=t,e[25]=w):w=e[25];e[26]!==a||e[27]!==o?(x=a?null:{command:{key:c("CometKeys").ESCAPE},description:h._("__JHASH__wwSVh79-oc2__JHASH__"),handler:function(){return o&&o()},triggerFromInputs:!0},e[26]=a,e[27]=o,e[28]=x):x=e[28];var y;e[29]===Symbol["for"]("react.memo_cache_sentinel")?(a={key:c("CometKeys").ENTER},y=h._("__JHASH__mihpnKYilqe__JHASH__"),e[29]=a,e[30]=y):(a=e[29],y=e[30]);e[31]!==n?(a={command:a,description:y,handler:function(){return n&&n()},triggerFromInputs:!0},e[31]=n,e[32]=a):a=e[32];var z;e[33]===Symbol["for"]("react.memo_cache_sentinel")?(y={key:c("CometKeys").TAB},z=h._("__JHASH__Z6s23TRj9Pk__JHASH__"),e[33]=y,e[34]=z):(y=e[33],z=e[34]);e[35]!==s?(y={command:y,description:z,handler:function(){return s&&s()},isHiddenCommand:!0,shouldPreventDefault:!1,shouldStopPropagation:!1,triggerFromInputs:!0},e[35]=s,e[36]=y):y=e[36];var A;e[37]===Symbol["for"]("react.memo_cache_sentinel")?(z={key:c("CometKeys").TAB,shift:!0},A=h._("__JHASH__Z6s23TRj9Pk__JHASH__"),e[37]=z,e[38]=A):(z=e[37],A=e[38]);e[39]!==r?(z={command:z,description:A,handler:function(){return r&&r()},isHiddenCommand:!0,shouldPreventDefault:!1,shouldStopPropagation:!1,triggerFromInputs:!0},e[39]=r,e[40]=z):z=e[40];e[41]!==p?(A=p!=null?{command:{key:c("CometKeys").LEFT},description:h._("__JHASH__1sCLmeZcned__JHASH__"),handler:p,triggerFromInputs:!0}:null,e[41]=p,e[42]=A):A=e[42];e[43]!==q?(p=q!=null?{command:{key:c("CometKeys").RIGHT},description:h._("__JHASH__01-Oxa-x2ap__JHASH__"),handler:q,triggerFromInputs:!0}:null,e[43]=q,e[44]=p):p=e[44];e[45]!==w||e[46]!==x||e[47]!==a||e[48]!==y||e[49]!==z||e[50]!==A||e[51]!==p||e[52]!==u||e[53]!==v?(q=[u,v,w,x,a,y,z,A,p].filter(Boolean),e[45]=w,e[46]=x,e[47]=a,e[48]=y,e[49]=z,e[50]=A,e[51]=p,e[52]=u,e[53]=v,e[54]=q):q=e[54];w=q;x=w;a=c("useCometTypeaheadInputRefsWebOnly")(b);y=a.composedRef;z=a.inputRef;e[55]!==g||e[56]!==z?(A=babelHelpers["extends"]({inputRef:z},g),e[55]=g,e[56]=z,e[57]=A):A=e[57];p=c("useCometTypeaheadInputHandlers")(A);u=i===!0?"span":"div";e[58]!==f||e[59]!==y||e[60]!==p?(v=f(y,p),e[58]=f,e[59]=y,e[60]=p,e[61]=v):v=e[61];e[62]!==x||e[63]!==u||e[64]!==v?(q=j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:x,elementType:u,xstyle:k.root,children:v}),e[62]=x,e[63]=u,e[64]=v,e[65]=q):q=e[65];return q}e=b;g["default"]=e}),226);
__d("useCometTypeaheadViewStrategyOutsideClickListener",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect;function a(a,b){var c=i(function(c){var d=a.current;c=c.target;d!=null&&c instanceof Node&&!d.contains(c)&&b()},[a,b]);j(function(){document.addEventListener("click",c);return function(){document.removeEventListener("click",c)}},[c])}g["default"]=a}),98);
__d("CometTypeaheadViewStrategyEventListener.react",["react","useCometTypeaheadViewStrategyOutsideClickListener"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useRef;function a(a){var b=a.children;a=a.onOutsideClick;var d=i(null);c("useCometTypeaheadViewStrategyOutsideClickListener")(d,a);return b(d)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("cometHandleHighlightDropOnMouseLeave",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(){a(null,"mouse",!1)}}f["default"]=a}),66);
__d("CometTypeaheadInternalLayoutContextualStrategy.react",["CometContextualLayer.react","CometTypeaheadInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","react","react-compiler-runtime","stylex","useCometInternalTypeaheadState","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef;function a(a){var b=d("react-compiler-runtime").c(99),e,f,g,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;b[0]!==a?(B=a.contextualProps,g=a.description,i=a.errorMessage,C=a.extraLayoutProps,e=a.inputStrategyRenderer,m=a.label,n=a.onBackspace,o=a.onBlur,t=a.onFocus,p=a.onClick,q=a.onDownArrow,u=a.onLeftArrow,v=a.onRightArrow,r=a.onEnter,s=a.onEscape,w=a.onShiftTab,x=a.onTab,y=a.onUpArrow,A=a.queryString,l=a.inputRef,f=a.viewStrategyRenderer,D=a.xstyles,z=babelHelpers.objectWithoutPropertiesLoose(a,["contextualProps","description","errorMessage","extraLayoutProps","inputStrategyRenderer","label","onBackspace","onBlur","onFocus","onClick","onDownArrow","onLeftArrow","onRightArrow","onEnter","onEscape","onShiftTab","onTab","onUpArrow","queryString","inputRef","viewStrategyRenderer","xstyles"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=l,b[6]=m,b[7]=n,b[8]=o,b[9]=p,b[10]=q,b[11]=r,b[12]=s,b[13]=t,b[14]=u,b[15]=v,b[16]=w,b[17]=x,b[18]=y,b[19]=z,b[20]=A,b[21]=B,b[22]=C,b[23]=D):(e=b[1],f=b[2],g=b[3],i=b[4],l=b[5],m=b[6],n=b[7],o=b[8],p=b[9],q=b[10],r=b[11],s=b[12],t=b[13],u=b[14],v=b[15],w=b[16],x=b[17],y=b[18],z=b[19],A=b[20],B=b[21],C=b[22],D=b[23]);b[24]!==B?(a=B===void 0?{}:B,b[24]=B,b[25]=a):a=b[25];var E,F;if(b[26]!==a){B=a;E=B.align;F=B.position;B=babelHelpers.objectWithoutPropertiesLoose(B,["align","position"]);b[26]=a;b[27]=B;b[28]=E;b[29]=F}else B=b[27],E=b[28],F=b[29];a=E===void 0?"stretch":E;E=F===void 0?"below":F;F=C;C=F.ariaProps;var G=F.helperTextComponent,H=F.isAlwaysOpened,I=F.isLoading;F=F.isOpened;var J=C.ariaDescribedByProps,K=C.ariaInputProps,L=C.ariaViewProps;C=k(null);var M=k(null),N=c("useCometInternalTypeaheadState")(),O=N.activeEntries,P=N.highlightedEntry;b[30]!==z.onHighlightEntry?(N=c("cometHandleHighlightDropOnMouseLeave")(z.onHighlightEntry),b[30]=z.onHighlightEntry,b[31]=N):N=b[31];var Q=N;N=(N=D)==null?void 0:N.layoutXStyle;var R;b[32]!==N?(R=(h||(h=c("stylex")))(N),b[32]=N,b[33]=R):R=b[33];N=(N=D)==null?void 0:N.inputXStyle;var S;b[34]!==N?(S=(h||(h=c("stylex")))(N),b[34]=N,b[35]=S):S=b[35];N=F===!1&&A==="";var T;b[36]!==e||b[37]!==K||b[38]!==g||b[39]!==i||b[40]!==m||b[41]!==z.autoFocus||b[42]!==z.id||b[43]!==z.inputEndContent||b[44]!==z.inputExtraProps||b[45]!==z.inputStartContent||b[46]!==z.isDisabled||b[47]!==z.placeholder||b[48]!==z.testid||b[49]!==A?(T=function(a,b){return j.jsx(e,babelHelpers["extends"]({},b,{ariaProps:K,autoFocus:z.autoFocus,description:g,errorMessage:i,id:z.id,inputEndContent:z.inputEndContent,inputExtraProps:z.inputExtraProps,inputStartContent:z.inputStartContent,isDisabled:z.isDisabled,label:m,placeholder:z.placeholder,queryString:A,ref:d("xplatToDOMRef").xplatToInputRef(a),testid:void 0}))},b[36]=e,b[37]=K,b[38]=g,b[39]=i,b[40]=m,b[41]=z.autoFocus,b[42]=z.id,b[43]=z.inputEndContent,b[44]=z.inputExtraProps,b[45]=z.inputStartContent,b[46]=z.isDisabled,b[47]=z.placeholder,b[48]=z.testid,b[49]=A,b[50]=T):T=b[50];var U;b[51]!==l||b[52]!==n||b[53]!==o||b[54]!==p||b[55]!==q||b[56]!==r||b[57]!==s||b[58]!==t||b[59]!==u||b[60]!==v||b[61]!==w||b[62]!==x||b[63]!==y||b[64]!==z.onChange||b[65]!==N||b[66]!==T?(U=j.jsx(c("CometTypeaheadInputStrategyEventListener.react"),{omitEscape:N,onBackspace:n,onBlur:o,onChange:z.onChange,onClick:p,onDownArrow:q,onEnter:r,onEscape:s,onFocus:t,onLeftArrow:u,onRightArrow:v,onShiftTab:w,onTab:x,onUpArrow:y,ref:l,children:T}),b[51]=l,b[52]=n,b[53]=o,b[54]=p,b[55]=q,b[56]=r,b[57]=s,b[58]=t,b[59]=u,b[60]=v,b[61]=w,b[62]=x,b[63]=y,b[64]=z.onChange,b[65]=N,b[66]=T,b[67]=U):U=b[67];b[68]!==S||b[69]!==U?(l=j.jsx("div",{className:S,children:U}),b[68]=S,b[69]=U,b[70]=l):l=b[70];b[71]!==l||b[72]!==R?(n=j.jsx("div",{className:R,ref:M,children:l}),b[71]=l,b[72]=R,b[73]=n):n=b[73];b[74]!==J||b[75]!==G?(o=G!=null&&j.jsx("div",babelHelpers["extends"]({className:"x1xmf6yo"},J,{children:G})),b[74]=J,b[75]=G,b[76]=o):o=b[76];if(b[77]!==f||b[78]!==O||b[79]!==a||b[80]!==L||b[81]!==B||b[82]!==P||b[83]!==H||b[84]!==I||b[85]!==F||b[86]!==Q||b[87]!==E||b[88]!==z.onAbandonTypeahead_DO_NOT_USE||b[89]!==z.onHighlightEntry||b[90]!==z.onOutsideClick||b[91]!==z.onPressEntry||b[92]!==A||b[93]!==((p=D)==null?void 0:p.viewXStyle_DO_NOT_USE)){q=(F===!0||H===!0)&&j.jsx(c("CometContextualLayer.react"),babelHelpers["extends"]({},B,{align:a,contextRef:M,position:E,ref:C,children:j.jsx(c("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:z.onOutsideClick,children:function(a){var b;return j.jsx("div",{className:(h||(h=c("stylex")))((b=D)==null?void 0:b.viewXStyle_DO_NOT_USE),onMouseLeave:Q,ref:a,children:j.jsx(f,{ariaProps:L,entries:O,highlightedEntry:P,isLoading:I,onAbandonTypeahead_DO_NOT_USE:z.onAbandonTypeahead_DO_NOT_USE,onHighlightEntry:z.onHighlightEntry,onPressEntry:z.onPressEntry,queryString:A})})}})}));b[77]=f;b[78]=O;b[79]=a;b[80]=L;b[81]=B;b[82]=P;b[83]=H;b[84]=I;b[85]=F;b[86]=Q;b[87]=E;b[88]=z.onAbandonTypeahead_DO_NOT_USE;b[89]=z.onHighlightEntry;b[90]=z.onOutsideClick;b[91]=z.onPressEntry;b[92]=A;b[93]=(r=D)==null?void 0:r.viewXStyle_DO_NOT_USE;b[94]=q}else q=b[94];b[95]!==n||b[96]!==o||b[97]!==q?(s=j.jsxs(j.Fragment,{children:[n,o,q]}),b[95]=n,b[96]=o,b[97]=q,b[98]=s):s=b[98];return s}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyStyles",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i={defaultLayout:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",$$css:!0},stateDisabled:{$$css:!0},stateError:{$$css:!0},stateOpened:{$$css:!0},stateWarning:{$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(13),c=a.isDisabled,e=a.isError,f=a.isOpened,g=a.isWarning;a=a.xstyles;c=c===void 0?!1:c;e=e===void 0?!1:e;f=f===void 0?!1:f;g=g===void 0?!1:g;var h=a.inputXStyle,j=a.layoutOpenedXStyle,k=a.layoutXStyle;a=a.viewXStyle_DO_NOT_USE;j=f&&j;c=c&&i.stateDisabled;f=f&&i.stateOpened;e=e&&i.stateError;g=g&&i.stateWarning;var l;b[0]!==k||b[1]!==e||b[2]!==g||b[3]!==j||b[4]!==c||b[5]!==f?(l=[i.defaultLayout,k,j,c,f,e,g],b[0]=k,b[1]=e,b[2]=g,b[3]=j,b[4]=c,b[5]=f,b[6]=l):l=b[6];b[7]!==a?(k=[a],b[7]=a,b[8]=k):k=b[8];b[9]!==h||b[10]!==l||b[11]!==k?(e={inputXStyle:h,layoutXStyle:l,viewXStyle_DO_NOT_USE:k},b[9]=h,b[10]=l,b[11]=k,b[12]=e):e=b[12];g=e;return g}g["default"]=a}),98);
__d("CometTypeaheadInternalLayoutInlineStrategy.react",["CometTypeaheadInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","react","react-compiler-runtime","react-strict-dom","useCometInternalTypeaheadState","useCometTypeaheadLayoutStrategyStyles"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={helperText:{marginTop:"x1xmf6yo",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(92),e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;b[0]!==a?(D=a.extraLayoutProps,g=a.description,h=a.errorMessage,k=a.extraViewProps,m=a.id,e=a.inputStrategyRenderer,n=a.label,o=a.onBackspace,p=a.onBlur,q=a.onChange,r=a.onClick,s=a.onDownArrow,w=a.onLeftArrow,x=a.onRightArrow,t=a.onEnter,u=a.onEscape,v=a.onFocus,y=a.onShiftTab,z=a.onTab,A=a.onUpArrow,C=a.queryString,l=a.inputRef,f=a.viewStrategyRenderer,E=a.xstyles,B=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","description","errorMessage","extraViewProps","id","inputStrategyRenderer","label","onBackspace","onBlur","onChange","onClick","onDownArrow","onLeftArrow","onRightArrow","onEnter","onEscape","onFocus","onShiftTab","onTab","onUpArrow","queryString","inputRef","viewStrategyRenderer","xstyles"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B,b[23]=C,b[24]=D,b[25]=E):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22],C=b[23],D=b[24],E=b[25]);a=D;D=a.ariaProps;var F=a.helperTextComponent,G=a.isAlwaysOpened,H=a.isLoading;a=a.isOpened;var I=D.ariaDescribedByProps,J=D.ariaInputProps,K=D.ariaViewProps;b[26]!==E?(D=E===void 0?{}:E,b[26]=E,b[27]=D):D=b[27];E=D;D=c("useCometInternalTypeaheadState")();var L=D.activeEntries,M=D.highlightedEntry;b[28]!==a||b[29]!==E?(D={isOpened:a,xstyles:E},b[28]=a,b[29]=E,b[30]=D):D=b[30];E=c("useCometTypeaheadLayoutStrategyStyles")(D);D=E.inputXStyle;var N=E.layoutXStyle,O=E.viewXStyle_DO_NOT_USE;b[31]!==B.onHighlightEntry?(E=c("cometHandleHighlightDropOnMouseLeave")(B.onHighlightEntry),b[31]=B.onHighlightEntry,b[32]=E):E=b[32];var P=E;E=G===!0?C==="":a===!1&&C==="";var Q;b[33]!==e||b[34]!==J||b[35]!==g||b[36]!==h||b[37]!==m||b[38]!==n||b[39]!==B.autoFocus||b[40]!==B.inputEndContent||b[41]!==B.inputExtraProps||b[42]!==B.inputStartContent||b[43]!==B.isDisabled||b[44]!==B.placeholder||b[45]!==B.testid||b[46]!==C?(Q=function(a,b){return i.jsx(e,babelHelpers["extends"]({},b,{ariaProps:J,autoFocus:B.autoFocus,description:g,errorMessage:h,id:m,inputEndContent:B.inputEndContent,inputExtraProps:B.inputExtraProps,inputStartContent:B.inputStartContent,isDisabled:B.isDisabled,label:n,placeholder:B.placeholder,queryString:C,ref:a,testid:void 0}))},b[33]=e,b[34]=J,b[35]=g,b[36]=h,b[37]=m,b[38]=n,b[39]=B.autoFocus,b[40]=B.inputEndContent,b[41]=B.inputExtraProps,b[42]=B.inputStartContent,b[43]=B.isDisabled,b[44]=B.placeholder,b[45]=B.testid,b[46]=C,b[47]=Q):Q=b[47];var R;b[48]!==l||b[49]!==o||b[50]!==p||b[51]!==q||b[52]!==r||b[53]!==s||b[54]!==t||b[55]!==u||b[56]!==v||b[57]!==w||b[58]!==x||b[59]!==y||b[60]!==z||b[61]!==A||b[62]!==E||b[63]!==Q?(R=i.jsx(c("CometTypeaheadInputStrategyEventListener.react"),{omitEscape:E,onBackspace:o,onBlur:p,onChange:q,onClick:r,onDownArrow:s,onEnter:t,onEscape:u,onFocus:v,onLeftArrow:w,onRightArrow:x,onShiftTab:y,onTab:z,onUpArrow:A,ref:l,children:Q}),b[48]=l,b[49]=o,b[50]=p,b[51]=q,b[52]=r,b[53]=s,b[54]=t,b[55]=u,b[56]=v,b[57]=w,b[58]=x,b[59]=y,b[60]=z,b[61]=A,b[62]=E,b[63]=Q,b[64]=R):R=b[64];b[65]!==D||b[66]!==R?(l=i.jsx(d("react-strict-dom").html.div,{style:D,children:R}),b[65]=D,b[66]=R,b[67]=l):l=b[67];b[68]!==I||b[69]!==F?(o=F!=null&&i.jsx(d("react-strict-dom").html.div,babelHelpers["extends"]({style:j.helperText},I,{children:F})),b[68]=I,b[69]=F,b[70]=o):o=b[70];b[71]!==f||b[72]!==L||b[73]!==K||b[74]!==k||b[75]!==M||b[76]!==G||b[77]!==H||b[78]!==a||b[79]!==P||b[80]!==B.onAbandonTypeahead_DO_NOT_USE||b[81]!==B.onHighlightEntry||b[82]!==B.onOutsideClick||b[83]!==B.onPressEntry||b[84]!==C||b[85]!==O?(p=(a===!0||G===!0)&&i.jsx(c("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:B.onOutsideClick,children:function(a){return i.jsx(d("react-strict-dom").html.div,{onMouseLeave:P,ref:a,style:O,children:i.jsx(f,{ariaProps:K,entries:L,extraViewProps:k,highlightedEntry:M,isLoading:H,onAbandonTypeahead_DO_NOT_USE:B.onAbandonTypeahead_DO_NOT_USE,onHighlightEntry:B.onHighlightEntry,onPressEntry:B.onPressEntry,queryString:C})})}}),b[71]=f,b[72]=L,b[73]=K,b[74]=k,b[75]=M,b[76]=G,b[77]=H,b[78]=a,b[79]=P,b[80]=B.onAbandonTypeahead_DO_NOT_USE,b[81]=B.onHighlightEntry,b[82]=B.onOutsideClick,b[83]=B.onPressEntry,b[84]=C,b[85]=O,b[86]=p):p=b[86];b[87]!==N||b[88]!==l||b[89]!==o||b[90]!==p?(q=i.jsxs(d("react-strict-dom").html.div,{style:N,children:[l,o,p]}),b[87]=N,b[88]=l,b[89]=o,b[90]=p,b[91]=q):q=b[91];return q}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnBlurHandler",["react","react-compiler-runtime","useCometInternalTypeaheadStateDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(3),e=a.onBlur;a=c("useCometInternalTypeaheadStateDispatcher")();var f=a.dispatchHighlightedEntry;b[0]!==f||b[1]!==e?(a=function(){f({entry:null,secondaryActionHighlighted:!1,source:null}),e&&e()},b[0]=f,b[1]=e,b[2]=a):a=b[2];return a}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnChangeHandler",["react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(4),e=a.onChange,f=a.onHighlightEntry;a=c("useCometInternalTypeaheadState")();var g=a.highlightedEntry;b[0]!==g||b[1]!==e||b[2]!==f?(a=function(a,b){g!=null&&f(null,"keyboard",!1),e&&e(a,b)},b[0]=g,b[1]=e,b[2]=f,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("useCometInternalTypeaheadKeyboardNavigation",["baseTypeaheadFlattenEntries","cometTypeaheadKeyboardNavigationUtils","react","react-compiler-runtime","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useMemo;function a(){var a=d("react-compiler-runtime").c(26),b=c("useCometInternalTypeaheadState")(),e=b.activeEntries,f=b.highlightedEntry,g=b.secondaryActionHighlighted,h;a[0]!==e?(h=c("baseTypeaheadFlattenEntries")(e),b=h.every(i),a[0]=e,a[1]=h,a[2]=b):(h=a[1],b=a[2]);e=b;var j=f!=null?f.key:null;a[3]!==j||a[4]!==g||a[5]!==h?(b=function(a){return d("cometTypeaheadKeyboardNavigationUtils").moveDown(h,j,function(b,c){a(b,"keyboard",c)},g)},a[3]=j,a[4]=g,a[5]=h,a[6]=b):b=a[6];f=b;a[7]!==j||a[8]!==g||a[9]!==h?(b=function(a){return d("cometTypeaheadKeyboardNavigationUtils").moveUp(h,j,function(b,c){a(b,"keyboard",c)},g)},a[7]=j,a[8]=g,a[9]=h,a[10]=b):b=a[10];b=b;var k;a[11]!==j||a[12]!==g||a[13]!==h||a[14]!==e?(k=e?function(a){return d("cometTypeaheadKeyboardNavigationUtils").moveLeft(h,j,function(b,c){a(b,"keyboard",c)},g)}:void 0,a[11]=j,a[12]=g,a[13]=h,a[14]=e,a[15]=k):k=a[15];k=k;k=k;var l;a[16]!==j||a[17]!==g||a[18]!==h||a[19]!==e?(l=e?function(a){d("cometTypeaheadKeyboardNavigationUtils").moveRight(h,j,function(b,c){a(b,"keyboard",c)},g)}:void 0,a[16]=j,a[17]=g,a[18]=h,a[19]=e,a[20]=l):l=a[20];e=l;l=e;a[21]!==f||a[22]!==k||a[23]!==l||a[24]!==b?(e={onKeyboardDownArrow:f,onKeyboardLeftArrow:k,onKeyboardRightArrow:l,onKeyboardUpArrow:b},a[21]=f,a[22]=k,a[23]=l,a[24]=b,a[25]=e):e=a[25];return e}function i(a){return a.hasSecondaryAction===!0}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnDownArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(4),e=a.onDownArrow,f=a.onHighlightEntry;a=c("useCometInternalTypeaheadKeyboardNavigation")();var g=a.onKeyboardDownArrow;b[0]!==e||b[1]!==f||b[2]!==g?(a=function(){g(f),e&&e()},b[0]=e,b[1]=f,b[2]=g,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnEnterHandler",["react","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.inputRef,d=a.onEnter;a=c("useCometInternalTypeaheadState")();var e=a.highlightedEntry,f=a.highlightedEntrySource,g=b.current;return i(function(){var a;a=(a=g==null?void 0:g.value)!=null?a:"";var b=e!=null&&f==="keyboard";if(a.trim().length===0&&!b)return;d&&d()},[g,e,f,d])}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnHighlightEntryHandler",["react","react-compiler-runtime","useCometInternalTypeaheadStateDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(3),e=a.onHighlightEntry;a=c("useCometInternalTypeaheadStateDispatcher")();var f=a.dispatchHighlightedEntry;b[0]!==f||b[1]!==e?(a=function(a,b,c){f({entry:a,secondaryActionHighlighted:c,source:b}),e&&e(a,b,c)},b[0]=f,b[1]=e,b[2]=a):a=b[2];return a}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnLeftArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(4),e=a.onHighlightEntry,f=a.onLeftArrow;a=c("useCometInternalTypeaheadKeyboardNavigation")();var g=a.onKeyboardLeftArrow;b[0]!==e||b[1]!==g||b[2]!==f?(a=g!=null||f!=null?function(){g==null?void 0:g(e),f==null?void 0:f()}:void 0,b[0]=e,b[1]=g,b[2]=f,b[3]=a):a=b[3];b=a;return b}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnOutsideClickHandler",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.inputRef,c=a.onOutsideClick;return i(function(){if(b.current===document.activeElement)return;c&&c()},[b,c])}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnPressEntryHandler",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(2),c=a.onPressEntry;b[0]!==c?(a=function(a,b){c(a,b)},b[0]=c,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnRightArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(4),e=a.onHighlightEntry,f=a.onRightArrow;a=c("useCometInternalTypeaheadKeyboardNavigation")();var g=a.onKeyboardRightArrow;b[0]!==e||b[1]!==g||b[2]!==f?(a=g!=null||f!=null?function(){g==null?void 0:g(e),f==null?void 0:f()}:void 0,b[0]=e,b[1]=g,b[2]=f,b[3]=a):a=b[3];b=a;return b}g["default"]=a}),98);
__d("useCometTypeaheadLayoutStrategyOnUpArrowHandler",["react","react-compiler-runtime","useCometInternalTypeaheadKeyboardNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(4),e=a.onHighlightEntry,f=a.onUpArrow;a=c("useCometInternalTypeaheadKeyboardNavigation")();var g=a.onKeyboardUpArrow;b[0]!==e||b[1]!==g||b[2]!==f?(a=function(){g(e),f&&f()},b[0]=e,b[1]=g,b[2]=f,b[3]=a):a=b[3];return a}g["default"]=a}),98);
__d("useCometTypeaheadInternalLayoutInlineStrategyHandlers",["react","react-compiler-runtime","useCometTypeaheadLayoutStrategyOnBlurHandler","useCometTypeaheadLayoutStrategyOnChangeHandler","useCometTypeaheadLayoutStrategyOnDownArrowHandler","useCometTypeaheadLayoutStrategyOnEnterHandler","useCometTypeaheadLayoutStrategyOnHighlightEntryHandler","useCometTypeaheadLayoutStrategyOnLeftArrowHandler","useCometTypeaheadLayoutStrategyOnOutsideClickHandler","useCometTypeaheadLayoutStrategyOnPressEntryHandler","useCometTypeaheadLayoutStrategyOnRightArrowHandler","useCometTypeaheadLayoutStrategyOnUpArrowHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(42),e=a.inputRef,f=a.onBlur,g=a.onChange,h=a.onDownArrow,i=a.onEnter,j=a.onEscape,k=a.onHighlightEntry,l=a.onLeftArrow,m=a.onOutsideClick,n=a.onPressEntry,o=a.onRightArrow;a=a.onUpArrow;var p;b[0]!==k?(p={onHighlightEntry:k},b[0]=k,b[1]=p):p=b[1];k=c("useCometTypeaheadLayoutStrategyOnHighlightEntryHandler")(p);b[2]!==f?(p={onBlur:f},b[2]=f,b[3]=p):p=b[3];f=c("useCometTypeaheadLayoutStrategyOnBlurHandler")(p);b[4]!==k||b[5]!==g?(p={onChange:g,onHighlightEntry:k},b[4]=k,b[5]=g,b[6]=p):p=b[6];var q=c("useCometTypeaheadLayoutStrategyOnChangeHandler")(p);b[7]!==e||b[8]!==i?(g={inputRef:e,onEnter:i},b[7]=e,b[8]=i,b[9]=g):g=b[9];p=c("useCometTypeaheadLayoutStrategyOnEnterHandler")(g);b[10]!==q||b[11]!==j?(i=function(){q(""),j&&j()},b[10]=q,b[11]=j,b[12]=i):i=b[12];g=i;b[13]!==k||b[14]!==h?(i={onDownArrow:h,onHighlightEntry:k},b[13]=k,b[14]=h,b[15]=i):i=b[15];h=c("useCometTypeaheadLayoutStrategyOnDownArrowHandler")(i);b[16]!==k||b[17]!==a?(i={onHighlightEntry:k,onUpArrow:a},b[16]=k,b[17]=a,b[18]=i):i=b[18];a=c("useCometTypeaheadLayoutStrategyOnUpArrowHandler")(i);b[19]!==n?(i={onPressEntry:n},b[19]=n,b[20]=i):i=b[20];n=c("useCometTypeaheadLayoutStrategyOnPressEntryHandler")(i);b[21]!==e||b[22]!==m?(i={inputRef:e,onOutsideClick:m},b[21]=e,b[22]=m,b[23]=i):i=b[23];e=c("useCometTypeaheadLayoutStrategyOnOutsideClickHandler")(i);b[24]!==k||b[25]!==l?(m={onHighlightEntry:k,onLeftArrow:l},b[24]=k,b[25]=l,b[26]=m):m=b[26];i=c("useCometTypeaheadLayoutStrategyOnLeftArrowHandler")(m);b[27]!==k||b[28]!==o?(l={onHighlightEntry:k,onRightArrow:o},b[27]=k,b[28]=o,b[29]=l):l=b[29];m=c("useCometTypeaheadLayoutStrategyOnRightArrowHandler")(l);b[30]!==f||b[31]!==q||b[32]!==h||b[33]!==p||b[34]!==g||b[35]!==k||b[36]!==i||b[37]!==e||b[38]!==n||b[39]!==m||b[40]!==a?(o={onBlur:f,onChange:q,onDownArrow:h,onEnter:p,onEscape:g,onHighlightEntry:k,onLeftArrow:i,onOutsideClick:e,onPressEntry:n,onRightArrow:m,onUpArrow:a},b[30]=f,b[31]=q,b[32]=h,b[33]=p,b[34]=g,b[35]=k,b[36]=i,b[37]=e,b[38]=n,b[39]=m,b[40]=a,b[41]=o):o=b[41];return o}g["default"]=a}),98);
__d("useCometTypeaheadInternalLayoutContextualStrategyHandlers",["react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadState","useCometTypeaheadInternalLayoutInlineStrategyHandlers"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(76),e=a.handlers,f=a.inputRef,g=a.shouldCloseOnEnter;a=a.shouldHandleCloseAfterHandlePressEntry;var h,i,j,k,l,m;b[0]!==e?(i=e.onAbandonTypeahead_DO_NOT_USE,j=e.onClick,k=e.onOutsideClick,l=e.onShiftTab,m=e.onTab,h=babelHelpers.objectWithoutPropertiesLoose(e,["onAbandonTypeahead_DO_NOT_USE","onClick","onOutsideClick","onShiftTab","onTab"]),b[0]=e,b[1]=h,b[2]=i,b[3]=j,b[4]=k,b[5]=l,b[6]=m):(h=b[1],i=b[2],j=b[3],k=b[4],l=b[5],m=b[6]);var n=g===void 0?!0:g,o=a===void 0?!1:a;e=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();var p=e.dispatchIsOpened,q=e.isOpened;g=c("useCometInternalTypeaheadState")();var r=g.highlightedEntry,s=g.secondaryActionHighlighted;b[7]!==p||b[8]!==k?(a=function(){p(!1),k&&k()},b[7]=p,b[8]=k,b[9]=a):a=b[9];e=a;b[10]!==e||b[11]!==h||b[12]!==f?(g=babelHelpers["extends"]({inputRef:f,onOutsideClick:e},h),b[10]=e,b[11]=h,b[12]=f,b[13]=g):g=b[13];a=c("useCometTypeaheadInternalLayoutInlineStrategyHandlers")(g);e=a.onBlur;var t=a.onChange,u=a.onDownArrow,v=a.onEnter,w=a.onEscape;f=a.onHighlightEntry;var x=a.onLeftArrow;g=a.onOutsideClick;var y=a.onPressEntry,z=a.onRightArrow,A=a.onUpArrow;b[14]!==p||b[15]!==i?(a=function(){p(!1),i&&i()},b[14]=p,b[15]=i,b[16]=a):a=b[16];a=a;var B;b[17]!==p||b[18]!==j?(B=function(){p(!0),j&&j()},b[17]=p,b[18]=j,b[19]=B):B=b[19];B=B;var C;b[20]!==p||b[21]!==t?(C=function(a,b){p(!0),t&&t(a,b)},b[20]=p,b[21]=t,b[22]=C):C=b[22];C=C;var D;b[23]!==p||b[24]!==q||b[25]!==u?(D=function(){q?u&&u():p(!0)},b[23]=p,b[24]=q,b[25]=u,b[26]=D):D=b[26];D=D;var E;b[27]!==p||b[28]!==q||b[29]!==x?(E=x!=null?function(){x!=null&&(q?x():p(!0))}:void 0,b[27]=p,b[28]=q,b[29]=x,b[30]=E):E=b[30];E=E;E=E;var F;b[31]!==p||b[32]!==q||b[33]!==z?(F=z!=null?function(){z!=null&&(q?z():p(!0))}:void 0,b[31]=p,b[32]=q,b[33]=z,b[34]=F):F=b[34];F=F;F=F;var G;b[35]!==p||b[36]!==r||b[37]!==v||b[38]!==s||b[39]!==n?(G=function(){s!==!0&&((n||r!=null&&!n)&&p(!1)),v&&v()},b[35]=p,b[36]=r,b[37]=v,b[38]=s,b[39]=n,b[40]=G):G=b[40];G=G;var H;b[41]!==p||b[42]!==h||b[43]!==q||b[44]!==w?(H=function(){q?(p(!1),h.onEscape&&h.onEscape()):w&&w()},b[41]=p,b[42]=h,b[43]=q,b[44]=w,b[45]=H):H=b[45];H=H;var I;b[46]!==p||b[47]!==y||b[48]!==o?(I=function(a,b){o||p(!1),y&&y(a,b),o&&p(!1)},b[46]=p,b[47]=y,b[48]=o,b[49]=I):I=b[49];I=I;var J;b[50]!==p||b[51]!==l?(J=function(){p(!1),l&&l()},b[50]=p,b[51]=l,b[52]=J):J=b[52];J=J;var K;b[53]!==p||b[54]!==m?(K=function(){p(!1),m&&m()},b[53]=p,b[54]=m,b[55]=K):K=b[55];K=K;var L;b[56]!==p||b[57]!==q||b[58]!==A?(L=function(){!q?p(!0):A&&A()},b[56]=p,b[57]=q,b[58]=A,b[59]=L):L=b[59];L=L;var M;b[60]!==a||b[61]!==C||b[62]!==B||b[63]!==D||b[64]!==G||b[65]!==H||b[66]!==E||b[67]!==I||b[68]!==F||b[69]!==J||b[70]!==K||b[71]!==L||b[72]!==e||b[73]!==f||b[74]!==g?(M={onAbandonTypeahead_DO_NOT_USE:a,onBlur:e,onChange:C,onClick:B,onDownArrow:D,onEnter:G,onEscape:H,onHighlightEntry:f,onLeftArrow:E,onOutsideClick:g,onPressEntry:I,onRightArrow:F,onShiftTab:J,onTab:K,onUpArrow:L},b[60]=a,b[61]=C,b[62]=B,b[63]=D,b[64]=G,b[65]=H,b[66]=E,b[67]=I,b[68]=F,b[69]=J,b[70]=K,b[71]=L,b[72]=e,b[73]=f,b[74]=g,b[75]=M):M=b[75];return M}g["default"]=a}),98);
__d("CometTypeaheadLayoutContextualStrategy.react",["CometTypeaheadHelperText.react","CometTypeaheadInternalLayoutContextualStrategy.react","react","react-compiler-runtime","useBaseTypeaheadLayoutContextualStrategyStateContext","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState","useCometTypeaheadInputRefs","useCometTypeaheadInternalLayoutContextualStrategyHandlers","useCometTypeaheadLayoutContextualStrategyARIAProps","useCometTypeaheadLayoutStrategyStyles"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={view:{backgroundColor:"x1jx94hy",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"xbsqzb3",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginTop:"xr9ek0c",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(82),e,f,g,h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;b[0]!==a?(x=a.extraLayoutProps,f=a.helperText,g=a.label,h=a.onAbandonTypeahead_DO_NOT_USE,k=a.onBlur,l=a.onChange,m=a.onClick,n=a.onDownArrow,o=a.onEnter,p=a.onEscape,q=a.onHighlightEntry,r=a.onOutsideClick,s=a.onPressEntry,t=a.onShiftTab,u=a.onTab,v=a.onUpArrow,B=a.viewRole,e=a.inputRef,y=a.shouldHandleCloseAfterHandlePressEntry,z=a.shouldCloseOnEnter,A=a.xstyles,w=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onAbandonTypeahead_DO_NOT_USE","onBlur","onChange","onClick","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onShiftTab","onTab","onUpArrow","viewRole","inputRef","shouldHandleCloseAfterHandlePressEntry","shouldCloseOnEnter","xstyles"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=m,b[8]=n,b[9]=o,b[10]=p,b[11]=q,b[12]=r,b[13]=s,b[14]=t,b[15]=u,b[16]=v,b[17]=w,b[18]=x,b[19]=y,b[20]=z,b[21]=A,b[22]=B):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],p=b[10],q=b[11],r=b[12],s=b[13],t=b[14],u=b[15],v=b[16],w=b[17],x=b[18],y=b[19],z=b[20],A=b[21],B=b[22]);b[23]!==x?(a=x===void 0?{}:x,b[23]=x,b[24]=a):a=b[24];x=a;a=x.afterViewContent;x=x.beforeViewContent;y=y===void 0?!1:y;z=z===void 0?!0:z;var C;b[25]!==A?(C=A===void 0?{}:A,b[25]=A,b[26]=C):C=b[26];var D;if(b[27]!==C){A=C;D=A.viewXStyle_DO_NOT_USE;A=babelHelpers.objectWithoutPropertiesLoose(A,["viewXStyle_DO_NOT_USE"]);b[27]=C;b[28]=D;b[29]=A}else D=b[28],A=b[29];C=c("useCometInternalTypeaheadFetch")();C=C.isLoading;var E=c("useBaseTypeaheadLayoutContextualStrategyStateContext")();E=E.isOpened;var F=c("useCometInternalTypeaheadState")(),G=F.activeEntries;F=F.highlightedEntry;e=c("useCometTypeaheadInputRefs")(e);var H=e.composedRef;e=e.inputRef;var I;b[30]!==h||b[31]!==k||b[32]!==l||b[33]!==m||b[34]!==n||b[35]!==o||b[36]!==p||b[37]!==q||b[38]!==r||b[39]!==s||b[40]!==t||b[41]!==u||b[42]!==v?(I={onAbandonTypeahead_DO_NOT_USE:h,onBlur:k,onChange:l,onClick:m,onDownArrow:n,onEnter:o,onEscape:p,onHighlightEntry:q,onOutsideClick:r,onPressEntry:s,onShiftTab:t,onTab:u,onUpArrow:v},b[30]=h,b[31]=k,b[32]=l,b[33]=m,b[34]=n,b[35]=o,b[36]=p,b[37]=q,b[38]=r,b[39]=s,b[40]=t,b[41]=u,b[42]=v,b[43]=I):I=b[43];b[44]!==e||b[45]!==z||b[46]!==y||b[47]!==I?(h={handlers:I,inputRef:e,shouldCloseOnEnter:z,shouldHandleCloseAfterHandlePressEntry:y},b[44]=e,b[45]=z,b[46]=y,b[47]=I,b[48]=h):h=b[48];k=c("useCometTypeaheadInternalLayoutContextualStrategyHandlers")(h);b[49]!==G||b[50]!==f||b[51]!==F||b[52]!==E||b[53]!==g||b[54]!==B?(l={activeEntries:G,helperText:f,highlightedEntry:F,inputLabel:g,isOpened:E,viewRole:B},b[49]=G,b[50]=f,b[51]=F,b[52]=E,b[53]=g,b[54]=B,b[55]=l):l=b[55];m=c("useCometTypeaheadLayoutContextualStrategyARIAProps")(l);b[56]!==D?(n=[j.view,D],b[56]=D,b[57]=n):n=b[57];b[58]!==n||b[59]!==A?(o=babelHelpers["extends"]({viewXStyle_DO_NOT_USE:n},A),b[58]=n,b[59]=A,b[60]=o):o=b[60];b[61]!==E||b[62]!==o?(p={isOpened:E,xstyles:o},b[61]=E,b[62]=o,b[63]=p):p=b[63];q=c("useCometTypeaheadLayoutStrategyStyles")(p);b[64]!==f?(r=f!=null?i.jsx(c("CometTypeaheadHelperText.react"),{text:f}):null,b[64]=f,b[65]=r):r=b[65];b[66]!==a||b[67]!==m||b[68]!==x||b[69]!==C||b[70]!==E||b[71]!==r?(s={afterViewContent:a,ariaProps:m,beforeViewContent:x,helperTextComponent:r,isLoading:C,isOpened:E},b[66]=a,b[67]=m,b[68]=x,b[69]=C,b[70]=E,b[71]=r,b[72]=s):s=b[72];b[73]!==H||b[74]!==k||b[75]!==f||b[76]!==g||b[77]!==w||b[78]!==q||b[79]!==s||b[80]!==B?(t=i.jsx(c("CometTypeaheadInternalLayoutContextualStrategy.react"),babelHelpers["extends"]({},w,k,{extraLayoutProps:s,helperText:f,inputRef:H,label:g,viewRole:B,xstyles:q})),b[73]=H,b[74]=k,b[75]=f,b[76]=g,b[77]=w,b[78]=q,b[79]=s,b[80]=B,b[81]=t):t=b[81];return t}g["default"]=a}),98);
__d("useCometTypeaheadEmptyState",["CometInternalTypeaheadEmptyFetchContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(c("CometInternalTypeaheadEmptyFetchContext"))}g["default"]=a}),98);
__d("CometTypeaheadViewEmptyState.react",["FDSText.react","react","react-compiler-runtime","react-strict-dom","useCometTypeaheadEmptyState"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={root:{alignItems:"x6s0dn4",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(5),e=a.children,f=a.color;a=a.xstyle;f=f===void 0?"tertiary":f;var g=c("useCometTypeaheadEmptyState")(),h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=g?i.jsx(d("react-strict-dom").html.div,{"aria-live":"polite","aria-selected":!1,"data-testid":void 0,role:"option",style:[j.root,a],children:i.jsx(c("FDSText.react"),{color:f,numberOfLines:1,type:"body3",children:e})}):null,b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];return h}g["default"]=a}),98);
__d("XCometMarketplaceComposerControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/marketplace/create/{listing_type}/",Object.freeze({shipping:!1}),void 0);b=a;g["default"]=b}),98);
__d("findCometScrollableLayoutActiveNode",[],(function(a,b,c,d,e,f){"use strict";function g(a){if(a==null)return null;if(a.tagName==="LI")return a.getAttribute("aria-selected")==="true"?a:null;return a.children==null?null:Array.from(a.children).reduce(function(a,b){return(a=a)!=null?a:g(b)},null)}f["default"]=g}),66);
__d("useCometTypeaheadKeyboardForScrollableArea",["findCometScrollableLayoutActiveNode","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=d("react-compiler-runtime").c(3),e=j(null),f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){var a;(a=c("findCometScrollableLayoutActiveNode")((a=e.current)==null?void 0:a.getDOMNode()))==null?void 0:a.scrollIntoView({behavior:"smooth",block:"nearest"})},b[0]=f):f=b[0];var g;b[1]!==a?(g=[a],b[1]=a,b[2]=g):g=b[2];i(f,g);return e}g["default"]=a}),98);
__d("useCometTypeaheadNavigate",["CometProductAttributionContext","goForceFullPageRedirectTo","isCometRouterUrl","react","react-compiler-runtime","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(a){var b=d("react-compiler-runtime").c(5),e=c("useCometRouterDispatcher")(),f=i(c("CometProductAttributionContext")),g;b[0]!==e||b[1]!==f||b[2]!==(a==null?void 0:a.openNewTabForExternalLink)||b[3]!==(a==null?void 0:a.tapPoint)?(g=function(b,d){if(b==null)return;if(e!=null){var g;g={fromLink:{tap_point:(g=a==null?void 0:a.tapPoint)!=null?g:"tap_scoped_search_bar"},linkContext:f};c("isCometRouterUrl")(b)?e.go(b,{productAttributionUpdateProps:g}):(a==null?void 0:a.openNewTabForExternalLink)===!0?e.go(b,{}):c("goForceFullPageRedirectTo")(b)}else d&&d(b)},b[0]=e,b[1]=f,b[2]=a==null?void 0:a.openNewTabForExternalLink,b[3]=a==null?void 0:a.tapPoint,b[4]=g):g=b[4];a==null?void 0:a.openNewTabForExternalLink;a==null?void 0:a.tapPoint;return g}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BaseTypeaheadInMemoryListDataCache",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[]}var b=a.prototype;b.clear=function(){this.$1=[]};b.get=function(a){var b=this.$1.find(function(b){return b.key===a});return b?b.value:null};b.has=function(a){return this.$1.some(function(b){return b.key===a})};b.set=function(a,b){var c=this.$1.findIndex(function(b){return b.key===a});if(c===-1){this.$1.push({key:a,value:b});return}this.$1[c]={key:a,value:b}};b.remove=function(a){var b=this.$1.findIndex(function(b){return b.key===a});this.$1.splice(b,1)};b.values=function(){return this.$1.map(function(a){return a.value})};return a}();f["default"]=a}),66);
__d("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6707320575986334"}),null);
__d("CometAddTypeaheadRecentSearchMutation.graphql",["CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadAddRecentSearchResponsePayload",kind:"LinkedField",name:"search_typeahead_add_recent_search",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometAddTypeaheadRecentSearchMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometAddTypeaheadRecentSearchMutation",selections:c},params:{id:b("CometAddTypeaheadRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometAddTypeaheadRecentSearchMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("RelayModernOrCometRelay",["cr:1012418"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1012418")}),98);
__d("CometAddTypeaheadRecentSearchMutation",["CometAddTypeaheadRecentSearchMutation.graphql","RelayModernOrCometRelay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometAddTypeaheadRecentSearchMutation.graphql");function a(a){var b=a.onBeforeCommitMutation,d=a.onError,e=a.onSuccess,f=a.relayEnvironment,g=a.searchScopeEntityID,h=a.selectedID,j=a.selectedText,k=a.selectedType,l=a.source,m=a.stsDirectNavType,n=a.stsDisambiguationType,o=a.stsHighConfidenceSource,p=a.userID;a=a.userInput;b&&b();c("RelayModernOrCometRelay").commitMutation(f,{mutation:i,onCompleted:function(a,b){b&&b.length?d&&d(new Error("Payload errors while executing `addTypeaheadRecentSearchMutation`.")):e&&e(a)},onError:d,variables:{input:{actor_id:p!=null?p:void 0,search_scope_entity_id:g,selected_id:h,selected_text:j,selected_type:k,source:l,sts_direct_nav_type_for_graphql:m,sts_disambiguation_type_for_graphql:n,sts_high_confidence_source_for_graphql:o,user_input:a}}})}g.commit=a}),98);
__d("CometDeleteRecentSearchMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4945240752198545"}),null);
__d("CometDeleteRecentSearchMutation.graphql",["CometDeleteRecentSearchMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SearchTypeaheadDeleteRecentResponsePayload",kind:"LinkedField",name:"search_typeahead_delete_recent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometDeleteRecentSearchMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometDeleteRecentSearchMutation",selections:c},params:{id:b("CometDeleteRecentSearchMutation_facebookRelayOperation"),metadata:{},name:"CometDeleteRecentSearchMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometDeleteRecentSearchMutation",["CometDeleteRecentSearchMutation.graphql","RelayModernOrCometRelay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometDeleteRecentSearchMutation.graphql");function a(a){var b=a.onBeforeCommitMutation,d=a.onError,e=a.onSuccess,f=a.relayEnvironment,g=a.searchEntityType,h=a.searchText;a=a.userID;b&&b();c("RelayModernOrCometRelay").commitMutation(f,{mutation:i,onCompleted:function(a,b){b&&b.length?d&&d(new Error("Payloads error while executing `deleteSearchMutation`.")):e&&e(a)},onError:d,variables:{input:babelHelpers["extends"]({},a!=null?{actor_id:a}:null,{search_entity_type:g,search_text:h})}})}g.commit=a}),98);
__d("CometSearchBootstrapKeywordsDataSourceQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"first"}],b=[{kind:"Variable",name:"first",variableName:"first"}],c={alias:null,args:null,kind:"ScalarField",name:"keyword_text",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"item_logging_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};g=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},g,h,i],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[h,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},f,i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}];h={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:g,args:null,argumentDefinitions:[]}],storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometSearchBootstrapKeywordsDataSourceQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:b,concreteType:"BootstrapKeywordsConnection",kind:"LinkedField",name:"bootstrap_keywords",plural:!1,selections:[{alias:null,args:null,concreteType:"BootstrapKeywordsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"BootstrapResult",kind:"LinkedField",name:"node",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:g,storageKey:null},h],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"7163385847088980",metadata:{},name:"CometSearchBootstrapKeywordsDataSourceQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo"};e.exports=a}),null);
__d("getSearchCometKeywordDataSourceStructuredSuggestionKey",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;if(((b=a.direct_nav_result)==null?void 0:b.ent_id)!=null){return"dir_nav_sts:"+((b=a.direct_nav_result)==null?void 0:b.ent_id)}if(((b=a.high_confidence_result)==null?void 0:b.hcm_id)!=null){return"hc_sts:"+((b=a.high_confidence_result)==null?void 0:b.hcm_id)}return((b=a.disambiguation_result)==null?void 0:b.title)!=null&&((b=a.disambiguation_result)==null?void 0:(b=b.disambiguation_info_list[0])==null?void 0:b.type)!=null?a.disambiguation_result.disambiguation_info_list[0].type+":"+a.disambiguation_result.title:null}f["default"]=a}),66);
__d("getSearchCometKeywordDataSourceStructuredInfoForEntry",["CometRelay","getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql","getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=a.structuredTypeaheadInfo;if(a==null)return{entryKey:null,extraLoggingInfo:null,label:null,markers:[],structuredInfo:null};a=d("CometRelay").readInlineData(h!==void 0?h:h=b("getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo.graphql"),a);var e=a.badge_info,f=a.direct_nav_result,g=a.disambiguation_result;a=a.high_confidence_result;var i=[],j,k,l;if(f!=null){i=["direct_nav"];var m=f.ent_id,n=f.entity_type,o=f.img_url,p=f.link_url,q=f.snippet,r=f.title;f=f.type;l=r;j={direct_nav_result:{ent_id:m,entity_type:n,img_url:o,link_url:p,snippet:q,title:r,type:f}};k={stsDirectNavEntityID:m,stsDirectNavEntityType:n,stsDirectNavType:f}}if(a!=null){i=["high_confidence"];o=a.hcm_id;p=a.picture_url;q=a.snippet;r=a.source_as_enum;m=a.text;l=m;j={high_confidence_result:{hcm_id:o,picture_url:p,snippet:q,source_as_enum:r,text:m}};k={stsHighConfidenceID:o,stsHighConfidenceSource:r}}if(g!=null){i=["disambiguation"];n=g.disambiguation_info_list;f=g.title;l=f;j={disambiguation_result:{disambiguation_info_list:n,title:f}};k={stsDisambiguationType:n[0].type}}return{badgeSnippet:(a=e==null?void 0:e.badge_text)!=null?a:void 0,entryKey:j!=null?c("getSearchCometKeywordDataSourceStructuredSuggestionKey")(j):null,extraLoggingInfo:k,label:l,markers:i,structuredInfo:j}}g["default"]=a}),98);
__d("CometSearchBootstrapKeywordsDataSource.query",["CometSearchBootstrapKeywordsDataSourceQuery.graphql","filterNulls","getSearchCometKeywordDataSourceStructuredInfoForEntry","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h!==void 0?h:h=b("CometSearchBootstrapKeywordsDataSourceQuery.graphql");function a(a){if(!a)return[];a=a.viewer;a=((a=a==null?void 0:(a=a.bootstrap_keywords)==null?void 0:a.edges)!=null?a:[]).map(function(a){return a.node}).filter(Boolean);return c("filterNulls")(a.map(function(a){var b,d=a.item_logging_id,e=a.item_logging_info,f=a.keyword_text,g=a.sts_info;a=a.suggestion_keys;if(f==null){c("recoverableViolation")("Cannot have TA bootstrap entry without keyword_text","search");return null}g=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:g});var h=g.badgeSnippet,i=g.entryKey,j=g.extraLoggingInfo,k=g.label,l=g.markers;g=g.structuredInfo;b=(b=a)!=null?b:{};var m=b.default_key,n=b.keys;b=b.tier;return{key:(i=(i=i)!=null?i:g&&(a==null?void 0:a.default_key))!=null?i:f,label:(a=k)!=null?a:f,metaData:{logging:babelHelpers["extends"]({},j,{loggingID:(i=d)!=null?i:"",loggingInfo:e}),markers:new Set(["bootstrap","keyword"].concat(l))},rawData:{badgeSnippet:h,structuredInfo:g,suggestion_keys:b!=null?{default_key:m,keys:n,tier:b}:null},subtype:"bootstrap",type:"entry"}}))}g.query=d;g.normalize=a}),98);
__d("CometSearchBootstrapKeywordsDataSource",["BaseTypeaheadDataCacheProvider","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryMapDataCache","BaseTypeaheadPayloadDecoratorAddLimit","CometSearchBootstrapKeywordsDataSource.query","baseTypeaheadStartsWithMatchBuilder","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.limit,e=a.queryVariables;a=a.relayEnvironment;this.$2=new(c("BaseTypeaheadDataCacheProvider"))({cache:new(c("BaseTypeaheadInMemoryMapDataCache"))(),matchBuilder:c("baseTypeaheadStartsWithMatchBuilder")});this.$3=b;b=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(function(){return function(){return e}});this.$1=new(c("BaseTypeaheadDataProvider"))({query:d("CometSearchBootstrapKeywordsDataSource.query").query,queryVariablesBuilder:b,relayEnvironment:a})}var b=a.prototype;b.bootstrap=function(){var a=this;c("promiseDone")(this.$1.fetch({query:""}).then(function(a){a=a.response;return d("CometSearchBootstrapKeywordsDataSource.query").normalize(a)}).then(function(b){a.$2.clear(),a.$2.add(b,null)}))};b.fetchCache=function(a){var b=a.query;b=this.$2.match(b);var d=c("BaseTypeaheadPayloadDecoratorAddLimit")(this.$3);return d({entries:b,params:a})};b.clear=function(){this.$2.clear()};b.removeEntriesByEntID=function(a){var b=this.$2.values();for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e,f;if(c){if(d>=b.length)break;f=b[d++]}else{d=b.next();if(d.done)break;f=d.value}f=f;a===((e=f.rawData.structuredInfo)==null?void 0:(e=e.direct_nav_result)==null?void 0:e.ent_id)&&this.$2.remove(f)}};return a}();g["default"]=a}),98);
__d("CometSearchKeywordDataSourceQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7003676376365206"}),null);
__d("CometSearchKeywordDataSourceQuery.graphql",["CometSearchKeywordDataSourceQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"query"}],c=[{kind:"Variable",name:"query",variableName:"query"}],d={alias:"name",args:null,kind:"ScalarField",name:"text",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"logging_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"logging_info",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};h=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},h,i,j],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},h,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[i,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},g,j],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}];i={alias:null,args:null,concreteType:"SearchTypeaheadSuggestionKeys",kind:"LinkedField",name:"suggestion_keys",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keys",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_key",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:c,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,f,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:h,args:null,argumentDefinitions:[]}],storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometSearchKeywordDataSourceQuery",selections:[{alias:null,args:c,concreteType:"KeywordsSearchSuggestionSet",kind:"LinkedField",name:"search_keywords_suggestion",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsConnection",kind:"LinkedField",name:"suggestions",plural:!1,selections:[{alias:null,args:null,concreteType:"KeywordsSearchSuggestionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KeywordSuggestionUnit",kind:"LinkedField",name:"node",plural:!1,selections:[d,e,f,{alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"structured_info",plural:!1,selections:h,storageKey:null},i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CometSearchKeywordDataSourceQuery_facebookRelayOperation"),metadata:{},name:"CometSearchKeywordDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometSearchKeywordDataSource.query",["CometSearchKeywordDataSourceQuery.graphql","cometUniqueID","getSearchCometKeywordDataSourceStructuredInfoForEntry"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h!==void 0?h:h=b("CometSearchKeywordDataSourceQuery.graphql");function a(a,b){if(!a)return[];a=a.search_keywords_suggestion;var d=b.query.request_id;a=((a=a==null?void 0:(a=a.suggestions)==null?void 0:a.edges)!=null?a:[]).map(function(a){return a.node}).filter(Boolean);var e;try{b=JSON.parse(b.query.query_text);e=b!=null?b[0]:null}catch(a){}return a.map(function(a){var b,f=a.logging_id,g=a.logging_info,h=a.name,i=a.structured_info;a=a.suggestion_keys;i=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:i});var j=i.badgeSnippet,k=i.entryKey,l=i.extraLoggingInfo,m=i.label,n=i.markers;i=i.structuredInfo;b=(b=a)!=null?b:{};var o=b.default_key,p=b.keys;b=b.tier;return{key:(a=(k=(k=k)!=null?k:i&&(a==null?void 0:a.default_key))!=null?k:h)!=null?a:c("cometUniqueID")(),label:(a=(k=m)!=null?k:h)!=null?a:"",metaData:{logging:babelHelpers["extends"]({},l,{loggingID:f,loggingInfo:g,query:e,sequenceID:d}),markers:new Set(["keyword"].concat(n))},rawData:{badgeSnippet:j,structuredInfo:i,suggestion_keys:b!=null?{default_key:o,keys:p,tier:b}:null},subtype:"keyword",type:"entry"}})}g.query=d;g.normalize=a}),98);
__d("cometSearchKeywordDataSourceQueryVariablesBuilder",[],(function(a,b,c,d,e,f){"use strict";var g=10,h="blended";function a(a){return function(b){var c,d=b.loggingEventTrace;b=b.query;c=(c=a)!=null?c:{};var e=c.fetch_count,f=c.fetch_mode;c=c.group_id;c=JSON.stringify(c!=null?[{text:"",type:"group",uid:c},b]:[b]);return{query:{fetch_count:(b=e)!=null?b:g,fetch_mode:(e=f)!=null?e:h,query_text:c,request_id:d==null?void 0:d.sequenceID,session_id:(b=d==null?void 0:d.sessionID)!=null?b:""}}}}f["default"]=a}),66);
__d("CometSearchKeywordDataSource",["BaseCacheEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadNetworkCacheDataSource","BaseTypeaheadQueryDataCacheProvider","CometSearchKeywordDataSource.query","baseTypeaheadDedupEntriesBuilder","baseTypeaheadLabelSuffixBuilder","cometSearchKeywordDataSourceQueryVariablesBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.dedupe,e=a.onError,f=a.queryVariables;a=a.relayEnvironment;f=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(c("cometSearchKeywordDataSourceQueryVariablesBuilder")).setDefaultVariables(f);e=new(c("BaseTypeaheadDataProvider"))({onError:e,query:d("CometSearchKeywordDataSource.query").query,queryVariablesBuilder:f,relayEnvironment:a});this.$1=new(c("BaseTypeaheadQueryDataCacheProvider"))({dedupe:(f=b)!=null?f:c("baseTypeaheadDedupEntriesBuilder")(c("BaseCacheEntryKeyBuilder")),suffixBuilder:function(){return c("baseTypeaheadLabelSuffixBuilder").apply(void 0,arguments)}});this.$2=new(c("BaseTypeaheadNetworkCacheDataSource"))(e,this.$1,{normalizeFunc:d("CometSearchKeywordDataSource.query").normalize})}var b=a.prototype;b.fetchCache=function(a){return this.$2.fetchCache(a)};b.fetchNetwork=function(a){return this.$2.fetchNetwork(a)};b.clearQueryCache=function(){this.$1.clear()};return a}();g["default"]=a}),98);
__d("searchCometTypeaheadSubtractSections",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Set(a.entries.map(function(a){return a.key}));b.entries=b.entries.filter(function(a){return!c.has(a.key)})}f["default"]=a}),66);
__d("searchCometTypeaheadMergeSections",["searchCometTypeaheadSubtractSections"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("searchCometTypeaheadSubtractSections")(a,b),b.entries=a.entries.concat(b.entries)}g["default"]=a}),98);
__d("CometSearchRecentDataCacheProvider",["BaseDataEntryLabelKeyBuilder","searchCometTypeaheadMergeSections","searchCometTypeaheadSubtractSections"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.cache,d=a.matchBuilder;a=a.keyBuilder;a=a===void 0?c("BaseDataEntryLabelKeyBuilder"):a;this.$1=b;this.$2=d;this.$3=a}var b=a.prototype;b.add=function(a,b,d){var e=this;if(d==="network"){this.$1.clear();[].concat(a).reverse().forEach(function(a){var b=e.$3(a);e.$1.set(b,a)});return}a.forEach(function(a){var b=e.$3(a),d=e.$1.get(b);if(d)if(d.type==="section"&&a.type==="section"){c("searchCometTypeaheadMergeSections")(a,d);return}else e.$1.remove(b);e.$1.set(b,a)})};b.clear=function(){this.$1.clear()};b.remove=function(a){var b=this.$3(a),d=this.$1.get(b);d&&d.type==="section"&&a.type==="section"&&d.entries.length!==0?c("searchCometTypeaheadSubtractSections")(a,d):this.$1.remove(b)};b.match=function(a){var b=this.$2({query:a});return this.$1.values().map(function(a){return babelHelpers["extends"]({},a)}).reverse().filter(function(a){if(a.type==="section"){a.entries=a.entries.filter(b);return!0}else return b(a)})};b.values=function(){return this.$1.values()};return a}();g["default"]=a}),98);
__d("cometSearchNullStateMatchBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){a=a.metaData.markers;return a.has("recent")||a.has("nullstate_explore")||a.has("keyword")}}f["default"]=a}),66);
__d("CometSearchRecentDataSource",["fbt","BaseDataEntryKeyBuilder","BaseTypeaheadDataProvider","BaseTypeaheadDataProviderQueryVariablesBuilder","BaseTypeaheadInMemoryListDataCache","BaseTypeaheadNetworkDataSource","CometAddTypeaheadRecentSearchMutation","CometDeleteRecentSearchMutation","CometSearchRecentDataCacheProvider","Promise","cometSearchNullStateMatchBuilder","filterNulls","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i;a=function(){var a=e.prototype;a.$8=function(){var a=c("filterNulls")(this.$2.values().map(function(a){return a.type==="section"&&a.subtype==="recent_searches"?a:null}));return a.length!==0?a[0]:null};function e(a){var b=a.activityLogURL,d=a.gqlQuery,e=a.limit,f=a.normalize,g=a.options,h=a.queryVariablesBuilderFunction;a=a.relayEnvironment;this.$4=a;this.$5=e;this.$6=h({query:""}).filter;this.$7=b;a=function(){return h};e=new(c("BaseTypeaheadDataProviderQueryVariablesBuilder"))(a);b=new(c("BaseTypeaheadDataProvider"))({options:g,query:d,queryVariablesBuilder:e,relayEnvironment:this.$4});this.$2=new(c("CometSearchRecentDataCacheProvider"))({cache:new(c("BaseTypeaheadInMemoryListDataCache"))(),keyBuilder:c("BaseDataEntryKeyBuilder"),matchBuilder:c("cometSearchNullStateMatchBuilder")});this.$1=new(c("BaseTypeaheadNetworkDataSource"))(b,f)}a.add=function(a,b,c){c=c===void 0?{}:c;var e=c.onBeforeCommitMutation,f=c.onError;c=c.onSuccess;var g=a.metaData,h=this.$8();h!=null?this.$2.add([babelHelpers["extends"]({},h,{entries:[a]})],""):this.$2.add([a],"");g=(h=g==null?void 0:g.logging)!=null?h:{};h=g.entityID;var i=g.entityType,j=g.searchScopeEntityID,k=g.stsDirectNavEntityID,l=g.stsDirectNavType,m=g.stsDisambiguationType,n=g.stsHighConfidenceID;g=g.stsHighConfidenceSource;d("CometAddTypeaheadRecentSearchMutation").commit({onBeforeCommitMutation:e,onError:f,onSuccess:c,relayEnvironment:this.$4,searchScopeEntityID:j,selectedID:(f=(e=h)!=null?e:k)!=null?f:n,selectedText:a.label.toLowerCase(),selectedType:(c=i)!=null?c:"keyword",source:b,stsDirectNavType:l,stsDisambiguationType:m,stsHighConfidenceSource:g,userInput:a.label.toLowerCase()})};a.bootstrap=function(){var a;a=(a=c("qex")._("1300"))!=null?a:!1;if(a&&this.$6==="all")return;this.fetchNetwork({query:""})};a.fetchCache=function(a){var b=a.query;b=this.$2.match(b);return{entries:b,params:a}};a.fetchNetwork=function(a){var c=this;return this.$3!=null&&this.$3<this.$5?(i||(i=b("Promise"))).resolve({entries:this.$2.match(a.query),params:a}):this.$1.fetchNetwork(a).then(function(b){var d=b.entries;b=b.params.query;d!=null&&(d.forEach(function(a){var b=c.$7;["all","group_scoped_search"].includes(c.$6)&&b!=null&&a.type==="section"&&a.subtype==="recent_searches"&&(a.action={label:h._("__JHASH__0ioTgLFUb4g__JHASH__"),type:"link",url:b})}),c.$3=d.length,c.$2.add(d,b,"network"));return{entries:c.$2.match(b),params:a}})};a.remove=function(a,b){b=b===void 0?{}:b;var c=b.onBeforeCommitMutation,e=b.onError;b=b.onSuccess;var f=this.$8();f!=null?this.$2.remove(babelHelpers["extends"]({},f,{entries:[a]})):this.$2.remove(a);d("CometDeleteRecentSearchMutation").commit({onBeforeCommitMutation:c,onError:e,onSuccess:b,relayEnvironment:this.$4,searchText:a.label})};a.clear=function(){this.$3=null;var a=this.$8();if(a==null){this.$2.clear();return}a.entries.length!==0&&this.$2.remove(a)};a.refresh=function(){this.clear(),this.fetchNetwork({query:""})};return e}();g["default"]=a}),226);
__d("CometSearchRecentDataSourceQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"fetch_nullstate"},b={defaultValue:null,kind:"LocalArgument",name:"fetch_recent_searches"},c={defaultValue:null,kind:"LocalArgument",name:"fetch_search_badge"},d={defaultValue:null,kind:"LocalArgument",name:"filter"},e={defaultValue:null,kind:"LocalArgument",name:"first"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:null,kind:"LocalArgument",name:"search_null_state_argument"},h={defaultValue:null,kind:"LocalArgument",name:"search_scope_entity_id"},i=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"search_scope_entity_id",variableName:"search_scope_entity_id"}],j={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:36}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"Profile",abstractKey:"__isProfile"},m=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],n={kind:"InlineFragment",selections:m,type:"Application",abstractKey:null},o={kind:"InlineFragment",selections:m,type:"Event",abstractKey:null},p={kind:"InlineFragment",selections:m,type:"Group",abstractKey:null},q={kind:"InlineFragment",selections:m,type:"Page",abstractKey:null};m={kind:"InlineFragment",selections:m,type:"User",abstractKey:null};var r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"link_url",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};u=[{alias:null,args:null,concreteType:"STSDirectNavResult",kind:"LinkedField",name:"direct_nav_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"img_url",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"entity_type",storageKey:null},t,u,v],storageKey:null},{alias:null,args:null,concreteType:"STSHighConfidenceResult",kind:"LinkedField",name:"high_confidence_result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hcm_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"picture_url",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"source_as_enum",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"STSDisambiguationResult",kind:"LinkedField",name:"disambiguation_result",plural:!1,selections:[u,{alias:null,args:null,concreteType:"STSDisambiguationInfo",kind:"LinkedField",name:"disambiguation_info_list",plural:!0,selections:[{alias:"snippet",args:null,kind:"ScalarField",name:"text",storageKey:null},s,v],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TypeaheadBadgeInfo",kind:"LinkedField",name:"badge_info",plural:!1,selections:[{alias:"badge_text",args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null}];s={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"getSearchCometKeywordDataSourceStructuredInfoForEntry_structuredTypeaheadInfo",selections:u,args:null,argumentDefinitions:[]}],storageKey:null};v={alias:null,args:null,kind:"ScalarField",name:"item_logging_info",storageKey:null};t={condition:"fetch_search_badge",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBSearchEntityBadge",kind:"LinkedField",name:"search_badge",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},t],storageKey:null}]};var w=[{kind:"Variable",name:"input",variableName:"search_null_state_argument"}],x={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},y=[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"header_text",storageKey:null}],storageKey:null}],z={kind:"InlineFragment",selections:y,type:"XFBSearchNullStateSearchHistoryHeaderRenderingStrategy",abstractKey:null};y={kind:"InlineFragment",selections:y,type:"XFBSearchNullStateGeneralHeaderRenderingStrategy",abstractKey:null};var A={alias:null,args:null,kind:"ScalarField",name:"display_text",storageKey:null},B={alias:"suggestion_logging_info",args:null,concreteType:"XFBSearchSuggestionLoggingSuggestion",kind:"LinkedField",name:"logging_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fetch_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logging_info",storageKey:null}],storageKey:null};u={alias:null,args:null,concreteType:"StructuredTypeaheadInfo",kind:"LinkedField",name:"sts_info",plural:!1,selections:u,storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"CometSearchRecentDataSourceQuery",selections:[{condition:"fetch_recent_searches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:i,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[j,k],type:"Node",abstractKey:"__isNode"},l,n,o,p,q,m,r,{kind:"InlineFragment",selections:[s,v],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:w,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[j,z,y,{kind:"InlineFragment",selections:[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[j,{kind:"InlineFragment",selections:[x,A,s,B],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,e,f,h,c,g,a,b],kind:"Operation",name:"CometSearchRecentDataSourceQuery",selections:[{condition:"fetch_recent_searches",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:i,concreteType:"RecentSearchConnection",kind:"LinkedField",name:"recent_searches",plural:!1,selections:[{alias:null,args:null,concreteType:"RecentSearchEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,r,{kind:"InlineFragment",selections:[k],type:"Node",abstractKey:"__isNode"},l,n,o,p,q,m,{kind:"InlineFragment",selections:[u,v],type:"GraphSearchQuery",abstractKey:null}],storageKey:null},t],storageKey:null}],storageKey:null}],storageKey:null}]},{condition:"fetch_nullstate",kind:"Condition",passingValue:!0,selections:[{alias:null,args:w,concreteType:"SearchNullStatePage",kind:"LinkedField",name:"search_null_state",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsConnection",kind:"LinkedField",name:"results",plural:!1,selections:[{alias:null,args:null,concreteType:"SearchNullStatePageResultsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[j,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"rendering_strategy",plural:!1,selections:[j,z,y,{kind:"InlineFragment",selections:[x,{alias:null,args:null,concreteType:"XFBSearchNullStateSectionResult",kind:"LinkedField",name:"result",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"suggestions",plural:!0,selections:[j,{kind:"InlineFragment",selections:[x,A,u,B],type:"XFBSearchNullStateQuerySuggestion",abstractKey:null}],storageKey:null}],storageKey:null}],type:"XFBSearchNullStateListRenderingStrategy",abstractKey:null}],storageKey:null}],type:"XFBSearchNullStateRenderingStrategyResult",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}]},params:{id:"6951168598253150",metadata:{},name:"CometSearchRecentDataSourceQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("searchCometIsValidRecentSearchEntityType",[],(function(a,b,c,d,e,f){"use strict";var g=["app","application","event","group","page","user"];function a(a){return g.includes(a==null?void 0:a.toLowerCase())}f["default"]=a}),66);
__d("CometSearchRecentDataSource.query",["fbt","CometSearchRecentDataSourceQuery.graphql","FBLogger","filterNulls","getSearchCometKeywordDataSourceStructuredInfoForEntry","searchCometIsValidRecentSearchEntityType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j={__typename:"XFBSearchNullStateSearchHistoryHeaderRenderingStrategy",key:"recent-searches",result:{header_text:String(h._("__JHASH__QJCAJUEzrgs__JHASH__"))}};d=i!==void 0?i:i=b("CometSearchRecentDataSourceQuery.graphql");function a(a){var b;if(!a)return[];b=c("filterNulls")(((b=(b=a.search_null_state)==null?void 0:(b=b.results)==null?void 0:b.edges)!=null?b:[{node:{rendering_strategy:j}}]).map(function(a){return(a=a.node)==null?void 0:a.rendering_strategy}));var d=[],e=null;for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;if(h.__typename==="%other")continue;var i=h.key,m=h.result;if(m==null||i==null)continue;m=m.header_text;if(h.__typename==="XFBSearchNullStateSearchHistoryHeaderRenderingStrategy"&&m!=null){var n;d.push({entries:k((n=(n=a.viewer)==null?void 0:(n=n.recent_searches)==null?void 0:n.edges)!=null?n:[]),key:i,label:m,subtype:"recent_searches",type:"section"})}else if(h.__typename==="XFBSearchNullStateGeneralHeaderRenderingStrategy"&&m!=null)e={header_text:m,key:i};else if(h.__typename==="XFBSearchNullStateListRenderingStrategy"&&e!=null){n=e;m=n.header_text;i=n.key;d.push({entries:l(h),key:i,label:m,subtype:"other",type:"section"});e=null}}return d}function k(a){return c("filterNulls")(a.map(function(a){var b=a.node;a=a.search_badge;if(b==null)return null;var d=b.__typename,e=b.id,f=b.item_logging_info,g=b.name,h=b.profile_picture,i=b.sts_info;b=b.url;var j=c("searchCometIsValidRecentSearchEntityType")(d);i=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:i});var k=i.extraLoggingInfo,l=i.label,m=i.markers;i=i.structuredInfo;if(g==null){c("FBLogger")("search").mustfix("Missing name for recent search data with __typename: %s",d);return null}var n=g.toLocaleLowerCase();return{hasSecondaryAction:!0,key:n,label:(n=l)!=null?n:g,metaData:{logging:babelHelpers["extends"]({},k,{entityID:j?e:null,entityType:j&&d!=null?d.toLowerCase():null,loggingInfo:f}),markers:new Set(c("filterNulls")(["recent",j?"entity":null].concat(m)))},rawData:{badgeSnippet:(a==null?void 0:a.enabled)===!0?a.snippet:null,profile:j&&e!=null&&(h==null?void 0:h.uri)!=null&&b!=null?{id:e,profilePictureURL:h.uri,url:b}:void 0,structuredInfo:i},subtype:"recent",type:"entry"}}))}function l(a){if(a.__typename!=="XFBSearchNullStateListRenderingStrategy")return[];a=(a=a.result)!=null?a:{};a=a.suggestions;return c("filterNulls")(((a=a)!=null?a:[]).map(function(a){if(a.__typename!=="XFBSearchNullStateQuerySuggestion")return null;var b=a.display_text,d=a.key,e=a.sts_info,f=a.suggestion_logging_info;if(b==null){c("FBLogger")("search").mustfix("Missing name for nullstate suggestion search data with __typename: %s",a.__typename);return null}if(d==null){c("FBLogger")("search").mustfix("Missing key for nullstate suggestion search data with __typename: %s",a.__typename);return null}a=c("getSearchCometKeywordDataSourceStructuredInfoForEntry")({structuredTypeaheadInfo:e});e=a.extraLoggingInfo;var g=a.markers;a=a.structuredInfo;f=(f=f)!=null?f:{};var h=f.fetch_source;f=f.logging_info;return{key:d,label:b,metaData:{logging:babelHelpers["extends"]({fetchSource:h,loggingInfo:((d=f)!=null?d:[])[0]},e),markers:new Set(new Set(["keyword","nullstate_explore"].concat(g)))},rawData:{structuredInfo:a},subtype:"keyword",type:"entry"}}))}g.query=d;g.normalize=a}),226);
__d("CometSearchRecentDataSourceDispatcherContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("FBNucleusCrossFilled20Icon.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{d:"M15.543 3.043a1 1 0 1 1 1.414 1.414L11.414 10l5.543 5.542a1 1 0 0 1-1.414 1.415L10 11.414l-5.543 5.543a1 1 0 0 1-1.414-1.415L8.586 10 3.043 4.457a1 1 0 1 1 1.414-1.414L10 8.586l5.543-5.543z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react",["fbt","CometSearchRecentDataSourceDispatcherContext","FBNucleusCrossFilled20Icon.react","FDSIcon.react","XPlatReactEnvironment","react","react-compiler-runtime","react-strict-dom","useCometInternalTypeaheadState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l=b.useState,m={buttonContainer:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"x1fgtraw",justifyContent:"xl56j7k",width:"xgd8bvy",$$css:!0},buttonContainerActive:{boxShadow:"xpud6h4",outline:"xvetz19 x1a2a7pz",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(13),e=a.entry;a=a.testid;var f=k(c("CometSearchRecentDataSourceDispatcherContext")),g=l(!1),i=g[0],n=g[1];g=c("useCometInternalTypeaheadState")();var o=g.highlightedEntry;g=g.secondaryActionHighlighted;var p;b[0]!==e||b[1]!==f?(p=function(a){a&&a.type!=="press"&&a.stopPropagation(),n(!0),f==null?void 0:f.dispatchRemoveRecentEntry(e)},b[0]=e,b[1]=f,b[2]=p):p=b[2];p=p;o=o===e&&g===!0&&m.buttonContainerActive;b[3]!==o?(g=[m.buttonContainer,o],b[3]=o,b[4]=g):g=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._("__JHASH__Im1kdkmyLZa__JHASH__"),b[5]=o):o=b[5];b[6]!==i||b[7]!==p?(o=j.jsx(c("FDSIcon.react"),{"aria-label":o,color:"secondary",disabled:i,focusable:!1,icon:c("FBNucleusCrossFilled20Icon.react"),onPress:p,size:d("XPlatReactEnvironment").isWeb()?12:20}),b[6]=i,b[7]=p,b[8]=o):o=b[8];b[9]!==g||b[10]!==o||b[11]!==a?(i=j.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:g,children:o}),b[9]=g,b[10]=o,b[11]=a,b[12]=i):i=b[12];return i}g["default"]=a}),226);
__d("CometSearchTypeaheadBaseSurfaceRecentViewItem.react",["CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react","CometTypeaheadFocusLockRegion.react","CometTypeaheadRecentViewItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e,f;b[0]!==a?(e=a.entry,f=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==e?(a=i.jsx(c("CometTypeaheadFocusLockRegion.react"),{children:i.jsx(c("CometSearchTypeaheadBaseSurfaceRecentViewItemRemoveButton.react"),{entry:e,testid:void 0})}),b[3]=e,b[4]=a):a=b[4];var g;b[5]!==e||b[6]!==f||b[7]!==a?(g=i.jsx(c("CometTypeaheadRecentViewItem.react"),babelHelpers["extends"]({},f,{entry:e,itemEndContent:a,itemEndContentKeyboardFocusable:!0,testid:void 0})),b[5]=e,b[6]=f,b[7]=a,b[8]=g):g=b[8];return g}g["default"]=a}),98);
__d("getCometSearchTypeaheadStructuredInfoKey",["getSearchCometKeywordDataSourceStructuredSuggestionKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.rawData.structuredInfo;return a==null?null:c("getSearchCometKeywordDataSourceStructuredSuggestionKey")(a)}g["default"]=a}),98);
__d("CometSearchTypeaheadDefaultEntryComparator",["BaseDataEntryLabelKeyBuilder","getCometSearchTypeaheadStructuredInfoKey","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=c("getCometSearchTypeaheadStructuredInfoKey")(a),e=c("getCometSearchTypeaheadStructuredInfoKey")(b);return d!=null&&e!=null?d===e:c("BaseDataEntryLabelKeyBuilder")(a)===c("BaseDataEntryLabelKeyBuilder")(b)}function a(a,b){if(!h(a,b)){c("recoverableViolation")("The suggestions are not dupes: "+a.key+" compared to "+b.key,"search");return a}var d=c("getCometSearchTypeaheadStructuredInfoKey")(a),e=c("getCometSearchTypeaheadStructuredInfoKey")(b);return d!=null&&e!=null?b:e!=null?b:a}g.areEntriesDupes=h;g.pickEntryToKeep=a}),98);
__d("CometSearchTypeaheadServerDrivenEntryComparator",["FBLogger","getCometSearchTypeaheadStructuredInfoKey","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=(a=a.rawData)!=null?a:{};a=a.suggestion_keys;if(a==null)throw c("FBLogger")("search").mustfixThrow("Unexpected missing keys");return a}function a(a,b){var d=h(a),e=d.default_key;d=d.keys;var f=h(b),g=f.default_key,i=f.keys;if(d.some(function(a){return i.includes(a)}))return!0;f=c("getCometSearchTypeaheadStructuredInfoKey")(a);var k=c("getCometSearchTypeaheadStructuredInfoKey")(b);f!=null&&f===k&&j("STS dupe: same STS UI key but no keys overlap",a,b);if(d.length>0&&i.length>0)return!1;if(e==null||g==null)return!1;e===g&&a.label.toLowerCase()!==b.label.toLowerCase()&&j("STS dupe: same default key but different label",a,b);return e.toLowerCase()===g.toLowerCase()}function b(a,b){var c=h(a);c=c.tier;var d=h(b);d=d.tier;return c<=d?b:a}function i(a){var b=h(a),c=b.default_key;b=b.keys;return"ui key: "+a.key+", keys: "+(b.join(",")||"empty")+", default key: "+((b=c)!=null?b:"null")+", label: "+a.label}function j(a,b,d){c("FBLogger")("search").warn(a+": ("+i(b)+") vs ("+i(d)+")")}g.areEntriesDupes=a;g.pickEntryToKeep=b}),98);
__d("CometTypeaheadEchoViewItem.react",["CometTypeaheadViewItem.react","CometTypeaheadViewItemIcon.react","FDSText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(18),e,f,g,h;b[0]!==a?(e=a.entry,f=a.isActive,h=a.queryString,g=babelHelpers.objectWithoutPropertiesLoose(a,["entry","isActive","queryString"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);b[5]!==e.label||b[6]!==f?(a=i.jsx(d("CometTypeaheadViewItemIcon.react").CometTypeaheadViewTypedIcon,{isActive:f,label:e.label}),b[5]=e.label,b[6]=f,b[7]=a):a=b[7];h=String(h);var j;b[8]!==h?(j=h.toLowerCase(),b[8]=h,b[9]=j):j=b[9];b[10]!==j?(h=i.jsx(c("FDSText.react"),{numberOfLines:1,type:"body3",children:j}),b[10]=j,b[11]=h):h=b[11];b[12]!==e||b[13]!==f||b[14]!==g||b[15]!==a||b[16]!==h?(j=i.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},g,{entry:e,isActive:f,itemStartContent:a,children:h})),b[12]=e,b[13]=f,b[14]=g,b[15]=a,b[16]=h,b[17]=j):j=b[17];return j}g["default"]=a}),98);
__d("CometTypeaheadSeeAllViewItem.react",["fbt","ix","CometTypeaheadViewItem.react","FDSIcon.react","FDSText.react","fbicon","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));j.useMemo;function a(a){var b=d("react-compiler-runtime").c(16),e,f,g,h;b[0]!==a?(e=a.entry,f=a.extraViewItemProps,h=a.queryString,g=babelHelpers.objectWithoutPropertiesLoose(a,["entry","extraViewItemProps","queryString"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(e=b[1],f=b[2],g=b[3],h=b[4]);(a=f)==null?void 0:a.placeholderBuilder;a=(f=(a=f)==null?void 0:a.placeholderBuilder)!=null?f:l;f=a;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a="x6s0dn4 xwnonoy x1o1ewxj x3x9cwd x1e5q0jg x13rtm0m x78zum5 xc9qbxq xl56j7k x14qfxbe",b[5]=a):a=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",{className:a,children:k.jsx(c("FDSIcon.react"),{color:"white",icon:d("fbicon")._(i("491282"),16),size:16})}),b[6]=a):a=b[6];var j;b[7]!==f||b[8]!==h?(j=f(h),b[7]=f,b[8]=h,b[9]=j):j=b[9];b[10]!==j?(f=k.jsx(c("FDSText.react"),{color:"blueLink",numberOfLines:1,type:"body3",children:j}),b[10]=j,b[11]=f):f=b[11];b[12]!==e||b[13]!==g||b[14]!==f?(h=k.jsx(c("CometTypeaheadViewItem.react"),babelHelpers["extends"]({},g,{entry:e,itemStartContent:a,children:f})),b[12]=e,b[13]=g,b[14]=f,b[15]=h):h=b[15];return h}function l(a){return h._("__JHASH__rcEEwxiDmS5__JHASH__",[h._implicitParam("=m1",k.jsx("strong",{children:h._("__JHASH__BFbyaDXF_eS__JHASH__",[h._param("query",a.toLowerCase())])}))])}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("cometSearchTypeaheadEchoViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("echo")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadKeywordViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("keyword")?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadRecentViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.subtype==="recent"?a:null}f["default"]=a}),66);
__d("cometSearchTypeaheadSeeAllViewItem.resolver",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData.markers;return b.has("see_all")?a:null}f["default"]=a}),66);
__d("SearchCometTypeaheadViewItemResolver.react",["CometSearchTypeaheadBaseSurfaceRecentViewItem.react","CometTypeaheadEchoViewItem.react","CometTypeaheadKeywordViewItem.react","CometTypeaheadSeeAllViewItem.react","cometSearchTypeaheadEchoViewItem.resolver","cometSearchTypeaheadKeywordViewItem.resolver","cometSearchTypeaheadRecentViewItem.resolver","cometSearchTypeaheadSeeAllViewItem.resolver","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){var b=a.additionalEntryMappings,d=a.seeAllLabelBuilder,e=a.children,f=a.entry;a=a.fallbackViewItem;a=a===void 0?c("CometTypeaheadKeywordViewItem.react"):a;var g=i(function(){var a;return[].concat((a=b)!=null?a:[],j({seeAllLabelBuilder:d}))},[b,d]);g=g.find(function(a){a=a.resolver;return a(f)});if(g){var h=g.viewItem;g=g.viewItemProps;return e(h,g)}return e(a)}function j(a){a=a.seeAllLabelBuilder;return[{resolver:c("cometSearchTypeaheadEchoViewItem.resolver"),viewItem:c("CometTypeaheadEchoViewItem.react")},{resolver:c("cometSearchTypeaheadSeeAllViewItem.resolver"),viewItem:c("CometTypeaheadSeeAllViewItem.react"),viewItemProps:{placeholderBuilder:a}},{resolver:c("cometSearchTypeaheadRecentViewItem.resolver"),viewItem:c("CometSearchTypeaheadBaseSurfaceRecentViewItem.react")},{resolver:c("cometSearchTypeaheadKeywordViewItem.resolver"),viewItem:c("CometTypeaheadKeywordViewItem.react")}].filter(Boolean)}g["default"]=a}),98);
__d("cometTypeaheadMemoizeEntryKey",["cometUniqueID","memoizeStringOnly"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){return c("cometUniqueID")()});function a(a){return h(a)}g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddEcho",["BaseDataEntryKeyBuilder","cometTypeaheadMemoizeEntryKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.keyBuilder,d=b===void 0?c("BaseDataEntryKeyBuilder"):b,e=a.limit;return function(a){var b=a.entries,f=a.params.query;b=(b=b)!=null?b:[];var g=b.find(function(a){return d(a).trim().toLowerCase()===f.trim().toLowerCase()})!=null,h=[];if(!g&&b.length<e){g=c("cometTypeaheadMemoizeEntryKey")(f+"-echo");g={key:g,label:f,metaData:{markers:new Set(["echo"])},rawData:{type:"echo"}};h.push(g)}return babelHelpers["extends"]({},a,{entries:[].concat(b,h)})}}g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorAddSeeAll",["cometTypeaheadMemoizeEntryKey"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.position;return function(a){var d=a.entries,e=a.params.query;d=(d=d)!=null?d:[];var f=c("cometTypeaheadMemoizeEntryKey")(e+"-see_all");f={key:f,label:e,metaData:{markers:new Set(["see_all"])},rawData:{type:"see_all"}};e=[];switch(b){case"bottom":e=[].concat(d,[f]);break;case"top":e=[f].concat(d);break}return babelHelpers["extends"]({},a,{entries:e})}}g["default"]=a}),98);
__d("cometSearchTypeaheadDecorateMixedPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorAddEcho","cometSearchTypeaheadPayloadDecoratorAddSeeAll"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b.excludeSeeAllAndEcho;d=d===void 0?!1:d;var e=b.keyBuilder,f=b.limit;b=b.seeAllPosition;b=b===void 0?"bottom":b;return c("baseTypeaheadFetchPayloadDecorate")(a,[c("BaseTypeaheadPayloadDecoratorAddLimit")(f),d?null:c("cometSearchTypeaheadPayloadDecoratorAddEcho")({keyBuilder:e,limit:f}),d?null:c("cometSearchTypeaheadPayloadDecoratorAddSeeAll")({position:b})].filter(Boolean))}g["default"]=a}),98);
__d("cometSearchTypeaheadPayloadDecoratorApplySectionLimits",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return function(c){for(var d=c.entries,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=b(g);h=h!=null?a.get(h):null;h!=null&&g.type==="section"&&(g.entries=g.entries.slice(0,h))}return c}}f["default"]=a}),66);
__d("cometSearchTypeaheadDecorateRecentPayload",["BaseTypeaheadPayloadDecoratorAddLimit","baseTypeaheadFetchPayloadDecorate","cometSearchTypeaheadPayloadDecoratorApplySectionLimits"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=b.getSectionLimitKey,e=b.limit;b=b.sectionLimits;var f=a.entries.every(function(a){return a.type==="section"});return c("baseTypeaheadFetchPayloadDecorate")(a,[f&&b!=null?c("cometSearchTypeaheadPayloadDecoratorApplySectionLimits")(b,d):c("BaseTypeaheadPayloadDecoratorAddLimit")(e)])}g["default"]=a}),98);
__d("cometSearchTypeaheadDedupeAndLog",["FBLogger","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("ODS").__setRef("cometSearchTypeaheadDedupeAndLog");function a(a,b,c){var d=new Map(),e=[];for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;var j=d.get(h.key);j!=null?i({caller:c,dupeEntry:h,existingEntry:j,strategy:a}):(d.set(h.key,h),e.push(h))}return e}function i(a){var b=a.caller,d=a.dupeEntry,e=a.existingEntry;a=a.strategy;var f=e.metaData.markers,g=d.metaData.markers;c("FBLogger")("search").warn("STS Dupe encountered: "+e.key+" ("+Array.from(f).join("_")+", label: "+e.label+") compared to "+d.key+"\n    ("+Array.from(g).join("_")+", label: "+d.label+")");var i="comet_ta_sts_dupe_v4."+a,j=["react_key_"+(Array.from(f).join("_")||"plain_keyword"),b,"existing_kind_"+Array.from(f).join("_"),"dupe_kind_"+Array.from(g).join("_")].join(".");h.onReady(function(a){a.bumpEntityKey(354,i,j,1)})}g["default"]=a}),98);
__d("cometSearchTypeaheadSTSDedupeEntries",["CometSearchTypeaheadDefaultEntryComparator","CometSearchTypeaheadServerDrivenEntryComparator","cometSearchTypeaheadDedupeAndLog","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){c===void 0&&(c="bootstrap_and_backend_merge");var e=a.concat(b).every(function(a){return a.rawData.suggestion_keys!=null});return h.apply(void 0,[a,b,c].concat(e?[d("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,d("CometSearchTypeaheadServerDrivenEntryComparator").pickEntryToKeep]:[d("CometSearchTypeaheadDefaultEntryComparator").areEntriesDupes,d("CometSearchTypeaheadDefaultEntryComparator").pickEntryToKeep]))}function h(a,b,e,f,g){var h=d("CometSearchTypeaheadServerDrivenEntryComparator").areEntriesDupes,i=[],j=new Set(b);for(var a=a,k=Array.isArray(a),l=0,a=k?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=a.length)break;m=a[l++]}else{l=a.next();if(l.done)break;m=l.value}m=m;i.push(m)}for(m=b,l=Array.isArray(m),k=0,m=l?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(l){if(k>=m.length)break;a=m[k++]}else{k=m.next();if(k.done)break;a=k.value}b=a;a=[];for(var n=0;n<i.length;n++){var o=i[n];o!=null&&f(o,b)&&a.push(n)}o=a[0];n=o!=null?i[o]:null;if(n!=null&&!j.has(n)){n=g(n,b);i[o]=n;for(o=0;o<a.length;o++){var p=a[o],q=i[p];q!=null&&q!==n&&q!==g(q,b)&&(i[p]=null)}}else i.push(b)}return c("cometSearchTypeaheadDedupeAndLog")(h?"with_keys":"without_keys",c("filterNulls")(i),e)}g["default"]=a}),98);
__d("cometSearchTypeaheadSTSDedupeCachedEntries",["cometSearchTypeaheadSTSDedupeEntries","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var d=c("cometSearchTypeaheadSTSDedupeEntries")(a.map(function(a){return a.entry}),b.map(function(a){return a.entry}),"query_cache"),e=[].concat(a,b);return c("filterNulls")(d.map(function(a){return e.find(function(b){return b.entry===a})}))}g["default"]=a}),98);
__d("searchCometTypeaheadGetHighConfidenceResult",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData,c=a.rawData;b=b.markers;if((a.subtype==="keyword"||a.subtype==="recent")&&b.has("high_confidence")){c=(b=(a=c.structuredInfo)==null?void 0:a.high_confidence_result)!=null?b:{};a=c.hcm_id;b=c.source_as_enum;if(a!=null&&b!=null)return{id:a,source:b}}}f["default"]=a}),66);
__d("searchCometTypeaheadGetStsDisambiguation",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.metaData,c=a.rawData;b=b.markers;if(a.subtype==="keyword"&&b.has("disambiguation")){a=(c=(a=c.structuredInfo)==null?void 0:(b=a.disambiguation_result)==null?void 0:b.disambiguation_info_list[0])!=null?c:{};b=a.type;if(b!=null)return{primary:{type:b}}}}f["default"]=a}),66);
__d("searchCometTypeaheadPushErrorToast",["fbt","cometPushToast"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){d("cometPushToast").cometPushErrorToast({message:h._("__JHASH__EY5KKLiSk-O__JHASH__")})}g["default"]=a}),226);
__d("useSearchCometEventEmitterContext",["FBLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){a=i(a);a==null&&c("FBLogger")("search").mustfix("Missing event emitter context");return a}g["default"]=a}),98);
__d("searchCometTypeaheadWithRecentDataSourceContext",["CometSearchRecentDataSourceDispatcherContext","SearchCometTypeaheadEventEmitterContext","react","react-compiler-runtime","useCometInternalTypeaheadFetch","useCometInternalTypeaheadStateDispatcher","useSearchCometEventEmitterContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect;b.useMemo;function a(a,b){var e=b.dataSource,f=b.shouldSubscribeToRecentSearches;function g(b){var g=d("react-compiler-runtime").c(28),k,l,m,n,o;g[0]!==b?(k=b.inputRef,l=b.onChange,m=b.onPressEntry,n=b.onSelectFreeformQuery,o=babelHelpers.objectWithoutPropertiesLoose(b,["inputRef","onChange","onPressEntry","onSelectFreeformQuery"]),g[0]=b,g[1]=k,g[2]=l,g[3]=m,g[4]=n,g[5]=o):(k=g[1],l=g[2],m=g[3],n=g[4],o=g[5]);b=c("useCometInternalTypeaheadFetch")();var p=b.refetch;b=c("useCometInternalTypeaheadStateDispatcher")();var q=b.dispatchHighlightedEntry;b=(b=c("useSearchCometEventEmitterContext")(c("SearchCometTypeaheadEventEmitterContext")))!=null?b:{};var r=b.subscribeToRecentSearchEntryAdded,s;g[6]!==r?(b=function(){if(f)return r==null?void 0:r(h)},s=[r],g[6]=r,g[7]=b,g[8]=s):(b=g[7],s=g[8]);j(b,s);g[9]!==n?(b=function(a){var b={hasSecondaryAction:!0,key:a,label:a,metaData:{markers:new Set(["recent"])},rawData:{},subtype:"recent",type:"entry"};e.addRecentEntry(b);n&&n(a)},g[9]=n,g[10]=b):b=g[10];s=b;g[11]!==p?(b=function(a){e.removeRecentEntry(a,{onBeforeCommitMutation:function(){p({source:"cache"})}})},g[11]=p,g[12]=b):b=g[12];var t=b;g[13]!==q||g[14]!==m||g[15]!==t?(b=function(a,b){var c,d=a.label,f=a.metaData;c=(c=f==null?void 0:f.markers)!=null?c:new Set();if(b===!0&&a.subtype==="recent"){t(a);q({entry:null,secondaryActionHighlighted:null,source:null});return}if(c.has("nullstate_explore")){m&&m(a);return}var g=new Set(["recent"]);c.has("entity")&&g.add("entity");c.has("direct_nav")&&g.add("direct_nav");c.has("high_confidence")&&g.add("high_confidence");a.subtype==="recent"||a.subtype==="bootstrap"||a.subtype==="keyword"?c=babelHelpers["extends"]({},a.rawData,{badgeSnippet:null}):c={};f=(f=f==null?void 0:f.logging)!=null?f:{};var h=f.entityID,i=f.entityType,j=f.loggingInfo,k=f.stsDirectNavEntityID,l=f.stsDirectNavType,n=f.stsDisambiguationType,o=f.stsHighConfidenceID;f=f.stsHighConfidenceSource;e.addRecentEntry({hasSecondaryAction:!0,key:d.toLocaleLowerCase(),label:d,metaData:{logging:{entityID:h,entityType:i,loggingInfo:j,stsDirectNavEntityID:k,stsDirectNavType:l,stsDisambiguationType:n,stsHighConfidenceID:o,stsHighConfidenceSource:f},markers:g},rawData:c,subtype:"recent",type:"entry"});m==null?void 0:m(a,b)},g[13]=q,g[14]=m,g[15]=t,g[16]=b):b=g[16];b=b;var u;g[17]!==t?(u={dispatchRemoveRecentEntry:t},g[17]=t,g[18]=u):u=g[18];u=u;u=u;var v;g[19]!==k||g[20]!==s||g[21]!==b||g[22]!==l||g[23]!==o?(v=i.jsx(a,babelHelpers["extends"]({},o,{inputRef:k,onChange:l,onPressEntry:b,onSelectFreeformQuery:s})),g[19]=k,g[20]=s,g[21]=b,g[22]=l,g[23]=o,g[24]=v):v=g[24];g[25]!==u||g[26]!==v?(k=i.jsx(c("CometSearchRecentDataSourceDispatcherContext").Provider,{value:u,children:v}),g[25]=u,g[26]=v,g[27]=k):k=g[27];return k}function h(a){e.addRecentEntry(a)}return g}g["default"]=a}),98);
__d("useCometTypeaheadStateQueryString",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5),c=j(a),e=c[0],f=c[1],g;b[0]!==a?(c=function(){return f(a)},g=[a],b[0]=a,b[1]=c,b[2]=g):(c=b[1],g=b[2]);i(c,g);b[3]!==e?(c=[e,f],b[3]=e,b[4]=c):c=b[4];return c}g["default"]=a}),98);
__d("useHostedRouteEntityKey",["getCometEntityKey","react","react-compiler-runtime","useHostedRoute"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(){var a=d("react-compiler-runtime").c(2),b=c("useHostedRoute")(),e;a[0]!==b?(e=b?c("getCometEntityKey")(b):null,a[0]=b,a[1]=e):e=a[1];b=e;a=b;return a}g["default"]=a}),98);
__d("useSearchCometRecentSearchDataSource",["Actor","CometRelay","CometSearchRecentDataSource","CometSearchRecentDataSource.query","WebPixelRatio","XCometActivityLogControllerRouteBuilder","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=16;function a(a){var b=a.fetchSearchBadge,e=b===void 0?!1:b,f=a.filter,g=a.nullStateSurface,h=a.searchScopeEntityID,k=d("CometRelay").useRelayEnvironment();b=d("Actor").useActor();a=b[0];var l=c("XCometActivityLogControllerRouteBuilder").buildURL({category_key:"SEARCH",entry_point:"edit_search_history",log_filter:"search",vanity:a});return i(function(){return new(c("CometSearchRecentDataSource"))({activityLogURL:l,gqlQuery:d("CometSearchRecentDataSource.query").query,limit:j,normalize:d("CometSearchRecentDataSource.query").normalize,queryVariablesBuilderFunction:function(){return{fetch_nullstate:g!=null,fetch_recent_searches:f!=null,fetch_search_badge:e,filter:f,first:j,scale:d("WebPixelRatio").get(),search_null_state_argument:g!=null?{surface:{name:g}}:{surface:{name:"GLOBAL"}},search_scope_entity_id:h}},relayEnvironment:k})},[l,e,f,g,k,h])}g["default"]=a}),98);
__d("useSearchCometTypeaheadCompositeDataSource",["BaseDataEntryLabelKeyBuilder","CometRelay","CometSearchBootstrapKeywordsDataSource","CometSearchKeywordDataSource","Promise","cometSearchTypeaheadDecorateMixedPayload","cometSearchTypeaheadDecorateRecentPayload","cometSearchTypeaheadSTSDedupeCachedEntries","cometSearchTypeaheadSTSDedupeEntries","justknobx","react","react-compiler-runtime","searchCometTypeaheadPushErrorToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");e.useCallback;e.useMemo;function a(a){var e=d("react-compiler-runtime").c(51),f=a.config,g=a.recentDataSource,i=a.searchScopeEntityID;a=f.dataSources;var n=f.logging;f=f.view;var o=a.bootstrapKeywordsDataSourceParams;a=a.keywordDataSourceParams;var p=n.sessionContext,q=f.renderLimit,r=f.sectionLimits;n=d("CometRelay").useRelayEnvironment();e[0]!==o||e[1]!==q||e[2]!==n?(f=o!=null?new(c("CometSearchBootstrapKeywordsDataSource"))(babelHelpers["extends"]({},o,{limit:q,relayEnvironment:n})):null,e[0]=o,e[1]=q,e[2]=n,e[3]=f):f=e[3];o=f;var s=o;e[4]!==a||e[5]!==q||e[6]!==n?(f=new(c("CometSearchKeywordDataSource"))(babelHelpers["extends"]({},a,{dedupe:c("cometSearchTypeaheadSTSDedupeCachedEntries"),limit:q,onError:m,relayEnvironment:n})),e[4]=a,e[5]=q,e[6]=n,e[7]=f):f=e[7];o=f;var t=o;e[8]!==q?(a=function(a){var b=a.entries;a=a.params;return c("cometSearchTypeaheadDecorateMixedPayload")({entries:b,params:a},{excludeSeeAllAndEcho:(b=c("justknobx")._("1509"))!=null?b:!1,keyBuilder:c("BaseDataEntryLabelKeyBuilder"),limit:q})},e[8]=q,e[9]=a):a=e[9];var u=a,v=l;e[10]!==s||e[11]!==g?(n=function(){s==null?void 0:s.bootstrap(),g==null?void 0:g.bootstrap()},e[10]=s,e[11]=g,e[12]=n):n=e[12];f=n;e[13]!==p||e[14]!==g||e[15]!==i?(o=function(a,b){if(g==null)return;if(i==null){g.add(a,p,b);return}var c=a.key,d=a.label,e=a.metaData;a=a.rawData;e={logging:{searchScopeEntityID:i},markers:e.markers};c={hasSecondaryAction:!0,key:c,label:d,metaData:e,rawData:a,subtype:"recent",type:"entry"};g.add(c,p,b)},e[13]=p,e[14]=g,e[15]=i,e[16]=o):o=e[16];a=o;e[17]!==s||e[18]!==u||e[19]!==t||e[20]!==q||e[21]!==g||e[22]!==r?(n=function(a){var b=a.query;if(b===""&&g!=null){var d=g.fetchCache(a),e=d.entries;d=d.params;return c("cometSearchTypeaheadDecorateRecentPayload")({entries:e,params:d},{getSectionLimitKey:k,limit:q,sectionLimits:r})}if(b==="")return{entries:[],params:a};if(s==null){e=t.fetchCache(a);return u(babelHelpers["extends"]({},e))}d=s.fetchCache(a);b=d.entries;e=d.params;if(b.length>=q)return u({entries:b,params:e});d=t.fetchCache(a);e=d.entries;a=d.params;d=v(b,e);return u({entries:d,params:a})},e[17]=s,e[18]=u,e[19]=t,e[20]=q,e[21]=g,e[22]=r,e[23]=n):n=e[23];o=n;e[24]!==s||e[25]!==u||e[26]!==t||e[27]!==q||e[28]!==g||e[29]!==r?(n=function(a){var d=a.query;if(d===""&&g!=null)return g.fetchNetwork(a).then(function(a){return c("cometSearchTypeaheadDecorateRecentPayload")({entries:a.entries,params:a.params},{getSectionLimitKey:j,limit:q,sectionLimits:r})});if(d==="")return(h||(h=b("Promise"))).resolve({entries:[],params:a});return s==null?t.fetchNetwork(a).then(function(a){return u(babelHelpers["extends"]({},a))}):t.fetchNetwork(a).then(function(b){var c=s.fetchCache(a);c=c.entries;var d=b.entries;b=b.params;c=v(c,d);return u({entries:c,params:b})})},e[24]=s,e[25]=u,e[26]=t,e[27]=q,e[28]=g,e[29]=r,e[30]=n):n=e[30];n=n;var w;e[31]!==g?(w=function(a,b){g!=null&&g.remove(a,b)},e[31]=g,e[32]=w):w=e[32];w=w;var x;e[33]!==t?(x=function(){return t.clearQueryCache()},e[33]=t,e[34]=x):x=e[34];var y;e[35]!==g?(y=function(){return g==null?void 0:g.clear()},e[35]=g,e[36]=y):y=e[36];var z;e[37]!==s?(z=function(){return s},e[37]=s,e[38]=z):z=e[38];var A;e[39]!==g?(A=function(){return g==null?void 0:g.refresh()},e[39]=g,e[40]=A):A=e[40];var B;e[41]!==a||e[42]!==f||e[43]!==o||e[44]!==n||e[45]!==w||e[46]!==x||e[47]!==y||e[48]!==z||e[49]!==A?(B={addRecentEntry:a,bootstrap:f,clearQueryCache:x,clearRecentSearches:y,fetchCache:o,fetchNetwork:n,getBootstrapKeywordsDataSource:z,refreshRecentSearches:A,removeRecentEntry:w},e[41]=a,e[42]=f,e[43]=o,e[44]=n,e[45]=w,e[46]=x,e[47]=y,e[48]=z,e[49]=A,e[50]=B):B=e[50];a=B;return a}function j(a){return a.type==="section"?a.subtype:null}function k(a){return a.type==="section"?a.subtype:null}function l(a,b){return c("cometSearchTypeaheadSTSDedupeEntries")(a,b,"bootstrap_and_backend_merge")}function m(){return c("searchCometTypeaheadPushErrorToast")()}g["default"]=a}),98);
__d("useSearchCometTypeaheadRecentDataSourceContextDecorator",["react","searchCometTypeaheadWithRecentDataSourceContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a,b){b===void 0&&(b=!0);return i(function(){return{decorate:function(){return c("searchCometTypeaheadWithRecentDataSourceContext").apply(void 0,arguments)},params:{dataSource:a,shouldSubscribeToRecentSearches:b}}},[a,b])}g["default"]=a}),98);
__d("useSearchCometTypeaheadViewItem",["SearchCometTypeaheadViewItemResolver.react","cr:2417","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var e=d("react-compiler-runtime").c(4),f=a.additionalEntryMappings,g=a.getLinkProps,h=a.seeAllLabelBuilder;e[0]!==f||e[1]!==g||e[2]!==h?(a=function(a){var d=a.entry,e=a.queryString,j=babelHelpers.objectWithoutPropertiesLoose(a,["entry","queryString"]);return i.jsx(c("SearchCometTypeaheadViewItemResolver.react"),{additionalEntryMappings:f,entry:d,seeAllLabelBuilder:h,children:function(a,c){return i.jsx(a,babelHelpers["extends"]({},j,{debugElement:b("cr:2417")?i.jsx(b("cr:2417"),{entry:d,queryString:e}):null,entry:d,extraViewItemProps:c,linkProps:g==null?void 0:g({entry:d,queryString:e}),queryString:e}))}})},e[0]=f,e[1]=g,e[2]=h,e[3]=a):a=e[3];return a}g["default"]=a}),98);
__d("useSearchCometTypeaheadViewListStrategy",["CometScrollableArea.react","FocusInertRegion.react","focusScopeQueries","react","react-compiler-runtime","react-strict-dom","useCometTypeaheadSectionedViewListStrategy","useSearchCometTypeaheadViewItem"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(15),e=a.additionalEntryMappings,f=a.afterNullstateContent,g=a.emptyStateContent,h=a.getLinkProps,j=a.isScrollable,k=a.nullstateContent,l=a.onHeaderActionPress,m=a.scrollableXStyle,n=a.seeAllLabelBuilder,o=a.xstyle;b[0]!==e||b[1]!==h||b[2]!==n?(a={additionalEntryMappings:e,getLinkProps:h,seeAllLabelBuilder:n},b[0]=e,b[1]=h,b[2]=n,b[3]=a):a=b[3];e=c("useSearchCometTypeaheadViewItem")(a);b[4]!==g||b[5]!==k||b[6]!==l||b[7]!==e?(h={emptyStateContent:g,nullstateContent:k,onHeaderActionPress:l,viewItemStrategyRenderer:e},b[4]=g,b[5]=k,b[6]=l,b[7]=e,b[8]=h):h=b[8];var p=c("useCometTypeaheadSectionedViewListStrategy")(h);b[9]!==p||b[10]!==f||b[11]!==j||b[12]!==m||b[13]!==o?(n=function(a){var b=a.ariaProps,e=a.entries,g=a.highlightedEntry,h=a.isLoading,k=a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["ariaProps","entries","highlightedEntry","isLoading","queryString"]);b=i.jsxs(i.Fragment,{children:[i.jsx(p,babelHelpers["extends"]({ariaProps:b,entries:e,highlightedEntry:g,isLoading:h,queryString:k},a)),f!=null&&k.length===0&&e.length>0?f:null]});g=k==="";return i.jsx(c("FocusInertRegion.react"),{focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:i.jsx(d("react-strict-dom").html.div,{style:o,"data-testid":void 0,children:j?i.jsx(c("CometScrollableArea.react"),{horizontal:!1,xstyle:m,children:b}):b})})},b[9]=p,b[10]=f,b[11]=j,b[12]=m,b[13]=o,b[14]=n):n=b[14];return n}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSDynamicDependencies",["Bootloader","ODS","Promise","SiteData","asyncToGeneratorRuntime","clearTimeout","cr:10511","err","justknobx","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=babelHelpers["extends"]({},b("cr:10511")),k={_tombstone:!0};function a(a){var e=new Map();for(a of a){var f=a.name;f!=null&&!n(f)&&e.set(f,c("nullthrows")(a.value))}if(e.size===0)return(i||(i=b("Promise"))).resolve();var g=new(i||(i=b("Promise")))(function(a){var f={},i=[],k=function(c){var a=c[0];c=c[1];c=c==null?void 0:c.__dr;f[c]={be:1,r:[]};i.push(c);(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",c);j[a]={load:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield g;return j[a]});function d(){return c.apply(this,arguments)}return d}()}};for(var m of e)k(m);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});l(c("Bootloader"),i,function(b){Array.from(e.entries()).forEach(function(a,c){var d=a[0];a[1];j[d]=b[c]}),a()})});return g}function l(a,b,c){return a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function m(a){return a.charAt(0).toUpperCase()+a.slice(1)}function n(a){return a in j&&j[a]!==k}var o=c("justknobx")._("2800");function e(a,e,f){var g=new Map();for(a of(a=a)!=null?a:[]){n(a)||g.set(a,"LS"+m(a))}for(e of(a=e)!=null?a:[]){!n(e+".bs")?g.set(e+".bs","LS"+m(e)+".nop"):e+".nop"in j||g.set(e+".nop","LS"+m(e)+".nop")}for(e of(a=f)!=null?a:[]){e in j||g.set(e,"LS"+m(e))}if(g.size===0)return(i||(i=b("Promise"))).resolve();var p=new(i||(i=b("Promise")))(function(a,e){var f={},i=[],m=function(a){var c=a[0];a=a[1];(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",a);f[a]={be:1,r:[]};i.push(a);j[c]={load:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield p}catch(a){j[c]=k;throw a}return j[c]});function d(){return a.apply(this,arguments)}return d}()}};for(var n of g)m(n);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});var q=l(c("Bootloader"),i,function(b){c("clearTimeout")(r),Array.from(g.entries()).forEach(function(a,c){var d=a[0];a[1];j[d]=b[c]}),a()}),r=c("setTimeout")(function(){q.remove(),e(c("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",o,Array.from(g.keys())))},o)});return p}g.cachedModules=j;g.TOMBSTONE=k;g.downloadRelayDependencies=a;g.downloadBootloaderDependencies=e}),98);
__d("XPlatReactCrypto",["err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!=="function")throw c("err")("crypto.getRandomValues: Not implemented");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!=="function")return null;a=self.crypto.randomUUID();return typeof a==="string"?a:null}function d(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.importKey: Not implemented");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c("err")("crypto.subtle.exportKey: Not implemented");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c("err")("crypto.subtle.generateKey: Not implemented");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c("err")("crypto.subtle.encrypt: Not implemented");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c("err")("crypto.subtle.decrypt: Not implemented");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c("err")("crypto.subtle.sign: Not implemented");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c("err")("crypto.subtle.digest: Not implemented");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c("err")("crypto.subtle.deriveBits: Not implemented");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.deriveKey: Not implemented");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a={add:(h||(h=d("I64"))).add,and_:h.and_,asr_:h.asr_,cast:function(a){a._tag="i64";return a},div:h.div,eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&(h||(h=d("I64"))).equal(a,b)},from_string:function(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){throw c("FBLogger")("messenger_comet").mustfixThrow('Unable to cast "%s" to int64',a)}},ge:h.ge,gt:h.gt,le:h.le,lsl_:h.lsl_,lsr_:h.lsr_,lt:h.lt,max:h.max,min:h.min,mod_:h.mod_,mul:h.mul,neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&!(h||(h=d("I64"))).equal(a,b)},of_float:h.of_float,of_int32:h.of_int32,or_:h.or_,random:function(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(h||(h=d("I64"))).add(h.lsl_(h.of_float(a[0]),32),h.of_float(a[1]))},sub:h.sub,to_float:h.to_float,to_int32:h.to_int32,to_string:function(a){return a==null?a:(h||(h=d("I64"))).to_string(a)},xor:h.xor};g["default"]=a}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";var h={__val__:"__stop_iteration__"};function a(a){return{__val__:"__next_value__",next:a}}function i(a){return a!=null&&typeof a==="object"&&a.__val__==="__next_value__"}function j(a,b,c){var e=k(b);return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(a.next(c)).then(function(c){return c.done?c:e(c).then(function(d){if(d===h)return c;d=i(d)?d.next:void 0;return j(a,b,d)})})}function k(a){return function(b){b=a(b);return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(b)}}g.STOP_ITERATION=h;g.wrapNextValue=a;g.iteratorLoop=j}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return j(a,b)},c.next=function(){var c={done:!0},e=function(a){return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(b(a.value.item)).then(function(b){if(b){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION}})};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){return c})},c}function k(a,b,c){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return k(a,b,c)},e.next=function(){if(f>=c)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!0});var e={done:!0},g=function(a){if(f++<b)return;e=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,g).then(function(){return e})},e}function a(a,b){return l(a).then(function(a){return a.reduce(function(a,c){return a.then(function(){return b(c)})},d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0))})}function l(a){var b=[],c=function(a){b.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return b})}function m(a,b,c){var e;c===void 0&&(c=[]);var f={ASC:1,DESC:-1},g=function(a,c){a=a.item;c=c.item;for(var e=0;e<b.length;e++){var g=b[e];g=g[0];var i=a[g];g=c[g];var j;i==null&&g==null?j=0:i==null&&g!=null?j=-1:i!=null&&g==null?j=1:j=(h||(h=d("ReStoreKeyComparer"))).compareValue(i,g);if(j===0)continue;return j*f[b[e][1]]}return 0},i,j=[],k=[],l=function(a){var b=[];for(var d=c.length-1;d>=0;d--)b.push(a[c[d]]);return b},n=function(){k=j,k.sort(g),j=[]};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return m(a,b,c)},e.next=function(){if(k.length)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!1,value:k.shift()});var b=function(a){var b=l(a.value.item);if(i!=null&&(h||(h=d("ReStoreKeyComparer"))).compareKey(i,b)!==0){n();j.push(a.value);i=b;return d("LSMaybeSyncIteration").STOP_ITERATION}i=b;j.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,b).then(function(){!k.length&&j.length&&n();if(k.length)return{done:!1,value:k.shift()};else return{done:!0}})},e}function b(a){var b=0,c=function(){b++};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return(i||(i=d("I64"))).of_int32(b)})}function e(a,b){return{forEach:function(e){return l(a).then(function(a){a=a.reduce(function(a,c){c=c.item[b];var d=(a.get(c)||0)+1;return a.set(c,d)},new(c("LSDict"))());var f=d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0),g=function(a){var c=a[0],g=a[1];f=f.then(function(){var a;return e((a={},a[b]=c,a.group_count=(i||(i=d("I64"))).of_int32(g),a))})};for(a of a.entries())g(a);return f})}}}g.filter=j;g.slice=k;g.forEach=a;g.toArray=l;g.sortBy=m;g.count=b;g.groupBy=e}),98);
__d("LSPendingTasksPluginType",[],(function(a,b,c,d,e,f){a=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});f["default"]=a}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="4",j="16",k=new Set([c("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function a(a){var b=k.has((h||(h=d("I64"))).to_float(a.pluginType));a=a.context===j||a.context===i;return b||a}g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","gkx","isNativeTask","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("gkx")("8809"),j=new Set(["messages","attachments","reactions"]);function k(a){return j.has(a)}function l(a,b,d){return a&&b.name==="pending_tasks"&&d!=null&&c("isNativeTask")(d)}function m(a){for(var b of Object.keys(a))a[b]===void 0&&delete a[b];return a}function n(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=function(){var a={done:!0},f=0,g="start",i=function(e){var i=function(){var a=f,i=b[a]||{},j=i.end;i=i.start;var k=e.value[0],l=k.slice(0,a);if(i&&g==="start"){g="start_verify";var m=(h||(h=d("ReStoreKeyComparer"))).compareValue(k[a],i[0]),n=m*(c==="asc"?1:-1)<i[1];if(n)if(a===k.length-1&&m===0)return{v:void 0};else{n=[].concat(l,[i[0]],i[1]&&c==="asc"||!i[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:d("LSMaybeSyncIteration").wrapNextValue(n)}}}if(i&&g==="start_verify"&&!l.every(function(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareValue(a,k[b])===0})){f=0;g="start";return{v:void 0}}if(j&&(h||(h=d("ReStoreKeyComparer"))).compareValue(j[0],k[a])*(c==="asc"?1:-1)<j[1]){f=0;g="start";return{v:d("LSMaybeSyncIteration").wrapNextValue([].concat(k.slice(0,a),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]))}}f++;g="start"};while(f<b.length){var j=i();if(typeof j==="object")return j.v}a=e;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(e,i).then(function(){return a})},a}return f()}function o(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=async function(){var a=await e.next();outer:while(!a.done){var f=async function(f){var g=b[f]||{},i=g.end;g=g.start;var j=a.value[0],k=j.slice(0,f);if(g){var l=(h||(h=d("ReStoreKeyComparer"))).compareValue(j[f],g[0]);if(l*(c==="asc"?1:-1)<g[1]){if(f===j.length-1&&l===0)a=await e.next();else{l=[].concat(k,[g[0]],g[1]&&c==="asc"||!g[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);a=await e.next(l)}if(a.done)return{v:{done:!0}};j=a.value[0];if(!k.every(function(b,a){return(h||(h=d("ReStoreKeyComparer"))).compareValue(b,j[a])===0}))return"continue|outer"}}if(i&&(h||(h=d("ReStoreKeyComparer"))).compareValue(i[0],j[f])*(c==="asc"?1:-1)<i[1]){a=await e.next([].concat(j.slice(0,f),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]));return"continue|outer"}};for(var g=0;g<b.length;g++){var i=await f(g);switch(i){case"continue|outer":continue outer;default:if(typeof i==="object")return i.v}}break}return a},a}return f()}function p(a,b,d,e,f){return{delete:function(){return d.delete.apply(d,a)},item:b,update:function(g){var h=f&&k(e.name)?{transportKey:"FBBroker"}:{};g=babelHelpers.extends({},b,g,h);if(l(f,e,g))throw c("unrecoverableViolation")("cannot insert native task in dynamic mode","messenger_web_product");return d.upsert(a,m(g))}}}function q(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return q(a,b)},c.next=function(){var c={done:!0},e=function(a){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){if(c.done)return d("LSMaybeSyncIteration").iteratorLoop(b,e)}).then(function(){return c})},c}function r(a,b,c){var e,f=[{done:!0},{done:!0}],g=function(a){var b=f[a];f[a]={done:!0};return b};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return r(a,b,c)},e.next=function(){var e=function(a){return function(b){a==="a"?f[0]=b:f[1]=b;return d("LSMaybeSyncIteration").STOP_ITERATION}},i=d("LSSynchronousPromise").maybeMakeSynchronousPromise();f[0].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(a,e("a"))}));f[1].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(b,e("b"))}));return i.then(function(){if(f[0].done&&f[1].done)return{done:!0};if(f[0].done)return g(1);if(f[1].done)return g(0);var a=(h||(h=d("ReStoreKeyComparer"))).compareKey(f[0].value[0],f[1].value[0]);if(a===0)return g(0);return a*(c==="asc"?1:-1)<0?g(0):g(1)})},e}function a(a,b,e,f,g,h,j,m){var s=new Set(),t=a.length>1,u=a.length===1&&a[0][1]==null,v=a.map(function(a){var c=a[0],j=a[1];return c.map(function(a){f.key_lookup===!0&&a.length!==0;f.table_scan===!0&&a.length===0;var c=a.map(function(a){return h(a,b)});a=c.length===(j==null?e.primaryKeyIds:e.indexes[j]).length&&c.every(function(a){var b=a.end;a=a.start;return a&&b&&a[0]===b[0]&&a[1]===0&&b[1]===0});if(a){a=function a(){var b,f=!1;return b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,b.next=function(){var a;if(f)return d("LSSynchronousPromise").maybeMakeSynchronousPromise({done:!0});f=!0;var b=c.map(function(a){a=a.start;return a[0]});return(a=j==null?g:g.index(j)).get.apply(a,b).then(function(a){if(!a)return{done:!0};a=d("ReStoreVaulting").maybeUnvaultDbRow(a,e.name);return{done:!1,value:[b,a]}})},b};return a()}a=i?n:o;return a(j==null?g:g.index(j),c,b)})}).flat().reduce(function(c,d){return a.length>1?q(c,d):r(c,d,b)});function w(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=w,a.next=function(){var a=!0,b,f,h,i,n=function(c){a=!1;var g=c.value;f=g[0];h=g[1];b=u?f:e.primaryKeyIds.map(function(a){return h[a]});if(l(j,e,h)){i=c;return}if(k(e.name)&&j&&h!=null&&h.transportKey!=="FBBroker"){i=c;return}if(t){g=JSON.stringify(b);if(s.has(g))return;s.add(g)}return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(v,n).then(function(){if(i!=null){var d=i.value[1].transportKey;c("FBLogger")("messenger_web_product").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',m,d)}return a||b==null||h==null?{done:!0}:{done:!1,value:p(b,h,g,e,j)}})},a}return w()}g.isTranportKeyEnforcedTable=k;g.isNativePendingTaskViolation=l;g.stripUndefinedProperties=m;g.unionIterators=q;g.mergeIterators=r;g.fetch=a}),98);
__d("LSRuntimeDb",["LSIterationHelpers","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.name.match(/secure_|inbox(?!_)/i)}function a(a,b,d,e,f,g){return{metadata:d,table:function(j){j=d.tableNames[d.tableIds[j]];if(b===0&&h(j))throw c("unrecoverableViolation")("cannot access secure table from dynamic mode","messenger_web_product");return i(a,j,e,f,g)},transactionId:a.__internal__transaction_id}}function i(a,b,e,f,g){var h=a[b.name+"::"+f[f.length-1]];return{add:async function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker"),await h.add(a)},fetch:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"asc",b,e,h,j,g,f.join(", "))},fetchDesc:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"desc",b,e,h,j,g,f.join(", "))},peekNextAutoIncrementId:function(){return h.peekNextAutoIncrementId()},put:async function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");if(d("LSIterationHelpers").isNativePendingTaskViolation(g,b,a))throw c("unrecoverableViolation")("cannot put native task via LS transport","messenger_web_product");var e=b.primaryKeyIds.map(function(b){if(a[b]!==void 0)return a[b];throw c("unrecoverableViolation")("primary key must be defined on object","messenger_web_product")});await h.delete.apply(h,e);await h.add(d("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},a)))}}}function j(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!=null)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!=null)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!=null)throw c("unrecoverableViolation")("Cannot specify both lt and lte","messenger_web_product");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!=null)throw c("unrecoverableViolation")("Cannot specify both gt and gte","messenger_web_product");e=[a.gte,0]}}return{end:e,start:d}}return{end:[a,0],start:[a,0]}}g.LSRuntimeDb=a;g.parseConstraint=j}),98);
__d("XPlatReactTextDecoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextDecoder;f.TextDecoder=a}),66);
__d("LS",["FBLogger","I64","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);n=function(){return a};return a}var o="LS_WEB",p=d("MessengerLogHistory").getInstance("ls");function q(a){return d("base64Binary").decode(a).buffer}var r={compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ge:function(a,b){return r.compareTo(a,b)>=0},gt:function(a,b){return r.compareTo(a,b)>0},le:function(a,b){return r.compareTo(a,b)<=0},lt:function(a,b){return r.compareTo(a,b)<0},neq:function(a,b){return!r.eq(a,b)},of_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a).buffer},to_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}};function s(a){if(a.length!==1)throw c("unrecoverableViolation")("only literal strings supported","messenger_web_product");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return(h||(h=d("I64"))).mk((b>>>1)+(a&1)*2147483648^-(b&1),a>>>1^-(b&1))}function t(a){var b="unknown_sproc";a=a.displayName;var c=/\[from (.*)\]/;c=c.exec(a);c!=null&&(b=c[1]);return b}var u=function(){var a=0;function d(d){var e=d.args,f=d.shouldLog;d=d.sprocName;b("cr:1088")==null?void 0:b("cr:1088").logStoredProcedureCall(d,e);if(!f||!b("cr:4790"))return;e=++a;b("cr:4790").markerStart(c("qpl")._(25302991,"143"),e);b("cr:4790").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:d}},{instanceKey:e});return e}function e(a,d,e){a=a.shouldLog;if(!a||d==null)return;b("cr:4790")==null?void 0:b("cr:4790").markerEnd(c("qpl")._(25302991,"143"),e,d)}function f(a){return c("gkx")("26381")?Math.random()*c("MetaConfig")._("10")<1:!1}return{call:d,logSprocDone:e,shouldLogSproc:f}}();function v(a,b,c){b=(h||(h=d("I64"))).to_string(b);var e=function(a){return!c?"":c[a]||""};return a(b,e).toString()}function w(a,b,c){b=(h||(h=d("I64"))).to_string(b);var e=function(a){return!c?"":c[a]||""};return a(b,e).toString()}function x(a,b,e,f,g,h,y,z,A){y===void 0&&(y={});z===void 0&&(z=void 0);var B=[],C=d("LSRuntimeDb").LSRuntimeDb(h,a,b,y,B,A),D=function(b,f){for(var g=arguments.length,i=new Array(g>2?g-2:0),j=2;j<g;j++)i[j-2]=arguments[j];var k;if(typeof f==="string"){k=e[f.toString()];if(k==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native type op with type: "+b+" and id: "+f,"messenger_web_product");if(k===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",f);k.load&&(k=k.load())}else k=f;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(k).then(function(b){return b.call.apply(b,[h,a].concat(i))})},E=async function(b){for(var f=arguments.length,g=new Array(f>1?f-1:0),i=1;i<f;i++)g[i-1]=arguments[i];var j;if(typeof b==="string"){j=e[b+".bs"]||e[b+".nop"];if(j==null)throw c("unrecoverableViolation")("Attempted to call unimplemented native op with id: "+b,"messenger_web_product");if(j===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",b);j.load&&(j=j.load())}else j=b;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(j).then(function(b){return b.apply(void 0,[h,a].concat(g))}).then(function(a){return a},function(a){c("FBLogger")("messenger_web_product").catching(a).addMetadata(o,"NATIVE_OP_ID",b.toString()).warn("Native operation %s failed",b.toString());throw a})},F=function(a){return a.slice(1).reduce(function(a,b){return a.then(b)},a[0]())},G=function(a,b){return a.slice(b)};return{Map:c("LSDict"),blob:q,blobs:r,constructor:{n:s},count:d("LSIterationOperations").count,createArray:function(){return c("LSVec").ofArray([])},createArrayWithElements:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c("LSVec").ofArray(b)},db:C,filter:d("LSIterationOperations").filter,forEach:d("LSIterationOperations").forEach,groupBy:d("LSIterationOperations").groupBy,i64:c("LSInt64Lite"),islc:d("LSIterationOperations").slice,like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},localize:function(a,b){return v(f,a,b)},localizeAsync:function(a,b){return d("LSSynchronousPromise").maybeMakeSynchronousPromise(v(f,a,b))},localizeV2:function(a,b){return w(g,a,b)},localizeV2Async:function(a,b){return d("LSSynchronousPromise").maybeMakeSynchronousPromise(w(g,a,b))},logger:function(a){if(z)return{debug:z,info:z,mustfix:z,warn:z};var b=c("FBLogger")("messenger_web_product"),e=a.startsWith("epoch mismatch"),f=a.startsWith("cursor mismatch");if(e||f){a=function(a){p.error(a,"error");a=function(){if(e)return"epoch_mismatch";else if(f)return"cursor_mismatch";else return"fixme_could_not_produce_key"}();(i||(i=d("ODS"))).bumpEntityKey(3185,"lsplatform",a)};return{debug:function(a){return p.debug(a)},info:function(a){return p.debug(a)},mustfix:a,warn:a}}else{c("gkx")("26382")||(b.info=c("emptyFunction"));return b}},loopAsync:function(a,b){function e(f){return c("LSInt64Lite").lt(f,a)?b(f).then(function(){return e(c("LSInt64Lite").add(f,s(n())))}):d("LSSynchronousPromise").maybeMakeSynchronousPromise(void 0,self.Promise)}return e(s(m()))},loopSync:function(a,b){for(var d=s(l());c("LSInt64Lite").lt(d,a);d=c("LSInt64Lite").add(d,s(k())))b(d)},merge:function(){function a(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue(a,b)>0?a:b}function b(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,e){e=d("LSRuntimeDb").parseConstraint(e,"asc");return{end:c.end&&e.end?b(e.end,c.end):e.end||c.end,start:c.start&&e.start?a(e.start,c.start):e.start||c.start}},{});return babelHelpers.extends({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:s,nativeOperation:E,nativeTypeOperation:D,notnull:function(a){if(a===null)throw c("unrecoverableViolation")("value should not be null","messenger_web_product");return a},print:function(a){},resolve:function(a){return d("LSSynchronousPromise").wrapInMaybeSyncPromiseIfNotPromise(a,self.Promise)},resolveGuaranteeAsync:function(a){var b;return((b=self.Promise)!=null?b:Promise).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))},rm:c("LSInt64Lite").of_int32(a),sequence:F,slice:G,sortBy:d("LSIterationOperations").sortBy,storedProcedure:function(i){for(var j=arguments.length,k=new Array(j>1?j-1:0),l=1;l<j;l++)k[l-1]=arguments[l];var m;if(typeof i==="string"){m=e[i];if(m==null)throw c("unrecoverableViolation")("Attempted to call unimplemented stored procedure with id: "+i,"messenger_web_product");if(m===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent sproc loading failed for: %s (retryable)",i);m.load&&(m=m.load())}else m=i;var n=this;switch(a){case 0:n=x(2,b,e,f,g,h,y,z,A);break;case 2:n=x(1,b,e,f,g,h,y,z,A);break}var p,q,r;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(m).then(function(a){q=t(a);r=u.shouldLogSproc(q);B.push(q);p=u.call({args:k,shouldLog:r,sprocName:q});h.reportUsedTablesForSyncAccess(a.__tables__);return a.apply(void 0,k.concat([n]))}).then(function(a){B.pop();u.logSprocDone({args:k,shouldLog:r,sprocName:q},p,2);return a},function(a){B.pop();u.logSprocDone({args:k,shouldLog:r,sprocName:q},p,3);c("FBLogger")("messenger_web_product").catching(a).addMetadata(o,"SPROC_STACK",B.join("\n")).warn("Sproc %s failed",i);throw a})},throw:function(a){throw c("unrecoverableViolation")(a,"messenger_comet")},toArray:d("LSIterationOperations").toArray,toJSON:function(a){return d("LSJson").stringify(a)}}}x.n=s;g.default=x}),98);
__d("LSLocalizedStrings",["fbt"],(function(a,b,c,d,e,f,g,h){a=function(a,b){switch(a){default:return""}};b=a;g["default"]=b}),98);
__d("LSLocalizedStringsV2",["fbt","I64"],(function(a,b,c,d,e,f,g,h){var i;a=function(a,b){switch(a){case"2285622730":return h._("__JHASH__bHf-pjjpSrh__JHASH__");case"1919524925":return h._("__JHASH__g2TuGL7kp7W__JHASH__");case"14617150":return h._("__JHASH__KN5FuK9HL68__JHASH__");case"460740012":return h._("__JHASH__PmrYWcLl7s-__JHASH__");case"2353844300":return h._("__JHASH__U3_S6m-Asci__JHASH__");case"2987332812":return h._("__JHASH__6iMiBqdcEoA__JHASH__");case"1530605193":return h._("__JHASH__0YPxlGHLAO___JHASH__",[h._param("user_name",b(0))]);case"2375715979":return h._("__JHASH__wwqS06IKURT__JHASH__");case"3810165735":return h._("__JHASH___xK_oqrbVu3__JHASH__",[h._param("user_name",b(0))]);case"3921131020":return h._("__JHASH__mtqLMpBAIfE__JHASH__");case"1899892426":return h._("__JHASH__AcX9AAMg2Jv__JHASH__");case"3287869262":return h._("__JHASH__nh5Ig-KQkRx__JHASH__",[h._param("user_name",b(0))]);case"1890485478":return h._("__JHASH__r5f8SC2OUWe__JHASH__");case"1299547062":return h._("__JHASH__UxIyHnrkGvQ__JHASH__");case"3621454483":return h._("__JHASH__6CXDyy4pKod__JHASH__",[h._param("user_name",b(0))]);case"3948960063":return h._("__JHASH__4jXDffqGKxc__JHASH__");case"1249692047":return h._("__JHASH__XuMb0GRtMp2__JHASH__",[h._param("user_name",b(0))]);case"2106510577":return h._("__JHASH__adFbSa44M9G__JHASH__");case"3960370133":return h._("__JHASH__WRQpot61Zha__JHASH__",[h._param("user_name",b(0))]);case"3798396796":return h._("__JHASH__AKC6gu2oXen__JHASH__",[h._param("app_name",b(0))]);case"3388601579":return h._("__JHASH__LLEsQ4Y9-C7__JHASH__",[h._param("user_name",b(0)),h._param("app_name",b(1))]);case"1556712457":return h._("__JHASH__pQsKY3JdghI__JHASH__");case"3601791933":return h._("__JHASH__VzXmY6Nofoo__JHASH__",[h._param("user_name",b(0))]);case"3759817031":return h._("__JHASH__C6rFQy3ZqgT__JHASH__");case"2934729541":return h._("__JHASH__5sq-yY8-PHO__JHASH__",[h._param("user_name",b(0))]);case"392493418":return h._("__JHASH__Y9RNnaq--9C__JHASH__");case"4085467454":return h._("__JHASH__Tf8KEtj2NUW__JHASH__",[h._param("user_name",b(0))]);case"2738683656":return h._("__JHASH__VTdyPQ7H4GZ__JHASH__");case"2996525642":return h._("__JHASH__YPG0HYdjvfW__JHASH__",[h._param("user_name",b(0))]);case"2326868239":return h._("__JHASH__j-o8KFpMPxd__JHASH__");case"1001986796":return h._("__JHASH__zsY9ES-V3Ko__JHASH__",[h._param("user_name",b(0))]);case"2285746939":return h._("__JHASH__8PT2JtdeJx9__JHASH__");case"3759448420":return h._("__JHASH__H7eOZ8S6YOP__JHASH__",[h._param("user_name",b(0))]);case"3719716921":return h._("__JHASH__qiicOieyAHd__JHASH__");case"284944921":return h._("__JHASH__TkSIon2AHjf__JHASH__",[h._param("user_name",b(0))]);case"3322002377":return h._("__JHASH__hs-XIkGvPGM__JHASH__",[h._param("user_name",b(0))]);case"2486550278":return h._("__JHASH__78NZ4EbNix1__JHASH__");case"3557790945":return h._("__JHASH__9P29njYEtVJ__JHASH__");case"3756846086":return h._("__JHASH__HqUxJ78yQEs__JHASH__",[h._param("user_name",b(0))]);case"780378803":return h._("__JHASH__4RDpwDU2bxj__JHASH__");case"3918212613":return h._("__JHASH__sfM4caXMU8x__JHASH__",[h._param("user_name",b(0))]);case"3161890215":return h._("__JHASH__rMpUt8zHstd__JHASH__");case"863428456":return h._("__JHASH__ZqoJBBTdmfd__JHASH__",[h._param("user_name",b(0))]);case"2716405471":return h._("__JHASH__3bEfkOlWqZQ__JHASH__");case"3909474073":return h._("__JHASH__0LAhbzE2305__JHASH__",[h._param("user_name",b(0))]);case"1522141193":return h._("__JHASH__Xv5h5VWZ1z-__JHASH__");case"2804766375":return h._("__JHASH__iwXmJRLI5oQ__JHASH__",[h._param("user_name",b(0))]);case"2051792592":return h._("__JHASH__wrYW1iMsokY__JHASH__");case"3686831438":return h._("__JHASH__jxXuvG9WsQ-__JHASH__",[h._param("user_name",b(0))]);case"1247108605":return h._("__JHASH__wezHuMnDNgf__JHASH__",[h._param("receiver_name",b(0))]);case"2966876020":return h._("__JHASH__V86-MgG4uJ1__JHASH__",[h._param("user_name",b(0)),h._param("receiver_name",b(1))]);case"1056933543":return h._("__JHASH__9X7TkYsxkJ9__JHASH__");case"1167688664":return h._("__JHASH__HgpZLsXXBv2__JHASH__",[h._param("user_name",b(0))]);case"772459202":return h._("__JHASH__da1hGBDyrc0__JHASH__");case"3546068912":return h._("__JHASH__eB3RT9ZRPNU__JHASH__",[h._param("user_name",b(0))]);case"2459540079":return h._("__JHASH__uVYFUqdjsDk__JHASH__");case"1596311291":return h._("__JHASH__JNmnqH9YpVN__JHASH__",[h._param("user_name",b(0))]);case"2253698324":return h._("__JHASH__cjVmAaYlDK5__JHASH__");case"4269602817":return h._("__JHASH__tgAN3WazCx7__JHASH__",[h._param("user_name",b(0))]);case"2552112149":return h._("__JHASH__rGkOrOdVN7r__JHASH__");case"969211470":return h._("__JHASH__0c4ttO8K44x__JHASH__",[h._param("user_name",b(0))]);case"1257875092":return h._("__JHASH__5wtZ0w7wjWl__JHASH__");case"692355749":return h._("__JHASH__ZxojgdAFPM9__JHASH__",[h._param("user_name",b(0))]);case"785694792":return h._("__JHASH__81akEhn5rEe__JHASH__",[h._param("receiver_name",b(0))]);case"2625447567":return h._("__JHASH__PlEQcZWgExs__JHASH__",[h._param("user_name",b(0)),h._param("receiver_name",b(1))]);case"3982213805":return h._("__JHASH__yntPigUfAxT__JHASH__");case"464916028":return h._("__JHASH__4Sva9VujCUQ__JHASH__",[h._param("user_name",b(0))]);case"411761881":return h._("__JHASH__9gOGTtdjrZE__JHASH__");case"3395044660":return h._("__JHASH__R5lkKLgSqO3__JHASH__",[h._param("user_name",b(0))]);case"2973334239":return h._("__JHASH__BCqXnePZxrY__JHASH__");case"3616471048":return h._("__JHASH__NfWlT4Kxbzi__JHASH__",[h._param("user_name",b(0))]);case"476264474":return h._("__JHASH__SH0YqdP7IKV__JHASH__");case"3124021488":return h._("__JHASH__aEbyYGfOeat__JHASH__",[h._param("user_name",b(0))]);case"3471188061":return h._("__JHASH__mUkKfPWP8w___JHASH__");case"2776822462":return h._("__JHASH__2bPnhlt5UjK__JHASH__",[h._param("user_name",b(0))]);case"1739999037":return h._("__JHASH__LG-CVe6YeL2__JHASH__");case"3373597599":return h._("__JHASH__XSfhGJMwPL8__JHASH__");case"259473449":return h._("__JHASH__qL_GOsBRgrZ__JHASH__",[h._param("user_name",b(0))]);case"1338912959":return h._("__JHASH__LrXrY17Mwwh__JHASH__",[h._param("user_name",b(0))]);case"812940701":return h._("__JHASH__NEO9buPurkr__JHASH__",[h._param("user_name",b(0))]);case"1099878966":return h._("__JHASH__Qho_g3FF8mq__JHASH__",[h._param("user_name",b(0))]);case"3443782102":return h._("__JHASH__Xxt66o3iPYX__JHASH__");case"618905030":return h._("__JHASH__v6KFXcykdOt__JHASH__");case"2470414797":return h._("__JHASH__0oa3QgNUtA3__JHASH__");case"1306024833":return h._("__JHASH__ypexge-6NRA__JHASH__");case"2135145355":return h._("__JHASH__woc-8KLy7zj__JHASH__");case"3603511704":return h._("__JHASH__--XUHiOY0Z1__JHASH__",[h._param("user_name",b(0))]);case"705614308":return h._("__JHASH__vsnRcMCSSFJ__JHASH__",[h._plural((i||(i=d("I64"))).to_float(b(0)),"number")]);case"313217698":return h._("__JHASH__rG1E-FG-TxB__JHASH__",[h._plural((i||(i=d("I64"))).to_float(b(1)),"number"),h._param("user_name",b(0))]);case"3558654267":return h._("__JHASH___H0KEIF4aGq__JHASH__");case"3422266740":return h._("__JHASH__F5OxWfUB9Dy__JHASH__",[h._param("user_name",b(0))]);case"1907280305":return h._("__JHASH__3P1HxS_1jfg__JHASH__",[h._param("other_user",b(0))]);case"1112375422":return h._("__JHASH__a5_sxn3ZWZn__JHASH__",[h._param("other_user",b(0))]);case"3575257287":return h._("__JHASH__czVm_Pwt6t9__JHASH__",[h._param("num_messages",b(0))]);case"1416259530":return h._("__JHASH__h8shxIRIHov__JHASH__");case"1681736754":return h._("__JHASH__cOR9lVJ4jCg__JHASH__",[h._param("num_channels",b(0))]);case"3802288555":return h._("__JHASH__-r9R1SJrWwS__JHASH__");case"1420387436":return h._("__JHASH__Gzgbn2ufLNM__JHASH__",[h._param("num_messages",b(0))]);case"3321340421":return h._("__JHASH___P-lwtylUhP__JHASH__",[h._param("other_user",b(0))]);case"3199643703":return h._("__JHASH__YBxxz_Vibx6__JHASH__");case"3307909120":return h._("__JHASH__YRCmoad58uJ__JHASH__");case"845728829":return h._("__JHASH___8aETeHXtHr__JHASH__");case"2022991544":return h._("__JHASH__byni3VHMHc8__JHASH__");case"4285882723":return h._("__JHASH__ga21xjHrnrP__JHASH__");case"3089015955":return h._("__JHASH__Q_LYP_ZLQTd__JHASH__");case"2662271323":return h._("__JHASH__JBe8j08K09-__JHASH__");case"1531706844":return h._("__JHASH__bZt0xiZTnI-__JHASH__");case"3989800917":return h._("__JHASH__LU51Dz-OBab__JHASH__");case"2421884758":return h._("__JHASH__6vTlb2bku1-__JHASH__");case"2676961947":return h._("__JHASH__TK1WqTTq979__JHASH__",[h._param("participant_name",b(0))]);case"3298086032":return h._("__JHASH__AI6Z85qZOTl__JHASH__",[h._param("sender_name",b(0))]);case"3873263038":return h._("__JHASH__1Mq5qyIkjxC__JHASH__",[h._param("sender_name",b(0))]);case"2616853333":return h._("__JHASH__Jm7dkp7Q46M__JHASH__",[h._param("sender_name",b(0)),h._param("reply_source_sender_name",b(1))]);case"4002265907":return h._("__JHASH__YfSaJhpdv0H__JHASH__");case"2663996736":return h._("__JHASH__rouMYaFboPj__JHASH__",[h._param("participant_name",b(0))]);case"2868699317":return h._("__JHASH__gln0mR6BSos__JHASH__",[h._param("sender_name",b(0))]);case"2688620547":return h._("__JHASH__xBthZSMLrSR__JHASH__",[h._param("sender_name",b(0))]);case"3544071775":return h._("__JHASH__Bfn4BTqFbTw__JHASH__",[h._param("sender_name",b(0)),h._param("reply_source_sender_name",b(1))]);case"2856734260":return h._("__JHASH__yQuJ1OMUVjP__JHASH__");case"3569041084":return h._("__JHASH__3k8IWsw1-6Y__JHASH__");case"1640318912":return h._("__JHASH__JXT3riixpEu__JHASH__",[h._param("user",b(0))]);case"2814174244":return h._("__JHASH__hI4gbzrBlXq__JHASH__");case"3475381825":return h._("__JHASH__71WGCM_QR6l__JHASH__",[h._param("preamble",b(0)),h._param("time",b(1))]);case"2794389366":return h._("__JHASH__8dRN_uv1Ey6__JHASH__",[h._plural((i||(i=d("I64"))).to_float(b(0)),"number")]);case"2528404281":return h._("__JHASH__ypkuSNWTmvD__JHASH__",[h._plural((i||(i=d("I64"))).to_float(b(0)),"number")]);case"3691614683":return h._("__JHASH__Gt2ASOwx3aR__JHASH__",[h._plural((i||(i=d("I64"))).to_float(b(0)),"number")]);case"2356292598":return h._("__JHASH__BkWfpfnRWrH__JHASH__",[h._param("user",b(0))]);case"3184734723":return h._("__JHASH__lritNDvzWHc__JHASH__");case"274842160":return h._("__JHASH__9dgVAem5HVe__JHASH__");case"2352696798":return h._("__JHASH__4w1HQhVySfH__JHASH__");case"261320435":return h._("__JHASH__Yz7gQUpuAdz__JHASH__");case"1369731110":return h._("__JHASH__KVOi7QtdIiz__JHASH__");case"216075330":return h._("__JHASH__YIi23RvfAOM__JHASH__",[h._param("user_name",b(0))]);case"3093868587":return h._("__JHASH__zy0vB4g7bUg__JHASH__",[h._param("user_name",b(0))]);case"1965569930":return h._("__JHASH__Tjhx4Uo9tx2__JHASH__",[h._param("user_name",b(0))]);case"3981943156":return h._("__JHASH__ixrUZRszn_J__JHASH__",[h._param("user_name",b(0))]);case"2071149394":return h._("__JHASH__cOvKzCJo9pt__JHASH__",[h._param("user_name",b(0))]);case"2414298738":return h._("__JHASH__HW7JxEhyqTG__JHASH__",[h._param("user_name",b(0))]);case"4050223159":return h._("__JHASH__DIFtX0dJhWX__JHASH__");case"3387070852":return h._("__JHASH__7lkRbksMys6__JHASH__",[h._param("receiver_name",b(0)),h._param("amount",b(1))]);case"2779070802":return h._("__JHASH__VQfKxCig0vy__JHASH__",[h._param("sender_name",b(0)),h._param("game_name",b(1))]);case"3748497596":return h._("__JHASH__5SAbOrcrYuU__JHASH__",[h._param("game_name",b(0))]);case"1346982727":return h._("__JHASH__VQ2HMGY9wwv__JHASH__",[h._param("game_name",b(0))]);case"3688076717":return h._("__JHASH__JjXwyclLQBa__JHASH__",[h._param("sender_name",b(0))]);case"967111183":return h._("__JHASH__w7ck8Nknn5M__JHASH__");case"4202164190":return h._("__JHASH__ri623MWPdFQ__JHASH__",[h._param("sender_name",b(0)),h._param("receiver_name",b(1))]);default:return""}};b=a;g["default"]=b}),226);
__d("LSFactory",["LS","LSDynamicDependencies","LSLocalizedStrings","LSLocalizedStringsV2","LSMetadata","cr:8709"],(function(a,b,c,d,e,f,g){"use strict";var h={dynamic:!1};function a(a,e){e===void 0&&(e=h);a=c("LS")(1,d("LSMetadata").schema,d("LSDynamicDependencies").cachedModules,c("LSLocalizedStrings"),c("LSLocalizedStringsV2"),a,void 0,void 0,e.dynamic);return b("cr:8709")!=null?b("cr:8709").wrapSprocInvocationWithProfiler(a):a}g["default"]=a}),98);
__d("LSGetCursor",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=void 0:(b=a.item,c[0]=b.currentCursor)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreGetCursorStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSIssueMessagesRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[2]=c.i64.eq(a[2],c.i64.cast([-1,4294967295]))?c.i64.cast([0,0]):a[2],c.islc(c.filter(c.db.table(13).fetchDesc([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.eq(b.minTimestampMs,void 0)||c.i64.le(b.minTimestampMs,a[1]))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?d[0]=!1:(f=e.item,c.sequence([function(e){return d[5]=f.threadKey,d[6]=c.i64.cast([0,0]),d[7]=f.minTimestampMs,d[8]=f.minMessageId,c.i64.eq(d[2],c.i64.cast([0,1]))?d[3]=!f.isLoadingAfter:d[3]=!f.isLoadingBefore,d[3]?c.sequence([function(e){return c.i64.eq(d[2],c.i64.cast([0,1]))?d[9]=f.hasMoreAfter:d[9]=f.hasMoreBefore,d[9]?c.sequence([function(a){return c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(a){return c.forEach(c.filter(c.db.table(13).fetch([[[d[5],d[7],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[6])&&c.i64.eq(a.minTimestampMs,d[7])&&a.minMessageId===d[8]}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})})},function(a){return a=[f.maxTimestampMs,f.maxMessageId],d[10]=a[0],d[11]=a[1],a}]):c.sequence([function(a){return c.forEach(c.filter(c.db.table(13).fetch([[[d[5],d[7],d[8]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),d[6])&&c.i64.eq(a.minTimestampMs,d[7])&&a.minMessageId===d[8]}),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})})},function(a){return a=[d[7],d[8]],d[10]=a[0],d[11]=a[1],a}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[12]=c.i64.cast([0,1]):(e=b.item,d[19]=e.syncGroup,c.i64.neq(d[19],void 0)?d[18]=d[19]:d[18]=c.i64.cast([0,1]),d[12]=d[18])})},function(a){return c.storedProcedure(b("LSGetCursor"),d[12]).then(function(a){return a=a,d[14]=a[0],a})},function(e){return d[15]=new c.Map(),d[15].set("thread_key",a[0]),d[15].set("direction",d[2]),d[15].set("reference_timestamp_ms",d[10]),d[15].set("reference_message_id",d[11]),d[15].set("sync_group",d[12]),d[15].set("cursor",d[14]),d[16]=d[15].get("thread_key"),d[15],d[17]=c.toJSON(d[15]),c.storedProcedure(b("LSIssueNewTask"),"mrq.{}".split("{}").join(c.i64.to_string(d[16])),c.i64.cast([0,228]),d[17],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.resolve()},function(a){return d[4]=!0}]):c.resolve(d[4]=!1)},function(a){return d[0]=d[4]}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueMessagesRangeQueryStoredProcedure";a.__tables__=["messages_ranges_v2__generated","threads"];e.exports=a}),null);
__d("LSIssueMessagesRangeQueryStoredProcedure",["LSIssueMessagesRangeQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSIssueMessagesRangeQuery")(e.threadKey,e.referenceTimestampMs,e.direction,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSIssueNewError",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(6).add({errorId:void 0,taskId:a[0],errorCode:a[1],errorTitleText:a[2],errorBodyText:a[3],issuedTimestampMs:c[0],errorExtraData:a[4],presentationStyle:a[5]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewErrorStoredProcedure";a.__tables__=["user_visible_errors"];e.exports=a}),null);
__d("LSIssueNewFireAndForgetTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(5).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:c[0]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewFireAndForgetTaskStoredProcedure";a.__tables__=["pending_fire_and_forget_tasks"];e.exports=a}),null);
__d("LSMailboxMessagesRangeQueryDirection",[],(function(a,b,c,d,e,f){a=Object.freeze({BEFORE_LEGACY:-1,BEFORE:0,AFTER:1});f["default"]=a}),66);
__d("LSPlatformWaitForTaskCompletion",["I64","Promise","asyncToGeneratorRuntime","emptyFunction","err","justknobx","promiseDone","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=["acs_sync"];function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,k){var l=new Set(),m=[],n=0,o=!0,p,q,r=new(i||(i=b("Promise")))(function(a,b){p=a,q=b}),s=c("uuidv4")(),t=!0,u=(yield a.runInTransaction(function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i){yield i.mailbox_task_completion_notification_context.add({notificationName:g,notificationScopeKey:s});var r=a.tables.pending_tasks.subscribe(function(a,b){a=(h||(h=d("I64"))).to_string(a[0]);if(b.operation==="add"||b.operation==="put"){var e=b.value;if(c("justknobx")._("2903")&&j.some(function(a){return e.queueName.startsWith(a)}))return;if(k!=null&&e.queueName!==k)return;l.add(a)}else l["delete"](a)}),v=c("emptyFunction"),w=a.tables.mailbox_task_completion_api_tasks.subscribe(function(a,b){if(b.operation==="add"||b.operation==="put"&&b.value.notificationScopeKey===s){a=(h||(h=d("I64"))).to_string(b.value.taskId);l["delete"](a);b=b.value.success;b==null?t&&(m.push(a),n+=1):(o=b&&o,n-=1)}});v=a.subscribeToCommit(function(){n===0&&l.size===0&&(w(),r(),v(),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b of m)yield a.mailbox_task_completion_api_tasks["delete"]((h||(h=d("I64"))).of_string(b))});return function(b){return a.apply(this,arguments)}}(),"readwrite","background",void 0,f.id+":150")),o?p(u):q(c("err")("Not all tasks for "+g+" succeeded")))});try{var x=(yield e(i));yield i.mailbox_task_completion_notification_context["delete"](s);return x}catch(a){v();w();r();throw a}});return function(a){return i.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":66"));t=!1;return r});return k.apply(this,arguments)}g["default"]=a}),98);
__d("MessengerWebEntryPointsUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="pagesLikeInviteThem")return"pages_like_invite_item";else if(a==="pagesPrivateReply")return"pages_private_reply";else if(a==="inboxActiveContacts"||a==="inboxArchived"||a==="inboxSpam"||a==="inboxFolder"||a==="inboxThreadList"||a==="inboxRecentThreads"||a==="inboxRemainingThreads"||a==="pendingRequests"||a==="inboxRestricted"||a==="archieve"||a==="inboxInThread"||a==="inboxPendingRequests")return"inbox";else if(a==="jobs")return"jobs";else if(a==="storySeenByList"||a==="friendsTab")return"story_seen_by_list";else if(a==="chatParticipants")return"add_participants";else if(a==="compat")return"compat";else if(a==="cookie")return"cookie";else if(a==="pagesAdminInviteItem")return"pages_admin_invite_item";else if(a==="groupWelcomePost")return"group_welcome_post";else if(a==="sidebarContactsList"||a==="sidebarGroupsList")return"sidebar";else if(a==="sidebarCommunityChatsList")return"sidebar_community_chats";else if(a==="jewelNestedFolder"||a==="jewel")return"jewel";else if(a==="shop")return"shop";else if(a==="chatheadsOverflow")return"chat_heads_overflow";else if(a==="feedDynamicHoverCard")return"pages_hovercard";else if(a==="messengerUniversalSearch")return"search_result_page";else if(a==="mentorship")return"mentorship";else if(a==="reactorList")return"reactor_list";else if(a==="feedPoll")return"feed_poll";else if(a==="timeline"||a==="feedOrganicPost")return"timeline";else if(a==="pageResponsivenessCard"||a==="pageAboutCard")return"pages_about";else if(a==="inboxSearch"||a==="sidebarSearch"||a==="search")return"search";else if(a==="storyAggregatedUsers")return"story_aggregated_users";else if(a==="fundraiserMoreMenu")return"fundraiser_support:reactive_more_menu";else if(a==="fundraiserFaq")return"fundraiser_support:reactive_faq";else if(a==="notificationInThreadReply")return"message_received";else if(a==="roomsNullState")return"rooms_null_state";else if(a==="storyViewerSheetRow")return"stories_viewed_by_list";else if(a==="feedOrganicPostNewsfeedPagePostCta")return"pages_cta";else if(a==="chatheadsNewMessage")return"new_msg_button";else if(a==="groupExperts"||a==="groupCommunityFriendsDialog")return"group_experts_discovery_invite";else if(a==="hovercard")return"hovercard";else if(a==="crisisListingAttachment")return"crisis_listing_attachment";else if(a==="mentalHealth")return"mental_health";else if(a==="event")return"events_permalink";else if(a==="jewelSearch")return"jewel_search";else if(a==="pagePopupChat")return"pages_popup_chat";else if(a==="communityHelp")return"community_help";else if(a==="jewelNewMessage")return"jewel_new_message";else if(a==="fundraiser")return"fundraiser";else if(a==="memories")return"memories_home";else if(a==="fundraiserSupportersList")return"fundraiser_supporters_list";else if(a==="groupRemovePost")return"group_remove_post_tombstone";else if(a==="pagesHeader")return"pages_header";else if(a==="groupMembers")return"group_members_tab";else if(a==="chatheads")return"chat_heads";else if(a==="birthday")return"birthdays";else if(a==="localBusinessesNearby")return"local_businesses_nearby";else if(a==="marketplace"||a==="inboxMarketplace")return"marketplace";else if(a==="mutualFriendsDialog")return"mutual_friends_dialog";else if(a==="feedOrganicPostViewAndMessage")return"feed_story_cta";else if(a==="profileServicesMenu")return"profile_services_menu";else if(a==="adsCta")return"reshares_dialog";else if(a==="offer")return"offer";else if(a==="payments")return"p2p_payments";else if(a==="groupQuality")return"group_quality";else if(a==="pagesHomeFriendsDialog")return"pages_home_friends_dialog";else if(a==="communityFriendsDialog")return"pages_community_friends_dialog";else if(a==="groupChats")return"group_chats";else if(a==="groupTab")return"group_tab";else if(a==="gratitude")return"gratitude";else return"unknown"}function b(a){switch(a){case"groupTab":case"inboxThreadList":case"jewel":return!0;default:return!1}}f.cast=a;f.getEntryPointShouldOverrideThreadSnippetRemoval=b}),66);
__d("MWChatLogOpenChatTab",["MessengerWebEntryPointsUtil","MessengerWebEventsFalcoEvent","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i={};function a(a,b,e){a===void 0&&(a=!1);(h||(h=d("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_user");var f=d("MessengerWebEntryPointsUtil").cast(e);i[b]=f;return c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:f,event_name:"open_chat_tab",is_secured:a,other_user_fbid:a?null:b}})}function b(a,b,e){a===void 0&&(a=!1);(h||(h=d("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_group");var f=d("MessengerWebEntryPointsUtil").cast(e);i[b]=f;return c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:f,event_name:"open_chat_tab",is_secured:a,thread_fbid:a?null:b}})}function e(a,b,e){a===void 0&&(a=!1);(h||(h=d("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_page");var f=d("MessengerWebEntryPointsUtil").cast(e);i[b]=f;return c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:f,event_name:"open_chat_tab",is_secured:a,other_user_fbid:a?null:b}})}g.logOpenUserTab=a;g.logOpenGroupTab=b;g.logOpenPageTab=e}),98);
__d("ReQLTable",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=(yield a.get.apply(a,b));c=c(d);yield a.upsert(b,c)});return g.apply(this,arguments)}f.update=a}),66);/*FB_PKG_DELIM*/
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928});f["default"]=a}),66);
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f){d="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";f="\u2000-\u206f\xab\xbb\uff08\uff09";var g="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",h="(?:https?)://";g="(?:(^|\\s)(?:"+g+"[.]){3}"+g+")";g=g;var i="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",j="(?:\\b)www\\d{0,3}[.]";d="[^\\s"+d+f+"]";f="(?:(?:(?:[.:\\-_%@]|"+d+")*"+d+")|"+i+")";d="(?::\\d+){0,1}";var k="(?=[/?#])";b=b("URLMatcherConfig").tlds;var l="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+k+"))";k="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+"))";g="[/#?]";i="\\([^\\s()<>]+\\)";var m="[^\\s()<>?#]+",n=new RegExp(l,"im"),o="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",p=new RegExp(o,"im"),q="(?:(?:"+g+")(?:(?:"+i+"|"+m+")*)*)*",r=new RegExp("((?:"+k+")(?:"+q+"))","im");function a(){r.compile()}var s=new RegExp("((?:"+h+f+d+")|(?:"+j+f+b+d+"))"),t=/[\s\'\";]/,u=new RegExp(g,"im"),v=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),w=new RegExp("[\\s()<>?#]","im"),x=new RegExp("\\s()<>"),y=function(a){if(a!=null&&a.indexOf("@")!==-1)return s.exec(a)?a:null;else return a},z=function(a){return new RegExp("((?:"+l+")(?:"+q+"))",a)};function c(){return r.source}o=function(a){return A(a,z("im"))};i=function(a){return B(a,z("igm"))};m=function(a){return A(a,r)};var A=function(a,b){b=b.exec(a);return b==null||b.length===0?null:y(b[1]||null)},B=function(a,b){a=a.match(b);return a==null?[]:a.filter(Boolean)||[]};k=function(a){return n.exec(a)};h=function(a){return!t.test(a.charAt(a.length-1))};j=function(a){a=a;var b=!1;do{var c,d=n.exec(a);if(!d)return null;((c=d[1])==null?void 0:c.trim())===""&&(d[0]=d[0].trim(),d.index+=d[1].length);b=!1;if(d[0][0]==="["&&d.index>0&&a[d.index-1]==="@"){c=p.exec(d[0]);c&&(b=!0,a=a.substr(d.index+c[0].length))}}while(b);if(!d)return null;c=a.substr(d.index+d[0].length);if(c.length===0||!u.test(c[0]))return y(d[0]);b=0;a=0;var e=1,f=["(","["],g=[")","]"],h=0,i=a;for(var j=1;j<c.length;j++){var k=c[j];if(i===a){if(f.includes(k))h+=1,i=e;else if(u.test(k)||!v.test(k))b=j;else if(w.test(k))break}else if(f.includes(k))h+=1;else if(g.includes(k))h-=1,h===0&&(i=a,b=j);else if(x.test(k))break}return y(d[0]+c.substring(0,b+1))};f={compilePermissiveHostPathMatcher:a,permissiveHostPathMatch:m,permissiveMatch:o,permissiveMultiMatch:i,matchToPattern:A,multiMatchToPattern:B,matchHost:k,trigger:h,match:j,getPermissiveHostPathMatcherSource:c};e.exports=f}),null);/*FB_PKG_DELIM*/
__d("C4gEngagementFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1922200");b=d("FalcoLoggerInternal").create("c4g_engagement",a);e=b;g["default"]=e}),98);
__d("MAWLSDBEncryption",["I64","LSPlatformErrorChannel","MAWCryptoConsts","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MWEARKeychainV3","QPLUserFlow","err","nullthrows","qpl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=typeof window!=="undefined"?window:self,j="EBSMDecryptionFailure",k=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;a=a+" - Encrypted Restore was unable to decrypt an entity for table "+c;d=b.call(this,a)||this;d.message=a;d.name=j;d.tableName=c;return d}var c=a.prototype;c.getTableName=function(){return this.tableName};return a}(babelHelpers.wrapNativeSuper(Error));function l(a){a=atob(a);var b=a.length,c=new Uint8Array(b);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer}function m(a){var b="";a=new Uint8Array(a);var c=a.byteLength;for(var d=0;d<c;d++)b+=String.fromCharCode(a[d]);return i.btoa(b)}function n(a){return c("nullthrows")(JSON.stringify(a,function(a,b){if((h||(h=d("I64"))).isI64(b))return{type:"64",value:[b[0],b[1]]};else if(a===""||b===null||typeof b==="string"||typeof b==="number"||typeof b==="boolean"||Array.isArray(b))return b;else if(b===void 0)return{type:"u"};else if(b instanceof ArrayBuffer)return{type:"ab",value:m(b)};else if(b instanceof Uint8Array)return{l:b.byteLength,o:b.byteOffset,type:"ui8",value:m(b.buffer)};else if(b instanceof Map)return{e:n(Array.from(b.entries())),type:"m"};else if(b instanceof Set)return{type:"s",v:n(Array.from(b.values()))};else if(typeof b==="object")return{type:"o",value:n(b)};throw c("unrecoverableViolation")("Not supported","messenger_comet")}))}function o(a){return JSON.parse(a,function(a,b){if(a===""||b===null||typeof b==="string"||typeof b==="number"||typeof b==="boolean"||Array.isArray(b))return b;else if(typeof b==="object")if(b.type==="64"){b.value._tag="i64";return b.value}else if(b.type==="u")return void 0;else if(b.type==="ab")return l(b.value);else if(b.type==="ui8")return new Uint8Array(l(b.value),b.o,b.l);else if(b.type==="o")return o(b.value);else if(b.type==="m")return new Map(o(b.e));else if(b.type==="s")return new Set(o(b.v));throw c("unrecoverableViolation")("Not supported","messenger_comet")})}function a(a,b){try{var e=d("MWEARKeychainV3").getDbEncryptionKey("global_ear"),f=e.keys;f=f[0];e=e.version;e=d("MAWKeychainUtil").makeAAD(e,d("MAWCryptoConsts").CIPHER_ID);return p(f,c("nullthrows")(n(a)),e)}catch(a){throw c("err")(a.message+" - Encrypted LSDB was unable to encrypt an entity for table "+b)}}function b(a,b){try{var e=d("MAWKeychainCrypto").getKeyVersionFromCipherData(a),f=e.aadLengthInBytes;e=e.keyVersion;var g=d("MWEARKeychainV3").getDbEncryptionKey("global_ear",e),h=g.dbEntry;g=g.keys;g=g[0];g=q(g,a,e,h.formatVersion,f);return c("nullthrows")(o(g))}catch(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DECRYPTION_FAILURE_ON_"+b.toUpperCase());c("LSPlatformErrorChannel").emit(new k(a.message,b));throw new k(a.message,b)}}function p(a,b,c){b=new TextEncoder().encode(b).buffer;return d("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(a,new Uint8Array(b),c)}function q(a,b,c,e,f){a=d("MAWKeychainNaClCrypto").decryptTweetNaClArrayBuffer(a,b,c,e,f);return new TextDecoder().decode(a)}g.ERROR_NAME=j;g.EBSMDecryptionFailure=k;g.stringify=n;g.parse=o;g.encryptLSDBObj=a;g.decryptLSDBObj=b}),98);
__d("EBSMHydrationUtils",["EBAPIWorkerCheck","EBSMProperties","MAWEncryptedBackupsPersistedDB","MAWLSDBEncryption","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error loading data from EB State db to in memory ReStore"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Loaded data from EB State db to in memory ReStore"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error loading table "," from EB State db to in memory ReStore"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Hydrated ",": "," rows"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Hydration not performed for "," because its not present in IDB"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] EBSM hydration failed due to IDB transaction error: ",""]);n=function(){return a};return a}function o(a){var b=[];a=a;while(a!==0)b.push(a.hd),a=a.tl;return b}function p(a,e){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_GET_ROWS_OF_"+e.toUpperCase());return new(h||(h=b("Promise")))(function(b,f){var g=[],h,i;try{i=a.transaction(e,"readonly"),h=i.objectStore(e).openCursor()}catch(a){void d("WALoggerDeferred").ERROR(n(),a);return f(null)}h.onsuccess=function(a){a=a.target.result;if(a){var b=a.key,c=a.value;c=d("MAWLSDBEncryption").decryptLSDBObj(c,e);c!=null&&c.isLeaf!==void 0&&(c.keys!==void 0&&Array.isArray(c.keys)&&c.keys.length>0&&!Array.isArray(c.keys[0])&&(c.keys=c.keys.filter(function(a){return a!=null&&typeof a==="object"&&!Array.isArray(a)}).map(function(a){return o(a)})));g.push({key:b,value:c});a["continue"]()}};h.onerror=function(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_CURSOR_ERROR_ON_"+e.toUpperCase());return f(a)};i.onerror=function(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_TRANSACTION_ERROR_"+e.toUpperCase());return f(a)};i.onabort=function(a){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_TRANSACTION_ABORT_ERROR_"+e.toUpperCase());return f(a)};i.oncomplete=function(){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_TRANSACTION_COMPLETE_"+e.toUpperCase()),b(g)}})}function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=new Map();yield d("MAWEncryptedBackupsPersistedDB").isDBBeingUpgraded();c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_LOAD_DATA_FROM_IDB");return(h||(h=b("Promise"))).all(Array.from(c("EBSMProperties").persistedTables).map(function(b){if(!a.objectStoreNames.contains(b)){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_TABLE_"+b.toUpperCase()+"_NOT_IN_IDB");void d("WALoggerDeferred").WARN(m(),b);return!0}var f=p(a,b),g=new Map();return f.then(function(a){a.map(function(a,b){g.set(a,b)});e.set(b,g);if(b==="secure_encrypted_backups_client_state"&&g.size===0){a=c("gkx")("3551")&&d("EBAPIWorkerCheck").runningInWorker()?!1:d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);a&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481876,"1407"),{string:{missing_eb_keys:"true"}})}c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DONE_ON_"+b.toUpperCase());void d("WALoggerDeferred").LOG(l(),b,g.size);return!0},function(){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED_ON_"+b.toUpperCase());void d("WALoggerDeferred").ERROR(k(),b);return!1})})).then(function(a){var f=!0;a.forEach(function(a){a||(f=!1)});if(f){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_DONE_ON_ALL_TABLES_SUCCESSFULLY");void d("WALoggerDeferred").LOG(j());return(h||(h=b("Promise"))).resolve(e)}else{c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED_TO_LOAD_DATA_FROM_IDB");void d("WALoggerDeferred").ERROR(i());return(h||(h=b("Promise"))).reject(e)}})});return q.apply(this,arguments)}g.getAllRowsByTableName=p;g.loadEBdataToEphemeralRestore=a}),98);
__d("LSE2EEMetadataSyncGroupUtils",["gkx","isArmadillo","isInstamadillo","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=c("isArmadillo")()||c("gkx")("23910")===!0&&!c("isInstamadillo")(),i=c("qex")._("923")===!0&&!c("isInstamadillo")();function a(){return h}function b(){return h?{groupId:95}:null}function d(){return i?{groupId:95}:null}g.shouldAlwaysResetE2EEMetadata=a;g.getE2EEMetadataSyncGroup=b;g.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);
__d("LSDatabase",[],(function(a,b,c,d,e,f){}),null);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum","LSMailboxInitialSyncCursor"],(function(a,b,c,d,e,f,g){"use strict";var h;a={locale:c("CurrentLocale").get()};b={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:(h||(h=d("LSIntEnum"))).ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:h.ofNumber(0),minTimeToSyncTimestampMs:h.ofNumber(-1),priority:h.ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:JSON.stringify(a),syncStatus:h.ofNumber(0)};e={epochId:void 0,failureCount:h.ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:h.ofNumber(0),lastSyncRequestTimestampMs:h.ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:h.ofNumber(0),taskQueueName:""};f=h.ofNumber(9999999999999);g.defaultSyncParams=a;g.defaultSyncGroup=b;g.defaultNetworkRequest=e;g.neverSyncTimestamp=f}),98);
__d("MNetRankType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNDEFINED_RANKING_TYPE:-1,INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50,MESSENGER_SHARE_SHEET:51,MESSENGER_COMMUNITY_TAB_UNJOINED_COMMUNITIES:52,MESSENGER_BCF_FREQUENTS:53,FB_ORIGINAL_PRIVATE_SHARING:54});f["default"]=a}),66);
__d("isSearchQualityEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3283")}g["default"]=a}),98);
__d("seedUserInfo",["CurrentMessengerUser","I64","LSIntEnum","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("CurrentMessengerUser").getIDorEIMU();yield a._user_info.put({facebookUserId:(h||(h=d("I64"))).of_string(b),id:(i||(i=d("LSIntEnum"))).ofNumber(1)})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("LSDefaultSyncGroups",["CurrentEnvironment","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","MNetRankType","Promise","ReQL","asyncToGeneratorRuntime","gkx","isInstamadillo","isSearchQualityEnabled","qex","seedUserInfo"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new Set();d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()&&k.add(95);e=c("gkx")("5963")||c("isInstamadillo")();f=c("gkx")("5962");var l=d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroup();e=[{groupId:1,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:d("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel},{groupId:16,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},c("gkx")("4246")?null:{groupId:28,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel,syncParams:JSON.stringify(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncParams,{size_type:"wide"}))},{groupId:118,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:198},e?{groupId:89}:null,f?{groupId:197}:null];var m=[].concat(e,[{groupId:6},{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroupForIGDSyncGroup()]),n=[].concat(e,[{groupId:7,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").MESSENGER_USER_SEARCH,c("isSearchQualityEnabled")()?c("MNetRankType").MESSENGER_BLENDED_NULLSTATE:c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,c("MNetRankType").INBOX_ACTIVE_NOW,c("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE,c("MNetRankType").MESSENGER_BROADCAST_FLOW_TOP_THREADS,c("MNetRankType").BROADCAST_FLOW_TOP_CONTACTS]})},{groupId:15,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:12,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:140},{groupId:141},{groupId:142},{groupId:143},{groupId:26},{groupId:196},{groupId:104,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},l,c("gkx")("24113")?{groupId:120,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel}:null,c("qex")._("136")?{groupId:208}:null,c("gkx")("26390")?{groupId:6,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp}:null,{groupId:145,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},c("gkx")("5985")?{groupId:202}:null]);function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(""))),f=e.map(function(a){a=a.syncDatabaseId;return(j||(j=d("LSIntEnum"))).toNumber(a)});return(h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b!=null&&(!f.includes(b.groupId)||k.has(b.groupId))&&(yield a.network_requests.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(b.groupId)})))});return function(a){return c.apply(this,arguments)}}()))});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.sync_groups)));return new Map(a.map(function(a){return[(j||(j=d("LSIntEnum"))).toNumber(a.groupId),a]}))});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield q(a));function f(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.groupId;b=babelHelpers.objectWithoutPropertiesLoose(b,["groupId"]);var f=e.get(c);f==null||k.has(c)?yield a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,b,{groupId:(j||(j=d("LSIntEnum"))).ofNumber(c)})):f!=null&&(f.syncParams!==b.syncParams||b.syncChannel!=null&&!(i||(i=d("I64"))).equal(f.syncChannel,b.syncChannel))&&(yield a.sync_groups.put(babelHelpers["extends"]({},f,{syncChannel:b.syncChannel!=null?b.syncChannel:f.syncChannel,syncParams:b.syncParams})))});return g.apply(this,arguments)}yield (h||(h=b("Promise"))).all(c.map(function(a){return a&&f(a)}))});return t.apply(this,arguments)}function u(a){return a!=null?a:c("CurrentEnvironment").instagramdotcom?m:n}function a(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=u(b);d("LSPlatformLsInitLog").addPoint("db_seed_start");yield c("seedUserInfo")(a);yield o(a,b);yield s(a,b);d("LSPlatformLsInitLog").addPoint("db_seed_end")});return v.apply(this,arguments)}g.e2eeMetadataSyncGroup=l;g.igdSyncGroups=m;g.defaultSyncGroups=n;g.seedDb=a}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("ReQL").fromTableAscending(a.cutover_threads);return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.cutover_threads["delete"](c.openThreadId)})},(h||(h=b("Promise"))).resolve())})}g.call=a}),98);
__d("UserTimingUtils",["performance","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=typeof (h||(h=c("performance"))).mark==="function"&&typeof (h||(h=c("performance"))).clearMarks==="function"&&typeof (h||(h=c("performance"))).measure==="function"&&typeof (h||(h=c("performance"))).clearMeasures==="function",j=!1;if(i&&(h||(h=c("performance"))).mark!=null){var k="__v3",l={};Object.defineProperty(l,"startTime",{get:function(){j=!0}});try{(h||(h=c("performance"))).mark(k,l)}catch(a){}finally{(h||(h=c("performance"))).clearMarks(k)}}function a(a){i&&(h||(h=c("performance"))).mark(a)}function d(a,b,d){d===void 0&&(d=!0);if(i){try{(h||(h=c("performance"))).measure(a,b)}catch(a){}d&&(h||(h=c("performance"))).clearMarks(b);(h||(h=c("performance"))).clearMeasures(a)}}function e(a){if(i){try{a=(h||(h=c("performance"))).getEntriesByName(a,"mark");if(a!=null&&a.length>0)return!0}catch(a){}return!1}}function f(a){if(i)try{(h||(h=c("performance"))).clearMarks(a)}catch(a){}}function m(a,b){if(j)try{(h||(h=c("performance"))).measure(a,b),h.clearMeasures(a)}catch(a){}}function n(a,b){j&&((h||(h=c("performance"))).mark(a,b),h.clearMarks(a))}function o(a,d){var e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=(h||(h=c("performance"))).now();i.next=3;return b("regeneratorRuntime").awrap(d());case 3:f=i.sent;g=(h||(h=c("performance"))).now();m(a,{end:g,start:e});return i.abrupt("return",f);case 7:case"end":return i.stop()}},null,this)}function p(a,b,c){}function q(a,b){}g.measureStart=a;g.measureEnd=d;g.hasMark=e;g.clearMarks=f;g.measureModern=m;g.markModern=n;g.asyncMeasure=o;g.measureReactCommit=p;g.measureReactPostCommit=q}),98);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","Promise","ReStoreDecryptionFailure","ReStoreEARSetupFailure","ReStoreIndexedDbClosedEvent","ReStoreIndexedDbFailToOpenEvent","ReStoreIndexedDbUpgradedEvent","ReStoreUnexpectedlyClosed","UserTimingUtils","asyncToGeneratorRuntime","cr:10099","cr:10200","cr:10755","cr:4489","cr:6218","cr:665","cr:7000","cr:7351","cr:8659","cr:8915","justknobx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:6218"))!=null?e:b("cr:10755"),k=(e=b("cr:7000"))!=null?e:b("cr:7351");function l(a){if(a instanceof c("ReStoreIndexedDbUpgradedEvent")&&j!=null&&c("justknobx")._("1410"))c("promiseDone")(j.killSharedWorker(!0));else if(a instanceof c("ReStoreIndexedDbClosedEvent")){a=a.getError();b("cr:8915")!=null&&a instanceof(b("cr:8915")==null?void 0:b("cr:8915").ReStoreDbVersionChange)?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreDecryptionFailure").ReStoreDecryptionFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreEARSetupFailure").ReStoreEARSetupFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreUnexpectedlyClosed").ReStoreUnexpectedlyClosed&&b("cr:10099")!=null?(b("cr:10099")==null?void 0:b("cr:10099").releaseIfExist(),c("LSPlatformErrorChannel").emit(a)):a instanceof c("ReStoreIndexedDbFailToOpenEvent")&&b("cr:10099")!=null&&(b("cr:10099")==null?void 0:b("cr:10099").releaseIfExist())}}var m=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MessengerLogHistory").getInstance("db_init");c("promiseDone")(d("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(b){a.debug("Has multiple tabs: "+b),d("MultipleTabsLogger").addAnnotationToQPLEvent(c("qpl")._(25305590,"1127"))}));a.debug("====Creating DB====");d("LSPlatformLsInitLog").addPoint("vaulting_setup_start");b("cr:4489")!=null&&b("cr:665")!=null&&(a.debug("Vaulting setup started"),b("cr:665").setupMainWaLogger(),yield d("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield b("cr:4489").setupVaultMaterials()})),a.debug("Vaulting setup finished"));d("LSPlatformLsInitLog").addPoint("vaulting_setup_end");a.debug("Connecting to DB");var e=b("cr:8659")!=null?yield b("cr:8659")():yield b("cr:10200").createDB(l);a.debug("Connection established");yield e.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=k==null?[(i||(i=b("Promise"))).resolve(),(i||(i=b("Promise"))).resolve()]:[k.call(c),d("MAWDropCutoverThreadsTable").call(c)],f=e[0];e=e[1];yield (i||(i=b("Promise"))).all([f,e]);d("LSPlatformLsInitLog").addPoint("success_maw_data_deletion");a.debug("Seeding DB");yield d("LSDefaultSyncGroups").seedDb(c,void 0);a.debug("DB seeded")});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":115");a.debug("====DB created====");return e});return function(){return a.apply(this,arguments)}}(),n;function a(){n==null&&(n=(h||(h=c("ExecutionEnvironment"))).isInBrowser?m():new(i||(i=b("Promise")))(function(){}));return n}g.get=a}),98);
__d("createReStoreEphemeralPersistence",["FBLogger","Promise","ReStorePersistence","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}function a(a,e){var f=(h||(h=b("Promise"))).resolve(),g=new Map();function j(a){return i(g,a,function(){return new Map()})}return{flush:function(a){a.forEach(function(a,b){var c=j(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a)?c["delete"](b):c.set(b,a)})});return(h||(h=b("Promise"))).resolve()},get:function(a,b,c){a=j(b);return a.get(c)},logError:function(a,b,d,e){if(d==="dbCorruption"){throw c("FBLogger")("messenger_web_product").mustfixThrow("Got unexpected undefined in edb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},permitsSynchronousIO:function(a){return!0},queueCommitWork:void 0,runExclusively:function(a){var c=e==null?void 0:e.startTracking(!1);c==null?void 0:c.addAnnotations({string:{source:"createReStoreEphemeralPersistence",type:"runExclusivelyPromiseChain"}});return new(h||(h=b("Promise")))(function(d,e){f=f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a()),f=b[0];b[1];try{d(yield f()),c==null?void 0:c.end()}catch(a){e(a),c==null?void 0:c.fail()}}))["catch"](function(a){e(a)})})},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!0},shouldSync:function(){return!1},types:["ephemeral"],uniqueId:a}}g["default"]=a}),98);
__d("createLSReStoreEphemeralPersistence",["LSReStoreQplLogger","MAWCurrentUser","createReStoreEphemeralPersistence","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MAWCurrentUser").getID();return c("createReStoreEphemeralPersistence")("LSEphemeral "+a,d("LSReStoreQplLogger").createQplLogger(c("qpl")._(25303045,"817")))}g.createLSReStoreEphemeralPersistence=a}),98);
__d("MWEncryptedBackupsFirstRestoreUpsellTime",["EBAPIWorkerCheck","FBLogger","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_encrypted_backups_restore_upsell_first_impression_time_key";function a(){var a=Date.now().toString();if(c("gkx")("3551")===!0&&d("EBAPIWorkerCheck").runningInWorker())return k(a);if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return a;try{var b;b=(b=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:b.getItem(i);if(b==null){var e;(e=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:e.setItem(i,a);return a}return b}catch(b){c("FBLogger")("labyrinth_web").warn("[labyrinth][web] Failed to set EB session identifier due to %s",b);return a}}var j=null;function k(a){j==null&&(j=a);return j}g.getFirstRestoreUpsellTime=a;g.getFirstRestoreUpsellTimeForEBLS=k}),98);
__d("QPLMemoryUtils",["MemoryUtils","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeStart:b}})}function b(a){var b=d("MemoryUtils").getCurrentMemory();b=b.usedJSHeapSize;c("QPLUserFlow").addAnnotations(a,{"int":{usedJSHeapSizeEnd:b}})}g.logMemoryForQPLStart=a;g.logMemoryForQPLEnd=b}),98);
__d("createReStoreEBSMTablesPersistence",["CurrentMessengerUser","EBSMHydrationUtils","EBSMProperties","ExecutionEnvironment","FBLogger","MAWLSDBEncryption","MAWQplProxy","MAWUnrecoverableDbErrors","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsFirstRestoreUpsellTime","MWEncryptedBackupsLocalStorageEntryEnum","ODS","Promise","QPLMemoryUtils","QPLUserFlow","Random","ReStorePersistence","ReStoreTabNotifier","WAExceededStorageQuota","WALoggerDeferred","WebSession","asyncToGeneratorRuntime","cr:11340","gkx","promiseFromRequest","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in EBSM hydration when loading EB data"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] DB corruption detected - deleting EBSM db"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][EB SM] EB SM tableName is "," is missing in ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] An error occured in flush. ",". Requested stores: ",""]);n=function(){return a};return a}e=d("CurrentMessengerUser").getIDorEIMU();var o=c("ReStoreTabNotifier")==null?void 0:c("ReStoreTabNotifier")("mwChat-"+e),p=c("gkx")("23665"),q=null,r=!1,s=!1;function t(a,b,c){return(a.has(b)?a:a.set(b,c())).get(b)}var u=["auto_restore_opt_out","device_metadata","encrypted_backups","encrypted_backups_virtual_devices","experiences_shared_state","secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_recovery_code_status"];function a(a,e){a===void 0&&(a=!1);var f=(j||(j=b("Promise"))).resolve(),g=new Map();function u(a){return t(g,a,function(){return new Map()})}var w=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521481876,"1407"),{annotations:{string:{ebSessionIdentifier:w,sessionTabId:d("WebSession").getId()}}});(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").START);d("QPLMemoryUtils").logMemoryForQPLStart(c("qpl")._(521481876,"1407"));function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield e);if(a==null)return;a=d("EBSMHydrationUtils").loadEBdataToEphemeralRestore(a);return a.then(function(a){a.forEach(function(a,b){var c=u(b);a.forEach(function(a,b){c.set(b.key,b.value)})}),d("QPLMemoryUtils").logMemoryForQPLEnd(c("qpl")._(521481876,"1407")),c("QPLUserFlow").endSuccess(c("qpl")._(521481876,"1407")),(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").SUCCESS)},function(){c("QPLUserFlow").addPoint(c("qpl")._(521481876,"1407"),"EBSM_HYDRATION_FAILED"),void d("WALoggerDeferred").ERROR(k()),c("QPLUserFlow").endFailure(c("qpl")._(521481876,"1407"),"Hydration failed."),(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_HYDRATION,c("MWEBODSEntityKey.enum").FAIL)})});return y.apply(this,arguments)}q=x();o==null?void 0:o.onEventReceive("flushChangesV2",function(a){var b=a.changeSet,c=a.sentinelDeleted;b.forEach(function(a,b){var e=u(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a,c)?e["delete"](b):e.set(b,a)})})});return{flush:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){if(f.size===0)return;f.size>0&&f.forEach(function(a,b){a.size===0&&f["delete"](b)});yield v(f,u);if(f.size>0){f.forEach(function(a,b){var c=u(b);a.forEach(function(a,b){d("ReStorePersistence").isDeletedValue(a,d("ReStorePersistence").sentinelDeleted)?c["delete"](b):c.set(b,a)})});o==null?void 0:o.postMessage("flushChangesV2",{changeSet:f,fromVersion:"",sentinelDeleted:d("ReStorePersistence").sentinelDeleted,version:""});if(a)return;var g=d("Random").uint32(),h=Array.from(f.keys());c("QPLUserFlow").start(c("qpl")._(521485383,"2200"),{annotations:{bool:{ebsmv2:!0},string_array:{tables:h}},instanceKey:g});yield q;var i=(yield e);if(i==null)return;var k=i.transaction(i.objectStoreNames,"readwrite",{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(k);h=new window.Promise(function(a,e){k.oncomplete=function(b){c("QPLUserFlow").endSuccess(c("qpl")._(521485383,"2200"),{instanceKey:g}),a(b.target.result)},k.onerror=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,h=Array.from(f).map(function(a){a=a[0];return a}).join(", ");yield d("WALoggerDeferred").ERROR(n(),a==null?void 0:(b=a.target)==null?void 0:b.error,h);c("QPLUserFlow").endFailure(c("qpl")._(521485383,"2200"),a==null?void 0:(b=a.target)==null?void 0:b.error,{instanceKey:g});e(a)});return function(b){return a.apply(this,arguments)}}()});yield (j||(j=b("Promise"))).all(Array.from(f).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a[0];a=a[1];if(e!=null&&i.objectStoreNames.contains(e)){var f=k.objectStore(e);yield (j||(j=b("Promise"))).all(Array.from(a).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];if(d("ReStorePersistence").isDeletedValue(a))yield c("promiseFromRequest")(f["delete"](b));else{a=d("MAWLSDBEncryption").encryptLSDBObj(a,e);yield c("promiseFromRequest")(f.put(a,b))}});return function(b){return a.apply(this,arguments)}}()))}else void d("WALoggerDeferred").ERROR(m(),e,Array.from(i.objectStoreNames).toString())});return function(b){return a.apply(this,arguments)}}()));yield h}});function g(a){return f.apply(this,arguments)}return g}(),get:function(a,c,d){var e=u(c);if(r)return e.get(d);return q==null?(j||(j=b("Promise"))).reject("rehydration is not complete"):q.then(function(){r=!0;return e.get(d)})},logError:function(a,b,e,f){(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_RESTORE_PERSISTENCE_ERROR,a);if(e==="dbCorruption"){var g;(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EBSM_CORRUPTION,a);e=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();void d("WALoggerDeferred").ERROR(l());f="Got unexpected undefined in ebsm, mode: "+b+", table: "+a+", id: "+((g=f==null?void 0:f.id)!=null?g:"")+", deletedInThisTxn: "+((g=f==null?void 0:f.deletedInThisTxn)!=null?g:"")+". Deleting EBSM db";c("FBLogger")("labyrinth_web").mustfix(f);g=c("EBSMProperties").mandatoryTables.has(a)||!p;b={bool:{fullDeletion:g},string:{mode:b,restoreUpsellTime:e,tableName:a}};e=d("Random").uint32();c("QPLUserFlow").start(c("qpl")._(521484724,"141"),{annotations:b,instanceKey:e});d("MAWUnrecoverableDbErrors").setError(new(d("MAWUnrecoverableDbErrors").EbsmHydrationError)(f,g,e,a));s||(s=!0,d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,g?"full":"partial"))}},queueCommitWork:void 0,runExclusively:function(a){return new(j||(j=b("Promise")))(function(c,d){f=f.then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield a()),e=b[0];b[1];try{c(yield e())}catch(a){d(a)}}))})},shouldApplySync:function(){return!1},shouldInline:function(a,b){return!1},shouldSync:function(a,b){return a==="notifyInMemoryTable"?!1:!0},tabTablesNotifier:function(){return(h||(h=c("ExecutionEnvironment"))).isInBrowser?o:void 0},types:["ephemeral"],uniqueId:""}}function v(a,e){if(b("cr:11340")==null)return(j||(j=b("Promise"))).resolve();var f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521482912,"2591"),{},void 0,1e4),g=b("cr:11340").getEBDB();return g.runInTransaction(["auto_restore_opt_out","device_metadata","encrypted_backups","encrypted_backups_virtual_devices","experiences_shared_state","secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_recovery_code_status"],"readwrite",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){for(var g of u){var h,i=a.get(g);if(i==null||i.size===0)continue;var j=[],k=[];h=(h=b("cr:11340").ebdbDescriptor)==null?void 0:h[g];if(h==null){f.addAnnotations({string:{missingTableDescriptor:"tableDescriptor is null for "+g}});continue}h=h.primaryKey;for(i of i){var l=i[0],m=i[1];if(m===d("ReStorePersistence").sentinelDeleted){var n=e(g);n=n.get(l);l=typeof n==="object"&&(n==null?void 0:n[h]);l!=null&&j.push(b("cr:11340").i64ToLongInt(l))}else typeof m==="object"&&(m==null?void 0:m[h])!=null&&k.push(b("cr:11340").mapI64ToLongInt(m))}n=c.stores[g];if(n==null){f.addAnnotations({string:{missingStore:"store is null for "+g}});continue}j.length>0&&(yield n.bulkDelete(j));k.filter(Boolean).length>0&&(yield n.bulkPut(k))}});return function(a){return c.apply(this,arguments)}}()).then(function(){f.endSuccess()})["catch"](function(a){f.endFail("runtime-exception",{string:{message:a.toString(),reason:"runtime-exception"}})})}g["default"]=a}),98);
__d("createReStoreTableNameAllowListPersistence",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d){var e;return{clearCache:function(){a.clearCache==null?void 0:a.clearCache(),c.clearCache==null?void 0:c.clearCache()},close:function(){a.close==null?void 0:a.close(),c.close==null?void 0:c.close()},flush:function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){var h=new Map(),i=new Map();e.forEach(function(a,b){d.has(b)?i.set(b,a):h.set(b,a)});yield (g||(g=b("Promise"))).all([a.flush(h,f),c.flush(i,f)])});function f(a,b){return e.apply(this,arguments)}return f}(),get:function(b,e,f,g){return d.has(e)?c.get(b,e,f,g):a.get(b,e,f,g)},isClosed:function(){return(a.isClosed==null?void 0:a.isClosed())||!1},isPersistenceSupported:a.isPersistenceSupported,logError:function(b,e,f,g){d.has(b)?c.logError==null?void 0:c.logError(b,e,f,g):a.logError==null?void 0:a.logError(b,e,f,g)},permitsSynchronousIO:function(b){if(d.has(b)){var e;return(e=c.permitsSynchronousIO==null?void 0:c.permitsSynchronousIO(b))!=null?e:!1}else{return(e=a.permitsSynchronousIO==null?void 0:a.permitsSynchronousIO(b))!=null?e:!1}},runExclusively:function(d,e){return a.runExclusively(function(){return new(g||(g=b("Promise")))(function(a,f){var h=c.runExclusively(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield d()),e=c[0],f=c[1],i=new(g||(g=b("Promise")))(function(b){a([function(){b();return h},f])});return[b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield i;return e()}),f]}),e);h["catch"](f)})},e)},shouldApplySync:function(b,e){if(d.has(e))return c.shouldApplySync(b,e);else return a.shouldApplySync(b,e)},shouldInline:function(b,e){return d.has(b)?c.shouldInline(b,e):a.shouldInline(b,e)},shouldSync:function(b,e){if(d.has(e))return c.shouldSync(b,e);else return a.shouldSync(b,e)},tabTablesNotifier:(e=a.tabTablesNotifier)!=null?e:c.tabTablesNotifier,types:[].concat(a.types,c.types),uniqueId:c.uniqueId+a.uniqueId}}f["default"]=a}),66);
__d("LSJSEBInMemoryStorage",["EBSMProperties","createLSReStoreEphemeralPersistence","createReStoreEBSMTablesPersistence","createReStoreTableNameAllowListPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);b=c("createReStoreTableNameAllowListPersistence")(d("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),c("createReStoreEBSMTablesPersistence")(b,a),c("EBSMProperties").persistedTables);return b}g.makeReStorePersistence=a}),98);
__d("MAWLSVaultingHooks",["ReStoreVaulting"],(function(a,b,c,d,e,f,g){"use strict";a={onAfterEntriesNext:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeVaultDbRow(a,b)},onAfterGet:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeVaultDbRow(a,b)},onBeforeAdd:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)},onBeforeNotify:function(a){var b=a.newValue,c=a.prevValue;a=a.tableName;return{newValue:d("ReStoreVaulting").maybeVaultDbRow(b,a),prevValue:d("ReStoreVaulting").maybeVaultDbRow(c,a)}},onBeforePut:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)},onBeforeUpsert:function(a){var b=a.tableName;a=a.value;return d("ReStoreVaulting").maybeUnvaultDbRow(a,b)}};g["default"]=a}),98);
__d("LSJSInMemoryStorage",["LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","createLSReStoreEphemeralPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("LSReStoreWrapper").createLSReStore(d("createLSReStoreEphemeralPersistence").createLSReStoreEphemeralPersistence(),a,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger)}g["default"]=a}),98);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var c=d("ReQL").fromTableAscending(a.threads_ranges_v2__generated).filter(function(a){return(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-1))||(i||(i=d("I64"))).equal(a.parentThreadKey,(j||(j=d("LSIntEnum"))).ofNumber(-10))});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads_ranges_v2__generated["delete"](c.parentThreadKey,c.minThreadKey,c.minLastActivityTimestampMs)})},(h||(h=b("Promise"))).resolve())})}function l(a){var c=d("ReQL").fromTableAscending(a.threads).filter(function(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)});return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.threads["delete"](c.threadKey)})},(h||(h=b("Promise"))).resolve())})}function a(a){return(h||(h=b("Promise"))).all([k(a),l(a)]).then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("MAWMainThreadLogger",["CurrentMessengerUser","FBLogger","MAWAppVersion","MAWConsoleLogger","MAWDeleteOldLogsFromDisk","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","Promise","ServerJsRuntimeEnvironment","WADevToolsBridge","WAJids","WATagsLogger","asyncToGeneratorRuntime","err","getErrorSafe","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1;function a(){i=!1}function e(){i||(i=!0,d("WATagsLogger").initializeWaLogger(u))}var j=function(){return c("FBLogger")("messenger_e2ee_web")};function k(a,b){return b.length>0?d("MAWSaveLogToDisk").joinTags(b)+" "+a:a}function l(a,b,e){if(d("ServerJsRuntimeEnvironment").isRunningServerJsRuntime())return;var f=Date.now();c("gkx")("3282")&&d("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","logLine",{logLevel:a,logString:k(b,e)},!0);if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;b=b.replace(/\n/g," ");if(a==="debug"||typeof b!=="string")return;d("MAWSaveLogToDisk").saveLogEntry("browser",{args:b,date:f,event:d("MAWSaveLogToDisk").joinTags(e,"[unknown]"),level:a})}function m(a,b){a=n(a);a!=null&&l("log",a,b)}function n(a){if(!d("CurrentMessengerUser").isEmployee()&&!d("CurrentMessengerUser").isTestUser())return;a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);return a}function o(a,b){a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);l("log",a,b)}function p(a,b){a=d("WAJids").maybeSanitizeLogLineText(a);a=d("MAWLeakDetection").maybeReplaceVaultedString(a);l("warn",a,b)}function f(a,b,d,e,f,g){d=c("err")(d);d.stack=e;c("promiseDone")(s(a,b,d,f,g))}function q(a,b,c){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(a));c=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(c));var f=d("MAWLoggingSwitches").removeLoggingFromBridge?d("MAWSaveLogToDisk").getLastNEntries(e):(h||(h=b("Promise"))).resolve([]);e=e===0?[]:[].concat((yield f).map(function(a){return a.args}));return{errorLogString:c+" [Caught in "+a+"]",logs:[a].concat(e),sanitizedMessage:c}});return r.apply(this,arguments)}function s(a,b,c,d,e){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){a=(yield q(k(a,b),e.message,g));g=a.errorLogString;var h=a.logs;a=a.sanitizedMessage;var i=c("getErrorSafe")(e);try{e.message=a}catch(b){i=c("err")(a,e.fileName,e.lineNumber)}f!==0&&(i.framesToPop=f);(a=j())==null?void 0:(e=a.addMetadata("MESSENGER_E2EE_WEB","APP_VERSION",d("MAWAppVersion").getVersionNumber()).catching(i)).mustfix.apply(e,h);l("error",g,b)});return t.apply(this,arguments)}var u={debug:function(a,b){d("MAWConsoleLogger").logToConsole("log",a,b)},devConsole:function(a,b,c){for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];switch(a){case"DEV":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c].concat(f));break;case"DEV_XMPP":d("MAWConsoleLogger").logToConsole.apply(void 0,["log",b,c].concat(f));break;case"LOG":d("MAWConsoleLogger").logToConsole.apply(void 0,["info",b,c].concat(f));break;case"WARN":d("MAWConsoleLogger").logToConsole.apply(void 0,["warn",b,c].concat(f));break;case"ERROR":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c].concat(f));break;case"CATCHING":d("MAWConsoleLogger").logToConsole.apply(void 0,["error",b,c].concat(f));break}},error:function(a,b,e){a=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(a));e?c("promiseDone")(s(a,b,e,0,0)):c("promiseDone")(s(a,b,c("err")(a),2,0));d("MAWConsoleLogger").logToConsole("error",a,b)},info:function(a,b){o(a,b),d("MAWConsoleLogger").logToConsole("info",a,b)},logRestricted:function(a,b){m(a,b),d("MAWConsoleLogger").logToConsole("log",a,b)},warn:function(a,b){p(a,b),d("MAWConsoleLogger").logToConsole("warn",a,b)}};function v(){return!d("MAWLoggingSwitches").removeLoggingFromBridge?(h||(h=b("Promise"))).resolve([]):d("MAWSaveLogToDisk").getEntries()}function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;yield d("MAWDeleteOldLogsFromDisk").clearLogs()});return x.apply(this,arguments)}function y(a){return new Date(typeof a==="string"?parseInt(a,10):a).toISOString().replace("T"," ").replace("Z","")}function z(a){return a.map(function(a){try{var b=y(a.date);return[b,a.level,a.category,a.event,a.args].join(" | ")}catch(a){return[y(Date.now()),"error","LOGGER","Error formatting log: "+((a==null?void 0:a.message)||"")].join(" | ")}}).filter(Boolean).join("\n")}g.__testClearLoggerSetup=a;g.setupMainWaLogger=e;g.logToHistory=l;g.logRestricted=m;g.info=o;g.warn=p;g.logError=f;g.getEntries=v;g.clearEntries=w;g.formatEntries=z}),98);
__d("MWChatOpenTabForGroupCallback",["I64","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagingThreadTypeUtil","Promise","ReQL","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a){var e=(i||(i=d("I64"))).of_string(a);c("promiseDone")((k||(k=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return a.runInTransaction(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.threads).getKeyRange(e)).then(function(f){if(f!=null)if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType)){c("recoverableViolation")("Preloading secure thread not implemented yet","messenger_web_entrypoints");return(h||(h=b("Promise"))).resolve()}else return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.messages_ranges_v2__generated).getKeyRange(e)).then(function(b){if(b!=null&&b.minMessageId===b.maxMessageId)return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(a),{direction:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:b.minTimestampMs,threadKey:e})});else return(h||(h=b("Promise"))).resolve()})},"readwrite",void 0,void 0,f.id+":27")}))}g.call=a}),98);
__d("MWConditionallySetupEBStateDB",["asyncToGeneratorRuntime","cr:6693","cr:8233"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(b("cr:6693")!=null){b("cr:8233")==null?void 0:b("cr:8233").setupMainWaLogger();a=(yield b("cr:6693").makeEBStateDB(a));return a}});return h.apply(this,arguments)}g.conditionallyMakeEBStateDB=a}),98);
__d("MWGetOtherContactOrSelf",["I64","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.tables.participants).getKeyRange(a)));if(a.length===1){var e=a[0];return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))}if(a.length>2)return;e=a.find(function(a){return!(h||(h=d("I64"))).equal(a.contactId,b)});if(e!=null)return d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.tables.contacts).getKeyRange(e.contactId))});return i.apply(this,arguments)}g.getOtherContactOrSelf=a}),98);
__d("MWLSSchemaEphemeral",["FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","asyncToGeneratorRuntime","cr:8624"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("LSPlatformLsInitLog").addPoint("init_start");var e;try{a=(yield d("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB());a!=null&&(h.debug("Creating EB State DB"),e=d("LSReStoreWrapper").createLSReStore(a,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger),yield b("cr:8624")==null?void 0:b("cr:8624")(e),h.debug("EB State DB inited"))}catch(a){c("FBLogger")("messenger_web_clients").catching(a).mustfix("EBSM failed")}e==null&&(h.debug("Creating EDB"),e=c("LSJSInMemoryStorage")(d("LSMetadata").schema),h.debug("EDB inited"));d("LSPlatformLsInitLog").addPoint("init_end");return e});return i.apply(this,arguments)}g.createDB=a}),98);
__d("MWSetupEBStateDB",["EARInitType","FBLogger","LSJSEBInMemoryStorage","MAWEncryptedBackupsPersistedDB","MWEncryptedBackupsFirstRestoreUpsellTime","MWSetupDBEncryption","QPLUserFlow","WebSession","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);var b=d("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime();c("QPLUserFlow").start(c("qpl")._(521477507,"1406"),{annotations:{string:{ebSessionIdentifier:b,sessionTabId:d("WebSession").getId()}}});var e;b=(yield d("MWSetupDBEncryption").init(c("EARInitType").EB_INIT));if(b.success){var f=d("MAWEncryptedBackupsPersistedDB").makeEBIDB(a)["catch"](function(a){c("QPLUserFlow").endFailure(c("qpl")._(521477507,"1406"),"Initialisation failed. Idb is null");c("FBLogger")("labyrinth_web").catching(a).warn("[labyrinth_web] EB State IDB initialization failed. Falling back to In memory ReStore db");return null});e=d("LSJSEBInMemoryStorage").makeReStorePersistence(f,a);c("QPLUserFlow").endSuccess(c("qpl")._(521477507,"1406"))}else{c("QPLUserFlow").endFailure(c("qpl")._(521477507,"1406"),b.error.toString(),{annotations:{string:{errorDescription:((f=b.payload)==null?void 0:f.message)||""}}});c("FBLogger")("labyrinth_web").warn("[labyrinth_web] Encryption DB init failed. Falling back to In memory ReStore db")}return e});return h.apply(this,arguments)}g.makeEBStateDB=a}),98);
__d("hasDefaultThreadOneToOneCapability",["FBLogger","LSContactBitOffset","MWGetOtherContactOrSelf","ReQL","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a==null)return!1;var e=(yield d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(b.tables._user_info).map(function(a){return a.facebookUserId}))),f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e)));if(f==null){c("FBLogger")("messenger_search").warn("Error fetching viewer details");return!1}if(!c("gkx")("8672")){f=d("LSContactBitOffset").has(80,f);if(!f)return!1}f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a)));a=(yield d("MWGetOtherContactOrSelf").getOtherContactOrSelf(a,e,b));b=(e=a)!=null?e:f;if(b==null)return!1;e=(a=d("LSContactBitOffset").has(83,b))!=null?a:!1;return e});return h.apply(this,arguments)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EntMessageReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:0,BUMP:1});f["default"]=a}),66);
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.sequence([function(e){return c.i64.eq(a[1],d[0])?c.sequence([function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2421884758]),void 0).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2676961947]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,3298086032]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.sequence([function(e){return c.i64.eq(a[1],a[2])?c.sequence([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,3873263038]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,2616853333]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}]):c.sequence([function(e){return c.i64.eq(a[1],d[0])?c.sequence([function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,4002265907]),void 0).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2663996736]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.sequence([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,2868699317]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.sequence([function(e){return c.i64.eq(a[1],a[2])?c.sequence([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,2688620547]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,3544071775]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxGetLocalizedReplySnippetStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSetMessageDisplayedContentTypes",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(16).fetch([[[a[0],a[1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[void 0,void 0],c[0]=d[0],c[1]=d[1],d):(b=a.item,d=[b.attachmentType,b.xmaLayoutType],c[0]=d[0],c[1]=d[1],d)})},function(d){return b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0,void 0],c[3]=e[0],c[4]=e[1],c[5]=e[2],e):(d=a.item,e=[d.replySourceTypeV2,d.replySourceId,d.text],c[3]=e[0],c[4]=e[1],c[5]=e[2],e)})},function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[7]=void 0:(b=a.item,c[7]=b.customEmoji)})},function(d){return b.i64.eq(c[0],b.i64.cast([0,6]))?c[9]=b.i64.cast([0,64]):(b.i64.eq(c[0],b.i64.cast([0,5]))?c[15]=b.i64.cast([0,4]):(b.i64.eq(c[0],b.i64.cast([0,3]))?c[16]=b.i64.cast([0,16384]):(b.i64.eq(c[0],b.i64.cast([0,2]))?c[17]=b.i64.cast([0,2]):(b.i64.eq(c[0],b.i64.cast([0,4]))?c[18]=b.i64.cast([0,2]):c[18]=a[5]?b.i64.cast([0,4096]):b.i64.cast([0,0]),c[17]=c[18]),c[16]=c[17]),c[15]=c[16]),c[9]=c[15]),c[10]=c[5]!==void 0&&c[5]!==""&&c[5]!==c[7]?b.i64.or_(c[9],b.i64.cast([0,1])):c[9],c[11]=c[7]!==void 0&&c[7]===c[5]?b.i64.or_(c[10],b.i64.cast([0,128])):c[10],c[12]=b.i64.eq(c[0],b.i64.cast([0,7]))?b.i64.or_(c[11],b.i64.cast([0,8])):c[11],c[13]=b.i64.eq(c[1],b.i64.cast([0,0]))?b.i64.or_(c[12],b.i64.cast([0,1024])):b.i64.eq(c[1],b.i64.cast([0,1]))?b.i64.or_(c[12],b.i64.cast([0,2048])):c[12],c[14]=b.i64.eq(c[3],b.i64.cast([0,2]))&&c[4]!==void 0?b.i64.or_(c[13],b.i64.cast([0,512])):c[13],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(d){var e=d.update;d.item;return e({displayedContentTypes:a[4]?b.i64.cast([0,32]):b.i64.eq(c[3],b.i64.cast([0,3]))?b.i64.or_(c[14],b.i64.cast([0,8192])):c[14]})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxSetMessageDisplayedContentTypesStoredProcedure";a.__tables__=["attachments","messages","threads"];e.exports=a}),null);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3],c[4]=e[4],c[5]=e[5],c[6]=e[6],c[7]=e[7],c[8]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,d.primarySortKey,d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey],c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3],c[4]=e[4],c[5]=e[5],c[6]=e[6],c[7]=e[7],c[8]=e[8],e)})},function(d){return b.sortBy(b.filter(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=e[0],c[11]=e[1],c[12]=e[2],c[13]=e[3],c[14]=e[4],c[15]=e[5],c[16]=e[6],c[17]=e[7],c[18]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=e[0],c[11]=e[1],c[12]=e[2],c[13]=e[3],c[14]=e[4],c[15]=e[5],c[16]=e[6],c[17]=e[7],c[18]=e[8],e)})},function(d){return b.sortBy(b.filter(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),void 0,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=e[0],c[21]=e[1],c[22]=e[2],c[23]=e[3],c[24]=e[4],c[25]=e[5],c[26]=e[6],c[27]=e[7],c[28]=e[8],e):(d=a.item,e=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=e[0],c[21]=e[1],c[22]=e[2],c[23]=e[3],c[24]=e[4],c[25]=e[5],c[26]=e[6],c[27]=e[7],c[28]=e[8],e)})},function(d){return c[32]=b.i64.or_(b.i64.cast([0,2]),b.i64.or_(!c[3]&&!a[3]?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.or_(c[3]?b.i64.cast([0,0]):b.i64.cast([0,1]),b.i64.or_(b.i64.eq(c[5],b.i64.cast([0,60]))||b.i64.eq(c[5],b.i64.cast([0,80]))?b.i64.cast([0,1048576]):b.i64.cast([0,0]),b.i64.neq(c[6],b.i64.cast([85970,924785702]))&&b.i64.neq(c[6],b.i64.cast([85970,1004785694]))&&b.i64.neq(c[6],b.i64.cast([85970,1044785690]))?b.i64.cast([0,0]):b.i64.cast([0,2097152]))))),c[14]!=="nonexistent"?b.sequence([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[12],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[32],b.i64.cast([0,16])):c[32],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.sequence([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[30],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[22],b.i64.cast([0,16])):c[22],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxSetMessageViewFlagsStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),void 0!==void 0?c.resolve(d[1]=void 0):c.sequence([function(a){return c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[1]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.sequence([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],c.i64.cast([0,1])),d[13]=c.i64.gt(d[0],d[11])?d[0]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.sequence([function(b){return c.forEach(c.filter(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[17]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[16],d[17],void 0,void 0)}]):c.resolve()}]):(e.item,c.forEach(c.filter(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(e){return c.sequence([function(b){return c.islc(c.db.table(12).fetchDesc([[[a[1],c.i64.cast([0,80])],[a[1],c.i64.cast([0,60])],[a[1],c.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[33]=c.i64.of_float(Date.now()),d[9]=d[33]):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==void 0&&(c.i64.eq(a[9],c.i64.cast([0,1]))||c.i64.eq(a[10],c.i64.cast([0,1])))?c.sequence([function(e){return c.filter(c.db.table(12).fetch([[[a[8]==null?"":a[8]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,f){var g=e.done;e=e.value;return g?(g=[a[8],void 0,void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=g[0],d[34]=g[1],d[35]=g[2],d[36]=g[3],d[37]=g[4],d[38]=g[5],d[39]=g[6],d[40]=g[7],d[41]=g[8],d[42]=g[9],d[43]=g[10],d[44]=g[11],d[45]=g[12],d[46]=g[13],d[47]=g[14],d[48]=g[15],g):(f=e.item,c.sequence([function(e){return d[54]=f.senderId,d[53]=f.stickerId,c.i64.neq(d[53],void 0)?(e=[d[53],c.i64.cast([0,4])],d[56]=e[0],d[57]=e[1],e):(e=[void 0,void 0],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[55]=f.replyType==null?c.i64.cast([0,0]):f.replyType,c.sequence([function(e){return c.storedProcedure(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[54],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(b){return d[52]=c.i64.eq(a[10],c.i64.cast([0,1]))?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],c.i64.cast([0,1]),d[52],d[54],f.text,d[50],d[51],void 0,void 0,void 0,void 0,void 0,void 0,d[55]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===void 0||c.i64.eq(a[9],c.i64.cast([0,0]))||c.i64.eq(a[10],c.i64.cast([0,0]))?(e=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],c.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[void 0,void 0,void 0,void 0],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=c.i64.cast([0,3]):d[32]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[9],secondarySortKey:d[0],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.sequence([function(a){return c.db.table(12).fetch([[[d[1]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[0],void 0],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.forEach(c.filter(c.db.table(12).fetch([[[d[1]]],"optimistic"]),function(a){return a.offlineThreadingId===d[1]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[2]=c.createArray(),d[3]=(d[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[2]),d[4]=(d[2].push("localApplyOptimisticMessage"),d[2]),d[5]=(d[2].push(a[1]),d[2]),d[6]=(d[2].push(d[1]),d[2]),d[7]=c.toJSON(d[2]),function(a){c.logger(a).info(a)}(d[7]),a[14]?c.sequence([function(e){return c.storedProcedure(b("LSSetMessageViewFlags"),a[1],d[1],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[1],d[0],a[3],!1,c.i64.neq(a[6],void 0))}]):c.resolve()},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageStoredProcedure";a.__tables__=["threads","participants","user_visible_network_connectivity_error","messages"];e.exports=a}),null);
__d("LSMarkThreadRead",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.gt(a[0],c.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMarkThreadReadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSMarkThreadRead"),a[1],a[0])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_id",a[0]),d[2].set("last_read_watermark_ts",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_id"),d[2],d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,21]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticMarkThreadReadV2StoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadDisappearingSetting",["LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[4]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[5]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[4],d[5],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("wa_jid",void 0),d[2].set("thread_key",a[0]),d[2].set("disappearing_ttl",a[1]),d[2].set("updated_timestamp",a[2]),d[2].set("updated_by",a[3]),d[2].set("sync_group",c.i64.cast([0,95])),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"disappearing_setting",c.i64.cast([0,714]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpdateThreadDisappearingSettingStoredProcedure";a.__tables__=["user_visible_network_connectivity_error"];e.exports=a}),null);
__d("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure",["LSOptimisticUpdateThreadDisappearingSetting","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e===void 0&&(e={});e=c("LSOptimisticUpdateThreadDisappearingSetting")(e.threadKey,e.disappearingTtl,e.updatedTimestamp,e.updatedBy,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MAWLocalizationEphemeralSettingSetAdminMsg",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS||a===d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF||a===d("MAWLocalizationType").LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET}g.isEphemeralSettingSetAdminMsg=a}),98);
__d("MAWAdminMsgCTA",["fbt","I64","MAWLocalizationEphemeralSettingSetAdminMsg","MAWLocalizationType","MAWTimeUtils","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=h._("__JHASH__iw7A0LnsmaW__JHASH__").toString(),l=h._("__JHASH__e7VrrtGFXYH__JHASH__").toString(),m=h._("__JHASH__jODYJ2eW1Pa__JHASH__").toString(),n=h._("__JHASH__1qKfcXoTcu1__JHASH__").toString(),o=h._("__JHASH__xAOSvpC7vLN__JHASH__").toString(),p=h._("__JHASH__P5k2go6lj2P__JHASH__").toString();function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas.index("ctaId"))));return a!=null?(j||(j=d("I64"))).add(a.ctaId,(j||(j=d("I64"))).one):(j||(j=d("I64"))).zero});return r.apply(this,arguments)}function s(a,b,c){b=[b,c];return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.admin_message_ctas).bounds({gte:b,lte:b}))}function t(a){if(a==null)return{showAdChoiceIcon:!1};if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:k};switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:m};case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:o};case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:p};case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:l};case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return{actionUrl:"https://www.facebook.com/help/1071984682876123/",adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:n};default:return{actionUrl:void 0,adClientToken:void 0,adHelpUrl:void 0,adminMessageNicknameParticipantId:void 0,adPreferenceUrl:void 0,showAdChoiceIcon:!1,targetId:void 0,targetTitle:void 0,title:void 0}}}function u(a){if(a==null)return;if(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(a))return"admin_msg_armadillo_ephemeral_change_duration";switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE:return"admin_msg_thread_level_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION:case d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:return"admin_msg_e2ee_thread";case d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE:return"admin_msg_cutover_rollback";case d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE:return"admin_msg_dual_thread_cutover";case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:return"admin_msg_view_pin_msgs_v2";case d("MAWLocalizationType").LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE:return"admin_msg_icdc"}}function v(a,b,c,d,e){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){yield a.admin_message_ctas.add({actionContentBlob:f.actionContentBlob,actionUrl:f.actionUrl,adClientToken:f.adClientToken,adHelpUrl:f.adHelpUrl,adminMessageNicknameParticipantId:f.adminMessageNicknameParticipantId,adPreferenceUrl:f.adPreferenceUrl,ctaId:b,messageId:e.msgId,showAdChoiceIcon:f.showAdChoiceIcon,targetId:f.targetId,targetTitle:f.targetTitle,threadKey:c,timestampMs:d("MAWTimeUtils").toTimestamp(e.ts),title:f.title})});return w.apply(this,arguments)}function x(a,b,c){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,d){var e=(yield (i||(i=b("Promise"))).all([s(a,c,d.msgId),q(a)])),f=e[0];e=e[1];if(f!=null)return{ctaId:f.ctaId,ctaType:u(d.adminType),title:f.title};else{f=t(d.adminType);yield v(a,e,c,d,f);return{ctaId:e,ctaType:u(d.adminType),title:f.title}}});return y.apply(this,arguments)}function a(a,c,e){var f=e.adminType;return f!=null&&(d("MAWLocalizationEphemeralSettingSetAdminMsg").isEphemeralSettingSetAdminMsg(f)||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||f===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE||f===d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE)?x(a,c,e):(i||(i=b("Promise"))).resolve()}g.getAdminMsgCTAContentByAdminType=t;g.getCtaTypeByAdminType=u;g.getAdminMsgCtaStep=a}),226);
__d("MAWEphemeralMsgAutoResetSystemId",[],(function(a,b,c,d,e,f){"use strict";a="-111111";b=a;f["default"]=b}),66);
__d("MAWEphemeralSettingsUpdate",["FBLogger","I64","LSOptimisticUpdateThreadDisappearingSettingStoredProcedure","MAWChatJid","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","Promise","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LSDatabaseSingletonLazyWrapper").__setRef("MAWEphemeralSettingsUpdate"),k=c("requireDeferred")("LSFactory").__setRef("MAWEphemeralSettingsUpdate"),l=c("requireDeferred")("WATimeUtils").__setRef("MAWEphemeralSettingsUpdate");function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield a.threads.get(e));if(a!=null){e=a.disappearingSettingUpdatedTs;a=a.disappearingSettingTtl;if(e==null||a==null)return!0;if((i||(i=d("I64"))).lt(e,(i||(i=d("I64"))).of_float(c))&&!(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_int32(b)))return!0}return!1});return n.apply(this,arguments)}function o(a,b,c,d,e,f,g){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j,l,n){var o=(yield m(a,e,f,j));if(!o)return(h||(h=b("Promise"))).resolve();l&&c("FBLogger")("labyrinth_web").addMetadata("LABYRINTH_WEB","APP_VERSION","OCCAM_EPHEMERAL_SETTINGS_UPDATE").info("[Occam][Web] Ephemeral Settings Updated.");o=(yield k.load());return c("LSOptimisticUpdateThreadDisappearingSettingStoredProcedure")(o(a),{disappearingTtl:(i||(i=d("I64"))).of_int32(e),threadKey:j,updatedBy:i.of_string(g?c("MAWEphemeralMsgAutoResetSystemId"):(l=n)!=null?l:d("MAWCurrentUser").getID()),updatedTimestamp:i.of_float(f)})});return p.apply(this,arguments)}function a(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e=(yield j.load());e=(yield e());return e.runInTransaction(function(e){return o(e,a,b,c,d,!1)},"readwrite")});return q.apply(this,arguments)}function e(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g){var i=(yield j.load());i=(yield i());return i.runInTransaction(function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i){var j=(yield d("MAWChatJid").toThreadKeyMaybe(i,f));return j!=null?o(i,a,(yield l.load()).castUnixTimeToMillisTime(c),e,j,g):(h||(h=b("Promise"))).resolve()});return function(a){return i.apply(this,arguments)}}(),"readwrite")});return r.apply(this,arguments)}g.updateEphemeralSettingsWithTxn=o;g.updateEphemeralSettings=a;g.updateEphemeralSettingsByChatJid=e}),98);
__d("MAWMiActOnActThreadReady",["FBLogger","I64","MAWMiActGetThreadLifecycleState","MAWMiActOnActThreadReadyQueue","MAWMiActThreadLifecycleState","Promise","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Enqueue by thread key: ",", threadState: ",", threadKey: "," on act thread ready"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executing thread action: ",", threadState: ",", threadKey: "," on act thread ready"]);k=function(){return a};return a}function l(a,b,c,d,e){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){a=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a,b,e));switch(a.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:c("promiseDone")(d("WALoggerDeferred").LOG(k(),e,a.type,(i||(i=d("I64"))).to_string(b)));return f(b,a.jid);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:c("promiseDone")(d("WALoggerDeferred").LOG(j(),e,a.type,(i||(i=d("I64"))).to_string(b)));return d("MAWMiActOnActThreadReadyQueue").enqueueByThreadKey(b,f,(f=g)!=null?f:c("emptyFunction"),e,a.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled onActThreadReady for threadKey:\n        %s, thread action: %s",(i||(i=d("I64"))).to_string(b),e);default:a.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",a.type)}});return m.apply(this,arguments)}function a(a,c,d){return new(h||(h=b("Promise")))(function(e,f){l(a,c,d,function(a,c){e({chatJid:c,serverThreadKey:a});return(h||(h=b("Promise"))).resolve()},function(){return f()})["catch"](function(){return f()})})}g.onActThreadReady=l;g.waitForACTThreadReady=a}),98);
__d("MDSScrollableAreaStyles",[],(function(a,b,c,d,e,f,g){"use strict";a={themed:{scrollbarColor:"x16o0dkt",$$css:!0},unthemed:{scrollbarColor:"xgjnz6y",$$css:!0}};b=a;g["default"]=b}),98);
__d("MNLSXMALayoutType",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23});f["default"]=a}),66);
__d("MWBlockingProtectionContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=e.useState,l=f({addMessageId:c("emptyFunction"),findMessageId:c("emptyFunction").thatReturnsFalse});function a(a){var b=d("react-compiler-runtime").c(6);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=[],b[0]=c):c=b[0];c=k(c);var e=c[0],f=c[1];b[1]!==e?(c={addMessageId:function(a){f([a].concat(e))},findMessageId:function(a){return e.find(function(b){return b===a})!=null}},b[1]=e,b[2]=c):c=b[2];c=c;c=c;var g;b[3]!==a||b[4]!==c?(g=i.jsx(l.Provider,{value:c,children:a}),b[3]=a,b[4]=c,b[5]=g):g=b[5];return g}function b(){return j(l)}e={Provider:a,useHook:b};g["default"]=e}),98);
__d("MWChatThreadId",["I64","LSIntEnum","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){switch(a.NAME){case"Group":case"User":case"Page":case"UserSecret":return a.VAL}}function b(a){switch(a.NAME){case"Group":return"g."+a.VAL;case"Page":return"p."+a.VAL;case"User":return"u."+a.VAL;case"UserSecret":throw c("unrecoverableViolation")("Not supported","messenger_web_product")}}function e(a){switch(a.targetType){case"GROUP":return{NAME:"Group",VAL:a.targetID};case"PAGE":return{NAME:"Page",VAL:a.targetID};case"USER":return{NAME:"User",VAL:a.targetID};default:throw c("unrecoverableViolation")("Invalid id","messenger_web_product")}}function f(a){return a.NAME==="User"}function j(a){return a.NAME==="UserSecret"}function k(a){if(a==null)return;a=a.split(":");if(a.length!==2)return;var b=a[0];a=a[1];switch(b){case"thread":return{NAME:"Group",VAL:a};case"user":return{NAME:"User",VAL:a};default:return}}function l(a){a=a.NAME;if(a==="Group")return(h||(h=d("LSIntEnum"))).ofNumber(2);return a==="User"||a==="Page"?(h||(h=d("LSIntEnum"))).ofNumber(1):(h||(h=d("LSIntEnum"))).ofNumber(7)}function m(a){return(i||(i=d("I64"))).of_string(a.VAL)}g.getFBID=a;g.serializeFuture=b;g.fromJs=e;g.isUser=f;g.isSecret=j;g.deserializeFromLegacyThreadId=k;g.getMessagingThreadType=l;g.toThreadKey=m}),98);
__d("MWPContactContext.react",["react","react-compiler-runtime","shallowEqualI64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useContext;e.useMemo;var k=e.useRef,l=i.createContext({authorName:void 0,contact:void 0,nickname:void 0}),m=i.createContext({authorName:void 0,contact:void 0,nickname:void 0});function a(){return j(l)}function b(){return j(m)}function c(a){var b=d("react-compiler-runtime").c(14),c=a.children,e=a.contact;a=a.nickname;var f;if(a!=null)f=a;else if(e!=null){var g=e.firstName;f=g!=null?g:e.name}else f=void 0;g=f;f=g;b[0]!==f||b[1]!==e||b[2]!==a?(g={authorName:f,contact:e,nickname:a},b[0]=f,b[1]=e,b[2]=a,b[3]=g):g=b[3];g=g;g=g;e=n(e);var h;b[4]!==f||b[5]!==a||b[6]!==e?(h={authorName:f,contact:e,nickname:a},b[4]=f,b[5]=a,b[6]=e,b[7]=h):h=b[7];f=h;a=f;b[8]!==c||b[9]!==a?(e=i.jsx(m.Provider,{value:a,children:c}),b[8]=c,b[9]=a,b[10]=e):e=b[10];b[11]!==g||b[12]!==e?(h=i.jsx(l.Provider,{value:g,children:e}),b[11]=g,b[12]=e,b[13]=h):h=b[13];return h}function n(a){var b=k();a=a?{blockedByViewerStatus:a.blockedByViewerStatus,capabilities:a.capabilities,capabilities2:a.capabilities2,contactTypeExact:a.contactTypeExact,name:a.name,profilePictureFallbackUrl:a.profilePictureFallbackUrl,profilePictureUrl:a.profilePictureUrl,profilePictureUrlExpirationTimestampMs:a.profilePictureUrlExpirationTimestampMs,secondaryName:a.secondaryName}:void 0;d("shallowEqualI64").shallowEqualI64(b.current,a)||(b.current=a);return b.current}g.useMWPContactFullContext=a;g.useMWPContactStableContext=b;g.MWPContactContextProvider=c}),98);
__d("MWGroupBlockingProtectionUtils",["fbt","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWBlockingProtectionContext.react","MWPContactContext.react","ReQL","ReQLSuspense","react-compiler-runtime","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;function l(a){var b=d("react-compiler-runtime").c(8),e=(k||(k=c("useReStore")))(),g;b[0]!==e.tables.threads||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(a).map(m)},b[0]=e.tables.threads,b[1]=a,b[2]=g):g=b[2];var h;b[3]!==e||b[4]!==a?(h=[e,a],b[3]=e,b[4]=a,b[5]=h):h=b[5];g=d("ReQLSuspense").useFirst(g,h,f.id+":32");if(g==null)return!1;b[6]!==g?(h=(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(16))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(18)),b[6]=g,b[7]=h):h=b[7];return h}function m(a){return a.threadType}function a(a){a=l(a);var b=d("MWPContactContext.react").useMWPContactStableContext();b=b.contact;return a&&b?!(i||(i=d("I64"))).equal(b.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function n(a,b){var e=d("react-compiler-runtime").c(4),g=(k||(k=c("useReStore")))(),h,m;e[0]!==g||e[1]!==a?(h=function(){return a!=null?d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a):d("ReQL").empty()},m=[g,a],e[0]=g,e[1]=a,e[2]=h,e[3]=m):(h=e[2],m=e[3]);e=d("ReQLSuspense").useFirst(h,m,f.id+":71");h=l(b);return h&&e?!(i||(i=d("I64"))).equal(e.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1}function b(a){var b=d("react-compiler-runtime").c(5),e=n(a.senderId,a.threadKey),f=c("MWBlockingProtectionContext.react").useHook();f=f.findMessageId;var g=l(a.threadKey),h;b[0]!==f||b[1]!==e||b[2]!==a.messageId||b[3]!==g?(h=g&&e&&!f(a.messageId),b[0]=f,b[1]=e,b[2]=a.messageId,b[3]=g,b[4]=h):h=b[4];return h}function e(a,b){var e,g=d("react-compiler-runtime").c(8),l=(k||(k=c("useReStore")))(),m=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(l.tables.messages).getKeyRange(a)},[l,a],f.id+":110"))==null?void 0:e.senderId;g[0]!==l.tables.contacts||g[1]!==m?(e=function(){return m!=null?d("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(m):d("ReQL").empty()},g[0]=l.tables.contacts,g[1]=m,g[2]=e):e=g[2];var n;g[3]!==l||g[4]!==m?(n=[l,m],g[3]=l,g[4]=m,g[5]=n):n=g[5];e=d("ReQLSuspense").useFirst(e,n,f.id+":114");n=e==null?!1:!(i||(i=d("I64"))).equal(e.blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));b=(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(16))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(18));if(!(b&&n))return null;n=(b=e==null?void 0:e.firstName)!=null?b:e==null?void 0:e.name;if(n==null){c("recoverableViolation")("Empty first name for blocked contact","messenger_web_wellbeing");return null}g[6]!==n?(b=h._("__JHASH__rZMtLmsbvnM__JHASH__",[h._param("blocked contact's name",n)]).toString(),g[6]=n,g[7]=b):b=g[7];return b}g.useShouldEnableBlockingProtection=l;g.useMWGetSnippetForBlockingProtection=e;g.useMWIsContactBlocked=a;g.useMWIsMessageSentByBlockedContact=n;g.useMWShouldHideReply=b}),226);
__d("MWInboxPersistedUIState",["FBLogger","WebStorage","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useCallback,k=b.useRef,l=b.useSyncExternalStore,m=new Map(),n=new Map();function o(a){(a=m.get(a))==null?void 0:a.forEach(function(a){return a()})}function a(a,b){var d=k(a).current,e=k({parsed:d,stringified:void 0});a=j(function(a){var c=m.get(b),d=c!=null?c:new Set();d.add(a);m.set(b,d);return function(){d["delete"](a)}},[b]);var f=j(function(){var a=(h||(h=c("WebStorage"))).getLocalStorageForRead();a=a==null?n.get(b):a.getItem(b);if(a==null)return d;if(a===e.current.stringified)return e.current.parsed;try{var f=JSON.parse(a);e.current={parsed:f,stringified:a};return f}catch(a){return d}},[d,b]);a=l(a,f);f=j(function(a){a=a instanceof Function?a(e.current.parsed):a;var d=(h||(h=c("WebStorage"))).getLocalStorage();a=JSON.stringify(a);if(d!=null)if(a==null)d.removeItem(b);else try{d.setItem(b,a)}catch(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to setItem")}else n.set(b,a);o(b)},[b]);return[a,f]}g.usePersistedUIState=a}),98);
__d("MWResponsiveLayoutConstants",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({THREAD_LIST_PANEL:0,MESSAGE_LIST_PANEL:1,INFO_PANEL:2});c=[a.MESSAGE_LIST_PANEL,a.INFO_PANEL];d=320;e=300;b=a.THREAD_LIST_PANEL;var g=a.MESSAGE_LIST_PANEL,h=3;f.MWLayoutPanel=a;f.MWInboxMainContentPanels=c;f.DENSE_LAYOUT_BREAKPOINT_WIDTH=d;f.DENSE_LAYOUT_BREAKPOINT_HEIGHT=e;f.DEFAULT_ONE_CARD_INDEX=b;f.DEFAULT_TWO_CARDS_INDEX=g;f.DEFAULT_MAX_CARDS_VISIBLE=h}),66);
__d("MWResponsiveLayoutContext.react",["MWResponsiveLayoutConstants","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({_mountCard:c("emptyFunction"),_unmountCard:c("emptyFunction"),cardsVisible:d("MWResponsiveLayoutConstants").DEFAULT_MAX_CARDS_VISIBLE,isDenseMode:!1,maxCardsVisible:d("MWResponsiveLayoutConstants").DEFAULT_MAX_CARDS_VISIBLE,popCard:c("emptyFunction"),primaryCardIndex:d("MWResponsiveLayoutConstants").DEFAULT_TWO_CARDS_INDEX,pushCard:c("emptyFunction"),secondaryCardIndex:null});e=b;g["default"]=e}),98);
__d("MWXIconCautionTriangle",["MWXSvgIcon","SVGIcon","cr:12357","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12357")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMenu.react",["cr:6941","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:6941")}),98);
__d("MWXMenuItem.react",["BaseTheme.react","FDSTextWebUtils","MWXSvgIcon","MWXThreadThemeColor","MessengerWebUXLogger","cr:2466","cr:4318","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;e.useCallback;e.useMemo;f=i.forwardRef(a);function a(a,e){var f=d("react-compiler-runtime").c(38),g;f[0]!==a?(g=babelHelpers["extends"]({},a),f[0]=a,f[1]=g):g=f[1];var h,k,l,m,n,o;if(f[2]!==g){a=g;h=a.icon;k=a.iconColor;l=a.loggingEvent;m=a.onClick;n=a.primaryColor;o=a.secondaryColor;a=babelHelpers.objectWithoutPropertiesLoose(a,["icon","iconColor","loggingEvent","onClick","primaryColor","secondaryColor"]);f[2]=g;f[3]=h;f[4]=k;f[5]=l;f[6]=m;f[7]=a;f[8]=n;f[9]=o}else h=f[3],k=f[4],l=f[5],m=f[6],a=f[7],n=f[8],o=f[9];g=k instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?"primary":k;var p=c("MessengerWebUXLogger").useInteractionLogger(),q;f[10]!==p||f[11]!==l||f[12]!==m?(q=function(a){m==null?void 0:m(a),l&&(p==null?void 0:p(l))},f[10]=p,f[11]=l,f[12]=m,f[13]=q):q=f[13];q=q;if(b("cr:4318")!=null){var r;f[14]!==q||f[15]!==h||f[16]!==g||f[17]!==a||f[18]!==e?(r=i.jsx(b("cr:4318"),babelHelpers["extends"]({icon:h,iconColor:g,onClick:q},a,{ref:e})),f[14]=q,f[15]=h,f[16]=g,f[17]=a,f[18]=e,f[19]=r):r=f[19];var s;f[20]!==k||f[21]!==r?(s=i.jsx(j,{iconColor:k,children:r}),f[20]=k,f[21]=r,f[22]=s):s=f[22];return s}if(b("cr:2466")!=null){r=h instanceof d("MWXSvgIcon").MWXSvgMenuItemIcon?h.component:h;f[23]!==n?(s=d("FDSTextWebUtils").getFDSHeadlineColor(n),f[23]=n,f[24]=s):s=f[24];f[25]!==o?(h=d("FDSTextWebUtils").getFDSMetaColor(o),f[25]=o,f[26]=h):h=f[26];f[27]!==q||f[28]!==g||f[29]!==a||f[30]!==e||f[31]!==r||f[32]!==s||f[33]!==h?(n=i.jsx(b("cr:2466"),babelHelpers["extends"]({icon:r,iconColor:g,onClick:q,primaryColor_DEPRECATED:s,secondaryColor:h},a,{ref:e})),f[27]=q,f[28]=g,f[29]=a,f[30]=e,f[31]=r,f[32]=s,f[33]=h,f[34]=n):n=f[34];f[35]!==k||f[36]!==n?(o=i.jsx(j,{iconColor:k,children:n}),f[35]=k,f[36]=n,f[37]=o):o=f[37];return o}return null}e=f;function j(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.iconColor;var f;b[0]!==a?(f=a instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":a.color},light:{"primary-icon":a.color},type:"VARIABLES"}:void 0,b[0]=a,b[1]=f):f=b[1];a=f;f=a;if(f==null)return e;b[2]!==e||b[3]!==f?(a=i.jsx(c("BaseTheme.react"),{config:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=e}),98);
__d("ThreadStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,PAUSED:1,PAUSED_AND_UPGRADED_TO_COMMUNITY:2,UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED:3});f["default"]=a}),66);
__d("isMWBumpMessage",["EntMessageReplyType","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return(a==null?void 0:a.replyType)!=null&&(h||(h=d("I64"))).equal(a.replyType,(i||(i=d("LSIntEnum"))).ofNumber(c("EntMessageReplyType").BUMP))}g["default"]=a}),98);
__d("isReceiverFetchDualSendReceivingEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a){return(a=c("qex")._("763"))!=null?a:!1}else{return(a=c("qex")._("808"))!=null?a:!1}}g["default"]=a}),98);
__d("isReceiverFetchReceivingEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a)return c("gkx")("6743");else return c("gkx")("6744")}g["default"]=a}),98);
__d("logMessengerWebFalcoEvent",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g=a.threadKey;a=a.threadType;if(e!=null){var i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),j=d("LSMessagingThreadTypeUtil").isGroup(a),k=(h||(h=d("I64"))).to_string(g);g=(a=f)!=null?a:{};var l=g.hasMissingMessage,m=babelHelpers.objectWithoutPropertiesLoose(g,["hasMissingMessage"]);g=(a=f)!=null?a:{};var n=g.MAW_vs_EB_numOfMissingInReference,o=g.MAW_vs_EB_numOfMissingInTarget,p=g.UI_vs_EB_numOfMissingInReference,q=g.UI_vs_EB_numOfMissingInTarget,r=g.UI_vs_MAW_numOfMissingInReference,s=g.UI_vs_MAW_numOfMissingInTarget,t=g.pageSize;c("MessengerWebEventsFalcoEvent").log(function(){return{client_timestamp:Date.now().toString(),entry_point:e,event_name:b,extra_data:m,has_message_missing:l,is_secured:i,missing_messages_maw_vs_eb_missing_in_reference_count:n,missing_messages_maw_vs_eb_missing_in_target_count:o,missing_messages_page_size:t,missing_messages_ui_vs_eb_missing_in_reference_count:p,missing_messages_ui_vs_eb_missing_in_target_count:q,missing_messages_ui_vs_maw_missing_in_reference_count:r,missing_messages_ui_vs_maw_missing_in_target_count:s,other_user_fbid:j||i?void 0:k,thread_fbid:k}})}}g["default"]=a}),98);
__d("useCommunityFolder",["MWPreloadableQueries","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a.parentThreadKey?(g=function(){return d("MWPreloadableQueries").getCommunityFolderQuery(e,a.parentThreadKey)},i=[e,a.parentThreadKey],b[0]=e,b[1]=a.parentThreadKey,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("ReQLSuspense").useFirst(g,i,f.id+":26")}g["default"]=a}),98);
__d("useMWFamilyCenterContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");c=b.createContext;var i=b.useContext;e={currentActiveScheduledBreakInterval:null,hasActiveMsgrFamilyCenterEnforcement:!1,isAllowedRoute:!1,shouldHideSidebar:!1,shouldShowDailyTimeLimit:!1,supervisorData:{supervisionStatus:null,supervisor:null,thread:null}};var j=c({familyCenterData:e,setFamilyCenterData:function(){}});function a(){return i(j)}g.emptyFamilyCenterData=e;g.FamilyCenterContext=j;g.useMWFamilyCenterEnforcementsContext=a}),98);
__d("useMWXPushErrorToast",["MWXIconCautionTriangle","react","react-compiler-runtime","useMWXPushToast"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useMWXPushToast")(),e;a[0]!==b?(e=function(a){b(babelHelpers["extends"]({},a,{_isWarning_DO_NOT_USE:!0,assertive:!0,icon:c("MWXIconCautionTriangle")}))},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ArmadilloCutoverClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("699");b=d("FalcoLoggerInternal").create("armadillo_cutover_client",a);e=b;g["default"]=e}),98);
__d("EncryptedBackupdDYIFileSaver",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("file-saver").__setRef("EncryptedBackupdDYIFileSaver");function a(a,b){h.onReadyImmediately(function(c){c=c.saveAs;c(b,a)})}g.saveFile=a}),98);
__d("LSAppState",[],(function(a,b,c,d,e,f){a=Object.freeze({BACKGROUND:0,FOREGROUND:1});f["default"]=a}),66);
__d("LSBeginHandlingSyncForSyncGroup",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=void 0:(d=a.item,c[9]=new b.Map(),c[9].set("group_id",d.groupId),c[9].set("current_cursor",d.currentCursor),c[9].set("sync_status",d.syncStatus),c[9].set("sync_params",d.syncParams),c[9].set("send_sync_params",d.sendSyncParams),c[9].set("min_time_to_sync_timestamp_ms",d.minTimeToSyncTimestampMs),c[9].set("can_ignore_timestamp",d.canIgnoreTimestamp),c[9].set("sync_channel",d.syncChannel),c[9].set("last_sync_request_timestamp_ms",d.lastSyncRequestTimestampMs),c[0]=c[9])})},function(d){return c[0]?c[2]=!1:c[2]=!0,c[2]?b.resolve((d=[a[0],void 0,b.i64.cast([0,4]),void 0,!1],c[3]=d[0],c[4]=d[1],c[5]=d[2],c[6]=d[3],c[7]=d[4],d)):b.sequence([function(a){return c[9]=c[0].get("group_id"),c[0],b.filter(b.db.table(3).fetch(),function(a){return b.i64.neq(a.epochId,void 0)&&b.i64.eq(a.syncDatabaseId,c[9])}).next().then(function(a,b){b=a.done;a=a.value;return b?c[10]=!1:(a.item,c[10]=!0)})},function(d){return c[10]?b.resolve((c[17]=c[0].get("group_id"),c[0],d=[c[17],void 0,b.i64.cast([0,4]),void 0,!1],c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=d[3],c[16]=d[4],d)):b.sequence([function(d){return c[17]=b.i64.of_float(Date.now()),c[18]=c[0].get("min_time_to_sync_timestamp_ms"),c[0],c[19]=c[0].get("last_sync_request_timestamp_ms"),c[0],c[20]=c[0].get("can_ignore_timestamp"),c[0],c[20]&&a[1]||b.i64.ge(c[17],c[18])?b.sequence([function(d){return a[1]?b.resolve(c[28]=b.i64.cast([0,0])):b.sequence([function(a){return c[29]=c[0].get("group_id"),c[0],b.db.table(3).fetch([[["",c[29]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[30]=b.i64.cast([0,0]):(d=a.item,c[30]=d.failureCount)})},function(a){return c[32]=b.i64.mul(b.i64.sub(b.i64.lsl_(b.i64.cast([0,1]),b.i64.to_int32(b.i64.lt(b.i64.cast([0,15]),c[30])?b.i64.cast([0,15]):c[30])),b.i64.cast([0,1])),b.i64.cast([0,500])),c[33]=b.i64.sub(b.i64.add(c[19]==null?b.i64.cast([0,0]):c[19],b.i64.lt(c[32],b.i64.cast([0,3e4]))?c[32]:b.i64.cast([0,3e4])),c[17]),c[28]=b.i64.gt(c[33],b.i64.cast([0,0]))?c[33]:b.i64.cast([0,0])}])},function(a){return c[21]=c[28]}]):b.resolve(c[21]=b.i64.sub(c[18],c[17]))},function(a){return c[22]=c[0].get("group_id"),c[0],b.i64.gt(c[21],b.i64.cast([0,0]))?b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastDelayedRequestTimestampMs:c[28]})})},function(a){return a=[c[22],c[21],b.i64.cast([0,3]),void 0,!1],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}]):b.sequence([function(a){return c[28]=b.i64.of_float(Date.now()),b.forEach(b.db.table(1).fetch([[[c[22]]]]),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[28]})})},function(a){return c[29]=b.i64.of_float(Date.now()),b.forEach(b.filter(b.db.table(3).fetch(),function(a){return b.i64.eq(a.syncDatabaseId,c[22])}),function(a){var b=a.update;a.item;return b({lastSyncRequestTimestampMs:c[29]})})},function(a){return c[30]=c[0].get("group_id"),c[0],c[31]=b.i64.of_float(Date.now()),c[32]=b.i64.random(),c[45]=b.i64.and_(b.i64.or_(b.i64.lsl_(c[31],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[32],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.db.table(3).fetch([[["",c[30]]]]).next().then(function(a,d){d=a.done;a=a.value;return d?b.db.table(3).add({syncDatabaseId:c[30],taskQueueName:"",failureCount:b.i64.cast([0,0]),lastSentTimestampMs:b.i64.cast([0,0]),lastSyncRequestTimestampMs:b.i64.cast([0,0]),epochId:c[45]}):(a.item,b.forEach(b.db.table(3).fetch([[["",c[30]]]]),function(a){var b=a.update;a.item;return b({epochId:c[45]})}))})},function(a){return c[34]=c[0].get("group_id"),c[0],b.db.table(3).fetch([[["",c[34]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[35]=b.i64.cast([0,0]):(d=a.item,c[35]=d.failureCount)})},function(a){return c[37]=c[0].get("send_sync_params"),c[0],c[38]=c[0].get("sync_params"),c[0],c[39]=c[0].get("current_cursor"),c[0],c[40]=new b.Map(),c[40].set("database",c[34]),c[40].set("version",b.i64.cast([-1,4294967295])),c[40].set("epoch_id",c[45]),c[40].set("last_applied_cursor",c[39]),c[40].set("sync_params",c[37]?c[38]:void 0),c[40].set("failure_count",b.i64.gt(c[35],b.i64.cast([0,0]))?c[35]:void 0),c[41]=c[0].get("current_cursor"),c[0],void 0===c[41]?c[42]=b.i64.cast([0,1]):c[42]=b.i64.cast([0,2]),c[43]=new b.Map(),c[43].set("type",c[42]),c[43].set("request_payload",c[40]),c[44]=c[0].get("sync_channel"),c[0],a=[c[30],void 0,b.i64.cast([0,1]),c[43],b.i64.eq(c[44],b.i64.cast([0,2]))],c[23]=a[0],c[24]=a[1],c[25]=a[2],c[26]=a[3],c[27]=a[4],a}])},function(a){return a=[c[23],c[24],c[25],c[26],c[27]],c[12]=a[0],c[13]=a[1],c[14]=a[2],c[15]=a[3],c[16]=a[4],a}])},function(a){return a=[c[12],c[13],c[14],c[15],c[16]],c[3]=a[0],c[4]=a[1],c[5]=a[2],c[6]=a[3],c[7]=a[4],a}])},function(a){return c[8]=new b.Map(),c[8].set("sync_group_id",c[3]),c[8].set("next_sync_ms",c[4]),c[8].set("work_item_type",c[5]),c[8].set("network_payload",c[6]),c[8].set("skip_realtime_gateway",c[7]),d[0]=c[8]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreBeginHandlingSyncForSyncGroupStoredProcedure";a.__tables__=["sync_groups","network_requests"];e.exports=a}),null);
__d("LSBeginHandlingSync",["LSBeginHandlingSyncForSyncGroup"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.createArray(),c.forEach(c.db.table(1).fetch(),function(e){var f=e.item;return c.sequence([function(e){return c.storedProcedure(b("LSBeginHandlingSyncForSyncGroup"),f.groupId,a[0]).then(function(a){return a=a,d[1]=a[0],a})},function(a){return d[2]=(d[0].push(d[1]),d[0])}])})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreBeginHandlingSyncStoredProcedure";a.__tables__=["sync_groups"];e.exports=a}),null);
__d("LSBeginHandlingSyncForSyncGroupStoredProcedure",["LSBeginHandlingSyncForSyncGroup","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSBeginHandlingSyncForSyncGroup")(e.syncGroupId,e.ignoreSoftDelay,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSBeginHandlingSyncStoredProcedure",["LSBeginHandlingSync","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSBeginHandlingSync")(e.ignoreSoftDelay,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSClearEpochBeforeResumeSync",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.runInTransaction(function(a){var c;return(c=d("ReQL")).toArrayAsync(c.mergeJoin(c.fromTableAscending(a.sync_groups),c.fromTableAscending(a.network_requests).getKeyRange(""))).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){b=b[1];return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))}).then(function(){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).filter(function(a){return a.taskQueueName!==""})).then(function(c){return(h||(h=b("Promise"))).all(c.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName})}))})})},"readwrite","ui",void 0,f.id+":17").then(function(){return(h||(h=b("Promise"))).resolve()})}g.call=a}),98);
__d("LSCometSSRDatabase",["LSJSInMemoryStorage","LSMetadata"],(function(a,b,c,d,e,f,g){"use strict";a=c("LSJSInMemoryStorage")(d("LSMetadata").schema);g["default"]=a}),98);
__d("LSIssueThreadRemove",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][issueThreadRemove] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return d[11]=c.createArray(),d[14]=(d[11].push("Skipping thread remove since EB is disabled. act thread id = "),d[11]),d[14]=(d[11].push(a[0]),d[11]),d[12]=d[11].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[12]].join("")),c.resolve()},function(a){return d[13]=new c.Map(),d[13].set("error_code",c.i64.cast([0,1])),d[13].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[13].set("error_message",""),a=[void 0,d[13]],d[2]=a[0],d[3]=a[1],a}]):(f=e.item,c.sequence([function(a){return d[18]=f.backupTenancy,d[17]=f.encryptionVersion,d[11]=void 0,c.i64.neq(d[11],void 0)?c.resolve(d[12]=d[11]):c.sequence([function(a){return d[19]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[29]=(d[19].push(c.i64.cast([0,0])),d[19]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[21]?d[29]=(d[19].push(c.i64.cast([0,2])),d[19]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[22]?d[29]=(d[19].push(c.i64.cast([0,3])),d[19]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[23]=a[0],a})},function(a){return d[23]?d[29]=(d[19].push(c.i64.cast([0,4])),d[19]):0,d[24]=c.createArray(),d[25]=c.i64.of_int32(d[19].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(a){return d[29]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[19],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(a){return d[32]=(d[24].push(d[30]),d[24])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[29]=c.createArray(),d[30]=c.i64.of_int32(d[24].length),c.i64.gt(d[30],c.i64.cast([0,0]))?c.loopAsync(d[30],function(a){return d[32]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[24],d[32]).then(function(a){return a=a,d[33]=a[0],d[34]=a[1],a})},function(a){return d[35]=(d[29].push(c.i64.to_string(d[33])),d[29])}])}):c.resolve()},function(a){return d[31]=d[29].join(","),d[26]=d[31]}])},function(a){return d[24].some(function(a){return c.i64.eq(d[17],a)})?d[27]=d[17]:d[27]=void 0,c.i64.neq(d[27],void 0)?d[28]=d[27]:d[28]=void 0,d[12]=d[28]}])},function(e){return c.i64.neq(d[12],void 0)?d[13]=d[12]:d[13]=c.i64.cast([0,0]),c.i64.neq(d[18],void 0)?d[14]=d[18]:d[14]=c.i64.cast([0,1]),c.i64.neq(f.deviceId,void 0)?c.sequence([function(e){return d[19]=["eb_upload",":",a[0]].join(""),d[20]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),d[19],c.i64.cast([0,50026]),"",c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.le(c.i64.cast([0,0]),c.i64.cast([0,0]))?c.i64.cast([0,0]):c.i64.add(d[20],c.i64.sub(c.i64.cast([0,0]),c.i64.mod_(d[20],c.i64.cast([0,0])))),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[21]=a[0],a})},function(b){return c.db.table(177).add({pk:void 0,pendingBackupTaskId:d[21],actionType:c.i64.cast([0,2]),contentType:c.i64.cast([0,2]),backupStatus:c.i64.cast([0,1]),listKey:a[0],uniqueKey:a[0],sortKey:a[1],persistentId:"",isInstamadillo:!1,lsTraceId:a[3],error:a[4]})},function(b){return c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?c.i64.eq(c.i64.cast([0,2]),c.i64.cast([0,1]))?(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message backup task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join("")),c.resolve()):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued message remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[25]=(d[23].push(", otid = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join("")),c.resolve()):(d[23]=c.createArray(),d[25]=(d[23].push("Successfully issued thread remove task. act thread id = "),d[23]),d[25]=(d[23].push(a[0]),d[23]),d[24]=d[23].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[24]].join("")),c.resolve())},function(a){return d[22]=new c.Map(),d[22].set("task_id",d[21]),a=[d[22],void 0],d[15]=a[0],d[16]=a[1],a}]):c.sequence([function(b){return d[19]=c.createArray(),d[22]=(d[19].push("Skipping thread remove since EB is disabled. act thread id = "),d[19]),d[22]=(d[19].push(a[0]),d[19]),d[20]=d[19].join(void 0||""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ","",d[20]].join("")),c.resolve()},function(a){return d[21]=new c.Map(),d[21].set("error_code",c.i64.cast([0,24])),d[21].set("stored_procedure","LSEncryptedBackupsIssueThreadRemoveStoredProcedure"),d[21].set("error_message",""),a=[void 0,d[21]],d[15]=a[0],d[16]=a[1],a}])},function(a){return a=[d[15],d[16]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][issueThreadRemove] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"issueThreadRemove",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueThreadRemoveStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","pending_backups_context_v2"];e.exports=a}),null);
__d("LSIssueThreadRemoveStoredProcedure",["LSIssueThreadRemove","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSIssueThreadRemove")(e.actThreadId,e.sortKey,e.source,e.traceId,e.error,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("LSPlatformGraphQLTransport",["FBLogger","I64","LSDynamicDependencies","LSProgramTarget","MessengerLogHistory","Promise","asyncToGeneratorRuntime","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="LSPlatformGraphQLTransport.ServerError";function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var l=d("MessengerLogHistory").getInstance("client_sync"),m=null;try{m=(yield k(a,e,g,(i||(i=d("I64"))).to_int32(f)))}catch(a){k=c("FBLogger")("messenger_web_product");a instanceof Error&&(l.error("Error sending Graphql Request. Type: "+(i||(i=d("I64"))).to_string(f)+" Message: "+(a.message!=null?a.message:"None")),k=k.catching(a),k.debug("Relay or Graphql Server error in LSPlatformGraphqlTransport"));throw k.mustfixThrow(j)}a=c("nullthrows")(m);e=a.dependencies;g=a.experiments;l=a.payload;var n=a.target;f=c("nullthrows")(l);k=e==null?(h||(h=b("Promise"))).resolve():d("LSDynamicDependencies").downloadRelayDependencies(e);m=Array.from(c("LSProgramTarget").members()).find(function(a){return c("LSProgramTarget").getName(a)===n});return[k,f,g,m]});return k.apply(this,arguments)}g.ServerError=j;g.publish=a}),98);
__d("LSPlatformHardcodedInitSync",["CurrentMessengerUser","FBLogger","I64","InteractionTracing.xplat","LSDatabaseAfterInitSyncSingleton","LSDatabaseProviderType","LSDict","LSIntEnum","LSJson","LSPlatformArmadilloUtils","LSPlatformGraphQLTransport","LSPlatformLsInitLog","MWPBumpEntityKey","MetaConfig","Promise","QuickPerformanceLogger","ReQL","asyncToGeneratorRuntime","getErrorSafe","gkx","isArmadillo","isInstamadillo","isRegisterArmadilloOnIgEnabled","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("isArmadillo")()||c("isRegisterArmadilloOnIgEnabled")()&&!c("isInstamadillo")(),m=c("gkx")("8480"),n=[1,l?95:null,m?104:null].filter(Boolean);function o(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return(k||(k=b("Promise"))).all(n.map(function(b){return a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).zero,lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:i.zero,lastSyncRequestTimestampMs:i.zero,networkTaskIdentifier:void 0,syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(b),taskQueueName:""})}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":63").then(function(){return(k||(k=b("Promise"))).resolve()})}function p(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",(j||(j=d("LSIntEnum"))).ofNumber(b)))}function q(a){return a.runInTransaction(function(a){return(k||(k=b("Promise"))).all(n.map(function(c){return p(a,c).then(function(c){return c!=null?a.network_requests.put({epochId:(i||(i=d("I64"))).zero,failureCount:c.failureCount,lastDelayedRequestTimestampMs:c.lastDelayedRequestTimestampMs,lastSentTimestampMs:c.lastSentTimestampMs,lastSyncRequestTimestampMs:c.lastSyncRequestTimestampMs,networkTaskIdentifier:c.networkTaskIdentifier,syncDatabaseId:c.syncDatabaseId,taskQueueName:c.taskQueueName}):(k||(k=b("Promise"))).resolve()})})).then(function(){})},"readwrite","ui",void 0,f.id+":98")}function r(a){if(d("LSDatabaseProviderType").isProviderPersisted(a)&&c("MetaConfig")._("76"))return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield p(a,1));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:b.failureCount,lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":131");else return(k||(k=b("Promise"))).resolve()}function s(a){d("CurrentMessengerUser").isWorkUser()&&(h||(h=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(1036588047,"310"),a)}function a(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){try{var n,p,t=d("CurrentMessengerUser").isWorkUser();yield q(f);var v=(yield (k||(k=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(1))),l?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(95))):(k||(k=b("Promise"))).resolve(),m?d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.sync_groups).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(104))):(k||(k=b("Promise"))).resolve()])),w=v[0],x=v[1];v=v[2];w=w==null?void 0:w.currentCursor;x=x==null?void 0:x.currentCursor;v=v==null?void 0:v.currentCursor;var y=new(c("LSDict"))().set("database",j.ofNumber(1)).set("epoch_id",(i||(i=d("I64"))).zero).set("last_applied_cursor",w).set("sync_params",a.syncParams.mailbox).set("version",i.of_string(a.schemaVersion));n=new(c("LSDict"))().set("database",j.ofNumber(95)).set("epoch_id",i.zero).set("last_applied_cursor",x).set("sync_params",(n=a.syncParams.e2ee)!=null?n:"{}").set("version",i.of_string(a.schemaVersion));p=new(c("LSDict"))().set("database",j.ofNumber(104)).set("epoch_id",i.zero).set("last_applied_cursor",v).set("sync_params",(p=a.syncParams.communityExclusive)!=null?p:"{}").set("version",i.of_string(a.schemaVersion));var z={string:{mailboxSync:w!=null?"resume":"init"}};t&&(h||(h=c("QuickPerformanceLogger"))).markerAnnotate(c("qpl")._(1036588047,"310"),z);d("LSPlatformLsInitLog").addPoint("ls_sync_start",z);d("LSPlatformArmadilloUtils").reportSyncStart();u("ls_sync_start");d("LSPlatformLsInitLog").addPoint("gql_fetch_start");u("gql_fetch_start");s("start_contact");s("start_mailbox");var A=function(){return[(k||(k=b("Promise"))).resolve(),"",void 0,void 0]};t=d("LSPlatformGraphQLTransport").publish(g,0,w!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(y),a.executeGraphQLLightSpeedRequest).then(function(a){s("mailbox_synced");d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_end");u("gql_mailbox_fetch_end");return a})["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_mailbox_fetch_failed",{string:{gql_mailbox_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});u("gql_mailbox_fetch_failed");c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync mailbox");return A()});z=l?d("LSPlatformGraphQLTransport").publish(g,2,x!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(n),a.executeGraphQLLightSpeedRequest).then(function(a){d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_end");u("gql_e2ee_fetch_end");return a})["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_e2ee_fetch_failed",{string:{gql_e2ee_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});u("gql_e2ee_fetch_failed");c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync e2ee mailbox");return A()}):(k||(k=b("Promise"))).resolve(A());y=m?d("LSPlatformGraphQLTransport").publish(g,3,v!=null?(j||(j=d("LSIntEnum"))).ofNumber(2):(j||(j=d("LSIntEnum"))).ofNumber(1),d("LSJson").stringify(p),a.executeGraphQLLightSpeedRequest).then(function(a){d("LSPlatformLsInitLog").addPoint("gql_cm_fetch_end");u("gql_cm_fetch_end");return a})["catch"](function(a){var b;d("LSPlatformArmadilloUtils").reportInitSyncFailure(a);d("LSPlatformLsInitLog").addPoint("gql_cm_fetch_failed",{string:{gql_cm_fetch_fail_reason:(b=a.message)!=null?b:"unknown"}});u("gql_cm_fetch_failed");c("FBLogger")("messenger_web_product").catching(a).mustfix("Failed to sync Community Exclusive mailbox");return A()}):(k||(k=b("Promise"))).resolve(A());x=(yield k.all([t,z,y]));d("LSPlatformLsInitLog").addPoint("gql_fetch_end");u("gql_fetch_end");d("LSPlatformLsInitLog").addPoint("gql_deps_start");u("gql_deps_start");yield k.all(x.map(function(a){a=a[0];return a}));d("LSPlatformLsInitLog").addPoint("gql_deps_end");u("gql_deps_end");d("LSPlatformLsInitLog").addPoint("ls_sync_execute_start");u("ls_sync_execute_start");d("LSPlatformLsInitLog").LsSync.markStart();for(n=0;n<x.length;n++){g=x[n];g[0];v=g[1];p=g[2];a=g[3];if(v==="")continue;yield e({experiments:p,priority:"ui",syncScript:v,target:a})}w!=null&&(yield r(f));d("LSPlatformLsInitLog").LsSync.markEnd();s("sync_completed");d("LSPlatformLsInitLog").addPoint("ls_sync_execute_end");u("ls_sync_execute_end");d("LSPlatformArmadilloUtils").reportSyncEnd();d("LSPlatformLsInitLog").addPoint("ls_sync_end");u("ls_sync_end");l&&d("LSPlatformArmadilloUtils").occamadilloInitEnd();d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_graphql","init_sync.success");d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.success");d("LSDatabaseAfterInitSyncSingleton").resolveInitSync(k.resolve(f))}catch(a){t=c("getErrorSafe")(a);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_ls","init_sync.fail");s("sync_failed");d("LSPlatformLsInitLog").fail("init_sync_failure");try{d("LSPlatformArmadilloUtils").reportInitSyncFailure(t)}catch(a){}c("FBLogger")("messenger_web_product").catching(t).mustfix("Encountered an error while performining preloaded init sync request via graphql");return o(f)}});return t.apply(this,arguments)}function u(a){c("InteractionTracing.xplat").getPendingInteractions().forEach(function(b){b.addMarkerPoint(a,"AppTiming")})}g.sendHardcodedInitSync=a}),98);
__d("LSPlatformSyncSystemMaybeDeferred",["cr:6963"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6963")}),98);
__d("LSPlatformClientInit",["LSClearEpochBeforeResumeSync","LSDataTraceFlushDeferred","LSDatabaseAfterInitSyncSingleton","LSDeleteAllAndInsertConnectivityStatusStoredProcedure","LSFactory","LSIntEnum","LSInternetConnectionState","LSPlatformHardcodedInitSync","LSPlatformLsInitLog","LSPlatformRealtimeTransport","LSPlatformSyncSystemMaybeDeferred","LSPlatformTaskSystemTransport","MWPlatformTaskSystem","MessengerLogHistory","Promise","asyncToGeneratorRuntime","cr:3411","cr:7705","emptyFunction","gkx","promiseDone","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("MessengerLogHistory").getInstance("client_init");function k(a){var d=c("emptyFunction");b("cr:7705")!=null&&c("gkx")("23914")&&(d=b("cr:7705").listenForChangesToBackupState(a));return function(){d&&d()}}function l(a,b){var e=b==="Connected"?(i||(i=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED):(i||(i=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").NOT_CONNECTED);j.debug("Platform client sync connection status: ",b);c("promiseDone")(a.runInTransaction(function(a){return c("LSDeleteAllAndInsertConnectivityStatusStoredProcedure")(c("LSFactory")(a),{internetConnectionState:e})},"readwrite",void 0,void 0,f.id+":75"),function(){j.debug("Platform client sync connection status set successfully")},function(a){j.error("Platform client sync connection status set failed: "+(a==null?void 0:a.message));throw a})}function a(a,b,c,d,e,f){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i,m){var n;j.debug("Platform client sync starting...");(n=d("LSPlatformLsInitLog")).addPoint("onstart_callback");g();n.addPoint("onstart_callback_end");j.debug("Getting datascript evaluator...");n.addPoint("ds_eval_registration");g=(yield e.getEval());j.debug("Getting datascript evaluator success");var o;try{o=b("cr:3411")!=null?b("cr:3411").registerEval(g)()(a):g()(a)}catch(b){c("recoverableViolation")("fail to register datascriptEvaluator","ls_web_init",{error:b}),o=g()(a)}d("LSPlatformLsInitLog").addPoint("ds_eval_registration_end");j.debug("Clearing epoch before resume sync...");m.didEvaluateInitSyncEagerly||(yield d("LSClearEpochBeforeResumeSync").call(a),j.debug("Clearing epoch before resume sync success"),d("LSPlatformLsInitLog").addPoint("create_client_end"),e.sendHardcodedInitSync&&(j.debug("Starting hard-coded init sync..."),yield d("LSPlatformHardcodedInitSync").sendHardcodedInitSync(e,o,a,f),j.debug("Starting hard-coded init sync success")));d("LSDatabaseAfterInitSyncSingleton").resolveInitSync((h||(h=b("Promise"))).resolve(a));j.debug("Starting realtime transport");var p=d("LSPlatformRealtimeTransport").LSPlatformRealtimeTransport(e.realtimeUnderylingTransport,e.appId,f);j.debug("Starting task system");var q=new(c("MWPlatformTaskSystem"))(a,new(c("LSPlatformTaskSystemTransport"))(a,p,o,e.schemaVersion));j.debug("Starting sync system");var r=null;c("promiseDone")(c("LSPlatformSyncSystemMaybeDeferred")(),function(b){r=b(a,p,o,e.schemaVersion,f,e.executeGraphQLLightSpeedRequest)});j.debug("Starting backup state listeners");var s=k(a),t;j.debug("Watching for expired traces");c("promiseDone")(d("LSDataTraceFlushDeferred").watchForExpiredTraces(a).then(function(a){t=a}));j.debug("Subscribing to mqtt sync status change events");p.onConnectionStatusChange(function(b){l(a,b)});j.debug("Platform client sync starting sucess");d("LSPlatformLsInitLog").endSuccess();return{cleanup:function(){var b;j.debug("Platform client sync cleaning up");i(a);q==null?void 0:q.cleanup();(b=r)==null?void 0:b.cleanup();p.cleanup();s();t==null?void 0:t()}}});return m.apply(this,arguments)}g.init=a}),98);
__d("LSPlatformClient",["ExecutionEnvironment","FBLogger","LSCometSSRDatabase","LSDatabaseProviderType","LSPlatformClientInit","LSPlatformDeviceId","LSPlatformLsInitLog","MAWMICSafe","MAWMICSchema","Promise","asyncToGeneratorRuntime","cr:10018","emptyFunction","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("emptyFunction").thatReturns((i||(i=b("Promise"))).resolve());function k(a,e,f){var g,h=function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("LSPlatformDeviceId").getDeviceIdForProviderType("ephemeral");g=(yield d("LSPlatformClientInit").init(a,e,b,c("emptyFunction"),c("emptyFunction"),f))});return function(){return h.apply(this,arguments)}}();return{cleanup:function(){var a;(a=g)==null?void 0:a.cleanup()},db:a,start:h}}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(b("cr:10018")==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("LSPlatformClientWithLock is null for PDB enabled");e=(yield b("cr:10018").make(a,e,f));e.isTabWithoutClient()===!0&&(d("MAWMICSafe").markEvent("ls_init_end"),d("MAWMICSafe").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_end),d("MAWMICSafe").addBoolAnnotation("LsInitSkipped",!0),d("LSPlatformLsInitLog").addPoint("no_ls_sync"),d("LSPlatformLsInitLog").endSuccess());return{cleanup:c("emptyFunction"),db:a,start:j}});return m.apply(this,arguments)}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if((h||(h=c("ExecutionEnvironment"))).canUseDOM){var f=(yield a.getDb());d("LSPlatformLsInitLog").addPoint("create_client_start");if(d("LSDatabaseProviderType").isProviderPersisted(f)&&b("cr:10018")!==null)try{return l(f,a,e)}catch(a){d("LSPlatformLsInitLog").addAnnotations({string:{client_for_pdb_error:c("getErrorSafe")(a).message}});d("LSPlatformLsInitLog").fail("client_for_pdb_error");throw a}return k(f,a,e)}return{cleanup:c("emptyFunction"),db:c("LSCometSSRDatabase"),start:j}});return n.apply(this,arguments)}g.make=a}),98);
__d("LSPlatformSyncSystem",["FBLogger","I64","LSBeginHandlingSyncForSyncGroupStoredProcedure","LSBeginHandlingSyncStoredProcedure","LSDatabaseProviderType","LSFactory","LSIntEnum","LSJson","LSMailboxInitialSyncCursor","LSPlatformGraphQLTransport","LSPlatformRealtimeTransport","LSPlatformRequestId","LSPlatformRequestScheduler","LSPlatformServerResponseHandler","LSShape","LSVec","MWPBumpEntityKey","MessengerLogHistory","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone","qex","recoverableViolation","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g,k,l,m){var n=d("MessengerLogHistory").getInstance("client_sync"),o=new(c("LSPlatformServerResponseHandler"))(g),p=d("LSDatabaseProviderType").isProviderPersisted(a),q=function(c){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange("",c)));b!=null&&(yield a.network_requests.put({epochId:void 0,failureCount:(i||(i=d("I64"))).add(b.failureCount,i.one),lastDelayedRequestTimestampMs:b.lastDelayedRequestTimestampMs,lastSentTimestampMs:b.lastSentTimestampMs,lastSyncRequestTimestampMs:b.lastSyncRequestTimestampMs,networkTaskIdentifier:b.networkTaskIdentifier,syncDatabaseId:b.syncDatabaseId,taskQueueName:b.taskQueueName}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":76")},r=new(c("LSPlatformRequestScheduler"))(),s=function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f,n){n=d("LSShape").toRecord(n);var q=d("LSShape").toRecord(n.request_payload);n=n.type;var r=c("LSPlatformRequestId").generate();q=d("LSJson").stringify(d("LSShape").ofRecord({database:q.database,epoch_id:q.epoch_id,failure_count:q.failure_count,last_applied_cursor:q.last_applied_cursor,sync_params:q.sync_params,version:(i||(i=d("I64"))).of_string(k)}));var s=(i||(i=d("I64"))).equal(f.sync_group_id,(j||(j=d("LSIntEnum"))).ofNumber(1))&&c("gkx")("26386")===!0;if(!s&&f.skip_realtime_gateway){s=(yield d("LSPlatformGraphQLTransport").publish(l,r,n,q,m));var t=s[0],u=s[1],v=s[2];s=s[3];v={experiments:v,syncScript:u,target:s};return p?o.evalInOrderReceived(t,v):g(v)}else{u=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(f.sync_group_id)));s=u!=null?u.syncChannel:d("LSMailboxInitialSyncCursor").syncChannel;t=c("qex")._("789");if(u!=null&&t!=null&&t!=="default"){v=(j||(j=d("LSIntEnum"))).unwrapIntEnum(n);if(1===v||2===v||5===v){f=t+"."+(j||(j=d("LSIntEnum"))).toNumber(s)+"."+j.toNumber(n)+"."+j.toNumber(u.groupId);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("messenger.lightspeed",f)}}return e.publish({payload:q,queueName:void 0,requestId:r,syncChannel:s,type_:n}).then(function(){return(h||(h=b("Promise"))).resolve()})}});return function(a,b){return f.apply(this,arguments)}}(),t=function e(g){var k=function(b){return a.runInTransaction(function(a){return c("LSBeginHandlingSyncForSyncGroupStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1,syncGroupId:b})},"readwrite",void 0,void 0,f.id+":195").then(function(a){return e(a[0])})},l=function(a,b){r.schedule(function(){c("promiseDone")(k(a))},(i||(i=d("I64"))).to_string(a),i.to_float(b))},m=d("LSShape").toRecord(g);g=m.work_item_type;if((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(5))){var o=m.network_payload;if(o!=null)return s(m,o)["catch"](function(a){if(a.message===d("LSPlatformGraphQLTransport").ServerError)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_graphql_error");else if(a.RE_EXN_ID===d("LSPlatformRealtimeTransport").Timeout||a.RE_EXN_ID===d("LSPlatformRealtimeTransport").NotConnected)d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_timeout_or_disc"),n.debug("Publish timed out");else{d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","send_sync_request_other_error");if(a instanceof Error)c("FBLogger")("messenger_web_product").catching(a).mustfix("Encountered an JS error while publishing a LS sync request");else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web_product").mustfix("Encountered an JS error while publishing a LS sync request %s",b)}}d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handleSyncFailure."+(j||(j=d("LSIntEnum"))).toNumber(d("LSShape").toRecord(o).type)+"."+j.toNumber(m.sync_group_id));return q(m.sync_group_id).then(function(){return k(m.sync_group_id)})});else{c("recoverableViolation")("Expected networkpayload for sync request but didn't get any","ls_web_init");return(h||(h=b("Promise"))).resolve()}}if(!(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(3)))if((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(4))||!(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(2)))return(h||(h=b("Promise"))).resolve();else{c("recoverableViolation")("Native handling for sync group not implemented yet","ls_web_init");return(h||(h=b("Promise"))).resolve()}g=m.next_sync_ms;if(g!=null){l(m.sync_group_id,g);return(h||(h=b("Promise"))).resolve()}else{c("recoverableViolation")("Expected delay for delayed sync request but didn't get any","ls_web_init");return(h||(h=b("Promise"))).resolve()}},u=function(a){return(h||(h=b("Promise"))).all(c("LSVec").toArray(a[0]).map(function(a){return t(a)}))},v=function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(a),{ignoreSoftDelay:!1})},"readwrite",void 0,void 0,f.id+":345").then(u))},w=c("throttle")(v,500);v=function(){return d("ReQL").fromTableAscending(a.tables.sync_groups).subscribe(function(){return w()})};var x=function(){return e.subscribeToNonTaskResponses(function(a,b){var e=b.ex,f=b.payload;e={experiments:e,sp:b.sp,syncScript:f,target:b.target};c("promiseDone")(p?o.evalInOrderReceived(a,e):g(e),function(){return w()},function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","handle_sync_response_failure");if(a instanceof Error)c("FBLogger")("messenger_web_product").catching(a).mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,a.message);else{var b="";try{b=JSON.stringify(a)}catch(a){}c("FBLogger")("messenger_web_product").mustfix("JS error encountered handling response from MQTT (pdb=%s): %s",p,b)}})})},y=function(){return e.onReconnect(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform_sync","resume_sync_reconnect"),n.debug("Sync System reconnecting"),c("promiseDone")(a.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f;f=(yield (f=d("ReQL")).toArrayAsync(f.mergeJoin(f.fromTableAscending(a.tables.sync_groups),f.fromTableAscending(a.tables.network_requests).getKeyRange(""))));yield (h||(h=b("Promise"))).all(f.map(function(a){a=a[1];return e.network_requests.put({epochId:void 0,failureCount:a.failureCount,lastDelayedRequestTimestampMs:a.lastDelayedRequestTimestampMs,lastSentTimestampMs:a.lastSentTimestampMs,lastSyncRequestTimestampMs:a.lastSyncRequestTimestampMs,networkTaskIdentifier:a.networkTaskIdentifier,syncDatabaseId:a.syncDatabaseId,taskQueueName:a.taskQueueName})}));return c("LSBeginHandlingSyncStoredProcedure")(c("LSFactory")(e),{ignoreSoftDelay:!1})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":433").then(u))})},z=v(),A=x(),B=y();w();return{cleanup:function(){z(),B(),A()}}}g["default"]=a}),98);
__d("LSPlatformSyncSystemDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSPlatformSyncSystem").__setRef("LSPlatformSyncSystemDeferred");function a(){return h.load()}g["default"]=a}),98);
__d("LSReportAppStateStoredProcedure",["LSReportAppState","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){e=c("LSReportAppState")(e.appState,e.requestId,a);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(e))}g["default"]=a}),98);
__d("MAWBridgeDeleteMessagesOfThreadHandler",["I64","LSEncryptedBackupsBackupTenancy","LSFactory","LSIntEnum","LSIssueThreadRemoveStoredProcedure","LSMEBTaskCreationSource","MAWEncryptedBackupUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===2){var e=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(a));if(e==null||!(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION)))return;yield c("LSIssueThreadRemoveStoredProcedure")(c("LSFactory")(a),{actThreadId:b.threadId,sortKey:b.ts.toString(),source:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMEBTaskCreationSource").TAM_WEB)})}});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeTraceUtils",["I64","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c,e){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&c===b&&(i||(i=d("I64"))).equal(a.traceType,e))return a.shouldFlush===!1;else return!1})).then(function(a){if(a.length!==0)return(h||(h=b("Promise"))).resolve(a[0].traceId);else return(h||(h=b("Promise"))).resolve()})}g.getTraceId=a}),98);
__d("MAWBridgeStartTraceHandler",["ArmadilloDataTraceCheckPoint","ArmadilloDataTraceType","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceTag","LSFactory","LSRequestId","MAWAckLevel","MAWBridgeTraceUtils","MAWMsg","MAWTimeUtils","Promise","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return a.data_trace_meta.add({contextOne:void 0,contextThree:b.externalId,contextTwo:void 0,foregroundTimestampMs:(i||(i=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(b.ts),predefinedId:void 0,shouldFlush:!1,traceId:e,traceType:b.traceType}).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceCreated,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){var f;if(b.threadKey==null||!c("gkx")("23995"))return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one,tags:(f=b.threadKey)!=null?f:void 0})})}function a(a,e){var f=e.ack,g=e.traceType;return f===d("MAWAckLevel").ACK.clock?d("MAWBridgeTraceUtils").getTraceId(a,e.externalId,e.traceType).then(function(f){if(f!=null)return;var k=c("LSRequestId").generate();if((i||(i=d("I64"))).equal(g,d("ArmadilloDataTraceType").armadilloMessageSend))return j(a,e,k).then(function(){var b=e.threadType;if(b==="User")return;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").traceGroupMessage,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one})}).then(function(){if(e.isFirstMsg)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloActMessageSend,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:"first_msg=1"})}).then(function(){var f=e.type_;f=f===d("MAWMsg").text?d("ArmadilloDataTraceCheckPoint").traceTextMessage:f===d("MAWMsg").ptt||f===d("MAWMsg").image||f===d("MAWMsg").video||f===d("MAWMsg").gif?d("ArmadilloDataTraceCheckPoint").traceMediaMessage:void 0;if(f==null)return(h||(h=b("Promise"))).resolve(f);c("promiseDone")(c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one}));return(h||(h=b("Promise"))).resolve(f)}).then(function(b){if(b==null)return;if(!(i||(i=d("I64"))).equal(b,d("ArmadilloDataTraceCheckPoint").traceMediaMessage))return;b=e.type_;b=b===d("MAWMsg").image?d("LSDataTraceTag").image:b===d("MAWMsg").ptt?d("LSDataTraceTag").audio:b===d("MAWMsg").video?d("LSDataTraceTag").video:b===d("MAWMsg").gif?d("LSDataTraceTag").animatedImage:d("LSDataTraceTag").none;return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").richMediaMediaSendAttachmentType,dataTraceId:k,syncChannel:(i||(i=d("I64"))).neg_one,tags:String(b)})});else return j(a,e,k)}):(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeStartTraceWithTraceIdHandler",["MAWMainTraceUtils","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWMainTraceUtils").startTraceWithTxn(a,d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),b.traceId,b.traceType,void 0,void 0,b.traceContext)}g.call=a}),98);
__d("MAWBridgeUpdateDYIStatusV2",["EncryptedBackupdDYIFileSaver","EncryptedBackupsDYIFileUtils","EncryptedBackupsDYITypes","FBLogger","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){d("EncryptedBackupdDYIFileSaver").saveFile(a,b),window.setTimeout(function(){c("promiseDone")(e())},1e3)});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.qplEvent,f=a.qplInstanceKeyE2E;a=a.status;var g=c("FBLogger")("[labyrinth_web][dyi]");if(a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed)try{if(navigator.storage==null)throw g.mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.");var i=d("EncryptedBackupsDYIFileUtils").DyiArchiveFilename,j=(yield d("EncryptedBackupsDYIFileUtils").getRootFolderHandle()),k=(yield d("EncryptedBackupsDYIFileUtils").readFile(j,i));yield h(i,k,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield j.removeEntry(i)}));g.info("Saving file with filename ",i);e!=null&&f!=null&&c("QPLUserFlow").endSuccess(e,{instanceKey:f});g.info("DYI Complete")}catch(a){g.mustfix("Failed to download the DYI archive: %s",a);e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,a.message,{instanceKey:f});return d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed}a===d("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed&&(e!=null&&f!=null&&c("QPLUserFlow").endFailure(e,"Unknown error",{instanceKey:f}));return a});return j.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUpdateTraceHandler",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","MAWBridgeTraceEvent","Promise","ReQL","emptyFunction","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,e,f){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.data_trace_meta).filter(function(a){var b=a.contextThree;if(b!=null&&e.externalIds.includes(b)&&(j||(j=d("I64"))).equal(a.traceType,e.traceType))return a.shouldFlush===!1;else return!1})).then(function(g){var i=[];return g.reduce(function(b,g){return b.then(function(){i.push(g.traceId);var b=e.errorMessage;if(b!=null)return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,errorMessage:b,syncChannel:(j||(j=d("I64"))).neg_one});else return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:f,dataTraceId:g.traceId,syncChannel:(j||(j=d("I64"))).neg_one})})},(h||(h=b("Promise"))).resolve()).then(function(){return i})})}function l(a,d){return d.reduce(function(b,d){return b.then(function(){return c("updateAndFlushLSDataTrace")(a,d)})},(h||(h=b("Promise"))).resolve())}function a(a,e){var f=e.event;if(f===c("MAWBridgeTraceEvent").ReceivedReceipt)return k(a,e,d("ArmadilloDataTraceCheckPoint").deliveryReceiptReceived).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").ReceivedSent)return k(a,e,d("ArmadilloDataTraceCheckPoint").advancedCryptoMEMSendTaskComplete).then(c("emptyFunction"));else if(f===c("MAWBridgeTraceEvent").FlowEndForFailure)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE)).then(function(b){return l(a,b)});else if(f===c("MAWBridgeTraceEvent").FlowEndForSuccess)return k(a,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH)).then(function(b){return l(a,b)});else return(h||(h=b("Promise"))).resolve()}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchGQLHandler",["FBLogger","MAWEBFrontendQPLLogger","Promise","WALogger","asyncToGeneratorRuntime","cr:2174"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth][web] Error in GQL upload batch of size "," , error: ",""]);i=function(){return a};return a}function j(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){j(e.messages,"upload_tracking_bridge_batch_handler_gql");try{yield b("cr:2174")==null?void 0:b("cr:2174").call(a,e.messages),c("FBLogger")("labyrinth_web").info("Successfully completed GQL upload batch of size %s",e.messages.length)}catch(a){e.messages.forEach(function(b){b.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").failEBUploadTracking(b.uploadTrackingInstanceKey,"gql_upload_failed",a instanceof Error?{string:{error:a.message}}:void 0)}),d("WALogger").ERROR(i(),e.messages.length,a)}return(h||(h=b("Promise"))).resolve()});return k.apply(this,arguments)}g.call=a}),98);
__d("MAWBridgeUploadMessageByBatchHandler",["MAWBridgeTraceRecordCheckpointHandler","MAWBridgeUploadMessageHandler","MAWEBFrontendQPLLogger","Promise","QPLUserFlow","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){i(e.messages,"upload_tracking_bridge_batch_handler");e.qpl.forEach(function(a){return c("QPLUserFlow").addPoint(a.event,a.action.name,{instanceKey:a.instanceKey,timestamp:a.timestamp})});e.checkPoint.forEach(function(b){return c("promiseDone")(d("MAWBridgeTraceRecordCheckpointHandler").call(a,b))});for(e of e.messages)yield d("MAWBridgeUploadMessageHandler").call(a,e);return(h||(h=b("Promise"))).resolve()});return j.apply(this,arguments)}g.call=a}),98);
__d("MWEncryptedBackupsStateUtils",["MAWBridgeFireAndForget","MAWEncryptedBackupsStateManager","ReQL","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("mwProcessBackupIds").__setRef("MWEncryptedBackupsStateUtils");function a(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=(yield (b=d("ReQL")).firstAsync(b.fromTableAscending(a.encrypted_backups))),e=(yield b.firstAsync(b.fromTableAscending(a.secure_encrypted_backups_client_state)));return h.load().then(function(a){return a({clientStateData:e,encryptedBackupData:c})})});return function(b){return a.apply(this,arguments)}}(),"readonly",void 0,void 0,f.id+":29")}e=function(a){d("MAWEncryptedBackupsStateManager").setEncryptedBackupsState(a),d("MAWBridgeFireAndForget").fireAndForget("backend","setEncryptedBackupsState",{newState:a})};g.getEncryptedBackupState=a;g.setEBSwitch=e}),98);
__d("MAWBridgeUploadMessageGQLHandler",["EncryptedBackupsWriteToMPSTables","I64","JSResourceForInteraction","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBFrontendQPLLogger","MAWEncryptedBackupUtils","MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsStateUtils","ODS","Promise","asyncToGeneratorRuntime","gkx","isInstamadilloEB","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b){a.forEach(function(a){a.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(a.uploadTrackingInstanceKey,b)})}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(c("isInstamadilloEB")()){l(e,"upload_tracking_gql_cancelled_instamadillo");return(k||(k=b("Promise"))).resolve()}l(e,"upload_tracking_gql_handler");var g=(yield a.runInTransaction(function(a){return d("MAWEncryptedBackupUtils").getBackupTenancy(a)},"readonly",void 0,void 0,f.id+":68")),m=(yield (k||(k=b("Promise"))).all(e.map(function(b){var e=b.protoMsg;if(g==null||!(h||(h=d("I64"))).equal(g,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))){if(b.uploadTrackingInstanceKey!=null){var k,l=b.uploadTrackingInstanceKey;d("MAWEBFrontendQPLLogger").addPointEBUploadTracking(l,"user_device_not_enrolled_invalid_gql_request");var m=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);k=(k=d("MWEBUseLocalStorage").mwEBGetLocalStorageEntryValue(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE))!=null?k:"no";m={bool:{wasEBEnabledPreviously:m},string:{wasEBSMWiped:k}};d("MAWEBFrontendQPLLogger").endEBUploadTracking(l,m)}c("gkx")("8733")&&c("promiseDone")(d("MWEncryptedBackupsStateUtils").getEncryptedBackupState(a),function(a){a!==3&&(j||(j=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EB_SWITCH_CONSISTENCY,c("MWEBODSEntityKey.enum").FAIL),d("MWEncryptedBackupsStateUtils").setEBSwitch(a)});return}return c("gkx")("23966")&&e!=null?a.runInTransaction(function(a){return d("EncryptedBackupsWriteToMPSTables").writeToMPSTables(a,e,b.threadId,!1).then(function(){return b},function(a){b.uploadTrackingInstanceKey!=null&&d("MAWEBFrontendQPLLogger").failEBUploadTracking(b.uploadTrackingInstanceKey,"upload_tracking_gql_handler_failed_mps_write",{string:{error:a.message,errorMsgType:b.messageType}});return null})},"readwrite",void 0,void 0,f.id+":134"):b})));m=m.filter(Boolean);if(m.length===0)return;l(e,"upload_tracking_gql_handler_upload_start");yield n(a,m)});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield c("JSResourceForInteraction")("MAWEncryptedBackupsMessageUploadMutation").__setRef("MAWBridgeUploadMessageGQLHandler").load().then(function(c){return c.uploadMessageOverGQL(a,b)})});return o.apply(this,arguments)}g.call=a}),98);
__d("MsgrPresenceUpdateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2511");b=d("FalcoLoggerInternal").create("msgr_presence_update",a);e=b;g["default"]=e}),98);
__d("useMWPReportPresence",["I64","LSAppState","LSFactory","LSReportAppStateStoredProcedure","MsgrPresenceUpdateFalcoEvent","gkx","promiseDone","react","react-compiler-runtime","useReStore","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(j||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(a){var e=c("uuidv4")();c("gkx")("21097")&&c("MsgrPresenceUpdateFalcoEvent").log(function(){return{client_request_id:e,event_type:"app_state_update",is_foregrounded:a===c("LSAppState").FOREGROUND,is_new_ls_presence_reporting:!0}});c("promiseDone")(b.runInTransaction(function(b){return c("LSReportAppStateStoredProcedure")(c("LSFactory")(b),{appState:(i||(i=d("I64"))).of_float(a),requestId:e})},"readwrite",void 0,void 0,f.id+":40"))},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWPPresenceManager",["CometUserActivityMonitor","LSAppState","react","react-compiler-runtime","useDebouncedComet","useMWPReportPresence"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(4),b=c("useMWPReportPresence")(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={wait:2e3},a[0]=e):e=a[0];var f=c("useDebouncedComet")(b,e);a[1]!==f?(b=function(){var a=function(a){a==="ACTIVE"?f(c("LSAppState").FOREGROUND):f(c("LSAppState").BACKGROUND)},b=d("CometUserActivityMonitor").getActivityState();a(b);var e=d("CometUserActivityMonitor").subscribe(a);return function(){return e&&e.remove()}},e=[f],a[1]=f,a[2]=b,a[3]=e):(b=a[2],e=a[3]);i(b,e)}g.useMWPPresenceManager=a}),98);
__d("MWSetupPresenceReporting.react",["useMWPPresenceManager"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("useMWPPresenceManager").useMWPPresenceManager();return null}g["default"]=a}),98);
__d("WebStorageManagerEstimatesFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2144");b=d("FalcoLoggerInternal").create("web_storage_manager_estimates",a);e=b;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("ArmadilloDataTraceType",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("13");g.armadilloMessageSend=a}),98);
__d("EBAPI",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=c("requireDeferred"))("EBMessageBulkPointQuery").__setRef("EBAPI"),i=a("EBMessageMetadataQuery").__setRef("EBAPI"),j=a("EBMessagePointQueryWithPersistence").__setRef("EBAPI"),k=a("EBMessageRangeQueryForIndexing").__setRef("EBAPI"),l=a("EBMessageRangeQueryWithPersistence").__setRef("EBAPI"),m=a("EBUploadReceivedMessages").__setRef("EBAPI"),n=a("EBUploadSentMessage").__setRef("EBAPI");b={messageBulkPointQuery:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return h.load().then(function(a){return a.messageBulkPointQuery.apply(a,b)})},messageMetadataQuery:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return i.load().then(function(a){return a.messageMetadataQuery.apply(a,b)})},messagePointQueryWithPersistence:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return j.load().then(function(a){return a.messagePointQueryWithPersistence.apply(a,b)})},messageRangeQueryForIndexing:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return k.load().then(function(a){return a.messageRangeQueryForIndexing.apply(a,b)})},messageRangeQueryWithPersistence:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return l.load().then(function(a){return a.messageRangeQueryWithPersistence.apply(a,b)})},uploadReceivedMessages:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return m.load().then(function(a){return a.uploadReceivedMessages.apply(a,b)})},uploadReceivedMessagesProtobufOnly:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return m.load().then(function(a){return a.uploadReceivedMessagesProtobufOnly.apply(a,b)})},uploadSentMessage:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return n.load().then(function(a){return a.uploadSentMessage.apply(a,b)})}};d=b;g["default"]=d}),98);
__d("EBUnifyLegacyMediaUpload",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(a){g=a}function b(){return g}f.setEnableUnifyLegacyMediaUpload=a;f.getEnableUnifyLegacyMediaUpload=b}),66);
__d("LSContactUtils",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return!(h||(h=d("I64"))).equal(a.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))}function b(a){return(a=d("LSContactBitOffset").has(66,a))!=null?a:!1}g.isContactBlocked=a;g.isContactRestricted=b}),98);
__d("LSDataTraceCheckPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_ALREADY_PENDING:1600,LABYRINTH_ADD_DEVICE_SPROC_UPDATE_RECOVERY_DATA_TABLE_START:1601,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_NO_VD_TABLE:1602,LABYRINTH_ADD_DEVICE_SPROC_GENERATE_RECOVERY_SECRETS_START:1603,LABYRINTH_ADD_DEVICE_SPROC_WRONG_RC:1604,LABYRINTH_ADD_DEVICE_SPROC_NULL_VD:1605,LABYRINTH_ADD_DEVICE_SPROC_NO_RC_STATUS_TABLE_FOUND:1606,LABYRINTH_ADD_DEVICE_SPROC_ISSUE_FETCH_VD_TASK:1607,LABYRINTH_ADD_DEVICE_SPROC_SUCCESS:1608,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_BACKUP_TASK_SPROC:1825,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_BACKUP_ENT_SPROC:1826,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_BACKUP_FAILURE_SPROC:1827,LABYRINTH_MEDIA_ISSUE_ATTACHMENT_RESTORE_TASK:1829,LABYRINTH_MEDIA_UPDATE_ATTACHMENT_CDN_URL:1830,LABYRINTH_MEDIA_HANDLE_ATTACHMENT_RESTORE_FAILURE:1831,LABYRINTH_MEDIA_ISSUE_BATCH_ATTACHMENT_BACKUP_TASK_SPROC:1873,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f["default"]=a}),66);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("LSDataTraceType",[],(function(a,b,c,d,e,f){a=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});f["default"]=a}),66);
__d("LSMEBTaskCreationSource",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:-1,TEST_ONLY:0,TAM:1,MEM:2,RETROACTIVE_BACKUP:3,TAM_WEB:4,ACT_MESSAGE_DELETE:5,ACT_THREAD_DELETE:6,ACT_UPDATE_ATTACHMENT:7,TAM_PERSISTENCE_TASK:8,TAM_XMA_TOMBSTONE:9,MEM_RECEIVE:10,MEM_SEND:11,MEM_PEER_SYNC:12,MEM_RECEIVE_PROTOBUF:13,MEM_SEND_PROTOBUF:14,MEM_PEER_SYNC_PROTOBUF:15,EB_ADD_DEVICE:21,OPTIMISTIC_THREAD_CREATE_VIA_SHIM:22,ACT_THREAD_INSERT_VIA_SHIM:23,MI_THREAD_INSERT_VIA_SHIM:24,POINT_QUERY_FROM_EB:25,MESSENGER_SEARCH:26,ACT_MESSAGE_RANGE_TASK_HANDLER:27,POINT_QUERY_ON_FULLY_LOADED_THREAD:28,THREAD_CUTOVER:29,HYBRID_THREAD_VERIFY_OR_CREATE_VIA_SHIM:30,BURNER_INTERNAL_LOAD_TESTING_FRAMEWORK:31,THREAD_GALLERY_RESTORE:32,ACT_SURROUNDING_QUERY:33,EB_SNAPSHOT_RESTORE:34,PROTOBUF_RESTORE:39,FTS_INDEX_EB_MESSAGES:40,INSTAMADILLO_DYI:41,MESSENGER_MESSAGE_LIST_PAGINATION:45,DELTA_GENERIC_MESSAGE_SYNC:55,MEDIA_GALLERY_RESTORE:57,EB_PROTOBUF_RESTORE_NO_OP:58,EB_RESTORE_REPLIED_MESSAGES_AFTER_RANGE_RESTORE:35,REPL_TESTING:36,EB_POINT_QUERY_IN_ACT:37,EB_POINT_QUERY_RETRY_DECRYPTION_FAILURES:38,EB_POINT_QUERY_PINNED_MESSAGES:53,EB_POINT_QUERY_RESTORE_PROTOBUF:54,EB_POINT_QUERY_IN_ACT_REACTIONS:56,IGD_DYI:42,FTS_INDEX_EB_MESSAGES_WEB:43,BULK_QUERY_FOR_SEARCH_RESULT:44,MSGR_DYI:46,EB_RESTORE_ON_REGISTRATION:47,EB_RESTORE_ON_OFFLINE_QUEUE_COUNT_LIMIT:48,EB_POINT_QUERY_RESTORE_ON_ACK_DROP:49,EB_POINT_QUERY_RESTORE_ON_DECRYPTION_FAILURE:50,EB_POINT_QUERY_RESTORE_ON_UNAVAILABLE_DEVICE:51,EB_RANGE_QUERY_RESTORE_ON_THREAD_SESSION_ACTIVATE:52});f["default"]=a}),66);
__d("LSMessageSendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f["default"]=a}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("MAWAckLevel",["LSIntEnum","LSMessageSendStatus"],(function(a,b,c,d,e,f,g){"use strict";var h,i={clock:0,contentGone:-3,contentTooBig:-4,contentUnuploadable:-5,expired:-2,failed:-1,failedRetryable:-9,inactiveReceived:-6,partialOptimistic:-8,played:4,read:3,received:2,senderBackFillSent:-7,sent:1};function a(a){return a>0}function b(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(0);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(1);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(2);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(5);default:return(h||(h=d("LSIntEnum"))).ofNumber(4)}}function e(a){switch(a){case i.partialOptimistic:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NONE);case i.clock:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER);case i.sent:case i.received:case i.read:case i.played:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").SERVER_RECEIVED);case i.failedRetryable:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").RETRIABLE_ERROR);default:return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessageSendStatus").NON_RETRIABLE_ERROR)}}g.ACK=i;g.isMsgAuthoritative=a;g.levelToMessagingSendStatusV2=b;g.levelToMessagingSendStatus=e}),98);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a}),66);
__d("MAWExternalId",["I64","Random","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=131071;function j(a){return Math.floor(c("Random").random()*a)}function a(){return d("WAStanzaUtils").toStanzaId((h||(h=d("I64"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(Date.now()),22),h.and_(h.of_float(j(i)),h.of_float(i))),h.max_int)))}g.generateExternalId=a}),98);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("CurrentMessengerUser").getAppID();e=e!=null?e.toString():"unknown";e=a+"."+e;(h||(h=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),e,b);h.bumpEntityKey(c("MWEBODSCategory"),a,b)}g.markODSForEB=a}),98);
__d("WAGetHashFromProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.externalId+"_"+a.author+"_"+a.chat}f.getHashFromProtocolMsgId=a}),66);
__d("MAWEBUploadTrackingUtils",["MAWAckLevel","MAWEBSwitch","MAWExternalId","MAWMsgType","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBODSUtils","ODS","QPLUserFlow","WAExceededStorageQuota","WAGetHashFromProtocolMsgId","WAGlobals","WAHashStringToNumber","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i="20240712";function a(a,b,e,f,g,j,k){g===void 0&&(g=!1);j===void 0&&(j=!1);if(!c("MAWEBSwitch").isEnabled()){l(a);return}c("QPLUserFlow").start(c("qpl")._(521481602,"829"),{annotations:{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),eb_upload_queue:!0,fromUploadQueue:g,is_retroactive_upload:j,middleware_init:!1},"int":{attachmentsSize:(g=k)!=null?g:0},string:{externalId:a,msgType:b,triggerType:e,versionDate:i}},instanceKey:f,timeoutInMs:c("justknobx")._("1405")});m(f,"upload_tracking_started");(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").START);d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+((j=b)!=null?j:"unknown"));g=d("MAWMsgType").isMAWSupportedMediaType((k=b)!=null?k:"Text")?"media":"non-media";d("MWEBODSUtils").markODSForEB(c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_COUNTER,"upload."+g)}var j=new Map();function k(a,b,c){j.set(a,{instanceKey:b,msgType:c})}function l(a){return j["delete"](a)}function b(a){var b=j.get(a);l(a);return b}function e(){return new Map(j)}function f(a,b,c,d){switch(a){case"success":o(b,c,d);break;case"fail":n(b,c,d);break;case"point":m(b,c,d);break}}function m(a,b,d){d&&c("QPLUserFlow").addAnnotations(c("qpl")._(521481602,"829"),d,{instanceKey:a}),c("QPLUserFlow").addPoint(c("qpl")._(521481602,"829"),b,{instanceKey:a})}function n(a,b,e){c("QPLUserFlow").endFailure(c("qpl")._(521481602,"829"),b,{annotations:babelHelpers["extends"]({},e,{bool:babelHelpers["extends"]({},e==null?void 0:e.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers["extends"]({},e==null?void 0:e.string,{threadID:e==null?void 0:(b=e.string)==null?void 0:b.jid})}),instanceKey:a});(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").FAIL)}function o(a,b,e){m(a,b),c("QPLUserFlow").endSuccess(c("qpl")._(521481602,"829"),{annotations:babelHelpers["extends"]({},e,{bool:babelHelpers["extends"]({},e==null?void 0:e.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0})}),instanceKey:a}),(h||(h=d("ODS"))).bumpEntityKey(7319,c("MWEBODSEntityName.enum").MAW_EB_UPLOAD_TRACKING,c("MWEBODSEntityKey.enum").SUCCESS)}function p(){return d("WAHashStringToNumber").hashStringToNumber(d("MAWExternalId").generateExternalId())}function q(a,b){b===void 0&&(b=0);return d("WAHashStringToNumber").hashStringToNumber(d("WAGetHashFromProtocolMsgId").getHashFromProtocolMsgId(a)+"_"+d("WAGlobals").getMyDeviceJid()+"_"+b)}function r(a,b){if(!c("MAWEBSwitch").isEnabled())return;var d=q(a);k(a.externalId,d,b)}function s(a){return c("MAWEBSwitch").isEnabled()&&d("MAWMsgType").isEBSupportedMsgType(a.type)&&a.ack>=d("MAWAckLevel").ACK.sent&&a.serverTs!=null&&!(a.ephemeralSetting!=null&&a.ephemeralSetting.ephemeralExpirationInSec>0)}g.startUploadTracking=a;g.removeExternalIdFromUploadQueueStartedCache=l;g.getAndRemoveFromUploadQueueStartedCache=b;g.getUploadQueueStartedCache=e;g.handleBridgeEbUploadTrackingQPL=f;g.addPointWorkerOnly=m;g.endFailWorkerOnly=n;g.endSuccessWorkerOnly=o;g.genInstanceKeyOnly=p;g.genInstanceKeyForUploadQueue=q;g.addExternalIdToCache=r;g.isUploadSupported=s}),98);
__d("MAWMiActOnActThreadReadyQueue",["FBLogger","I64","WALoggerDeferred","asyncToGeneratorRuntime","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Executing queued action on ACT thread ready: "," for threadKey: ",""]);i=function(){return a};return a}var j=new Map(),k=3e4;function a(a,b,e,f,g){var i=(h||(h=d("I64"))).to_string(a);a=(a=j.get(i))!=null?a:[];var l=c("setTimeout")(function(){c("FBLogger")("messenger_e2ee_web").mustfix("[MiActMapping] Took longer than %s ms to execute: %s in threadState: %s for threadKey: %s, onActThreadReady",k,f,g,i),e()},k);a.push({callback:b,description:f,threadState:g,timeoutId:l});j.set(i,a)}function e(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=(h||(h=d("I64"))).to_string(a),g=j.get(f);if(g==null||g.length===0)return;while(g.length!==0){var k=g.shift(),l=k.callback,m=k.description,n=k.threadState;k=k.timeoutId;try{c("promiseDone")(d("WALoggerDeferred").LOG(i(),m,f)),c("FBLogger")("messenger_e2ee_web").info("[MiActMapping] Executing queued action on ACT thread ready: %s, original threadState: %s called by: %s",m,n,e),yield l(a,b),c("clearTimeout")(k)}catch(a){c("clearTimeout")(k),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[MiActMapping] Error executing callback on ACT thread ready: %s, original threadState: %s, threadKey: %s",m,n,f)}}j["delete"](f)});return l.apply(this,arguments)}g.enqueueByThreadKey=a;g.processQueueOnActThreadReady=e}),98);
__d("MAWTimeUtils",["FBLogger","I64","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=d("I64"))).of_float(a*1e3)}function j(a){a=Number(a);return a<=d("WATimeUtils").MAX_INT&&a!==-1e3&&a!==0}function a(a){if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_e2ee_web").mustfix("Invalid timestamp supplied to millisTimeToTimestamp: %s",Number(a));return i(a)}return(h||(h=d("I64"))).of_float(a)}function b(a,b){var c=Date.now();c=c-b*24*60*60*1e3;b=d("WATimeUtils").castMilliSecondsToUnixTime(c);return a>=b}function e(a){if(a==null)return;if(j(a)){Number(a)!==-1&&c("FBLogger")("messenger_e2ee_web").mustfix("Invalid timestamp supplied to ensureValidMillisTime: %s",Number(a));return d("WATimeUtils").castToMillisTime(a*1e3)}return a}f=(h||(h=d("I64"))).of_string("9999999999999");var k=Number.MAX_VALUE;g.toTimestamp=i;g.millisTimeToTimestamp=a;g.isTimestampNewerThanXDays=b;g.ensureValidMillisTime=e;g.MAX_TIMESTAMP_MS=f;g.MAX_TIMESTAMP=k;g.MIN_TIMESTAMP_MS=h.zero}),98);
__d("MAWTraceUtils",["LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a,b,c){c=(c=c)!=null?c:m();d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function b(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function e(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.startNewTrace=a;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=b;g.recordSuccessAndFlushForTraceId=e;g.recordInvalidUploadRequestAndFlushTrace=f;g.getTagForMsgType=o}),98);
__d("WAArrayZip",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Math.min(a.length,b.length);return a.slice(0,c).map(function(a,c){return[a,b[c]]})}f.zip=a}),66);
__d("WATypedArraysCast",["WABase64"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b instanceof a)return b;return typeof b==="string"?new a(d("WABase64").decodeB64(b)):new a(b)}g.castTypedArrays=a}),98);
__d("WACryptoHmac",["WACryptoDependencies","WATypedArraysCast"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=new Uint8Array(h),j={name:"HMAC",hash:"SHA-256"},k={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function m(a,b){b=d("WATypedArraysCast").castTypedArrays(Uint8Array,b);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",b,a,!1,["sign"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var e=a.key;a=a.algo;return d("WACryptoDependencies").getCrypto().subtle.sign(a,e,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";b={scalarbase:(a=d("tweetnacl")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function f(a){if(a!==(a|0))throw c("err")("bound must be int32");if(a<=0)throw c("err")("bound must not be positive");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e/a);var f=-1;while(f===-1){d("WACryptoDependencies").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=e;g.randomNumberLessThan=f}),98);
__d("isInstamadilloEB",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("670")===!0}g["default"]=a}),98);